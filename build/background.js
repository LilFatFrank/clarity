var pw=Object.defineProperty;var mw=(e,t,n)=>t in e?pw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bt=(e,t,n)=>mw(e,typeof t!="symbol"?t+"":t,n);function Wa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kf(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var su={},Bi={},A0;function yw(){if(A0)return Bi;A0=1,Bi.byteLength=a,Bi.toByteArray=u,Bi.fromByteArray=p;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(b){var _=b.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=b.indexOf("=");E===-1&&(E=_);var T=E===_?0:4-E%4;return[E,T]}function a(b){var _=o(b),E=_[0],T=_[1];return(E+T)*3/4-T}function c(b,_,E){return(_+E)*3/4-E}function u(b){var _,E=o(b),T=E[0],k=E[1],M=new n(c(b,T,k)),C=0,U=k>0?T-4:T,D;for(D=0;D<U;D+=4)_=t[b.charCodeAt(D)]<<18|t[b.charCodeAt(D+1)]<<12|t[b.charCodeAt(D+2)]<<6|t[b.charCodeAt(D+3)],M[C++]=_>>16&255,M[C++]=_>>8&255,M[C++]=_&255;return k===2&&(_=t[b.charCodeAt(D)]<<2|t[b.charCodeAt(D+1)]>>4,M[C++]=_&255),k===1&&(_=t[b.charCodeAt(D)]<<10|t[b.charCodeAt(D+1)]<<4|t[b.charCodeAt(D+2)]>>2,M[C++]=_>>8&255,M[C++]=_&255),M}function f(b){return e[b>>18&63]+e[b>>12&63]+e[b>>6&63]+e[b&63]}function m(b,_,E){for(var T,k=[],M=_;M<E;M+=3)T=(b[M]<<16&16711680)+(b[M+1]<<8&65280)+(b[M+2]&255),k.push(f(T));return k.join("")}function p(b){for(var _,E=b.length,T=E%3,k=[],M=16383,C=0,U=E-T;C<U;C+=M)k.push(m(b,C,C+M>U?U:C+M));return T===1?(_=b[E-1],k.push(e[_>>2]+e[_<<4&63]+"==")):T===2&&(_=(b[E-2]<<8)+b[E-1],k.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),k.join("")}return Bi}var Yo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var S0;function gw(){return S0||(S0=1,Yo.read=function(e,t,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,u=c>>1,f=-7,m=n?s-1:0,p=n?-1:1,b=e[t+m];for(m+=p,i=b&(1<<-f)-1,b>>=-f,f+=a;f>0;i=i*256+e[t+m],m+=p,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+m],m+=p,f-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(b?-1:1)*o*Math.pow(2,i-r)},Yo.write=function(e,t,n,r,s,i){var o,a,c,u=i*8-s-1,f=(1<<u)-1,m=f>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:i-1,_=r?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+m>=1?t+=p/c:t+=p*Math.pow(2,1-m),t*c>=2&&(o++,c/=2),o+m>=f?(a=0,o=f):o+m>=1?(a=(t*c-1)*Math.pow(2,s),o=o+m):(a=t*Math.pow(2,m-1)*Math.pow(2,s),o=0));s>=8;e[n+b]=a&255,b+=_,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;e[n+b]=o&255,b+=_,o/=256,u-=8);e[n+b-_]|=E*128}),Yo}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var I0;function Cf(){return I0||(I0=1,(function(e){const t=yw(),n=gw(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=M,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const I=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(I,g),I.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(I){if(I>s)throw new RangeError('The value "'+I+'" is invalid for option "size"');const g=new Uint8Array(I);return Object.setPrototypeOf(g,a.prototype),g}function a(I,g,w){if(typeof I=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(I)}return c(I,g,w)}a.poolSize=8192;function c(I,g,w){if(typeof I=="string")return p(I,g);if(ArrayBuffer.isView(I))return _(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(hn(I,ArrayBuffer)||I&&hn(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(hn(I,SharedArrayBuffer)||I&&hn(I.buffer,SharedArrayBuffer)))return E(I,g,w);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=I.valueOf&&I.valueOf();if(O!=null&&O!==I)return a.from(O,g,w);const H=T(I);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return a.from(I[Symbol.toPrimitive]("string"),g,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}a.from=function(I,g,w){return c(I,g,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function f(I,g,w){return u(I),I<=0?o(I):g!==void 0?typeof w=="string"?o(I).fill(g,w):o(I).fill(g):o(I)}a.alloc=function(I,g,w){return f(I,g,w)};function m(I){return u(I),o(I<0?0:k(I)|0)}a.allocUnsafe=function(I){return m(I)},a.allocUnsafeSlow=function(I){return m(I)};function p(I,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const w=C(I,g)|0;let O=o(w);const H=O.write(I,g);return H!==w&&(O=O.slice(0,H)),O}function b(I){const g=I.length<0?0:k(I.length)|0,w=o(g);for(let O=0;O<g;O+=1)w[O]=I[O]&255;return w}function _(I){if(hn(I,Uint8Array)){const g=new Uint8Array(I);return E(g.buffer,g.byteOffset,g.byteLength)}return b(I)}function E(I,g,w){if(g<0||I.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<g+(w||0))throw new RangeError('"length" is outside of buffer bounds');let O;return g===void 0&&w===void 0?O=new Uint8Array(I):w===void 0?O=new Uint8Array(I,g):O=new Uint8Array(I,g,w),Object.setPrototypeOf(O,a.prototype),O}function T(I){if(a.isBuffer(I)){const g=k(I.length)|0,w=o(g);return w.length===0||I.copy(w,0,0,g),w}if(I.length!==void 0)return typeof I.length!="number"||Ze(I.length)?o(0):b(I);if(I.type==="Buffer"&&Array.isArray(I.data))return b(I.data)}function k(I){if(I>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return I|0}function M(I){return+I!=I&&(I=0),a.alloc(+I)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,w){if(hn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),hn(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(g)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===w)return 0;let O=g.length,H=w.length;for(let W=0,Q=Math.min(O,H);W<Q;++W)if(g[W]!==w[W]){O=g[W],H=w[W];break}return O<H?-1:H<O?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,w){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let O;if(w===void 0)for(w=0,O=0;O<g.length;++O)w+=g[O].length;const H=a.allocUnsafe(w);let W=0;for(O=0;O<g.length;++O){let Q=g[O];if(hn(Q,Uint8Array))W+Q.length>H.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(H,W)):Uint8Array.prototype.set.call(H,Q,W);else if(a.isBuffer(Q))Q.copy(H,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=Q.length}return H};function C(I,g){if(a.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||hn(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const w=I.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&w===0)return 0;let H=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return We(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return Je(I).length;default:if(H)return O?-1:We(I).length;g=(""+g).toLowerCase(),H=!0}}a.byteLength=C;function U(I,g,w){let O=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,g>>>=0,w<=g))return"";for(I||(I="utf8");;)switch(I){case"hex":return P(this,g,w);case"utf8":case"utf-8":return l(this,g,w);case"ascii":return A(this,g,w);case"latin1":case"binary":return S(this,g,w);case"base64":return x(this,g,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,g,w);default:if(O)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),O=!0}}a.prototype._isBuffer=!0;function D(I,g,w){const O=I[g];I[g]=I[w],I[w]=O}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<g;w+=2)D(this,w,w+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<g;w+=4)D(this,w,w+3),D(this,w+1,w+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<g;w+=8)D(this,w,w+7),D(this,w+1,w+6),D(this,w+2,w+5),D(this,w+3,w+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?l(this,0,g):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const w=e.INSPECT_MAX_BYTES;return g=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(g+=" ... "),"<Buffer "+g+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(g,w,O,H,W){if(hn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(w===void 0&&(w=0),O===void 0&&(O=g?g.length:0),H===void 0&&(H=0),W===void 0&&(W=this.length),w<0||O>g.length||H<0||W>this.length)throw new RangeError("out of range index");if(H>=W&&w>=O)return 0;if(H>=W)return-1;if(w>=O)return 1;if(w>>>=0,O>>>=0,H>>>=0,W>>>=0,this===g)return 0;let Q=W-H,Se=O-w;const Ee=Math.min(Q,Se),_e=this.slice(H,W),Ke=g.slice(w,O);for(let we=0;we<Ee;++we)if(_e[we]!==Ke[we]){Q=_e[we],Se=Ke[we];break}return Q<Se?-1:Se<Q?1:0};function V(I,g,w,O,H){if(I.length===0)return-1;if(typeof w=="string"?(O=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,Ze(w)&&(w=H?0:I.length-1),w<0&&(w=I.length+w),w>=I.length){if(H)return-1;w=I.length-1}else if(w<0)if(H)w=0;else return-1;if(typeof g=="string"&&(g=a.from(g,O)),a.isBuffer(g))return g.length===0?-1:K(I,g,w,O,H);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(I,g,w):Uint8Array.prototype.lastIndexOf.call(I,g,w):K(I,[g],w,O,H);throw new TypeError("val must be string, number or Buffer")}function K(I,g,w,O,H){let W=1,Q=I.length,Se=g.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(I.length<2||g.length<2)return-1;W=2,Q/=2,Se/=2,w/=2}function Ee(Ke,we){return W===1?Ke[we]:Ke.readUInt16BE(we*W)}let _e;if(H){let Ke=-1;for(_e=w;_e<Q;_e++)if(Ee(I,_e)===Ee(g,Ke===-1?0:_e-Ke)){if(Ke===-1&&(Ke=_e),_e-Ke+1===Se)return Ke*W}else Ke!==-1&&(_e-=_e-Ke),Ke=-1}else for(w+Se>Q&&(w=Q-Se),_e=w;_e>=0;_e--){let Ke=!0;for(let we=0;we<Se;we++)if(Ee(I,_e+we)!==Ee(g,we)){Ke=!1;break}if(Ke)return _e}return-1}a.prototype.includes=function(g,w,O){return this.indexOf(g,w,O)!==-1},a.prototype.indexOf=function(g,w,O){return V(this,g,w,O,!0)},a.prototype.lastIndexOf=function(g,w,O){return V(this,g,w,O,!1)};function X(I,g,w,O){w=Number(w)||0;const H=I.length-w;O?(O=Number(O),O>H&&(O=H)):O=H;const W=g.length;O>W/2&&(O=W/2);let Q;for(Q=0;Q<O;++Q){const Se=parseInt(g.substr(Q*2,2),16);if(Ze(Se))return Q;I[w+Q]=Se}return Q}function L(I,g,w,O){return Ge(We(g,I.length-w),I,w,O)}function $(I,g,w,O){return Ge(rt(g),I,w,O)}function z(I,g,w,O){return Ge(Je(g),I,w,O)}function j(I,g,w,O){return Ge(Zo(g,I.length-w),I,w,O)}a.prototype.write=function(g,w,O,H){if(w===void 0)H="utf8",O=this.length,w=0;else if(O===void 0&&typeof w=="string")H=w,O=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(O)?(O=O>>>0,H===void 0&&(H="utf8")):(H=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-w;if((O===void 0||O>W)&&(O=W),g.length>0&&(O<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let Q=!1;for(;;)switch(H){case"hex":return X(this,g,w,O);case"utf8":case"utf-8":return L(this,g,w,O);case"ascii":case"latin1":case"binary":return $(this,g,w,O);case"base64":return z(this,g,w,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,g,w,O);default:if(Q)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(I,g,w){return g===0&&w===I.length?t.fromByteArray(I):t.fromByteArray(I.slice(g,w))}function l(I,g,w){w=Math.min(I.length,w);const O=[];let H=g;for(;H<w;){const W=I[H];let Q=null,Se=W>239?4:W>223?3:W>191?2:1;if(H+Se<=w){let Ee,_e,Ke,we;switch(Se){case 1:W<128&&(Q=W);break;case 2:Ee=I[H+1],(Ee&192)===128&&(we=(W&31)<<6|Ee&63,we>127&&(Q=we));break;case 3:Ee=I[H+1],_e=I[H+2],(Ee&192)===128&&(_e&192)===128&&(we=(W&15)<<12|(Ee&63)<<6|_e&63,we>2047&&(we<55296||we>57343)&&(Q=we));break;case 4:Ee=I[H+1],_e=I[H+2],Ke=I[H+3],(Ee&192)===128&&(_e&192)===128&&(Ke&192)===128&&(we=(W&15)<<18|(Ee&63)<<12|(_e&63)<<6|Ke&63,we>65535&&we<1114112&&(Q=we))}}Q===null?(Q=65533,Se=1):Q>65535&&(Q-=65536,O.push(Q>>>10&1023|55296),Q=56320|Q&1023),O.push(Q),H+=Se}return v(O)}const h=4096;function v(I){const g=I.length;if(g<=h)return String.fromCharCode.apply(String,I);let w="",O=0;for(;O<g;)w+=String.fromCharCode.apply(String,I.slice(O,O+=h));return w}function A(I,g,w){let O="";w=Math.min(I.length,w);for(let H=g;H<w;++H)O+=String.fromCharCode(I[H]&127);return O}function S(I,g,w){let O="";w=Math.min(I.length,w);for(let H=g;H<w;++H)O+=String.fromCharCode(I[H]);return O}function P(I,g,w){const O=I.length;(!g||g<0)&&(g=0),(!w||w<0||w>O)&&(w=O);let H="";for(let W=g;W<w;++W)H+=st[I[W]];return H}function F(I,g,w){const O=I.slice(g,w);let H="";for(let W=0;W<O.length-1;W+=2)H+=String.fromCharCode(O[W]+O[W+1]*256);return H}a.prototype.slice=function(g,w){const O=this.length;g=~~g,w=w===void 0?O:~~w,g<0?(g+=O,g<0&&(g=0)):g>O&&(g=O),w<0?(w+=O,w<0&&(w=0)):w>O&&(w=O),w<g&&(w=g);const H=this.subarray(g,w);return Object.setPrototypeOf(H,a.prototype),H};function R(I,g,w){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+g>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,w,O){g=g>>>0,w=w>>>0,O||R(g,w,this.length);let H=this[g],W=1,Q=0;for(;++Q<w&&(W*=256);)H+=this[g+Q]*W;return H},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,w,O){g=g>>>0,w=w>>>0,O||R(g,w,this.length);let H=this[g+--w],W=1;for(;w>0&&(W*=256);)H+=this[g+--w]*W;return H},a.prototype.readUint8=a.prototype.readUInt8=function(g,w){return g=g>>>0,w||R(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,w){return g=g>>>0,w||R(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,w){return g=g>>>0,w||R(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,w){return g=g>>>0,w||R(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,w){return g=g>>>0,w||R(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=kn(function(g){g=g>>>0,lt(g,"offset");const w=this[g],O=this[g+7];(w===void 0||O===void 0)&&$e(g,this.length-8);const H=w+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,W=this[++g]+this[++g]*2**8+this[++g]*2**16+O*2**24;return BigInt(H)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=kn(function(g){g=g>>>0,lt(g,"offset");const w=this[g],O=this[g+7];(w===void 0||O===void 0)&&$e(g,this.length-8);const H=w*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],W=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+O;return(BigInt(H)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(g,w,O){g=g>>>0,w=w>>>0,O||R(g,w,this.length);let H=this[g],W=1,Q=0;for(;++Q<w&&(W*=256);)H+=this[g+Q]*W;return W*=128,H>=W&&(H-=Math.pow(2,8*w)),H},a.prototype.readIntBE=function(g,w,O){g=g>>>0,w=w>>>0,O||R(g,w,this.length);let H=w,W=1,Q=this[g+--H];for(;H>0&&(W*=256);)Q+=this[g+--H]*W;return W*=128,Q>=W&&(Q-=Math.pow(2,8*w)),Q},a.prototype.readInt8=function(g,w){return g=g>>>0,w||R(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,w){g=g>>>0,w||R(g,2,this.length);const O=this[g]|this[g+1]<<8;return O&32768?O|4294901760:O},a.prototype.readInt16BE=function(g,w){g=g>>>0,w||R(g,2,this.length);const O=this[g+1]|this[g]<<8;return O&32768?O|4294901760:O},a.prototype.readInt32LE=function(g,w){return g=g>>>0,w||R(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,w){return g=g>>>0,w||R(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=kn(function(g){g=g>>>0,lt(g,"offset");const w=this[g],O=this[g+7];(w===void 0||O===void 0)&&$e(g,this.length-8);const H=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(O<<24);return(BigInt(H)<<BigInt(32))+BigInt(w+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=kn(function(g){g=g>>>0,lt(g,"offset");const w=this[g],O=this[g+7];(w===void 0||O===void 0)&&$e(g,this.length-8);const H=(w<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(H)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+O)}),a.prototype.readFloatLE=function(g,w){return g=g>>>0,w||R(g,4,this.length),n.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,w){return g=g>>>0,w||R(g,4,this.length),n.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,w){return g=g>>>0,w||R(g,8,this.length),n.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,w){return g=g>>>0,w||R(g,8,this.length),n.read(this,g,!1,52,8)};function d(I,g,w,O,H,W){if(!a.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>H||g<W)throw new RangeError('"value" argument is out of bounds');if(w+O>I.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,w,O,H){if(g=+g,w=w>>>0,O=O>>>0,!H){const Se=Math.pow(2,8*O)-1;d(this,g,w,O,Se,0)}let W=1,Q=0;for(this[w]=g&255;++Q<O&&(W*=256);)this[w+Q]=g/W&255;return w+O},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,w,O,H){if(g=+g,w=w>>>0,O=O>>>0,!H){const Se=Math.pow(2,8*O)-1;d(this,g,w,O,Se,0)}let W=O-1,Q=1;for(this[w+W]=g&255;--W>=0&&(Q*=256);)this[w+W]=g/Q&255;return w+O},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,1,255,0),this[w]=g&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,2,65535,0),this[w]=g&255,this[w+1]=g>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,2,65535,0),this[w]=g>>>8,this[w+1]=g&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,4,4294967295,0),this[w+3]=g>>>24,this[w+2]=g>>>16,this[w+1]=g>>>8,this[w]=g&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,4,4294967295,0),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4};function y(I,g,w,O,H){Le(g,O,H,I,w,7);let W=Number(g&BigInt(4294967295));I[w++]=W,W=W>>8,I[w++]=W,W=W>>8,I[w++]=W,W=W>>8,I[w++]=W;let Q=Number(g>>BigInt(32)&BigInt(4294967295));return I[w++]=Q,Q=Q>>8,I[w++]=Q,Q=Q>>8,I[w++]=Q,Q=Q>>8,I[w++]=Q,w}function B(I,g,w,O,H){Le(g,O,H,I,w,7);let W=Number(g&BigInt(4294967295));I[w+7]=W,W=W>>8,I[w+6]=W,W=W>>8,I[w+5]=W,W=W>>8,I[w+4]=W;let Q=Number(g>>BigInt(32)&BigInt(4294967295));return I[w+3]=Q,Q=Q>>8,I[w+2]=Q,Q=Q>>8,I[w+1]=Q,Q=Q>>8,I[w]=Q,w+8}a.prototype.writeBigUInt64LE=kn(function(g,w=0){return y(this,g,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=kn(function(g,w=0){return B(this,g,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,w,O,H){if(g=+g,w=w>>>0,!H){const Ee=Math.pow(2,8*O-1);d(this,g,w,O,Ee-1,-Ee)}let W=0,Q=1,Se=0;for(this[w]=g&255;++W<O&&(Q*=256);)g<0&&Se===0&&this[w+W-1]!==0&&(Se=1),this[w+W]=(g/Q>>0)-Se&255;return w+O},a.prototype.writeIntBE=function(g,w,O,H){if(g=+g,w=w>>>0,!H){const Ee=Math.pow(2,8*O-1);d(this,g,w,O,Ee-1,-Ee)}let W=O-1,Q=1,Se=0;for(this[w+W]=g&255;--W>=0&&(Q*=256);)g<0&&Se===0&&this[w+W+1]!==0&&(Se=1),this[w+W]=(g/Q>>0)-Se&255;return w+O},a.prototype.writeInt8=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,1,127,-128),g<0&&(g=255+g+1),this[w]=g&255,w+1},a.prototype.writeInt16LE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,2,32767,-32768),this[w]=g&255,this[w+1]=g>>>8,w+2},a.prototype.writeInt16BE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,2,32767,-32768),this[w]=g>>>8,this[w+1]=g&255,w+2},a.prototype.writeInt32LE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,4,2147483647,-2147483648),this[w]=g&255,this[w+1]=g>>>8,this[w+2]=g>>>16,this[w+3]=g>>>24,w+4},a.prototype.writeInt32BE=function(g,w,O){return g=+g,w=w>>>0,O||d(this,g,w,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4},a.prototype.writeBigInt64LE=kn(function(g,w=0){return y(this,g,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=kn(function(g,w=0){return B(this,g,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function N(I,g,w,O,H,W){if(w+O>I.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function G(I,g,w,O,H){return g=+g,w=w>>>0,H||N(I,g,w,4),n.write(I,g,w,O,23,4),w+4}a.prototype.writeFloatLE=function(g,w,O){return G(this,g,w,!0,O)},a.prototype.writeFloatBE=function(g,w,O){return G(this,g,w,!1,O)};function J(I,g,w,O,H){return g=+g,w=w>>>0,H||N(I,g,w,8),n.write(I,g,w,O,52,8),w+8}a.prototype.writeDoubleLE=function(g,w,O){return J(this,g,w,!0,O)},a.prototype.writeDoubleBE=function(g,w,O){return J(this,g,w,!1,O)},a.prototype.copy=function(g,w,O,H){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(O||(O=0),!H&&H!==0&&(H=this.length),w>=g.length&&(w=g.length),w||(w=0),H>0&&H<O&&(H=O),H===O||g.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),g.length-w<H-O&&(H=g.length-w+O);const W=H-O;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,O,H):Uint8Array.prototype.set.call(g,this.subarray(O,H),w),W},a.prototype.fill=function(g,w,O,H){if(typeof g=="string"){if(typeof w=="string"?(H=w,w=0,O=this.length):typeof O=="string"&&(H=O,O=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!a.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(g.length===1){const Q=g.charCodeAt(0);(H==="utf8"&&Q<128||H==="latin1")&&(g=Q)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(w<0||this.length<w||this.length<O)throw new RangeError("Out of range index");if(O<=w)return this;w=w>>>0,O=O===void 0?this.length:O>>>0,g||(g=0);let W;if(typeof g=="number")for(W=w;W<O;++W)this[W]=g;else{const Q=a.isBuffer(g)?g:a.from(g,H),Se=Q.length;if(Se===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(W=0;W<O-w;++W)this[W+w]=Q[W%Se]}return this};const oe={};function ae(I,g,w){oe[I]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(I,g){return`The "${I}" argument must be of type number. Received type ${typeof g}`},TypeError),ae("ERR_OUT_OF_RANGE",function(I,g,w){let O=`The value of "${I}" is out of range.`,H=w;return Number.isInteger(w)&&Math.abs(w)>2**32?H=Be(String(w)):typeof w=="bigint"&&(H=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(H=Be(H)),H+="n"),O+=` It must be ${g}. Received ${H}`,O},RangeError);function Be(I){let g="",w=I.length;const O=I[0]==="-"?1:0;for(;w>=O+4;w-=3)g=`_${I.slice(w-3,w)}${g}`;return`${I.slice(0,w)}${g}`}function Pe(I,g,w){lt(g,"offset"),(I[g]===void 0||I[g+w]===void 0)&&$e(g,I.length-(w+1))}function Le(I,g,w,O,H,W){if(I>w||I<g){const Q=typeof g=="bigint"?"n":"";let Se;throw g===0||g===BigInt(0)?Se=`>= 0${Q} and < 2${Q} ** ${(W+1)*8}${Q}`:Se=`>= -(2${Q} ** ${(W+1)*8-1}${Q}) and < 2 ** ${(W+1)*8-1}${Q}`,new oe.ERR_OUT_OF_RANGE("value",Se,I)}Pe(O,H,W)}function lt(I,g){if(typeof I!="number")throw new oe.ERR_INVALID_ARG_TYPE(g,"number",I)}function $e(I,g,w){throw Math.floor(I)!==I?(lt(I,w),new oe.ERR_OUT_OF_RANGE("offset","an integer",I)):g<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,I)}const De=/[^+/0-9A-Za-z-_]/g;function Wr(I){if(I=I.split("=")[0],I=I.trim().replace(De,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function We(I,g){g=g||1/0;let w;const O=I.length;let H=null;const W=[];for(let Q=0;Q<O;++Q){if(w=I.charCodeAt(Q),w>55295&&w<57344){if(!H){if(w>56319){(g-=3)>-1&&W.push(239,191,189);continue}else if(Q+1===O){(g-=3)>-1&&W.push(239,191,189);continue}H=w;continue}if(w<56320){(g-=3)>-1&&W.push(239,191,189),H=w;continue}w=(H-55296<<10|w-56320)+65536}else H&&(g-=3)>-1&&W.push(239,191,189);if(H=null,w<128){if((g-=1)<0)break;W.push(w)}else if(w<2048){if((g-=2)<0)break;W.push(w>>6|192,w&63|128)}else if(w<65536){if((g-=3)<0)break;W.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((g-=4)<0)break;W.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return W}function rt(I){const g=[];for(let w=0;w<I.length;++w)g.push(I.charCodeAt(w)&255);return g}function Zo(I,g){let w,O,H;const W=[];for(let Q=0;Q<I.length&&!((g-=2)<0);++Q)w=I.charCodeAt(Q),O=w>>8,H=w%256,W.push(H),W.push(O);return W}function Je(I){return t.toByteArray(Wr(I))}function Ge(I,g,w,O){let H;for(H=0;H<O&&!(H+w>=g.length||H>=I.length);++H)g[H+w]=I[H];return H}function hn(I,g){return I instanceof g||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===g.name}function Ze(I){return I!==I}const st=(function(){const I="0123456789abcdef",g=new Array(256);for(let w=0;w<16;++w){const O=w*16;for(let H=0;H<16;++H)g[O+H]=I[w]+I[H]}return g})();function kn(I){return typeof BigInt>"u"?it:I}function it(){throw new Error("BigInt not supported")}})(su)),su}var Te=Cf();const Rs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Xs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function vr(e,...t){if(!bo(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function lm(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xs(e.outputLen),Xs(e.blockLen)}function Js(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fm(e,t){vr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bw(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Dr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function iu(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function jn(e,t){return e<<32-t|e>>>t}const ww=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vw(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function xw(e){for(let t=0;t<e.length;t++)e[t]=vw(e[t]);return e}const T0=ww?e=>e:xw,dm=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",_w=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ts(e){if(vr(e),dm)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=_w[e[n]];return t}const rr={_0:48,_9:57,A:65,F:70,a:97,f:102};function B0(e){if(e>=rr._0&&e<=rr._9)return e-rr._0;if(e>=rr.A&&e<=rr.F)return e-(rr.A-10);if(e>=rr.a&&e<=rr.f)return e-(rr.a-10)}function ma(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(dm)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=B0(e.charCodeAt(i)),a=B0(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Ew(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Za(e){return typeof e=="string"&&(e=Ew(e)),vr(e),e}function Pn(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];vr(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}class Pf{}function Nf(e){const t=r=>e().update(Za(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ya(e=32){if(Rs&&typeof Rs.getRandomValues=="function")return Rs.getRandomValues(new Uint8Array(e));if(Rs&&typeof Rs.randomBytes=="function")return Uint8Array.from(Rs.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Aw(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}function Sw(e,t,n){return e&t^~e&n}function Iw(e,t,n){return e&t^e&n^t&n}class hm extends Pf{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=iu(this.buffer)}update(t){Js(this),t=Za(t),vr(t);const{view:n,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=iu(t);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Js(this),fm(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Dr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let m=o;m<s;m++)n[m]=0;Aw(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=iu(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<u;m++)a.setUint32(4*m,f[m],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const kr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Xo=BigInt(2**32-1),R0=BigInt(32);function Tw(e,t=!1){return t?{h:Number(e&Xo),l:Number(e>>R0&Xo)}:{h:Number(e>>R0&Xo)|0,l:Number(e&Xo)|0}}function pm(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Tw(e[i],t);[r[i],s[i]]=[o,a]}return[r,s]}const k0=(e,t,n)=>e>>>n,C0=(e,t,n)=>e<<32-n|t>>>n,ks=(e,t,n)=>e>>>n|t<<32-n,Cs=(e,t,n)=>e<<32-n|t>>>n,Jo=(e,t,n)=>e<<64-n|t>>>n-32,Qo=(e,t,n)=>e>>>n-32|t<<64-n,Bw=(e,t,n)=>e<<n|t>>>32-n,Rw=(e,t,n)=>t<<n|e>>>32-n,kw=(e,t,n)=>t<<n-32|e>>>64-n,Cw=(e,t,n)=>e<<n-32|t>>>64-n;function sr(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const Pw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Nw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Ow=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Mw=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,Lw=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),$w=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,Uw=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array(64);class Fw extends hm{constructor(t=32){super(64,t,8,!1),this.A=kr[0]|0,this.B=kr[1]|0,this.C=kr[2]|0,this.D=kr[3]|0,this.E=kr[4]|0,this.F=kr[5]|0,this.G=kr[6]|0,this.H=kr[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[t,n,r,s,i,o,a,c]}set(t,n,r,s,i,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let m=0;m<16;m++,n+=4)Cr[m]=t.getUint32(n,!1);for(let m=16;m<64;m++){const p=Cr[m-15],b=Cr[m-2],_=jn(p,7)^jn(p,18)^p>>>3,E=jn(b,17)^jn(b,19)^b>>>10;Cr[m]=E+Cr[m-7]+_+Cr[m-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:f}=this;for(let m=0;m<64;m++){const p=jn(a,6)^jn(a,11)^jn(a,25),b=f+p+Sw(a,c,u)+Uw[m]+Cr[m]|0,E=(jn(r,2)^jn(r,13)^jn(r,22))+Iw(r,s,i)|0;f=u,u=c,c=a,a=o+b|0,o=i,i=s,s=r,r=b+E|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,i,o,a,c,u,f)}roundClean(){Dr(Cr)}destroy(){this.set(0,0,0,0,0,0,0,0),Dr(this.buffer)}}const mm=pm(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),zw=mm[0],Dw=mm[1],Pr=new Uint32Array(80),Nr=new Uint32Array(80);class jw extends hm{constructor(t=64){super(128,t,16,!1),this.Ah=Vt[0]|0,this.Al=Vt[1]|0,this.Bh=Vt[2]|0,this.Bl=Vt[3]|0,this.Ch=Vt[4]|0,this.Cl=Vt[5]|0,this.Dh=Vt[6]|0,this.Dl=Vt[7]|0,this.Eh=Vt[8]|0,this.El=Vt[9]|0,this.Fh=Vt[10]|0,this.Fl=Vt[11]|0,this.Gh=Vt[12]|0,this.Gl=Vt[13]|0,this.Hh=Vt[14]|0,this.Hl=Vt[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:m,Fl:p,Gh:b,Gl:_,Hh:E,Hl:T}=this;return[t,n,r,s,i,o,a,c,u,f,m,p,b,_,E,T]}set(t,n,r,s,i,o,a,c,u,f,m,p,b,_,E,T){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=m|0,this.Fl=p|0,this.Gh=b|0,this.Gl=_|0,this.Hh=E|0,this.Hl=T|0}process(t,n){for(let C=0;C<16;C++,n+=4)Pr[C]=t.getUint32(n),Nr[C]=t.getUint32(n+=4);for(let C=16;C<80;C++){const U=Pr[C-15]|0,D=Nr[C-15]|0,V=ks(U,D,1)^ks(U,D,8)^k0(U,D,7),K=Cs(U,D,1)^Cs(U,D,8)^C0(U,D,7),X=Pr[C-2]|0,L=Nr[C-2]|0,$=ks(X,L,19)^Jo(X,L,61)^k0(X,L,6),z=Cs(X,L,19)^Qo(X,L,61)^C0(X,L,6),j=Ow(K,z,Nr[C-7],Nr[C-16]),x=Mw(j,V,$,Pr[C-7],Pr[C-16]);Pr[C]=x|0,Nr[C]=j|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:m,El:p,Fh:b,Fl:_,Gh:E,Gl:T,Hh:k,Hl:M}=this;for(let C=0;C<80;C++){const U=ks(m,p,14)^ks(m,p,18)^Jo(m,p,41),D=Cs(m,p,14)^Cs(m,p,18)^Qo(m,p,41),V=m&b^~m&E,K=p&_^~p&T,X=Lw(M,D,K,Dw[C],Nr[C]),L=$w(X,k,U,V,zw[C],Pr[C]),$=X|0,z=ks(r,s,28)^Jo(r,s,34)^Jo(r,s,39),j=Cs(r,s,28)^Qo(r,s,34)^Qo(r,s,39),x=r&i^r&a^i&a,l=s&o^s&c^o&c;k=E|0,M=T|0,E=b|0,T=_|0,b=m|0,_=p|0,{h:m,l:p}=sr(u|0,f|0,L|0,$|0),u=a|0,f=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const h=Pw($,j,l);r=Nw(h,L,z,x),s=h|0}({h:r,l:s}=sr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=sr(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=sr(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=sr(this.Dh|0,this.Dl|0,u|0,f|0),{h:m,l:p}=sr(this.Eh|0,this.El|0,m|0,p|0),{h:b,l:_}=sr(this.Fh|0,this.Fl|0,b|0,_|0),{h:E,l:T}=sr(this.Gh|0,this.Gl|0,E|0,T|0),{h:k,l:M}=sr(this.Hh|0,this.Hl|0,k|0,M|0),this.set(r,s,i,o,a,c,u,f,m,p,b,_,E,T,k,M)}roundClean(){Dr(Pr,Nr)}destroy(){Dr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Of=Nf(()=>new Fw),qw=Nf(()=>new jw);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mf=BigInt(0),bl=BigInt(1);function os(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Nn(e,t,n=""){const r=bo(e),s=e?.length,i=t!==void 0;if(!r||i&&s!==t){const o=n&&`"${n}" `,a=i?` of length ${t}`:"",c=r?`length=${s}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return e}function ea(e){const t=e.toString(16);return t.length&1?"0"+t:t}function ym(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Mf:BigInt("0x"+e)}function Xa(e){return ym(ts(e))}function ji(e){return vr(e),ym(ts(Uint8Array.from(e).reverse()))}function Lf(e,t){return ma(e.toString(16).padStart(t*2,"0"))}function gm(e,t){return Lf(e,t).reverse()}function at(e,t,n){let r;if(typeof t=="string")try{r=ma(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(bo(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function P0(e){return Uint8Array.from(e)}const ou=e=>typeof e=="bigint"&&Mf<=e;function Vw(e,t,n){return ou(e)&&ou(t)&&ou(n)&&t<=e&&e<n}function wl(e,t,n,r){if(!Vw(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function bm(e){let t;for(t=0;e>Mf;e>>=bl,t+=1);return t}const wo=e=>(bl<<BigInt(e))-bl;function Hw(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=b=>new Uint8Array(b),s=b=>Uint8Array.of(b);let i=r(e),o=r(e),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...b)=>n(o,i,...b),f=(b=r(0))=>{o=u(s(0),b),i=u(),b.length!==0&&(o=u(s(1),b),i=u())},m=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const _=[];for(;b<t;){i=u();const E=i.slice();_.push(E),b+=i.length}return Pn(..._)};return(b,_)=>{c(),f(b);let E;for(;!(E=_(m()));)f();return c(),E}}function vo(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(s,i,o){const a=e[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function ya(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const an=BigInt(0),jt=BigInt(1),Yr=BigInt(2),wm=BigInt(3),vm=BigInt(4),xm=BigInt(5),Gw=BigInt(7),_m=BigInt(8),Kw=BigInt(9),Em=BigInt(16);function Pt(e,t){const n=e%t;return n>=an?n:t+n}function ot(e,t,n){let r=e;for(;t-- >an;)r*=r,r%=n;return r}function N0(e,t){if(e===an)throw new Error("invert: expected non-zero number");if(t<=an)throw new Error("invert: expected positive modulus, got "+t);let n=Pt(e,t),r=t,s=an,i=jt;for(;n!==an;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==jt)throw new Error("invert: does not exist");return Pt(s,t)}function $f(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Am(e,t){const n=(e.ORDER+jt)/vm,r=e.pow(t,n);return $f(e,r,t),r}function Ww(e,t){const n=(e.ORDER-xm)/_m,r=e.mul(t,Yr),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,Yr),s),a=e.mul(i,e.sub(o,e.ONE));return $f(e,a,t),a}function Zw(e){const t=_s(e),n=Sm(e),r=n(t,t.neg(t.ONE)),s=n(t,r),i=n(t,t.neg(r)),o=(e+Gw)/Em;return(a,c)=>{let u=a.pow(c,o),f=a.mul(u,r);const m=a.mul(u,s),p=a.mul(u,i),b=a.eql(a.sqr(f),c),_=a.eql(a.sqr(m),c);u=a.cmov(u,f,b),f=a.cmov(p,m,_);const E=a.eql(a.sqr(f),c),T=a.cmov(u,f,E);return $f(a,T,c),T}}function Sm(e){if(e<wm)throw new Error("sqrt is not defined for small field");let t=e-jt,n=0;for(;t%Yr===an;)t/=Yr,n++;let r=Yr;const s=_s(e);for(;O0(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Am;let i=s.pow(r,t);const o=(t+jt)/Yr;return function(c,u){if(c.is0(u))return u;if(O0(c,u)!==1)throw new Error("Cannot find square root");let f=n,m=c.mul(c.ONE,i),p=c.pow(u,t),b=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let _=1,E=c.sqr(p);for(;!c.eql(E,c.ONE);)if(_++,E=c.sqr(E),_===f)throw new Error("Cannot find square root");const T=jt<<BigInt(f-_-1),k=c.pow(m,T);f=_,m=c.sqr(k),p=c.mul(p,m),b=c.mul(b,k)}return b}}function Yw(e){return e%vm===wm?Am:e%_m===xm?Ww:e%Em===Kw?Zw(e):Sm(e)}const Xw=(e,t)=>(Pt(e,t)&jt)===jt,Jw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qw(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Jw.reduce((r,s)=>(r[s]="function",r),t);return vo(e,n),e}function e6(e,t,n){if(n<an)throw new Error("invalid exponent, negatives unsupported");if(n===an)return e.ONE;if(n===jt)return t;let r=e.ONE,s=t;for(;n>an;)n&jt&&(r=e.mul(r,s)),s=e.sqr(s),n>>=jt;return r}function Im(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),i=e.inv(s);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),i),r}function O0(e,t){const n=(e.ORDER-jt)/Yr,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Tm(e,t){t!==void 0&&Xs(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _s(e,t,n=!1,r={}){if(e<=an)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,i,o=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=t;p.BITS&&(s=p.BITS),p.sqrt&&(i=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE),typeof p.modFromBytes=="boolean"&&(o=p.modFromBytes),a=p.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=Tm(e,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const m=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:wo(c),ZERO:an,ONE:jt,allowedLengths:a,create:p=>Pt(p,e),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return an<=p&&p<e},is0:p=>p===an,isValidNot0:p=>!m.is0(p)&&m.isValid(p),isOdd:p=>(p&jt)===jt,neg:p=>Pt(-p,e),eql:(p,b)=>p===b,sqr:p=>Pt(p*p,e),add:(p,b)=>Pt(p+b,e),sub:(p,b)=>Pt(p-b,e),mul:(p,b)=>Pt(p*b,e),pow:(p,b)=>e6(m,p,b),div:(p,b)=>Pt(p*N0(b,e),e),sqrN:p=>p*p,addN:(p,b)=>p+b,subN:(p,b)=>p-b,mulN:(p,b)=>p*b,inv:p=>N0(p,e),sqrt:i||(p=>(f||(f=Yw(e)),f(m,p))),toBytes:p=>n?gm(p,u):Lf(p,u),fromBytes:(p,b=!0)=>{if(a){if(!a.includes(p.length)||p.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+p.length);const E=new Uint8Array(u);E.set(p,n?0:E.length-p.length),p=E}if(p.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+p.length);let _=n?ji(p):Xa(p);if(o&&(_=Pt(_,e)),!b&&!m.isValid(_))throw new Error("invalid field element: outside of range 0..ORDER");return _},invertBatch:p=>Im(m,p),cmov:(p,b,_)=>_?b:p});return Object.freeze(m)}function Bm(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rm(e){const t=Bm(e);return t+Math.ceil(t/2)}function t6(e,t,n=!1){const r=e.length,s=Bm(t),i=Rm(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?ji(e):Xa(e),a=Pt(o,t-jt)+jt;return n?gm(a,s):Lf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qs=BigInt(0),Xr=BigInt(1);function ga(e,t){const n=t.negate();return e?n:t}function Jr(e,t){const n=Im(e.Fp,t.map(r=>r.Z));return t.map((r,s)=>e.fromAffine(r.toAffine(n[s])))}function km(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function au(e,t){km(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,i=wo(e),o=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function M0(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=Xr);const u=t*r,f=u+Math.abs(a)-1,m=a===0,p=a<0,b=t%2!==0;return{nextN:c,offset:f,isZero:m,isNeg:p,isNegF:b,offsetF:u}}function n6(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function r6(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const cu=new WeakMap,Cm=new WeakMap;function uu(e){return Cm.get(e)||1}function L0(e){if(e!==Qs)throw new Error("invalid wNAF")}let Pm=class{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let s=t;for(;n>Qs;)n&Xr&&(r=r.add(s)),s=s.double(),n>>=Xr;return r}precomputeWindow(t,n){const{windows:r,windowSize:s}=au(n,this.bits),i=[];let o=t,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=au(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:f,isNeg:m,isNegF:p,offsetF:b}=M0(r,a,o);r=c,f?i=i.add(ga(p,n[b])):s=s.add(ga(m,n[u]))}return L0(r),{p:s,f:i}}wNAFUnsafe(t,n,r,s=this.ZERO){const i=au(t,this.bits);for(let o=0;o<i.windows&&r!==Qs;o++){const{nextN:a,offset:c,isZero:u,isNeg:f}=M0(r,o,i);if(r=a,!u){const m=n[c];s=s.add(f?m.negate():m)}}return L0(r),s}getPrecomputes(t,n,r){let s=cu.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(s=r(s)),cu.set(n,s))),s}cached(t,n,r){const s=uu(t);return this.wNAF(s,this.getPrecomputes(s,t,r),n)}unsafe(t,n,r,s){const i=uu(t);return i===1?this._unsafeLadder(t,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),n,s)}createCache(t,n){km(n,this.bits),Cm.set(t,n),cu.delete(t)}hasCache(t){return uu(t)!==1}};function s6(e,t,n,r){let s=t,i=e.ZERO,o=e.ZERO;for(;n>Qs||r>Qs;)n&Xr&&(i=i.add(s)),r&Xr&&(o=o.add(s)),s=s.double(),n>>=Xr,r>>=Xr;return{p1:i,p2:o}}function Nm(e,t,n,r){n6(n,e),r6(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=bm(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=wo(c),f=new Array(Number(u)+1).fill(o),m=Math.floor((t.BITS-1)/c)*c;let p=o;for(let b=m;b>=0;b-=c){f.fill(o);for(let E=0;E<i;E++){const T=r[E],k=Number(T>>BigInt(b)&u);f[k]=f[k].add(n[E])}let _=o;for(let E=f.length-1,T=o;E>0;E--)T=T.add(f[E]),_=_.add(T);if(p=p.add(_),b!==0)for(let E=0;E<c;E++)p=p.double()}return p}function $0(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Qw(t),t}else return _s(e,{isLE:n})}function Om(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>Qs))throw new Error(`CURVE.${c} must be positive bigint`)}const s=$0(t.p,n.Fp,r),i=$0(t.n,n.Fn,r),a=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Or=BigInt(0),Lt=BigInt(1),lu=BigInt(2),i6=BigInt(8);function o6(e,t,n,r){const s=e.sqr(n),i=e.sqr(r),o=e.add(e.mul(t.a,s),i),a=e.add(e.ONE,e.mul(t.d,e.mul(s,i)));return e.eql(o,a)}function a6(e,t={}){const n=Om("edwards",e,t,t.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;vo(t,{},{uvRatio:"function"});const a=lu<<BigInt(s.BYTES*8)-Lt,c=T=>r.create(T),u=t.uvRatio||((T,k)=>{try{return{isValid:!0,value:r.sqrt(r.div(T,k))}}catch{return{isValid:!1,value:Or}}});if(!o6(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function f(T,k,M=!1){const C=M?Lt:Or;return wl("coordinate "+T,k,C,a),k}function m(T){if(!(T instanceof _))throw new Error("ExtendedPoint expected")}const p=ya((T,k)=>{const{X:M,Y:C,Z:U}=T,D=T.is0();k==null&&(k=D?i6:r.inv(U));const V=c(M*k),K=c(C*k),X=r.mul(U,k);if(D)return{x:Or,y:Lt};if(X!==Lt)throw new Error("invZ was invalid");return{x:V,y:K}}),b=ya(T=>{const{a:k,d:M}=i;if(T.is0())throw new Error("bad point: ZERO");const{X:C,Y:U,Z:D,T:V}=T,K=c(C*C),X=c(U*U),L=c(D*D),$=c(L*L),z=c(K*k),j=c(L*c(z+X)),x=c($+c(M*c(K*X)));if(j!==x)throw new Error("bad point: equation left != right (1)");const l=c(C*U),h=c(D*V);if(l!==h)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(k,M,C,U){this.X=f("x",k),this.Y=f("y",M),this.Z=f("z",C,!0),this.T=f("t",U),Object.freeze(this)}static CURVE(){return i}static fromAffine(k){if(k instanceof _)throw new Error("extended point not allowed");const{x:M,y:C}=k||{};return f("x",M),f("y",C),new _(M,C,Lt,c(M*C))}static fromBytes(k,M=!1){const C=r.BYTES,{a:U,d:D}=i;k=P0(Nn(k,C,"point")),os(M,"zip215");const V=P0(k),K=k[C-1];V[C-1]=K&-129;const X=ji(V),L=M?a:r.ORDER;wl("point.y",X,Or,L);const $=c(X*X),z=c($-Lt),j=c(D*$-U);let{isValid:x,value:l}=u(z,j);if(!x)throw new Error("bad point: invalid y coordinate");const h=(l&Lt)===Lt,v=(K&128)!==0;if(!M&&l===Or&&v)throw new Error("bad point: x=0 and x_0=1");return v!==h&&(l=c(-l)),_.fromAffine({x:l,y:X})}static fromHex(k,M=!1){return _.fromBytes(at("point",k),M)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,M=!0){return E.createCache(this,k),M||this.multiply(lu),this}assertValidity(){b(this)}equals(k){m(k);const{X:M,Y:C,Z:U}=this,{X:D,Y:V,Z:K}=k,X=c(M*K),L=c(D*U),$=c(C*K),z=c(V*U);return X===L&&$===z}is0(){return this.equals(_.ZERO)}negate(){return new _(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:k}=i,{X:M,Y:C,Z:U}=this,D=c(M*M),V=c(C*C),K=c(lu*c(U*U)),X=c(k*D),L=M+C,$=c(c(L*L)-D-V),z=X+V,j=z-K,x=X-V,l=c($*j),h=c(z*x),v=c($*x),A=c(j*z);return new _(l,h,A,v)}add(k){m(k);const{a:M,d:C}=i,{X:U,Y:D,Z:V,T:K}=this,{X,Y:L,Z:$,T:z}=k,j=c(U*X),x=c(D*L),l=c(K*C*z),h=c(V*$),v=c((U+D)*(X+L)-j-x),A=h-l,S=h+l,P=c(x-M*j),F=c(v*A),R=c(S*P),d=c(v*P),y=c(A*S);return new _(F,R,y,d)}subtract(k){return this.add(k.negate())}multiply(k){if(!s.isValidNot0(k))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:M,f:C}=E.cached(this,k,U=>Jr(_,U));return Jr(_,[M,C])[0]}multiplyUnsafe(k,M=_.ZERO){if(!s.isValid(k))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return k===Or?_.ZERO:this.is0()||k===Lt?this:E.unsafe(this,k,C=>Jr(_,C),M)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return E.unsafe(this,i.n).is0()}toAffine(k){return p(this,k)}clearCofactor(){return o===Lt?this:this.multiplyUnsafe(o)}toBytes(){const{x:k,y:M}=this.toAffine(),C=r.toBytes(M);return C[C.length-1]|=k&Lt?128:0,C}toHex(){return ts(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(k){return Jr(_,k)}static msm(k,M){return Nm(_,s,k,M)}_setWindowSize(k){this.precompute(k)}toRawBytes(){return this.toBytes()}}_.BASE=new _(i.Gx,i.Gy,Lt,c(i.Gx*i.Gy)),_.ZERO=new _(Or,Lt,Lt,Or),_.Fp=r,_.Fn=s;const E=new Pm(_,s.BITS);return _.BASE.precompute(8),_}function c6(e,t,n={}){if(typeof t!="function")throw new Error('"hash" function param is required');vo(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=e,a=n.randomBytes||Ya,c=n.adjustScalarBytes||(L=>L),u=n.domain||((L,$,z)=>{if(os(z,"phflag"),$.length||z)throw new Error("Contexts/pre-hash are not supported");return L});function f(L){return o.create(ji(L))}function m(L){const $=C.secretKey;L=at("private key",L,$);const z=at("hashed private key",t(L),2*$),j=c(z.slice(0,$)),x=z.slice($,2*$),l=f(j);return{head:j,prefix:x,scalar:l}}function p(L){const{head:$,prefix:z,scalar:j}=m(L),x=s.multiply(j),l=x.toBytes();return{head:$,prefix:z,scalar:j,point:x,pointBytes:l}}function b(L){return p(L).pointBytes}function _(L=Uint8Array.of(),...$){const z=Pn(...$);return f(t(u(z,at("context",L),!!r)))}function E(L,$,z={}){L=at("message",L),r&&(L=r(L));const{prefix:j,scalar:x,pointBytes:l}=p($),h=_(z.context,j,L),v=s.multiply(h).toBytes(),A=_(z.context,v,l,L),S=o.create(h+A*x);if(!o.isValid(S))throw new Error("sign failed: invalid s");const P=Pn(v,o.toBytes(S));return Nn(P,C.signature,"result")}const T={zip215:!0};function k(L,$,z,j=T){const{context:x,zip215:l}=j,h=C.signature;L=at("signature",L,h),$=at("message",$),z=at("publicKey",z,C.publicKey),l!==void 0&&os(l,"zip215"),r&&($=r($));const v=h/2,A=L.subarray(0,v),S=ji(L.subarray(v,h));let P,F,R;try{P=e.fromBytes(z,l),F=e.fromBytes(A,l),R=s.multiplyUnsafe(S)}catch{return!1}if(!l&&P.isSmallOrder())return!1;const d=_(x,F.toBytes(),P.toBytes(),$);return F.add(P.multiplyUnsafe(d)).subtract(R).clearCofactor().is0()}const M=i.BYTES,C={secretKey:M,publicKey:M,signature:2*M,seed:M};function U(L=a(C.seed)){return Nn(L,C.seed,"seed")}function D(L){const $=X.randomSecretKey(L);return{secretKey:$,publicKey:b($)}}function V(L){return bo(L)&&L.length===o.BYTES}function K(L,$){try{return!!e.fromBytes(L,$)}catch{return!1}}const X={getExtendedPublicKey:p,randomSecretKey:U,isValidSecretKey:V,isValidPublicKey:K,toMontgomery(L){const{y:$}=e.fromBytes(L),z=C.publicKey,j=z===32;if(!j&&z!==57)throw new Error("only defined for 25519 and 448");const x=j?i.div(Lt+$,Lt-$):i.div($-Lt,$+Lt);return i.toBytes(x)},toMontgomerySecret(L){const $=C.secretKey;Nn(L,$);const z=t(L.subarray(0,$));return c(z).subarray(0,$)},randomPrivateKey:U,precompute(L=8,$=e.BASE){return $.precompute(L,!1)}};return Object.freeze({keygen:D,getPublicKey:b,sign:E,verify:k,utils:X,Point:e,lengths:C})}function u6(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=_s(t.n,e.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:e.uvRatio},i={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:s,hash:e.hash,eddsaOpts:i}}function l6(e,t){const n=t.Point;return Object.assign({},t,{ExtendedPoint:n,CURVE:e,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function f6(e){const{CURVE:t,curveOpts:n,hash:r,eddsaOpts:s}=u6(e),i=a6(t,n),o=c6(i,r,s);return l6(e,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d6=BigInt(1),U0=BigInt(2);BigInt(3);const h6=BigInt(5),p6=BigInt(8),Uf=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Mm={p:Uf,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:p6,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function m6(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Uf,a=e*e%i*e%i,c=ot(a,U0,i)*a%i,u=ot(c,d6,i)*e%i,f=ot(u,h6,i)*u%i,m=ot(f,t,i)*f%i,p=ot(m,n,i)*m%i,b=ot(p,r,i)*p%i,_=ot(b,s,i)*b%i,E=ot(_,s,i)*b%i,T=ot(E,t,i)*f%i;return{pow_p_5_8:ot(T,U0,i)*e%i,b2:a}}function y6(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const F0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function g6(e,t){const n=Uf,r=Pt(t*t*t,n),s=Pt(r*r*t,n),i=m6(e*s).pow_p_5_8;let o=Pt(e*r*i,n);const a=Pt(t*o*o,n),c=o,u=Pt(o*F0,n),f=a===e,m=a===Pt(-e,n),p=a===Pt(-e*F0,n);return f&&(o=c),(m||p)&&(o=u),Xw(o,n)&&(o=Pt(-o,n)),{isValid:f||m,value:o}}const b6=_s(Mm.p,{isLE:!0}),w6={...Mm,Fp:b6,hash:qw,adjustScalarBytes:y6,uvRatio:g6},bi=f6(w6);var ua={exports:{}};const v6={},x6=Object.freeze(Object.defineProperty({__proto__:null,default:v6},Symbol.toStringTag,{value:"Module"})),_6=kf(x6);var E6=ua.exports,z0;function Lm(){return z0||(z0=1,(function(e){(function(t,n){function r(x,l){if(!x)throw new Error(l||"Assertion failed")}function s(x,l){x.super_=l;var h=function(){};h.prototype=l.prototype,x.prototype=new h,x.prototype.constructor=x}function i(x,l,h){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((l==="le"||l==="be")&&(h=l,l=10),this._init(x||0,l||10,h||"be"))}typeof t=="object"?t.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=_6.Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,h){return l.cmp(h)>0?l:h},i.min=function(l,h){return l.cmp(h)<0?l:h},i.prototype._init=function(l,h,v){if(typeof l=="number")return this._initNumber(l,h,v);if(typeof l=="object")return this._initArray(l,h,v);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),l=l.toString().replace(/\s+/g,"");var A=0;l[0]==="-"&&(A++,this.negative=1),A<l.length&&(h===16?this._parseHex(l,A,v):(this._parseBase(l,h,A),v==="le"&&this._initArray(this.toArray(),h,v)))},i.prototype._initNumber=function(l,h,v){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),h,v)},i.prototype._initArray=function(l,h,v){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var S,P,F=0;if(v==="be")for(A=l.length-1,S=0;A>=0;A-=3)P=l[A]|l[A-1]<<8|l[A-2]<<16,this.words[S]|=P<<F&67108863,this.words[S+1]=P>>>26-F&67108863,F+=24,F>=26&&(F-=26,S++);else if(v==="le")for(A=0,S=0;A<l.length;A+=3)P=l[A]|l[A+1]<<8|l[A+2]<<16,this.words[S]|=P<<F&67108863,this.words[S+1]=P>>>26-F&67108863,F+=24,F>=26&&(F-=26,S++);return this._strip()};function a(x,l){var h=x.charCodeAt(l);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+x)}function c(x,l,h){var v=a(x,h);return h-1>=l&&(v|=a(x,h-1)<<4),v}i.prototype._parseHex=function(l,h,v){this.length=Math.ceil((l.length-h)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var S=0,P=0,F;if(v==="be")for(A=l.length-1;A>=h;A-=2)F=c(l,h,A)<<S,this.words[P]|=F&67108863,S>=18?(S-=18,P+=1,this.words[P]|=F>>>26):S+=8;else{var R=l.length-h;for(A=R%2===0?h+1:h;A<l.length;A+=2)F=c(l,h,A)<<S,this.words[P]|=F&67108863,S>=18?(S-=18,P+=1,this.words[P]|=F>>>26):S+=8}this._strip()};function u(x,l,h,v){for(var A=0,S=0,P=Math.min(x.length,h),F=l;F<P;F++){var R=x.charCodeAt(F)-48;A*=v,R>=49?S=R-49+10:R>=17?S=R-17+10:S=R,r(R>=0&&S<v,"Invalid character"),A+=S}return A}i.prototype._parseBase=function(l,h,v){this.words=[0],this.length=1;for(var A=0,S=1;S<=67108863;S*=h)A++;A--,S=S/h|0;for(var P=l.length-v,F=P%A,R=Math.min(P,P-F)+v,d=0,y=v;y<R;y+=A)d=u(l,y,y+A,h),this.imuln(S),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(F!==0){var B=1;for(d=u(l,y,l.length,h),y=0;y<F;y++)B*=h;this.imuln(B),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var h=0;h<this.length;h++)l.words[h]=this.words[h];l.length=this.length,l.negative=this.negative,l.red=this.red};function f(x,l){x.words=l.words,x.length=l.length,x.negative=l.negative,x.red=l.red}if(i.prototype._move=function(l){f(l,this)},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{i.prototype.inspect=m}else i.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,h){l=l||10,h=h|0||1;var v;if(l===16||l==="hex"){v="";for(var A=0,S=0,P=0;P<this.length;P++){var F=this.words[P],R=((F<<A|S)&16777215).toString(16);S=F>>>24-A&16777215,A+=2,A>=26&&(A-=26,P--),S!==0||P!==this.length-1?v=p[6-R.length]+R+v:v=R+v}for(S!==0&&(v=S.toString(16)+v);v.length%h!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(l===(l|0)&&l>=2&&l<=36){var d=b[l],y=_[l];v="";var B=this.clone();for(B.negative=0;!B.isZero();){var N=B.modrn(y).toString(l);B=B.idivn(y),B.isZero()?v=N+v:v=p[d-N.length]+N+v}for(this.isZero()&&(v="0"+v);v.length%h!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(l,h){return this.toArrayLike(o,l,h)}),i.prototype.toArray=function(l,h){return this.toArrayLike(Array,l,h)};var E=function(l,h){return l.allocUnsafe?l.allocUnsafe(h):new l(h)};i.prototype.toArrayLike=function(l,h,v){this._strip();var A=this.byteLength(),S=v||Math.max(1,A);r(A<=S,"byte array longer than desired length"),r(S>0,"Requested array length <= 0");var P=E(l,S),F=h==="le"?"LE":"BE";return this["_toArrayLike"+F](P,A),P},i.prototype._toArrayLikeLE=function(l,h){for(var v=0,A=0,S=0,P=0;S<this.length;S++){var F=this.words[S]<<P|A;l[v++]=F&255,v<l.length&&(l[v++]=F>>8&255),v<l.length&&(l[v++]=F>>16&255),P===6?(v<l.length&&(l[v++]=F>>24&255),A=0,P=0):(A=F>>>24,P+=2)}if(v<l.length)for(l[v++]=A;v<l.length;)l[v++]=0},i.prototype._toArrayLikeBE=function(l,h){for(var v=l.length-1,A=0,S=0,P=0;S<this.length;S++){var F=this.words[S]<<P|A;l[v--]=F&255,v>=0&&(l[v--]=F>>8&255),v>=0&&(l[v--]=F>>16&255),P===6?(v>=0&&(l[v--]=F>>24&255),A=0,P=0):(A=F>>>24,P+=2)}if(v>=0)for(l[v--]=A;v>=0;)l[v--]=0},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var h=l,v=0;return h>=4096&&(v+=13,h>>>=13),h>=64&&(v+=7,h>>>=7),h>=8&&(v+=4,h>>>=4),h>=2&&(v+=2,h>>>=2),v+h},i.prototype._zeroBits=function(l){if(l===0)return 26;var h=l,v=0;return(h&8191)===0&&(v+=13,h>>>=13),(h&127)===0&&(v+=7,h>>>=7),(h&15)===0&&(v+=4,h>>>=4),(h&3)===0&&(v+=2,h>>>=2),(h&1)===0&&v++,v},i.prototype.bitLength=function(){var l=this.words[this.length-1],h=this._countBits(l);return(this.length-1)*26+h};function T(x){for(var l=new Array(x.bitLength()),h=0;h<l.length;h++){var v=h/26|0,A=h%26;l[h]=x.words[v]>>>A&1}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,h=0;h<this.length;h++){var v=this._zeroBits(this.words[h]);if(l+=v,v!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]|l.words[h];return this._strip()},i.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var h;this.length>l.length?h=l:h=this;for(var v=0;v<h.length;v++)this.words[v]=this.words[v]&l.words[v];return this.length=h.length,this._strip()},i.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var h,v;this.length>l.length?(h=this,v=l):(h=l,v=this);for(var A=0;A<v.length;A++)this.words[A]=h.words[A]^v.words[A];if(this!==h)for(;A<h.length;A++)this.words[A]=h.words[A];return this.length=h.length,this._strip()},i.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var h=Math.ceil(l/26)|0,v=l%26;this._expand(h),v>0&&h--;for(var A=0;A<h;A++)this.words[A]=~this.words[A]&67108863;return v>0&&(this.words[A]=~this.words[A]&67108863>>26-v),this._strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,h){r(typeof l=="number"&&l>=0);var v=l/26|0,A=l%26;return this._expand(v+1),h?this.words[v]=this.words[v]|1<<A:this.words[v]=this.words[v]&~(1<<A),this._strip()},i.prototype.iadd=function(l){var h;if(this.negative!==0&&l.negative===0)return this.negative=0,h=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,h=this.isub(l),l.negative=1,h._normSign();var v,A;this.length>l.length?(v=this,A=l):(v=l,A=this);for(var S=0,P=0;P<A.length;P++)h=(v.words[P]|0)+(A.words[P]|0)+S,this.words[P]=h&67108863,S=h>>>26;for(;S!==0&&P<v.length;P++)h=(v.words[P]|0)+S,this.words[P]=h&67108863,S=h>>>26;if(this.length=v.length,S!==0)this.words[this.length]=S,this.length++;else if(v!==this)for(;P<v.length;P++)this.words[P]=v.words[P];return this},i.prototype.add=function(l){var h;return l.negative!==0&&this.negative===0?(l.negative=0,h=this.sub(l),l.negative^=1,h):l.negative===0&&this.negative!==0?(this.negative=0,h=l.sub(this),this.negative=1,h):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var h=this.iadd(l);return l.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var v=this.cmp(l);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,S;v>0?(A=this,S=l):(A=l,S=this);for(var P=0,F=0;F<S.length;F++)h=(A.words[F]|0)-(S.words[F]|0)+P,P=h>>26,this.words[F]=h&67108863;for(;P!==0&&F<A.length;F++)h=(A.words[F]|0)+P,P=h>>26,this.words[F]=h&67108863;if(P===0&&F<A.length&&A!==this)for(;F<A.length;F++)this.words[F]=A.words[F];return this.length=Math.max(this.length,F),A!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function k(x,l,h){h.negative=l.negative^x.negative;var v=x.length+l.length|0;h.length=v,v=v-1|0;var A=x.words[0]|0,S=l.words[0]|0,P=A*S,F=P&67108863,R=P/67108864|0;h.words[0]=F;for(var d=1;d<v;d++){for(var y=R>>>26,B=R&67108863,N=Math.min(d,l.length-1),G=Math.max(0,d-x.length+1);G<=N;G++){var J=d-G|0;A=x.words[J]|0,S=l.words[G]|0,P=A*S+B,y+=P/67108864|0,B=P&67108863}h.words[d]=B|0,R=y|0}return R!==0?h.words[d]=R|0:h.length--,h._strip()}var M=function(l,h,v){var A=l.words,S=h.words,P=v.words,F=0,R,d,y,B=A[0]|0,N=B&8191,G=B>>>13,J=A[1]|0,oe=J&8191,ae=J>>>13,Be=A[2]|0,Pe=Be&8191,Le=Be>>>13,lt=A[3]|0,$e=lt&8191,De=lt>>>13,Wr=A[4]|0,We=Wr&8191,rt=Wr>>>13,Zo=A[5]|0,Je=Zo&8191,Ge=Zo>>>13,hn=A[6]|0,Ze=hn&8191,st=hn>>>13,kn=A[7]|0,it=kn&8191,I=kn>>>13,g=A[8]|0,w=g&8191,O=g>>>13,H=A[9]|0,W=H&8191,Q=H>>>13,Se=S[0]|0,Ee=Se&8191,_e=Se>>>13,Ke=S[1]|0,we=Ke&8191,ft=Ke>>>13,y0=S[2]|0,dt=y0&8191,ht=y0>>>13,g0=S[3]|0,pt=g0&8191,mt=g0>>>13,b0=S[4]|0,yt=b0&8191,gt=b0>>>13,w0=S[5]|0,bt=w0&8191,wt=w0>>>13,v0=S[6]|0,vt=v0&8191,xt=v0>>>13,x0=S[7]|0,_t=x0&8191,Et=x0>>>13,_0=S[8]|0,At=_0&8191,St=_0>>>13,E0=S[9]|0,It=E0&8191,Tt=E0>>>13;v.negative=l.negative^h.negative,v.length=19,R=Math.imul(N,Ee),d=Math.imul(N,_e),d=d+Math.imul(G,Ee)|0,y=Math.imul(G,_e);var Fc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Fc>>>26)|0,Fc&=67108863,R=Math.imul(oe,Ee),d=Math.imul(oe,_e),d=d+Math.imul(ae,Ee)|0,y=Math.imul(ae,_e),R=R+Math.imul(N,we)|0,d=d+Math.imul(N,ft)|0,d=d+Math.imul(G,we)|0,y=y+Math.imul(G,ft)|0;var zc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(zc>>>26)|0,zc&=67108863,R=Math.imul(Pe,Ee),d=Math.imul(Pe,_e),d=d+Math.imul(Le,Ee)|0,y=Math.imul(Le,_e),R=R+Math.imul(oe,we)|0,d=d+Math.imul(oe,ft)|0,d=d+Math.imul(ae,we)|0,y=y+Math.imul(ae,ft)|0,R=R+Math.imul(N,dt)|0,d=d+Math.imul(N,ht)|0,d=d+Math.imul(G,dt)|0,y=y+Math.imul(G,ht)|0;var Dc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Dc>>>26)|0,Dc&=67108863,R=Math.imul($e,Ee),d=Math.imul($e,_e),d=d+Math.imul(De,Ee)|0,y=Math.imul(De,_e),R=R+Math.imul(Pe,we)|0,d=d+Math.imul(Pe,ft)|0,d=d+Math.imul(Le,we)|0,y=y+Math.imul(Le,ft)|0,R=R+Math.imul(oe,dt)|0,d=d+Math.imul(oe,ht)|0,d=d+Math.imul(ae,dt)|0,y=y+Math.imul(ae,ht)|0,R=R+Math.imul(N,pt)|0,d=d+Math.imul(N,mt)|0,d=d+Math.imul(G,pt)|0,y=y+Math.imul(G,mt)|0;var jc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(jc>>>26)|0,jc&=67108863,R=Math.imul(We,Ee),d=Math.imul(We,_e),d=d+Math.imul(rt,Ee)|0,y=Math.imul(rt,_e),R=R+Math.imul($e,we)|0,d=d+Math.imul($e,ft)|0,d=d+Math.imul(De,we)|0,y=y+Math.imul(De,ft)|0,R=R+Math.imul(Pe,dt)|0,d=d+Math.imul(Pe,ht)|0,d=d+Math.imul(Le,dt)|0,y=y+Math.imul(Le,ht)|0,R=R+Math.imul(oe,pt)|0,d=d+Math.imul(oe,mt)|0,d=d+Math.imul(ae,pt)|0,y=y+Math.imul(ae,mt)|0,R=R+Math.imul(N,yt)|0,d=d+Math.imul(N,gt)|0,d=d+Math.imul(G,yt)|0,y=y+Math.imul(G,gt)|0;var qc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(qc>>>26)|0,qc&=67108863,R=Math.imul(Je,Ee),d=Math.imul(Je,_e),d=d+Math.imul(Ge,Ee)|0,y=Math.imul(Ge,_e),R=R+Math.imul(We,we)|0,d=d+Math.imul(We,ft)|0,d=d+Math.imul(rt,we)|0,y=y+Math.imul(rt,ft)|0,R=R+Math.imul($e,dt)|0,d=d+Math.imul($e,ht)|0,d=d+Math.imul(De,dt)|0,y=y+Math.imul(De,ht)|0,R=R+Math.imul(Pe,pt)|0,d=d+Math.imul(Pe,mt)|0,d=d+Math.imul(Le,pt)|0,y=y+Math.imul(Le,mt)|0,R=R+Math.imul(oe,yt)|0,d=d+Math.imul(oe,gt)|0,d=d+Math.imul(ae,yt)|0,y=y+Math.imul(ae,gt)|0,R=R+Math.imul(N,bt)|0,d=d+Math.imul(N,wt)|0,d=d+Math.imul(G,bt)|0,y=y+Math.imul(G,wt)|0;var Vc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Vc>>>26)|0,Vc&=67108863,R=Math.imul(Ze,Ee),d=Math.imul(Ze,_e),d=d+Math.imul(st,Ee)|0,y=Math.imul(st,_e),R=R+Math.imul(Je,we)|0,d=d+Math.imul(Je,ft)|0,d=d+Math.imul(Ge,we)|0,y=y+Math.imul(Ge,ft)|0,R=R+Math.imul(We,dt)|0,d=d+Math.imul(We,ht)|0,d=d+Math.imul(rt,dt)|0,y=y+Math.imul(rt,ht)|0,R=R+Math.imul($e,pt)|0,d=d+Math.imul($e,mt)|0,d=d+Math.imul(De,pt)|0,y=y+Math.imul(De,mt)|0,R=R+Math.imul(Pe,yt)|0,d=d+Math.imul(Pe,gt)|0,d=d+Math.imul(Le,yt)|0,y=y+Math.imul(Le,gt)|0,R=R+Math.imul(oe,bt)|0,d=d+Math.imul(oe,wt)|0,d=d+Math.imul(ae,bt)|0,y=y+Math.imul(ae,wt)|0,R=R+Math.imul(N,vt)|0,d=d+Math.imul(N,xt)|0,d=d+Math.imul(G,vt)|0,y=y+Math.imul(G,xt)|0;var Hc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Hc>>>26)|0,Hc&=67108863,R=Math.imul(it,Ee),d=Math.imul(it,_e),d=d+Math.imul(I,Ee)|0,y=Math.imul(I,_e),R=R+Math.imul(Ze,we)|0,d=d+Math.imul(Ze,ft)|0,d=d+Math.imul(st,we)|0,y=y+Math.imul(st,ft)|0,R=R+Math.imul(Je,dt)|0,d=d+Math.imul(Je,ht)|0,d=d+Math.imul(Ge,dt)|0,y=y+Math.imul(Ge,ht)|0,R=R+Math.imul(We,pt)|0,d=d+Math.imul(We,mt)|0,d=d+Math.imul(rt,pt)|0,y=y+Math.imul(rt,mt)|0,R=R+Math.imul($e,yt)|0,d=d+Math.imul($e,gt)|0,d=d+Math.imul(De,yt)|0,y=y+Math.imul(De,gt)|0,R=R+Math.imul(Pe,bt)|0,d=d+Math.imul(Pe,wt)|0,d=d+Math.imul(Le,bt)|0,y=y+Math.imul(Le,wt)|0,R=R+Math.imul(oe,vt)|0,d=d+Math.imul(oe,xt)|0,d=d+Math.imul(ae,vt)|0,y=y+Math.imul(ae,xt)|0,R=R+Math.imul(N,_t)|0,d=d+Math.imul(N,Et)|0,d=d+Math.imul(G,_t)|0,y=y+Math.imul(G,Et)|0;var Gc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Gc>>>26)|0,Gc&=67108863,R=Math.imul(w,Ee),d=Math.imul(w,_e),d=d+Math.imul(O,Ee)|0,y=Math.imul(O,_e),R=R+Math.imul(it,we)|0,d=d+Math.imul(it,ft)|0,d=d+Math.imul(I,we)|0,y=y+Math.imul(I,ft)|0,R=R+Math.imul(Ze,dt)|0,d=d+Math.imul(Ze,ht)|0,d=d+Math.imul(st,dt)|0,y=y+Math.imul(st,ht)|0,R=R+Math.imul(Je,pt)|0,d=d+Math.imul(Je,mt)|0,d=d+Math.imul(Ge,pt)|0,y=y+Math.imul(Ge,mt)|0,R=R+Math.imul(We,yt)|0,d=d+Math.imul(We,gt)|0,d=d+Math.imul(rt,yt)|0,y=y+Math.imul(rt,gt)|0,R=R+Math.imul($e,bt)|0,d=d+Math.imul($e,wt)|0,d=d+Math.imul(De,bt)|0,y=y+Math.imul(De,wt)|0,R=R+Math.imul(Pe,vt)|0,d=d+Math.imul(Pe,xt)|0,d=d+Math.imul(Le,vt)|0,y=y+Math.imul(Le,xt)|0,R=R+Math.imul(oe,_t)|0,d=d+Math.imul(oe,Et)|0,d=d+Math.imul(ae,_t)|0,y=y+Math.imul(ae,Et)|0,R=R+Math.imul(N,At)|0,d=d+Math.imul(N,St)|0,d=d+Math.imul(G,At)|0,y=y+Math.imul(G,St)|0;var Kc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Kc>>>26)|0,Kc&=67108863,R=Math.imul(W,Ee),d=Math.imul(W,_e),d=d+Math.imul(Q,Ee)|0,y=Math.imul(Q,_e),R=R+Math.imul(w,we)|0,d=d+Math.imul(w,ft)|0,d=d+Math.imul(O,we)|0,y=y+Math.imul(O,ft)|0,R=R+Math.imul(it,dt)|0,d=d+Math.imul(it,ht)|0,d=d+Math.imul(I,dt)|0,y=y+Math.imul(I,ht)|0,R=R+Math.imul(Ze,pt)|0,d=d+Math.imul(Ze,mt)|0,d=d+Math.imul(st,pt)|0,y=y+Math.imul(st,mt)|0,R=R+Math.imul(Je,yt)|0,d=d+Math.imul(Je,gt)|0,d=d+Math.imul(Ge,yt)|0,y=y+Math.imul(Ge,gt)|0,R=R+Math.imul(We,bt)|0,d=d+Math.imul(We,wt)|0,d=d+Math.imul(rt,bt)|0,y=y+Math.imul(rt,wt)|0,R=R+Math.imul($e,vt)|0,d=d+Math.imul($e,xt)|0,d=d+Math.imul(De,vt)|0,y=y+Math.imul(De,xt)|0,R=R+Math.imul(Pe,_t)|0,d=d+Math.imul(Pe,Et)|0,d=d+Math.imul(Le,_t)|0,y=y+Math.imul(Le,Et)|0,R=R+Math.imul(oe,At)|0,d=d+Math.imul(oe,St)|0,d=d+Math.imul(ae,At)|0,y=y+Math.imul(ae,St)|0,R=R+Math.imul(N,It)|0,d=d+Math.imul(N,Tt)|0,d=d+Math.imul(G,It)|0,y=y+Math.imul(G,Tt)|0;var Wc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Wc>>>26)|0,Wc&=67108863,R=Math.imul(W,we),d=Math.imul(W,ft),d=d+Math.imul(Q,we)|0,y=Math.imul(Q,ft),R=R+Math.imul(w,dt)|0,d=d+Math.imul(w,ht)|0,d=d+Math.imul(O,dt)|0,y=y+Math.imul(O,ht)|0,R=R+Math.imul(it,pt)|0,d=d+Math.imul(it,mt)|0,d=d+Math.imul(I,pt)|0,y=y+Math.imul(I,mt)|0,R=R+Math.imul(Ze,yt)|0,d=d+Math.imul(Ze,gt)|0,d=d+Math.imul(st,yt)|0,y=y+Math.imul(st,gt)|0,R=R+Math.imul(Je,bt)|0,d=d+Math.imul(Je,wt)|0,d=d+Math.imul(Ge,bt)|0,y=y+Math.imul(Ge,wt)|0,R=R+Math.imul(We,vt)|0,d=d+Math.imul(We,xt)|0,d=d+Math.imul(rt,vt)|0,y=y+Math.imul(rt,xt)|0,R=R+Math.imul($e,_t)|0,d=d+Math.imul($e,Et)|0,d=d+Math.imul(De,_t)|0,y=y+Math.imul(De,Et)|0,R=R+Math.imul(Pe,At)|0,d=d+Math.imul(Pe,St)|0,d=d+Math.imul(Le,At)|0,y=y+Math.imul(Le,St)|0,R=R+Math.imul(oe,It)|0,d=d+Math.imul(oe,Tt)|0,d=d+Math.imul(ae,It)|0,y=y+Math.imul(ae,Tt)|0;var Zc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Zc>>>26)|0,Zc&=67108863,R=Math.imul(W,dt),d=Math.imul(W,ht),d=d+Math.imul(Q,dt)|0,y=Math.imul(Q,ht),R=R+Math.imul(w,pt)|0,d=d+Math.imul(w,mt)|0,d=d+Math.imul(O,pt)|0,y=y+Math.imul(O,mt)|0,R=R+Math.imul(it,yt)|0,d=d+Math.imul(it,gt)|0,d=d+Math.imul(I,yt)|0,y=y+Math.imul(I,gt)|0,R=R+Math.imul(Ze,bt)|0,d=d+Math.imul(Ze,wt)|0,d=d+Math.imul(st,bt)|0,y=y+Math.imul(st,wt)|0,R=R+Math.imul(Je,vt)|0,d=d+Math.imul(Je,xt)|0,d=d+Math.imul(Ge,vt)|0,y=y+Math.imul(Ge,xt)|0,R=R+Math.imul(We,_t)|0,d=d+Math.imul(We,Et)|0,d=d+Math.imul(rt,_t)|0,y=y+Math.imul(rt,Et)|0,R=R+Math.imul($e,At)|0,d=d+Math.imul($e,St)|0,d=d+Math.imul(De,At)|0,y=y+Math.imul(De,St)|0,R=R+Math.imul(Pe,It)|0,d=d+Math.imul(Pe,Tt)|0,d=d+Math.imul(Le,It)|0,y=y+Math.imul(Le,Tt)|0;var Yc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Yc>>>26)|0,Yc&=67108863,R=Math.imul(W,pt),d=Math.imul(W,mt),d=d+Math.imul(Q,pt)|0,y=Math.imul(Q,mt),R=R+Math.imul(w,yt)|0,d=d+Math.imul(w,gt)|0,d=d+Math.imul(O,yt)|0,y=y+Math.imul(O,gt)|0,R=R+Math.imul(it,bt)|0,d=d+Math.imul(it,wt)|0,d=d+Math.imul(I,bt)|0,y=y+Math.imul(I,wt)|0,R=R+Math.imul(Ze,vt)|0,d=d+Math.imul(Ze,xt)|0,d=d+Math.imul(st,vt)|0,y=y+Math.imul(st,xt)|0,R=R+Math.imul(Je,_t)|0,d=d+Math.imul(Je,Et)|0,d=d+Math.imul(Ge,_t)|0,y=y+Math.imul(Ge,Et)|0,R=R+Math.imul(We,At)|0,d=d+Math.imul(We,St)|0,d=d+Math.imul(rt,At)|0,y=y+Math.imul(rt,St)|0,R=R+Math.imul($e,It)|0,d=d+Math.imul($e,Tt)|0,d=d+Math.imul(De,It)|0,y=y+Math.imul(De,Tt)|0;var Xc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Xc>>>26)|0,Xc&=67108863,R=Math.imul(W,yt),d=Math.imul(W,gt),d=d+Math.imul(Q,yt)|0,y=Math.imul(Q,gt),R=R+Math.imul(w,bt)|0,d=d+Math.imul(w,wt)|0,d=d+Math.imul(O,bt)|0,y=y+Math.imul(O,wt)|0,R=R+Math.imul(it,vt)|0,d=d+Math.imul(it,xt)|0,d=d+Math.imul(I,vt)|0,y=y+Math.imul(I,xt)|0,R=R+Math.imul(Ze,_t)|0,d=d+Math.imul(Ze,Et)|0,d=d+Math.imul(st,_t)|0,y=y+Math.imul(st,Et)|0,R=R+Math.imul(Je,At)|0,d=d+Math.imul(Je,St)|0,d=d+Math.imul(Ge,At)|0,y=y+Math.imul(Ge,St)|0,R=R+Math.imul(We,It)|0,d=d+Math.imul(We,Tt)|0,d=d+Math.imul(rt,It)|0,y=y+Math.imul(rt,Tt)|0;var Jc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Jc>>>26)|0,Jc&=67108863,R=Math.imul(W,bt),d=Math.imul(W,wt),d=d+Math.imul(Q,bt)|0,y=Math.imul(Q,wt),R=R+Math.imul(w,vt)|0,d=d+Math.imul(w,xt)|0,d=d+Math.imul(O,vt)|0,y=y+Math.imul(O,xt)|0,R=R+Math.imul(it,_t)|0,d=d+Math.imul(it,Et)|0,d=d+Math.imul(I,_t)|0,y=y+Math.imul(I,Et)|0,R=R+Math.imul(Ze,At)|0,d=d+Math.imul(Ze,St)|0,d=d+Math.imul(st,At)|0,y=y+Math.imul(st,St)|0,R=R+Math.imul(Je,It)|0,d=d+Math.imul(Je,Tt)|0,d=d+Math.imul(Ge,It)|0,y=y+Math.imul(Ge,Tt)|0;var Qc=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(Qc>>>26)|0,Qc&=67108863,R=Math.imul(W,vt),d=Math.imul(W,xt),d=d+Math.imul(Q,vt)|0,y=Math.imul(Q,xt),R=R+Math.imul(w,_t)|0,d=d+Math.imul(w,Et)|0,d=d+Math.imul(O,_t)|0,y=y+Math.imul(O,Et)|0,R=R+Math.imul(it,At)|0,d=d+Math.imul(it,St)|0,d=d+Math.imul(I,At)|0,y=y+Math.imul(I,St)|0,R=R+Math.imul(Ze,It)|0,d=d+Math.imul(Ze,Tt)|0,d=d+Math.imul(st,It)|0,y=y+Math.imul(st,Tt)|0;var eu=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(eu>>>26)|0,eu&=67108863,R=Math.imul(W,_t),d=Math.imul(W,Et),d=d+Math.imul(Q,_t)|0,y=Math.imul(Q,Et),R=R+Math.imul(w,At)|0,d=d+Math.imul(w,St)|0,d=d+Math.imul(O,At)|0,y=y+Math.imul(O,St)|0,R=R+Math.imul(it,It)|0,d=d+Math.imul(it,Tt)|0,d=d+Math.imul(I,It)|0,y=y+Math.imul(I,Tt)|0;var tu=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(tu>>>26)|0,tu&=67108863,R=Math.imul(W,At),d=Math.imul(W,St),d=d+Math.imul(Q,At)|0,y=Math.imul(Q,St),R=R+Math.imul(w,It)|0,d=d+Math.imul(w,Tt)|0,d=d+Math.imul(O,It)|0,y=y+Math.imul(O,Tt)|0;var nu=(F+R|0)+((d&8191)<<13)|0;F=(y+(d>>>13)|0)+(nu>>>26)|0,nu&=67108863,R=Math.imul(W,It),d=Math.imul(W,Tt),d=d+Math.imul(Q,It)|0,y=Math.imul(Q,Tt);var ru=(F+R|0)+((d&8191)<<13)|0;return F=(y+(d>>>13)|0)+(ru>>>26)|0,ru&=67108863,P[0]=Fc,P[1]=zc,P[2]=Dc,P[3]=jc,P[4]=qc,P[5]=Vc,P[6]=Hc,P[7]=Gc,P[8]=Kc,P[9]=Wc,P[10]=Zc,P[11]=Yc,P[12]=Xc,P[13]=Jc,P[14]=Qc,P[15]=eu,P[16]=tu,P[17]=nu,P[18]=ru,F!==0&&(P[19]=F,v.length++),v};Math.imul||(M=k);function C(x,l,h){h.negative=l.negative^x.negative,h.length=x.length+l.length;for(var v=0,A=0,S=0;S<h.length-1;S++){var P=A;A=0;for(var F=v&67108863,R=Math.min(S,l.length-1),d=Math.max(0,S-x.length+1);d<=R;d++){var y=S-d,B=x.words[y]|0,N=l.words[d]|0,G=B*N,J=G&67108863;P=P+(G/67108864|0)|0,J=J+F|0,F=J&67108863,P=P+(J>>>26)|0,A+=P>>>26,P&=67108863}h.words[S]=F,v=P,P=A}return v!==0?h.words[S]=v:h.length--,h._strip()}function U(x,l,h){return C(x,l,h)}i.prototype.mulTo=function(l,h){var v,A=this.length+l.length;return this.length===10&&l.length===10?v=M(this,l,h):A<63?v=k(this,l,h):A<1024?v=C(this,l,h):v=U(this,l,h),v},i.prototype.mul=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),this.mulTo(l,h)},i.prototype.mulf=function(l){var h=new i(null);return h.words=new Array(this.length+l.length),U(this,l,h)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){var h=l<0;h&&(l=-l),r(typeof l=="number"),r(l<67108864);for(var v=0,A=0;A<this.length;A++){var S=(this.words[A]|0)*l,P=(S&67108863)+(v&67108863);v>>=26,v+=S/67108864|0,v+=P>>>26,this.words[A]=P&67108863}return v!==0&&(this.words[A]=v,this.length++),this.length=l===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var h=T(l);if(h.length===0)return new i(1);for(var v=this,A=0;A<h.length&&h[A]===0;A++,v=v.sqr());if(++A<h.length)for(var S=v.sqr();A<h.length;A++,S=S.sqr())h[A]!==0&&(v=v.mul(S));return v},i.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var h=l%26,v=(l-h)/26,A=67108863>>>26-h<<26-h,S;if(h!==0){var P=0;for(S=0;S<this.length;S++){var F=this.words[S]&A,R=(this.words[S]|0)-F<<h;this.words[S]=R|P,P=F>>>26-h}P&&(this.words[S]=P,this.length++)}if(v!==0){for(S=this.length-1;S>=0;S--)this.words[S+v]=this.words[S];for(S=0;S<v;S++)this.words[S]=0;this.length+=v}return this._strip()},i.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,h,v){r(typeof l=="number"&&l>=0);var A;h?A=(h-h%26)/26:A=0;var S=l%26,P=Math.min((l-S)/26,this.length),F=67108863^67108863>>>S<<S,R=v;if(A-=P,A=Math.max(0,A),R){for(var d=0;d<P;d++)R.words[d]=this.words[d];R.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var y=0;for(d=this.length-1;d>=0&&(y!==0||d>=A);d--){var B=this.words[d]|0;this.words[d]=y<<26-S|B>>>S,y=B&F}return R&&y!==0&&(R.words[R.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(l,h,v){return r(this.negative===0),this.iushrn(l,h,v)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var h=l%26,v=(l-h)/26,A=1<<h;if(this.length<=v)return!1;var S=this.words[v];return!!(S&A)},i.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var h=l%26,v=(l-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(h!==0&&v++,this.length=Math.min(v,this.length),h!==0){var A=67108863^67108863>>>h<<h;this.words[this.length-1]&=A}return this._strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,h,v){var A=l.length+v,S;this._expand(A);var P,F=0;for(S=0;S<l.length;S++){P=(this.words[S+v]|0)+F;var R=(l.words[S]|0)*h;P-=R&67108863,F=(P>>26)-(R/67108864|0),this.words[S+v]=P&67108863}for(;S<this.length-v;S++)P=(this.words[S+v]|0)+F,F=P>>26,this.words[S+v]=P&67108863;if(F===0)return this._strip();for(r(F===-1),F=0,S=0;S<this.length;S++)P=-(this.words[S]|0)+F,F=P>>26,this.words[S]=P&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(l,h){var v=this.length-l.length,A=this.clone(),S=l,P=S.words[S.length-1]|0,F=this._countBits(P);v=26-F,v!==0&&(S=S.ushln(v),A.iushln(v),P=S.words[S.length-1]|0);var R=A.length-S.length,d;if(h!=="mod"){d=new i(null),d.length=R+1,d.words=new Array(d.length);for(var y=0;y<d.length;y++)d.words[y]=0}var B=A.clone()._ishlnsubmul(S,1,R);B.negative===0&&(A=B,d&&(d.words[R]=1));for(var N=R-1;N>=0;N--){var G=(A.words[S.length+N]|0)*67108864+(A.words[S.length+N-1]|0);for(G=Math.min(G/P|0,67108863),A._ishlnsubmul(S,G,N);A.negative!==0;)G--,A.negative=0,A._ishlnsubmul(S,1,N),A.isZero()||(A.negative^=1);d&&(d.words[N]=G)}return d&&d._strip(),A._strip(),h!=="div"&&v!==0&&A.iushrn(v),{div:d||null,mod:A}},i.prototype.divmod=function(l,h,v){if(r(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var A,S,P;return this.negative!==0&&l.negative===0?(P=this.neg().divmod(l,h),h!=="mod"&&(A=P.div.neg()),h!=="div"&&(S=P.mod.neg(),v&&S.negative!==0&&S.iadd(l)),{div:A,mod:S}):this.negative===0&&l.negative!==0?(P=this.divmod(l.neg(),h),h!=="mod"&&(A=P.div.neg()),{div:A,mod:P.mod}):(this.negative&l.negative)!==0?(P=this.neg().divmod(l.neg(),h),h!=="div"&&(S=P.mod.neg(),v&&S.negative!==0&&S.isub(l)),{div:P.div,mod:S}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?h==="div"?{div:this.divn(l.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modrn(l.words[0]))}:this._wordDiv(l,h)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var h=this.divmod(l);if(h.mod.isZero())return h.div;var v=h.div.negative!==0?h.mod.isub(l):h.mod,A=l.ushrn(1),S=l.andln(1),P=v.cmp(A);return P<0||S===1&&P===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(l){var h=l<0;h&&(l=-l),r(l<=67108863);for(var v=(1<<26)%l,A=0,S=this.length-1;S>=0;S--)A=(v*A+(this.words[S]|0))%l;return h?-A:A},i.prototype.modn=function(l){return this.modrn(l)},i.prototype.idivn=function(l){var h=l<0;h&&(l=-l),r(l<=67108863);for(var v=0,A=this.length-1;A>=0;A--){var S=(this.words[A]|0)+v*67108864;this.words[A]=S/l|0,v=S%l}return this._strip(),h?this.ineg():this},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var h=this,v=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var A=new i(1),S=new i(0),P=new i(0),F=new i(1),R=0;h.isEven()&&v.isEven();)h.iushrn(1),v.iushrn(1),++R;for(var d=v.clone(),y=h.clone();!h.isZero();){for(var B=0,N=1;(h.words[0]&N)===0&&B<26;++B,N<<=1);if(B>0)for(h.iushrn(B);B-- >0;)(A.isOdd()||S.isOdd())&&(A.iadd(d),S.isub(y)),A.iushrn(1),S.iushrn(1);for(var G=0,J=1;(v.words[0]&J)===0&&G<26;++G,J<<=1);if(G>0)for(v.iushrn(G);G-- >0;)(P.isOdd()||F.isOdd())&&(P.iadd(d),F.isub(y)),P.iushrn(1),F.iushrn(1);h.cmp(v)>=0?(h.isub(v),A.isub(P),S.isub(F)):(v.isub(h),P.isub(A),F.isub(S))}return{a:P,b:F,gcd:v.iushln(R)}},i.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var h=this,v=l.clone();h.negative!==0?h=h.umod(l):h=h.clone();for(var A=new i(1),S=new i(0),P=v.clone();h.cmpn(1)>0&&v.cmpn(1)>0;){for(var F=0,R=1;(h.words[0]&R)===0&&F<26;++F,R<<=1);if(F>0)for(h.iushrn(F);F-- >0;)A.isOdd()&&A.iadd(P),A.iushrn(1);for(var d=0,y=1;(v.words[0]&y)===0&&d<26;++d,y<<=1);if(d>0)for(v.iushrn(d);d-- >0;)S.isOdd()&&S.iadd(P),S.iushrn(1);h.cmp(v)>=0?(h.isub(v),A.isub(S)):(v.isub(h),S.isub(A))}var B;return h.cmpn(1)===0?B=A:B=S,B.cmpn(0)<0&&B.iadd(l),B},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var h=this.clone(),v=l.clone();h.negative=0,v.negative=0;for(var A=0;h.isEven()&&v.isEven();A++)h.iushrn(1),v.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;v.isEven();)v.iushrn(1);var S=h.cmp(v);if(S<0){var P=h;h=v,v=P}else if(S===0||v.cmpn(1)===0)break;h.isub(v)}while(!0);return v.iushln(A)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){r(typeof l=="number");var h=l%26,v=(l-h)/26,A=1<<h;if(this.length<=v)return this._expand(v+1),this.words[v]|=A,this;for(var S=A,P=v;S!==0&&P<this.length;P++){var F=this.words[P]|0;F+=S,S=F>>>26,F&=67108863,this.words[P]=F}return S!==0&&(this.words[P]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var h=l<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var v;if(this.length>1)v=1;else{h&&(l=-l),r(l<=67108863,"Number is too big");var A=this.words[0]|0;v=A===l?0:A<l?-1:1}return this.negative!==0?-v|0:v},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var h=this.ucmp(l);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var h=0,v=this.length-1;v>=0;v--){var A=this.words[v]|0,S=l.words[v]|0;if(A!==S){A<S?h=-1:A>S&&(h=1);break}}return h},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new z(l)},i.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var D={k256:null,p224:null,p192:null,p25519:null};function V(x,l){this.name=x,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},V.prototype.ireduce=function(l){var h=l,v;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),v=h.bitLength();while(v>this.n);var A=v<this.n?-1:h.ucmp(this.p);return A===0?(h.words[0]=0,h.length=1):A>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},V.prototype.split=function(l,h){l.iushrn(this.n,0,h)},V.prototype.imulK=function(l){return l.imul(this.k)};function K(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(K,V),K.prototype.split=function(l,h){for(var v=4194303,A=Math.min(l.length,9),S=0;S<A;S++)h.words[S]=l.words[S];if(h.length=A,l.length<=9){l.words[0]=0,l.length=1;return}var P=l.words[9];for(h.words[h.length++]=P&v,S=10;S<l.length;S++){var F=l.words[S]|0;l.words[S-10]=(F&v)<<4|P>>>22,P=F}P>>>=22,l.words[S-10]=P,P===0&&l.length>10?l.length-=10:l.length-=9},K.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var h=0,v=0;v<l.length;v++){var A=l.words[v]|0;h+=A*977,l.words[v]=h&67108863,h=A*64+(h/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function X(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(X,V);function L(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(L,V);function $(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s($,V),$.prototype.imulK=function(l){for(var h=0,v=0;v<l.length;v++){var A=(l.words[v]|0)*19+h,S=A&67108863;A>>>=26,l.words[v]=S,h=A}return h!==0&&(l.words[l.length++]=h),l},i._prime=function(l){if(D[l])return D[l];var h;if(l==="k256")h=new K;else if(l==="p224")h=new X;else if(l==="p192")h=new L;else if(l==="p25519")h=new $;else throw new Error("Unknown prime "+l);return D[l]=h,h};function z(x){if(typeof x=="string"){var l=i._prime(x);this.m=l.p,this.prime=l}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}z.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},z.prototype._verify2=function(l,h){r((l.negative|h.negative)===0,"red works only with positives"),r(l.red&&l.red===h.red,"red works only with red numbers")},z.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(f(l,l.umod(this.m)._forceRed(this)),l)},z.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},z.prototype.add=function(l,h){this._verify2(l,h);var v=l.add(h);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},z.prototype.iadd=function(l,h){this._verify2(l,h);var v=l.iadd(h);return v.cmp(this.m)>=0&&v.isub(this.m),v},z.prototype.sub=function(l,h){this._verify2(l,h);var v=l.sub(h);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},z.prototype.isub=function(l,h){this._verify2(l,h);var v=l.isub(h);return v.cmpn(0)<0&&v.iadd(this.m),v},z.prototype.shl=function(l,h){return this._verify1(l),this.imod(l.ushln(h))},z.prototype.imul=function(l,h){return this._verify2(l,h),this.imod(l.imul(h))},z.prototype.mul=function(l,h){return this._verify2(l,h),this.imod(l.mul(h))},z.prototype.isqr=function(l){return this.imul(l,l.clone())},z.prototype.sqr=function(l){return this.mul(l,l)},z.prototype.sqrt=function(l){if(l.isZero())return l.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var v=this.m.add(new i(1)).iushrn(2);return this.pow(l,v)}for(var A=this.m.subn(1),S=0;!A.isZero()&&A.andln(1)===0;)S++,A.iushrn(1);r(!A.isZero());var P=new i(1).toRed(this),F=P.redNeg(),R=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,R).cmp(F)!==0;)d.redIAdd(F);for(var y=this.pow(d,A),B=this.pow(l,A.addn(1).iushrn(1)),N=this.pow(l,A),G=S;N.cmp(P)!==0;){for(var J=N,oe=0;J.cmp(P)!==0;oe++)J=J.redSqr();r(oe<G);var ae=this.pow(y,new i(1).iushln(G-oe-1));B=B.redMul(ae),y=ae.redSqr(),N=N.redMul(y),G=oe}return B},z.prototype.invm=function(l){var h=l._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},z.prototype.pow=function(l,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return l.clone();var v=4,A=new Array(1<<v);A[0]=new i(1).toRed(this),A[1]=l;for(var S=2;S<A.length;S++)A[S]=this.mul(A[S-1],l);var P=A[0],F=0,R=0,d=h.bitLength()%26;for(d===0&&(d=26),S=h.length-1;S>=0;S--){for(var y=h.words[S],B=d-1;B>=0;B--){var N=y>>B&1;if(P!==A[0]&&(P=this.sqr(P)),N===0&&F===0){R=0;continue}F<<=1,F|=N,R++,!(R!==v&&(S!==0||B!==0))&&(P=this.mul(P,A[F]),R=0,F=0)}d=26}return P},z.prototype.convertTo=function(l){var h=l.umod(this.m);return h===l?h.clone():h},z.prototype.convertFrom=function(l){var h=l.clone();return h.red=null,h},i.mont=function(l){return new j(l)};function j(x){z.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(j,z),j.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},j.prototype.convertFrom=function(l){var h=this.imod(l.mul(this.rinv));return h.red=null,h},j.prototype.imul=function(l,h){if(l.isZero()||h.isZero())return l.words[0]=0,l.length=1,l;var v=l.imul(h),A=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=v.isub(A).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},j.prototype.mul=function(l,h){if(l.isZero()||h.isZero())return new i(0)._forceRed(this);var v=l.mul(h),A=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=v.isub(A).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},j.prototype.invm=function(l){var h=this.imod(l._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(e,E6)})(ua)),ua.exports}var A6=Lm();const D0=Wa(A6);var ta={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var j0;function $m(){return j0||(j0=1,(function(e,t){var n=Cf(),r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(ta,ta.exports)),ta.exports}var fu,q0;function S6(){if(q0)return fu;q0=1;var e=$m().Buffer;function t(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function p(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=e.from(E)),!e.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,k=0,M=0,C=E.length;M!==C&&E[M]===0;)M++,T++;for(var U=(C-M)*m+1>>>0,D=new Uint8Array(U);M!==C;){for(var V=E[M],K=0,X=U-1;(V!==0||K<k)&&X!==-1;X--,K++)V+=256*D[X]>>>0,D[X]=V%c>>>0,V=V/c>>>0;if(V!==0)throw new Error("Non-zero carry");k=K,M++}for(var L=U-k;L!==U&&D[L]===0;)L++;for(var $=u.repeat(T);L<U;++L)$+=n.charAt(D[L]);return $}function b(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return e.alloc(0);for(var T=0,k=0,M=0;E[T]===u;)k++,T++;for(var C=(E.length-T)*f+1>>>0,U=new Uint8Array(C);T<E.length;){var D=E.charCodeAt(T);if(D>255)return;var V=r[D];if(V===255)return;for(var K=0,X=C-1;(V!==0||K<M)&&X!==-1;X--,K++)V+=c*U[X]>>>0,U[X]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");M=K,T++}for(var L=C-M;L!==C&&U[L]===0;)L++;var $=e.allocUnsafe(k+(C-L));$.fill(0,0,k);for(var z=k;L!==C;)$[z++]=U[L++];return $}function _(E){var T=b(E);if(T)return T;throw new Error("Non-base"+c+" character")}return{encode:p,decodeUnsafe:b,decode:_}}return fu=t,fu}var du,V0;function I6(){if(V0)return du;V0=1;var e=S6(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return du=e(t),du}var T6=I6();const Dt=Wa(T6),vl=Of;var je={},hu,H0;function B6(){if(H0)return hu;H0=1;var e=$m().Buffer;function t(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),f=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function p(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=e.from(E)),!e.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,k=0,M=0,C=E.length;M!==C&&E[M]===0;)M++,T++;for(var U=(C-M)*m+1>>>0,D=new Uint8Array(U);M!==C;){for(var V=E[M],K=0,X=U-1;(V!==0||K<k)&&X!==-1;X--,K++)V+=256*D[X]>>>0,D[X]=V%c>>>0,V=V/c>>>0;if(V!==0)throw new Error("Non-zero carry");k=K,M++}for(var L=U-k;L!==U&&D[L]===0;)L++;for(var $=u.repeat(T);L<U;++L)$+=n.charAt(D[L]);return $}function b(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return e.alloc(0);for(var T=0,k=0,M=0;E[T]===u;)k++,T++;for(var C=(E.length-T)*f+1>>>0,U=new Uint8Array(C);T<E.length;){var D=E.charCodeAt(T);if(D>255)return;var V=r[D];if(V===255)return;for(var K=0,X=C-1;(V!==0||K<M)&&X!==-1;X--,K++)V+=c*U[X]>>>0,U[X]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");M=K,T++}for(var L=C-M;L!==C&&U[L]===0;)L++;var $=e.allocUnsafe(k+(C-L));$.fill(0,0,k);for(var z=k;L!==C;)$[z++]=U[L++];return $}function _(E){var T=b(E);if(T)return T;throw new Error("Non-base"+c+" character")}return{encode:p,decodeUnsafe:b,decode:_}}return hu=t,hu}var pu,G0;function R6(){if(G0)return pu;G0=1;var e=B6(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return pu=e(t),pu}function fr(e,t,n){return t<=e&&e<=n}function Ja(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function k6(e){for(var t=String(e),n=t.length,r=0,s=[];r<n;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=e.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function C6(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var ba=-1;function Ff(e){this.tokens=[].slice.call(e)}Ff.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ba},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var ei=-1;function mu(e,t){if(e)throw TypeError("Decoder error");return t||65533}var wa="utf-8";function va(e,t){if(!(this instanceof va))return new va(e,t);if(e=e!==void 0?String(e).toLowerCase():wa,e!==wa)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ja(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}va.prototype={decode:function(t,n){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),n=Ja(n),this._streaming||(this._decoder=new P6({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new Ff(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==ei);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===ei)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),C6(i)}};function xa(e,t){if(!(this instanceof xa))return new xa(e,t);if(e=e!==void 0?String(e).toLowerCase():wa,e!==wa)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ja(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}xa.prototype={encode:function(t,n){t=t?String(t):"",n=Ja(n),this._streaming||(this._encoder=new N6(this._options)),this._streaming=!!n.stream;for(var r=[],s=new Ff(k6(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==ei);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==ei;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function P6(e){var t=e.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===ba&&s!==0)return s=0,mu(t);if(c===ba)return ei;if(s===0){if(fr(c,0,127))return c;if(fr(c,194,223))s=1,n=c-192;else if(fr(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(fr(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return mu(t);return n=n<<6*s,null}if(!fr(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),mu(t);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var u=n;return n=s=r=0,u}}function N6(e){e.fatal,this.handler=function(t,n){if(n===ba)return ei;if(fr(n,0,127))return n;var r,s;fr(n,128,2047)?(r=1,s=192):fr(n,2048,65535)?(r=2,s=224):fr(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const O6=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:va,TextEncoder:xa},Symbol.toStringTag,{value:"Module"})),M6=kf(O6);var K0;function L6(){if(K0)return je;K0=1;var e=je&&je.__createBinding||(Object.create?(function(L,$,z,j){j===void 0&&(j=z),Object.defineProperty(L,j,{enumerable:!0,get:function(){return $[z]}})}):(function(L,$,z,j){j===void 0&&(j=z),L[j]=$[z]})),t=je&&je.__setModuleDefault||(Object.create?(function(L,$){Object.defineProperty(L,"default",{enumerable:!0,value:$})}):function(L,$){L.default=$}),n=je&&je.__decorate||function(L,$,z,j){var x=arguments.length,l=x<3?$:j===null?j=Object.getOwnPropertyDescriptor($,z):j,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(L,$,z,j);else for(var v=L.length-1;v>=0;v--)(h=L[v])&&(l=(x<3?h(l):x>3?h($,z,l):h($,z))||l);return x>3&&l&&Object.defineProperty($,z,l),l},r=je&&je.__importStar||function(L){if(L&&L.__esModule)return L;var $={};if(L!=null)for(var z in L)z!=="default"&&Object.hasOwnProperty.call(L,z)&&e($,L,z);return t($,L),$},s=je&&je.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(je,"__esModule",{value:!0}),je.deserializeUnchecked=je.deserialize=je.serialize=je.BinaryReader=je.BinaryWriter=je.BorshError=je.baseDecode=je.baseEncode=void 0;const i=s(Lm()),o=s(R6()),a=r(M6),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,u=new c("utf-8",{fatal:!0});function f(L){return typeof L=="string"&&(L=Buffer.from(L,"utf8")),o.default.encode(Buffer.from(L))}je.baseEncode=f;function m(L){return Buffer.from(o.default.decode(L))}je.baseDecode=m;const p=1024;class b extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}je.BorshError=b;class _{constructor(){this.buf=Buffer.alloc(p),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(p)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",64)))}writeBuffer($){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),$,Buffer.alloc(p)]),this.length+=$.length}writeString($){this.maybeResize();const z=Buffer.from($,"utf8");this.writeU32(z.length),this.writeBuffer(z)}writeFixedArray($){this.writeBuffer(Buffer.from($))}writeArray($,z){this.maybeResize(),this.writeU32($.length);for(const j of $)this.maybeResize(),z(j)}toArray(){return this.buf.subarray(0,this.length)}}je.BinaryWriter=_;function E(L,$,z){const j=z.value;z.value=function(...x){try{return j.apply(this,x)}catch(l){if(l instanceof RangeError){const h=l.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(h)>=0)throw new b("Reached the end of buffer when deserializing")}throw l}}}class T{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new i.default($,"le")}readU128(){const $=this.readBuffer(16);return new i.default($,"le")}readU256(){const $=this.readBuffer(32);return new i.default($,"le")}readU512(){const $=this.readBuffer(64);return new i.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new b(`Expected buffer length ${$} isn't within bounds`);const z=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,z}readString(){const $=this.readU32(),z=this.readBuffer($);try{return u.decode(z)}catch(j){throw new b(`Error decoding UTF-8 string: ${j}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const z=this.readU32(),j=Array();for(let x=0;x<z;++x)j.push($());return j}}n([E],T.prototype,"readU8",null),n([E],T.prototype,"readU16",null),n([E],T.prototype,"readU32",null),n([E],T.prototype,"readU64",null),n([E],T.prototype,"readU128",null),n([E],T.prototype,"readU256",null),n([E],T.prototype,"readU512",null),n([E],T.prototype,"readString",null),n([E],T.prototype,"readFixedArray",null),n([E],T.prototype,"readArray",null),je.BinaryReader=T;function k(L){return L.charAt(0).toUpperCase()+L.slice(1)}function M(L,$,z,j,x){try{if(typeof j=="string")x[`write${k(j)}`](z);else if(j instanceof Array)if(typeof j[0]=="number"){if(z.length!==j[0])throw new b(`Expecting byte array of length ${j[0]}, but got ${z.length} bytes`);x.writeFixedArray(z)}else if(j.length===2&&typeof j[1]=="number"){if(z.length!==j[1])throw new b(`Expecting byte array of length ${j[1]}, but got ${z.length} bytes`);for(let l=0;l<j[1];l++)M(L,null,z[l],j[0],x)}else x.writeArray(z,l=>{M(L,$,l,j[0],x)});else if(j.kind!==void 0)switch(j.kind){case"option":{z==null?x.writeU8(0):(x.writeU8(1),M(L,$,z,j.type,x));break}case"map":{x.writeU32(z.size),z.forEach((l,h)=>{M(L,$,h,j.key,x),M(L,$,l,j.value,x)});break}default:throw new b(`FieldType ${j} unrecognized`)}else C(L,z,x)}catch(l){throw l instanceof b&&l.addToFieldPath($),l}}function C(L,$,z){if(typeof $.borshSerialize=="function"){$.borshSerialize(z);return}const j=L.get($.constructor);if(!j)throw new b(`Class ${$.constructor.name} is missing in schema`);if(j.kind==="struct")j.fields.map(([x,l])=>{M(L,x,$[x],l,z)});else if(j.kind==="enum"){const x=$[j.field];for(let l=0;l<j.values.length;++l){const[h,v]=j.values[l];if(h===x){z.writeU8(l),M(L,h,$[h],v,z);break}}}else throw new b(`Unexpected schema kind: ${j.kind} for ${$.constructor.name}`)}function U(L,$,z=_){const j=new z;return C(L,$,j),j.toArray()}je.serialize=U;function D(L,$,z,j){try{if(typeof z=="string")return j[`read${k(z)}`]();if(z instanceof Array){if(typeof z[0]=="number")return j.readFixedArray(z[0]);if(typeof z[1]=="number"){const x=[];for(let l=0;l<z[1];l++)x.push(D(L,null,z[0],j));return x}else return j.readArray(()=>D(L,$,z[0],j))}if(z.kind==="option")return j.readU8()?D(L,$,z.type,j):void 0;if(z.kind==="map"){let x=new Map;const l=j.readU32();for(let h=0;h<l;h++){const v=D(L,$,z.key,j),A=D(L,$,z.value,j);x.set(v,A)}return x}return V(L,z,j)}catch(x){throw x instanceof b&&x.addToFieldPath($),x}}function V(L,$,z){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(z);const j=L.get($);if(!j)throw new b(`Class ${$.name} is missing in schema`);if(j.kind==="struct"){const x={};for(const[l,h]of L.get($).fields)x[l]=D(L,l,h,z);return new $(x)}if(j.kind==="enum"){const x=z.readU8();if(x>=j.values.length)throw new b(`Enum index: ${x} is out of range`);const[l,h]=j.values[x],v=D(L,l,h,z);return new $({[l]:v})}throw new b(`Unexpected schema kind: ${j.kind} for ${$.constructor.name}`)}function K(L,$,z,j=T){const x=new j(z),l=V(L,$,x);if(x.offset<z.length)throw new b(`Unexpected ${z.length-x.offset} bytes after deserialized data`);return l}je.deserialize=K;function X(L,$,z,j=T){const x=new j(z);return V(L,$,x)}return je.deserializeUnchecked=X,je}var yu=L6(),Y={},W0;function $6(){if(W0)return Y;W0=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.s16=Y.s8=Y.nu64be=Y.u48be=Y.u40be=Y.u32be=Y.u24be=Y.u16be=Y.nu64=Y.u48=Y.u40=Y.u32=Y.u24=Y.u16=Y.u8=Y.offset=Y.greedy=Y.Constant=Y.UTF8=Y.CString=Y.Blob=Y.Boolean=Y.BitField=Y.BitStructure=Y.VariantLayout=Y.Union=Y.UnionLayoutDiscriminator=Y.UnionDiscriminator=Y.Structure=Y.Sequence=Y.DoubleBE=Y.Double=Y.FloatBE=Y.Float=Y.NearInt64BE=Y.NearInt64=Y.NearUInt64BE=Y.NearUInt64=Y.IntBE=Y.Int=Y.UIntBE=Y.UInt=Y.OffsetLayout=Y.GreedyCount=Y.ExternalLayout=Y.bindConstructorLayout=Y.nameWithProperty=Y.Layout=Y.uint8ArrayToBuffer=Y.checkUint8Array=void 0,Y.constant=Y.utf8=Y.cstr=Y.blob=Y.unionLayoutDiscriminator=Y.union=Y.seq=Y.bits=Y.struct=Y.f64be=Y.f64=Y.f32be=Y.f32=Y.ns64be=Y.s48be=Y.s40be=Y.s32be=Y.s24be=Y.s16be=Y.ns64=Y.s48=Y.s40=Y.s32=Y.s24=void 0;const e=Cf();function t(d){if(!(d instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Y.checkUint8Array=t;function n(d){return t(d),e.Buffer.from(d.buffer,d.byteOffset,d.length)}Y.uint8ArrayToBuffer=n;let r=class{constructor(y,B){if(!Number.isInteger(y))throw new TypeError("span must be an integer");this.span=y,this.property=B}makeDestinationObject(){return{}}getSpan(y,B){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(y){const B=Object.create(this.constructor.prototype);return Object.assign(B,this),B.property=y,B}fromArray(y){}};Y.Layout=r;function s(d,y){return y.property?d+"["+y.property+"]":d}Y.nameWithProperty=s;function i(d,y){if(typeof d!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(d,"layout_"))throw new Error("Class is already bound to a layout");if(!(y&&y instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(y,"boundConstructor_"))throw new Error("layout is already bound to a constructor");d.layout_=y,y.boundConstructor_=d,y.makeDestinationObject=(()=>new d),Object.defineProperty(d.prototype,"encode",{value(B,N){return y.encode(this,B,N)},writable:!0}),Object.defineProperty(d,"decode",{value(B,N){return y.decode(B,N)},writable:!0})}Y.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Y.ExternalLayout=o;class a extends o{constructor(y=1,B){if(!Number.isInteger(y)||0>=y)throw new TypeError("elementSpan must be a (positive) integer");super(-1,B),this.elementSpan=y}isCount(){return!0}decode(y,B=0){t(y);const N=y.length-B;return Math.floor(N/this.elementSpan)}encode(y,B,N){return 0}}Y.GreedyCount=a;class c extends o{constructor(y,B=0,N){if(!(y instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(B))throw new TypeError("offset must be integer or undefined");super(y.span,N||y.property),this.layout=y,this.offset=B}isCount(){return this.layout instanceof u||this.layout instanceof f}decode(y,B=0){return this.layout.decode(y,B+this.offset)}encode(y,B,N=0){return this.layout.encode(y,B,N+this.offset)}}Y.OffsetLayout=c;class u extends r{constructor(y,B){if(super(y,B),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,B=0){return n(y).readUIntLE(B,this.span)}encode(y,B,N=0){return n(B).writeUIntLE(y,N,this.span),this.span}}Y.UInt=u;class f extends r{constructor(y,B){if(super(y,B),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,B=0){return n(y).readUIntBE(B,this.span)}encode(y,B,N=0){return n(B).writeUIntBE(y,N,this.span),this.span}}Y.UIntBE=f;class m extends r{constructor(y,B){if(super(y,B),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,B=0){return n(y).readIntLE(B,this.span)}encode(y,B,N=0){return n(B).writeIntLE(y,N,this.span),this.span}}Y.Int=m;class p extends r{constructor(y,B){if(super(y,B),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,B=0){return n(y).readIntBE(B,this.span)}encode(y,B,N=0){return n(B).writeIntBE(y,N,this.span),this.span}}Y.IntBE=p;const b=Math.pow(2,32);function _(d){const y=Math.floor(d/b),B=d-y*b;return{hi32:y,lo32:B}}function E(d,y){return d*b+y}class T extends r{constructor(y){super(8,y)}decode(y,B=0){const N=n(y),G=N.readUInt32LE(B),J=N.readUInt32LE(B+4);return E(J,G)}encode(y,B,N=0){const G=_(y),J=n(B);return J.writeUInt32LE(G.lo32,N),J.writeUInt32LE(G.hi32,N+4),8}}Y.NearUInt64=T;class k extends r{constructor(y){super(8,y)}decode(y,B=0){const N=n(y),G=N.readUInt32BE(B),J=N.readUInt32BE(B+4);return E(G,J)}encode(y,B,N=0){const G=_(y),J=n(B);return J.writeUInt32BE(G.hi32,N),J.writeUInt32BE(G.lo32,N+4),8}}Y.NearUInt64BE=k;class M extends r{constructor(y){super(8,y)}decode(y,B=0){const N=n(y),G=N.readUInt32LE(B),J=N.readInt32LE(B+4);return E(J,G)}encode(y,B,N=0){const G=_(y),J=n(B);return J.writeUInt32LE(G.lo32,N),J.writeInt32LE(G.hi32,N+4),8}}Y.NearInt64=M;class C extends r{constructor(y){super(8,y)}decode(y,B=0){const N=n(y),G=N.readInt32BE(B),J=N.readUInt32BE(B+4);return E(G,J)}encode(y,B,N=0){const G=_(y),J=n(B);return J.writeInt32BE(G.hi32,N),J.writeUInt32BE(G.lo32,N+4),8}}Y.NearInt64BE=C;class U extends r{constructor(y){super(4,y)}decode(y,B=0){return n(y).readFloatLE(B)}encode(y,B,N=0){return n(B).writeFloatLE(y,N),4}}Y.Float=U;class D extends r{constructor(y){super(4,y)}decode(y,B=0){return n(y).readFloatBE(B)}encode(y,B,N=0){return n(B).writeFloatBE(y,N),4}}Y.FloatBE=D;class V extends r{constructor(y){super(8,y)}decode(y,B=0){return n(y).readDoubleLE(B)}encode(y,B,N=0){return n(B).writeDoubleLE(y,N),8}}Y.Double=V;class K extends r{constructor(y){super(8,y)}decode(y,B=0){return n(y).readDoubleBE(B)}encode(y,B,N=0){return n(B).writeDoubleBE(y,N),8}}Y.DoubleBE=K;class X extends r{constructor(y,B,N){if(!(y instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(B instanceof o&&B.isCount()||Number.isInteger(B)&&0<=B))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let G=-1;!(B instanceof o)&&0<y.span&&(G=B*y.span),super(G,N),this.elementLayout=y,this.count=B}getSpan(y,B=0){if(0<=this.span)return this.span;let N=0,G=this.count;if(G instanceof o&&(G=G.decode(y,B)),0<this.elementLayout.span)N=G*this.elementLayout.span;else{let J=0;for(;J<G;)N+=this.elementLayout.getSpan(y,B+N),++J}return N}decode(y,B=0){const N=[];let G=0,J=this.count;for(J instanceof o&&(J=J.decode(y,B));G<J;)N.push(this.elementLayout.decode(y,B)),B+=this.elementLayout.getSpan(y,B),G+=1;return N}encode(y,B,N=0){const G=this.elementLayout,J=y.reduce((oe,ae)=>oe+G.encode(ae,B,N+oe),0);return this.count instanceof o&&this.count.encode(y.length,B,N),J}}Y.Sequence=X;class L extends r{constructor(y,B,N){if(!(Array.isArray(y)&&y.reduce((J,oe)=>J&&oe instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof B=="boolean"&&N===void 0&&(N=B,B=void 0);for(const J of y)if(0>J.span&&J.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let G=-1;try{G=y.reduce((J,oe)=>J+oe.getSpan(),0)}catch{}super(G,B),this.fields=y,this.decodePrefixes=!!N}getSpan(y,B=0){if(0<=this.span)return this.span;let N=0;try{N=this.fields.reduce((G,J)=>{const oe=J.getSpan(y,B);return B+=oe,G+oe},0)}catch{throw new RangeError("indeterminate span")}return N}decode(y,B=0){t(y);const N=this.makeDestinationObject();for(const G of this.fields)if(G.property!==void 0&&(N[G.property]=G.decode(y,B)),B+=G.getSpan(y,B),this.decodePrefixes&&y.length===B)break;return N}encode(y,B,N=0){const G=N;let J=0,oe=0;for(const ae of this.fields){let Be=ae.span;if(oe=0<Be?Be:0,ae.property!==void 0){const Pe=y[ae.property];Pe!==void 0&&(oe=ae.encode(Pe,B,N),0>Be&&(Be=ae.getSpan(B,N)))}J=N,N+=Be}return J+oe-G}fromArray(y){const B=this.makeDestinationObject();for(const N of this.fields)N.property!==void 0&&0<y.length&&(B[N.property]=y.shift());return B}layoutFor(y){if(typeof y!="string")throw new TypeError("property must be string");for(const B of this.fields)if(B.property===y)return B}offsetOf(y){if(typeof y!="string")throw new TypeError("property must be string");let B=0;for(const N of this.fields){if(N.property===y)return B;0>N.span?B=-1:0<=B&&(B+=N.span)}}}Y.Structure=L;class ${constructor(y){this.property=y}decode(y,B){throw new Error("UnionDiscriminator is abstract")}encode(y,B,N){throw new Error("UnionDiscriminator is abstract")}}Y.UnionDiscriminator=$;class z extends ${constructor(y,B){if(!(y instanceof o&&y.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(B||y.property||"variant"),this.layout=y}decode(y,B){return this.layout.decode(y,B)}encode(y,B,N){return this.layout.encode(y,B,N)}}Y.UnionLayoutDiscriminator=z;class j extends r{constructor(y,B,N){let G;if(y instanceof u||y instanceof f)G=new z(new c(y));else if(y instanceof o&&y.isCount())G=new z(y);else if(y instanceof $)G=y;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(B===void 0&&(B=null),!(B===null||B instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(B!==null){if(0>B.span)throw new Error("defaultLayout must have constant span");B.property===void 0&&(B=B.replicate("content"))}let J=-1;B&&(J=B.span,0<=J&&(y instanceof u||y instanceof f)&&(J+=G.layout.span)),super(J,N),this.discriminator=G,this.usesPrefixDiscriminator=y instanceof u||y instanceof f,this.defaultLayout=B,this.registry={};let oe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ae){return oe(ae)},this.configGetSourceVariant=function(ae){oe=ae.bind(this)}}getSpan(y,B=0){if(0<=this.span)return this.span;const N=this.getVariant(y,B);if(!N)throw new Error("unable to determine span for unrecognized variant");return N.getSpan(y,B)}defaultGetSourceVariant(y){if(Object.prototype.hasOwnProperty.call(y,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(y,this.defaultLayout.property))return;const B=this.registry[y[this.discriminator.property]];if(B&&(!B.layout||B.property&&Object.prototype.hasOwnProperty.call(y,B.property)))return B}else for(const B in this.registry){const N=this.registry[B];if(N.property&&Object.prototype.hasOwnProperty.call(y,N.property))return N}throw new Error("unable to infer src variant")}decode(y,B=0){let N;const G=this.discriminator,J=G.decode(y,B),oe=this.registry[J];if(oe===void 0){const ae=this.defaultLayout;let Be=0;this.usesPrefixDiscriminator&&(Be=G.layout.span),N=this.makeDestinationObject(),N[G.property]=J,N[ae.property]=ae.decode(y,B+Be)}else N=oe.decode(y,B);return N}encode(y,B,N=0){const G=this.getSourceVariant(y);if(G===void 0){const J=this.discriminator,oe=this.defaultLayout;let ae=0;return this.usesPrefixDiscriminator&&(ae=J.layout.span),J.encode(y[J.property],B,N),ae+oe.encode(y[oe.property],B,N+ae)}return G.encode(y,B,N)}addVariant(y,B,N){const G=new x(this,y,B,N);return this.registry[y]=G,G}getVariant(y,B=0){let N;return y instanceof Uint8Array?N=this.discriminator.decode(y,B):N=y,this.registry[N]}}Y.Union=j;class x extends r{constructor(y,B,N,G){if(!(y instanceof j))throw new TypeError("union must be a Union");if(!Number.isInteger(B)||0>B)throw new TypeError("variant must be a (non-negative) integer");if(typeof N=="string"&&G===void 0&&(G=N,N=null),N){if(!(N instanceof r))throw new TypeError("layout must be a Layout");if(y.defaultLayout!==null&&0<=N.span&&N.span>y.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof G!="string")throw new TypeError("variant must have a String property")}let J=y.span;0>y.span&&(J=N?N.span:0,0<=J&&y.usesPrefixDiscriminator&&(J+=y.discriminator.layout.span)),super(J,G),this.union=y,this.variant=B,this.layout=N||null}getSpan(y,B=0){if(0<=this.span)return this.span;let N=0;this.union.usesPrefixDiscriminator&&(N=this.union.discriminator.layout.span);let G=0;return this.layout&&(G=this.layout.getSpan(y,B+N)),N+G}decode(y,B=0){const N=this.makeDestinationObject();if(this!==this.union.getVariant(y,B))throw new Error("variant mismatch");let G=0;return this.union.usesPrefixDiscriminator&&(G=this.union.discriminator.layout.span),this.layout?N[this.property]=this.layout.decode(y,B+G):this.property?N[this.property]=!0:this.union.usesPrefixDiscriminator&&(N[this.union.discriminator.property]=this.variant),N}encode(y,B,N=0){let G=0;if(this.union.usesPrefixDiscriminator&&(G=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(y,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,B,N);let J=G;if(this.layout&&(this.layout.encode(y[this.property],B,N+G),J+=this.layout.getSpan(B,N+G),0<=this.union.span&&J>this.union.span))throw new Error("encoded variant overruns containing union");return J}fromArray(y){if(this.layout)return this.layout.fromArray(y)}}Y.VariantLayout=x;function l(d){return 0>d&&(d+=4294967296),d}class h extends r{constructor(y,B,N){if(!(y instanceof u||y instanceof f))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof B=="string"&&N===void 0&&(N=B,B=!1),4<y.span)throw new RangeError("word cannot exceed 32 bits");super(y.span,N),this.word=y,this.msb=!!B,this.fields=[];let G=0;this._packedSetValue=function(J){return G=l(J),this},this._packedGetValue=function(){return G}}decode(y,B=0){const N=this.makeDestinationObject(),G=this.word.decode(y,B);this._packedSetValue(G);for(const J of this.fields)J.property!==void 0&&(N[J.property]=J.decode(y));return N}encode(y,B,N=0){const G=this.word.decode(B,N);this._packedSetValue(G);for(const J of this.fields)if(J.property!==void 0){const oe=y[J.property];oe!==void 0&&J.encode(oe)}return this.word.encode(this._packedGetValue(),B,N)}addField(y,B){const N=new v(this,y,B);return this.fields.push(N),N}addBoolean(y){const B=new A(this,y);return this.fields.push(B),B}fieldFor(y){if(typeof y!="string")throw new TypeError("property must be string");for(const B of this.fields)if(B.property===y)return B}}Y.BitStructure=h;class v{constructor(y,B,N){if(!(y instanceof h))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(B)||0>=B)throw new TypeError("bits must be positive integer");const G=8*y.span,J=y.fields.reduce((oe,ae)=>oe+ae.bits,0);if(B+J>G)throw new Error("bits too long for span remainder ("+(G-J)+" of "+G+" remain)");this.container=y,this.bits=B,this.valueMask=(1<<B)-1,B===32&&(this.valueMask=4294967295),this.start=J,this.container.msb&&(this.start=G-J-B),this.wordMask=l(this.valueMask<<this.start),this.property=N}decode(y,B){const N=this.container._packedGetValue();return l(N&this.wordMask)>>>this.start}encode(y){if(typeof y!="number"||!Number.isInteger(y)||y!==l(y&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const B=this.container._packedGetValue(),N=l(y<<this.start);this.container._packedSetValue(l(B&~this.wordMask)|N)}}Y.BitField=v;class A extends v{constructor(y,B){super(y,1,B)}decode(y,B){return!!super.decode(y,B)}encode(y){typeof y=="boolean"&&(y=+y),super.encode(y)}}Y.Boolean=A;class S extends r{constructor(y,B){if(!(y instanceof o&&y.isCount()||Number.isInteger(y)&&0<=y))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let N=-1;y instanceof o||(N=y),super(N,B),this.length=y}getSpan(y,B){let N=this.span;return 0>N&&(N=this.length.decode(y,B)),N}decode(y,B=0){let N=this.span;return 0>N&&(N=this.length.decode(y,B)),n(y).slice(B,B+N)}encode(y,B,N){let G=this.length;if(this.length instanceof o&&(G=y.length),!(y instanceof Uint8Array&&G===y.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+G+") Uint8Array as src");if(N+G>B.length)throw new RangeError("encoding overruns Uint8Array");const J=n(y);return n(B).write(J.toString("hex"),N,G,"hex"),this.length instanceof o&&this.length.encode(G,B,N),G}}Y.Blob=S;class P extends r{constructor(y){super(-1,y)}getSpan(y,B=0){t(y);let N=B;for(;N<y.length&&y[N]!==0;)N+=1;return 1+N-B}decode(y,B=0){const N=this.getSpan(y,B);return n(y).slice(B,B+N-1).toString("utf-8")}encode(y,B,N=0){typeof y!="string"&&(y=String(y));const G=e.Buffer.from(y,"utf8"),J=G.length;if(N+J>B.length)throw new RangeError("encoding overruns Buffer");const oe=n(B);return G.copy(oe,N),oe[N+J]=0,J+1}}Y.CString=P;class F extends r{constructor(y,B){if(typeof y=="string"&&B===void 0&&(B=y,y=void 0),y===void 0)y=-1;else if(!Number.isInteger(y))throw new TypeError("maxSpan must be an integer");super(-1,B),this.maxSpan=y}getSpan(y,B=0){return t(y),y.length-B}decode(y,B=0){const N=this.getSpan(y,B);if(0<=this.maxSpan&&this.maxSpan<N)throw new RangeError("text length exceeds maxSpan");return n(y).slice(B,B+N).toString("utf-8")}encode(y,B,N=0){typeof y!="string"&&(y=String(y));const G=e.Buffer.from(y,"utf8"),J=G.length;if(0<=this.maxSpan&&this.maxSpan<J)throw new RangeError("text length exceeds maxSpan");if(N+J>B.length)throw new RangeError("encoding overruns Buffer");return G.copy(n(B),N),J}}Y.UTF8=F;class R extends r{constructor(y,B){super(0,B),this.value=y}decode(y,B){return this.value}encode(y,B,N){return 0}}return Y.Constant=R,Y.greedy=((d,y)=>new a(d,y)),Y.offset=((d,y,B)=>new c(d,y,B)),Y.u8=(d=>new u(1,d)),Y.u16=(d=>new u(2,d)),Y.u24=(d=>new u(3,d)),Y.u32=(d=>new u(4,d)),Y.u40=(d=>new u(5,d)),Y.u48=(d=>new u(6,d)),Y.nu64=(d=>new T(d)),Y.u16be=(d=>new f(2,d)),Y.u24be=(d=>new f(3,d)),Y.u32be=(d=>new f(4,d)),Y.u40be=(d=>new f(5,d)),Y.u48be=(d=>new f(6,d)),Y.nu64be=(d=>new k(d)),Y.s8=(d=>new m(1,d)),Y.s16=(d=>new m(2,d)),Y.s24=(d=>new m(3,d)),Y.s32=(d=>new m(4,d)),Y.s40=(d=>new m(5,d)),Y.s48=(d=>new m(6,d)),Y.ns64=(d=>new M(d)),Y.s16be=(d=>new p(2,d)),Y.s24be=(d=>new p(3,d)),Y.s32be=(d=>new p(4,d)),Y.s40be=(d=>new p(5,d)),Y.s48be=(d=>new p(6,d)),Y.ns64be=(d=>new C(d)),Y.f32=(d=>new U(d)),Y.f32be=(d=>new D(d)),Y.f64=(d=>new V(d)),Y.f64be=(d=>new K(d)),Y.struct=((d,y,B)=>new L(d,y,B)),Y.bits=((d,y,B)=>new h(d,y,B)),Y.seq=((d,y,B)=>new X(d,y,B)),Y.union=((d,y,B)=>new j(d,y,B)),Y.unionLayoutDiscriminator=((d,y)=>new z(d,y)),Y.blob=((d,y)=>new S(d,y)),Y.cstr=(d=>new P(d)),Y.utf8=((d,y)=>new F(d,y)),Y.constant=((d,y)=>new R(d,y)),Y}var q=$6(),U6=10,F6=-32700,z6=-32603,D6=-32602,j6=-32601,q6=-32600,V6=-32015,H6=-32014,G6=-32012,K6=-32010,W6=-32009,Z6=-32007,Y6=-32006,X6=-32004,Z0=-32002,J6=-32001,Q6=28e5,ev=2800001,tv=2800003,nv=2800006,rv=2800007,Um=2800008,sv=2800009,iv=323e4,ov=3230002,av=361e4,cv=3610001,uv=3610003,lv=3610005,fv=3610006,dv=3610007,hv=3611e3,pv=3704e3,mv=3704001,yv=3704004,gv=4615e3,bv=4615026,wv=4615045,vv=5508e3,xv=5663e3,Y0=5663001,_v=5663004,Ev=5663015,Av=5663016,Sv=5663017,X0=5663018,J0=5663019,Iv=705e4,Tv=7050030,Bv=7050031,Rv=7050035,kv=8078e3,Cv=8078001,Pv=8078002,Nv=8078004,Ov=8078005,Mv=8078006,Lv=8078007,$v=8078008,Uv=8078011,_a=8078012,xl=8078013,Fv=8078014,zv=8078017,Dv=8078018,jv=8078022,Fm=81e5,qv=8100002,Vv=8100003,Hv=819e4,Gv=8190001,Kv=8190002,_l=8190003,Wv=8190004,Zv=99e5,Yv=9900001,Xv=9900004;function zm(e){return Array.isArray(e)?"%5B"+e.map(zm).join("%2C%20")+"%5D":typeof e=="bigint"?`${e}n`:encodeURIComponent(String(e!=null&&Object.getPrototypeOf(e)===null?{...e}:e))}function Jv([e,t]){return`${e}=${zm(t)}`}function Qv(e){const t=Object.entries(e).map(Jv).join("&");return btoa(t)}function e2(e,t={}){{let n=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(n+=` '${Qv(t)}'`),`${n}\``}}function zf(e,t){return e instanceof Error&&e.name==="SolanaError"?t!==void 0?e.context.__code===t:!0:!1}var de=class extends Error{constructor(...[t,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=e2(t,r);super(i,s);Bt(this,"cause",this.cause);Bt(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function Qa(...e){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...e)}function Dm({errorCodeBaseOffset:e,getErrorContext:t,orderedErrorNames:n,rpcEnumError:r},s){let i,o;typeof r=="string"?i=r:(i=Object.keys(r)[0],o=r[i]);const a=n.indexOf(i),c=e+a,u=t(c,i,o),f=new de(c,u);return Qa(f,s),f}var t2=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"];function jm(e,t){const n=Number(e);return Dm({errorCodeBaseOffset:4615001,getErrorContext(r,s,i){return r===gv?{errorName:s,index:n,...i!==void 0?{instructionErrorContext:i}:null}:r===bv?{code:Number(i),index:n}:r===wv?{encodedData:i,index:n}:{index:n}},orderedErrorNames:t2,rpcEnumError:t},jm)}var n2=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function qm(e){return typeof e=="object"&&"InstructionError"in e?jm(...e.InstructionError):Dm({errorCodeBaseOffset:7050001,getErrorContext(t,n,r){if(t===Iv)return{errorName:n,...r!==void 0?{transactionErrorContext:r}:null};if(t===Tv)return{index:Number(r)};if(t===Bv||t===Rv)return{accountIndex:Number(r.account_index)}},orderedErrorNames:n2,rpcEnumError:e},qm)}function Df(e){let t;if(r2(e)){const{code:n,data:r,message:s}=e,i=Number(n);if(i===Z0){const{err:o,...a}=r,c=o?{cause:qm(o)}:null;t=new de(Z0,{...a,...c})}else{let o;switch(i){case z6:case D6:case q6:case j6:case F6:case G6:case J6:case X6:case H6:case K6:case W6:case Z6:case Y6:case V6:o={__serverMessage:s};break;default:typeof r=="object"&&!Array.isArray(r)&&(o=r)}t=new de(i,o)}}else{const n=typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"?e.message:"Malformed JSON-RPC error with no message attribute";t=new de(U6,{error:e,message:n})}return Qa(t,Df),t}function r2(e){return typeof e=="object"&&e!==null&&"code"in e&&"message"in e&&(typeof e.code=="number"||typeof e.code=="bigint")&&typeof e.message=="string"}var s2=(e,t)=>{if(e.length>=t)return e;const n=new Uint8Array(t).fill(0);return n.set(e),n},i2=(e,t)=>s2(e.length<=t?e:e.slice(0,t),t);function Zr(e,t,n){const r=n===0&&e.length===t.length?e:e.slice(n,n+t.length);return r.length!==t.length?!1:t.every((s,i)=>s===r[i])}function ti(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function qt(e){return Object.freeze({...e,encode:t=>{const n=new Uint8Array(ti(t,e));return e.write(t,n,0),n}})}function ct(e){return Object.freeze({...e,decode:(t,n=0)=>e.read(t,n)[0]})}function et(e){return"fixedSize"in e&&typeof e.fixedSize=="number"}function o2(e){if(!et(e))throw new de(Pv)}function a2(e){return!et(e)}function Vm(e,t){if(et(e)!==et(t))throw new de(Nv);if(et(e)&&et(t)&&e.fixedSize!==t.fixedSize)throw new de(Ov,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!et(e)&&!et(t)&&e.maxSize!==t.maxSize)throw new de(Mv,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function c2(e,t,n=0){if(t.length-n<=0)throw new de(kv,{codecDescription:e})}function jf(e,t,n,r=0){const s=n.length-r;if(s<t)throw new de(Cv,{bytesLength:s,codecDescription:e,expected:t})}function Ea(e,t,n){if(t<0||t>n)throw new de(Fv,{bytesLength:n,codecDescription:e,offset:t})}function u2(e,t){const n=(o,a,c)=>{const u=e.encode(o);return c=t.write(u.length,a,c),a.set(u,c),c+u.length};if(et(t)&&et(e))return qt({...e,fixedSize:t.fixedSize+e.fixedSize,write:n});const r=et(t)?t.fixedSize:t.maxSize??null,s=et(e)?e.fixedSize:e.maxSize??null,i=r!==null&&s!==null?r+s:null;return qt({...e,...i!==null?{maxSize:i}:{},getSizeFromValue:o=>{const a=ti(o,e);return ti(a,t)+a},write:n})}function Fe(e,t){const n=(o,a)=>{const[c,u]=t.read(o,a),f=Number(c);return a=u,(a>0||o.length>f)&&(o=o.slice(a,a+f)),jf("addDecoderSizePrefix",f,o),[e.decode(o),a+f]};if(et(t)&&et(e))return ct({...e,fixedSize:t.fixedSize+e.fixedSize,read:n});const r=et(t)?t.fixedSize:t.maxSize??null,s=et(e)?e.fixedSize:e.maxSize??null,i=r!==null&&s!==null?r+s:null;return ct({...e,...i!==null?{maxSize:i}:{},read:n})}function qf(e,t){return qt({fixedSize:t,write:(n,r,s)=>{const i=e.encode(n),o=i.length>t?i.slice(0,t):i;return r.set(o,s),s+t}})}function wi(e,t){return ct({fixedSize:t,read:(n,r)=>{jf("fixCodecSize",t,n,r),(r>0||n.length>t)&&(n=n.slice(r,r+t)),et(e)&&(n=i2(n,e.fixedSize));const[s]=e.read(n,0);return[s,r+t]}})}function l2(e,t){return qt({...e,write:(n,r,s)=>{const i=u=>Hm(u,r.length),o=t.preOffset?t.preOffset({bytes:r,preOffset:s,wrapBytes:i}):s;Ea("offsetEncoder",o,r.length);const a=e.write(n,r,o),c=t.postOffset?t.postOffset({bytes:r,newPreOffset:o,postOffset:a,preOffset:s,wrapBytes:i}):a;return Ea("offsetEncoder",c,r.length),c}})}function f2(e,t){return ct({...e,read:(n,r)=>{const s=u=>Hm(u,n.length),i=t.preOffset?t.preOffset({bytes:n,preOffset:r,wrapBytes:s}):r;Ea("offsetDecoder",i,n.length);const[o,a]=e.read(n,i),c=t.postOffset?t.postOffset({bytes:n,newPreOffset:i,postOffset:a,preOffset:r,wrapBytes:s}):a;return Ea("offsetDecoder",c,n.length),[o,c]}})}function Hm(e,t){return t===0?0:(e%t+t)%t}function d2(e,t){if(et(e)){const n=t(e.fixedSize);if(n<0)throw new de(xl,{bytesLength:n,codecDescription:"resizeEncoder"});return qt({...e,fixedSize:n})}return qt({...e,getSizeFromValue:n=>{const r=t(e.getSizeFromValue(n));if(r<0)throw new de(xl,{bytesLength:r,codecDescription:"resizeEncoder"});return r}})}function h2(e,t){if(et(e)){const n=t(e.fixedSize);if(n<0)throw new de(xl,{bytesLength:n,codecDescription:"resizeDecoder"});return ct({...e,fixedSize:n})}return e}function p2(e,t){return l2(d2(e,n=>n+t),{preOffset:({preOffset:n})=>n+t})}function m2(e,t){return f2(h2(e,n=>n+t),{postOffset:({postOffset:n})=>n+t})}function Hr(e,t){return qt({...a2(e)?{...e,getSizeFromValue:n=>e.getSizeFromValue(t(n))}:e,write:(n,r,s)=>e.write(t(n),r,s)})}function Sn(e,t){return ct({...e,read:(n,r)=>{const[s,i]=e.read(n,r);return[t(s,n,r),i]}})}function Gm(e,t,n,r){if(r<t||r>n)throw new de(Uv,{codecDescription:e,max:n,min:t,value:r})}function Km(e){return e?.endian!==1}function Vf(e){return qt({fixedSize:e.size,write(t,n,r){e.range&&Gm(e.name,e.range[0],e.range[1],t);const s=new ArrayBuffer(e.size);return e.set(new DataView(s),t,Km(e.config)),n.set(new Uint8Array(s),r),r+e.size}})}function vi(e){return ct({fixedSize:e.size,read(t,n=0){c2(e.name,t,n),jf(e.name,e.size,t,n);const r=new DataView(y2(t,n,e.size));return[e.get(r,Km(e.config)),n+e.size]}})}function y2(e,t,n){const r=e.byteOffset+(t??0),s=n??e.byteLength;return e.buffer.slice(r,r+s)}var Q0=(e={})=>vi({config:e,get:(t,n)=>t.getFloat64(0,n),name:"f64",size:8}),eh=(e={})=>vi({config:e,get:(t,n)=>t.getInt16(0,n),name:"i16",size:2}),as=()=>qt({getSizeFromValue:e=>e<=127?1:e<=16383?2:3,maxSize:3,write:(e,t,n)=>{Gm("shortU16",0,65535,e);const r=[0];for(let s=0;;s+=1){const i=Number(e)>>s*7;if(i===0)break;const o=127&i;r[s]=o,s>0&&(r[s-1]|=128)}return t.set(r,n),n+r.length}}),jr=()=>ct({maxSize:3,read:(e,t)=>{let n=0,r=0;for(;++r;){const s=r-1,i=e[t+s],o=127&i;if(n|=o<<s*7,(i&128)===0)break}return[n,t+r]}}),qe=(e={})=>vi({config:e,get:(t,n)=>t.getUint16(0,n),name:"u16",size:2}),Wm=(e={})=>Vf({config:e,name:"u32",range:[0,+"0xffffffff"],set:(t,n,r)=>t.setUint32(0,Number(n),r),size:4}),dr=(e={})=>vi({config:e,get:(t,n)=>t.getUint32(0,n),name:"u32",size:4}),Hf=(e={})=>Vf({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,n,r)=>t.setBigUint64(0,BigInt(n),r),size:8}),Zt=(e={})=>vi({config:e,get:(t,n)=>t.getBigUint64(0,n),name:"u64",size:8}),g2=(e={})=>Vm(Hf(e),Zt(e)),Qt=()=>Vf({name:"u8",range:[0,+"0xff"],set:(e,t)=>e.setUint8(0,Number(t)),size:1}),Zn=()=>vi({get:e=>e.getUint8(0),name:"u8",size:1});class b2 extends TypeError{constructor(t,n){let r;const{message:s,explanation:i,...o}=t,{path:a}=t,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...n()])}}function w2(e){return xo(e)&&typeof e[Symbol.iterator]=="function"}function xo(e){return typeof e=="object"&&e!=null}function Aa(e){return xo(e)&&!Array.isArray(e)}function Mn(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function v2(e){const{done:t,value:n}=e.next();return t?void 0:n}function x2(e,t,n,r){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Mn(r)}\``}=e;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*th(e,t,n,r){w2(e)||(e=[e]);for(const s of e){const i=x2(s,t,n,r);i&&(yield i)}}function*Gf(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(e=t.coercer(e,a));let c="valid";for(const u of t.validator(e,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,f,m]of t.entries(e,a)){const p=Gf(f,m,{path:u===void 0?r:[...r,u],branch:u===void 0?s:[...s,f],coerce:i,mask:o,message:n.message});for(const b of p)b[0]?(c=b[0].refinement!=null?"not_refined":"not_valid",yield[b[0],void 0]):i&&(f=b[1],u===void 0?e=f:e instanceof Map?e.set(u,f):e instanceof Set?e.add(f):xo(e)&&(f!==void 0||u in e)&&(e[u]=f))}if(c!=="not_valid")for(const u of t.refiner(e,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,e])}let Qn=class{constructor(t){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const f=s(c,u);return th(f,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const f=i(c,u);return th(f,u,this,c)}:this.refiner=()=>[]}assert(t,n){return _2(t,this,n)}create(t,n){return ce(t,this,n)}is(t){return Zm(t,this)}mask(t,n){return E2(t,this,n)}validate(t,n={}){return _o(t,this,n)}};function _2(e,t,n){const r=_o(e,t,{message:n});if(r[0])throw r[0]}function ce(e,t,n){const r=_o(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function E2(e,t,n){const r=_o(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Zm(e,t){return!_o(e,t)[0]}function _o(e,t,n={}){const r=Gf(e,t,n),s=v2(r);return s[0]?[new b2(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Es(e,t){return new Qn({type:e,schema:null,validator:t})}function A2(){return Es("any",()=>!0)}function ue(e){return new Qn({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Mn(t)}`}})}function Yn(){return Es("boolean",e=>typeof e=="boolean")}function Kf(e){return Es("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${Mn(t)}`)}function Qe(e){const t=Mn(e),n=typeof e;return new Qn({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(r){return r===e||`Expected the literal \`${t}\`, but received: ${Mn(r)}`}})}function S2(){return Es("never",()=>!1)}function le(e){return new Qn({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function Z(){return Es("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Mn(e)}`)}function ge(e){return new Qn({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function Ym(e,t){return new Qn({type:"record",schema:null,*entries(n){if(xo(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator(n){return Aa(n)||`Expected an object, but received: ${Mn(n)}`},coercer(n){return Aa(n)?{...n}:n}})}function ie(){return Es("string",e=>typeof e=="string"||`Expected a string, but received: ${Mn(e)}`)}function Wf(e){const t=S2();return new Qn({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],e[s]||t]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Mn(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function te(e){const t=Object.keys(e);return new Qn({type:"type",schema:e,*entries(n){if(xo(n))for(const r of t)yield[r,n[r],e[r]]},validator(n){return Aa(n)||`Expected an object, but received: ${Mn(n)}`},coercer(n){return Aa(n)?{...n}:n}})}function tn(e){const t=e.map(n=>n.type).join(" | ");return new Qn({type:"union",schema:null,coercer(n,r){for(const s of e){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of e){const[...o]=Gf(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Mn(n)}`,...s]}})}function xi(){return Es("unknown",()=>!0)}function Eo(e,t,n){return new Qn({...e,coercer:(r,s)=>Zm(r,t)?e.coercer(n(r,s),s):e.coercer(r,s)})}var na,I2=new Uint8Array(16);function Xm(){if(!na&&(na=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!na))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return na(I2)}const T2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ec(e){return typeof e=="string"&&T2.test(e)}var zt=[];for(var gu=0;gu<256;++gu)zt.push((gu+256).toString(16).substr(1));function tc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(zt[e[t+0]]+zt[e[t+1]]+zt[e[t+2]]+zt[e[t+3]]+"-"+zt[e[t+4]]+zt[e[t+5]]+"-"+zt[e[t+6]]+zt[e[t+7]]+"-"+zt[e[t+8]]+zt[e[t+9]]+"-"+zt[e[t+10]]+zt[e[t+11]]+zt[e[t+12]]+zt[e[t+13]]+zt[e[t+14]]+zt[e[t+15]]).toLowerCase();if(!ec(n))throw TypeError("Stringified UUID is invalid");return n}var nh,bu,wu=0,vu=0;function B2(e,t,n){var r=t&&n||0,s=t||new Array(16);e=e||{};var i=e.node||nh,o=e.clockseq!==void 0?e.clockseq:bu;if(i==null||o==null){var a=e.random||(e.rng||Xm)();i==null&&(i=nh=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=bu=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:vu+1,f=c-wu+(u-vu)/1e4;if(f<0&&e.clockseq===void 0&&(o=o+1&16383),(f<0||c>wu)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");wu=c,vu=u,bu=o,c+=122192928e5;var m=((c&268435455)*1e4+u)%4294967296;s[r++]=m>>>24&255,s[r++]=m>>>16&255,s[r++]=m>>>8&255,s[r++]=m&255;var p=c/4294967296*1e4&268435455;s[r++]=p>>>8&255,s[r++]=p&255,s[r++]=p>>>24&15|16,s[r++]=p>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var b=0;b<6;++b)s[r+b]=i[b];return t||tc(s)}function Jm(e){if(!ec(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}function R2(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var k2="6ba7b810-9dad-11d1-80b4-00c04fd430c8",C2="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Qm(e,t,n){function r(s,i,o,a){if(typeof s=="string"&&(s=R2(s)),typeof i=="string"&&(i=Jm(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return tc(c)}try{r.name=e}catch{}return r.DNS=k2,r.URL=C2,r}function P2(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return N2(O2(M2(e),e.length*8))}function N2(e){for(var t=[],n=e.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=e[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function ey(e){return(e+64>>>9<<4)+14+1}function O2(e,t){e[t>>5]|=128<<t%32,e[ey(t)-1]=t;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<e.length;o+=16){var a=n,c=r,u=s,f=i;n=Ht(n,r,s,i,e[o],7,-680876936),i=Ht(i,n,r,s,e[o+1],12,-389564586),s=Ht(s,i,n,r,e[o+2],17,606105819),r=Ht(r,s,i,n,e[o+3],22,-1044525330),n=Ht(n,r,s,i,e[o+4],7,-176418897),i=Ht(i,n,r,s,e[o+5],12,1200080426),s=Ht(s,i,n,r,e[o+6],17,-1473231341),r=Ht(r,s,i,n,e[o+7],22,-45705983),n=Ht(n,r,s,i,e[o+8],7,1770035416),i=Ht(i,n,r,s,e[o+9],12,-1958414417),s=Ht(s,i,n,r,e[o+10],17,-42063),r=Ht(r,s,i,n,e[o+11],22,-1990404162),n=Ht(n,r,s,i,e[o+12],7,1804603682),i=Ht(i,n,r,s,e[o+13],12,-40341101),s=Ht(s,i,n,r,e[o+14],17,-1502002290),r=Ht(r,s,i,n,e[o+15],22,1236535329),n=Gt(n,r,s,i,e[o+1],5,-165796510),i=Gt(i,n,r,s,e[o+6],9,-1069501632),s=Gt(s,i,n,r,e[o+11],14,643717713),r=Gt(r,s,i,n,e[o],20,-373897302),n=Gt(n,r,s,i,e[o+5],5,-701558691),i=Gt(i,n,r,s,e[o+10],9,38016083),s=Gt(s,i,n,r,e[o+15],14,-660478335),r=Gt(r,s,i,n,e[o+4],20,-405537848),n=Gt(n,r,s,i,e[o+9],5,568446438),i=Gt(i,n,r,s,e[o+14],9,-1019803690),s=Gt(s,i,n,r,e[o+3],14,-187363961),r=Gt(r,s,i,n,e[o+8],20,1163531501),n=Gt(n,r,s,i,e[o+13],5,-1444681467),i=Gt(i,n,r,s,e[o+2],9,-51403784),s=Gt(s,i,n,r,e[o+7],14,1735328473),r=Gt(r,s,i,n,e[o+12],20,-1926607734),n=Kt(n,r,s,i,e[o+5],4,-378558),i=Kt(i,n,r,s,e[o+8],11,-2022574463),s=Kt(s,i,n,r,e[o+11],16,1839030562),r=Kt(r,s,i,n,e[o+14],23,-35309556),n=Kt(n,r,s,i,e[o+1],4,-1530992060),i=Kt(i,n,r,s,e[o+4],11,1272893353),s=Kt(s,i,n,r,e[o+7],16,-155497632),r=Kt(r,s,i,n,e[o+10],23,-1094730640),n=Kt(n,r,s,i,e[o+13],4,681279174),i=Kt(i,n,r,s,e[o],11,-358537222),s=Kt(s,i,n,r,e[o+3],16,-722521979),r=Kt(r,s,i,n,e[o+6],23,76029189),n=Kt(n,r,s,i,e[o+9],4,-640364487),i=Kt(i,n,r,s,e[o+12],11,-421815835),s=Kt(s,i,n,r,e[o+15],16,530742520),r=Kt(r,s,i,n,e[o+2],23,-995338651),n=Wt(n,r,s,i,e[o],6,-198630844),i=Wt(i,n,r,s,e[o+7],10,1126891415),s=Wt(s,i,n,r,e[o+14],15,-1416354905),r=Wt(r,s,i,n,e[o+5],21,-57434055),n=Wt(n,r,s,i,e[o+12],6,1700485571),i=Wt(i,n,r,s,e[o+3],10,-1894986606),s=Wt(s,i,n,r,e[o+10],15,-1051523),r=Wt(r,s,i,n,e[o+1],21,-2054922799),n=Wt(n,r,s,i,e[o+8],6,1873313359),i=Wt(i,n,r,s,e[o+15],10,-30611744),s=Wt(s,i,n,r,e[o+6],15,-1560198380),r=Wt(r,s,i,n,e[o+13],21,1309151649),n=Wt(n,r,s,i,e[o+4],6,-145523070),i=Wt(i,n,r,s,e[o+11],10,-1120210379),s=Wt(s,i,n,r,e[o+2],15,718787259),r=Wt(r,s,i,n,e[o+9],21,-343485551),n=Ur(n,a),r=Ur(r,c),s=Ur(s,u),i=Ur(i,f)}return[n,r,s,i]}function M2(e){if(e.length===0)return[];for(var t=e.length*8,n=new Uint32Array(ey(t)),r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function Ur(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function L2(e,t){return e<<t|e>>>32-t}function nc(e,t,n,r,s,i){return Ur(L2(Ur(Ur(t,e),Ur(r,i)),s),n)}function Ht(e,t,n,r,s,i,o){return nc(t&n|~t&r,e,t,s,i,o)}function Gt(e,t,n,r,s,i,o){return nc(t&r|n&~r,e,t,s,i,o)}function Kt(e,t,n,r,s,i,o){return nc(t^n^r,e,t,s,i,o)}function Wt(e,t,n,r,s,i,o){return nc(n^(t|~r),e,t,s,i,o)}var $2=Qm("v3",48,P2);function U2(e,t,n){e=e||{};var r=e.random||(e.rng||Xm)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return tc(r)}function F2(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function xu(e,t){return e<<t|e>>>32-t}function z2(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var s=0;s<r.length;++s)e.push(r.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),f=0;f<16;++f)u[f]=e[c*64+f*4]<<24|e[c*64+f*4+1]<<16|e[c*64+f*4+2]<<8|e[c*64+f*4+3];a[c]=u}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(var m=0;m<o;++m){for(var p=new Uint32Array(80),b=0;b<16;++b)p[b]=a[m][b];for(var _=16;_<80;++_)p[_]=xu(p[_-3]^p[_-8]^p[_-14]^p[_-16],1);for(var E=n[0],T=n[1],k=n[2],M=n[3],C=n[4],U=0;U<80;++U){var D=Math.floor(U/20),V=xu(E,5)+F2(D,T,k,M)+C+t[D]+p[U]>>>0;C=M,M=k,k=xu(T,30)>>>0,T=E,E=V}n[0]=n[0]+E>>>0,n[1]=n[1]+T>>>0,n[2]=n[2]+k>>>0,n[3]=n[3]+M>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var D2=Qm("v5",80,z2);const j2="00000000-0000-0000-0000-000000000000";function q2(e){if(!ec(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const V2=Object.freeze(Object.defineProperty({__proto__:null,NIL:j2,parse:Jm,stringify:tc,v1:B2,v3:$2,v4:U2,v5:D2,validate:ec,version:q2},Symbol.toStringTag,{value:"Module"})),ty=kf(V2);var _u,rh;function H2(){if(rh)return _u;rh=1;const e=ty.v4;return _u=function(n,r,s,i){if(typeof n!="string")throw new TypeError(n+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return e()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},_u}var Eu,sh;function G2(){if(sh)return Eu;sh=1;const e=ty.v4,t=H2(),n=function(r,s){if(!(this instanceof n))return new n(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return e()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Eu=n,n.prototype.request=function(r,s,i,o){const a=this;let c=null;const u=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&r&&typeof r=="object"&&typeof s=="function")o=s,c=r;else{typeof i=="function"&&(o=i,i=void 0);const p=typeof o=="function";try{c=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(b){if(p)return o(b);throw b}if(!p)return c}let m;try{m=JSON.stringify(c,this.options.replacer)}catch(p){return o(p)}return this.callServer(m,function(p,b){a._parseResponse(p,b,o)}),c},n.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(u){return typeof u.error<"u"},c=function(u){return!a(u)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},Eu}var K2=G2();const W2=Wa(K2);var Au={exports:{}},ih;function Z2(){return ih||(ih=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var b=new s(f,m||c,p),_=n?n+u:u;return c._events[_]?c._events[_].fn?c._events[_]=[c._events[_],b]:c._events[_].push(b):(c._events[_]=b,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},a.prototype.listeners=function(u){var f=n?n+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,b=m.length,_=new Array(b);p<b;p++)_[p]=m[p].fn;return _},a.prototype.listenerCount=function(u){var f=n?n+u:u,m=this._events[f];return m?m.fn?1:m.length:0},a.prototype.emit=function(u,f,m,p,b,_){var E=n?n+u:u;if(!this._events[E])return!1;var T=this._events[E],k=arguments.length,M,C;if(T.fn){switch(T.once&&this.removeListener(u,T.fn,void 0,!0),k){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,m),!0;case 4:return T.fn.call(T.context,f,m,p),!0;case 5:return T.fn.call(T.context,f,m,p,b),!0;case 6:return T.fn.call(T.context,f,m,p,b,_),!0}for(C=1,M=new Array(k-1);C<k;C++)M[C-1]=arguments[C];T.fn.apply(T.context,M)}else{var U=T.length,D;for(C=0;C<U;C++)switch(T[C].once&&this.removeListener(u,T[C].fn,void 0,!0),k){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,f);break;case 3:T[C].fn.call(T[C].context,f,m);break;case 4:T[C].fn.call(T[C].context,f,m,p);break;default:if(!M)for(D=1,M=new Array(k-1);D<k;D++)M[D-1]=arguments[D];T[C].fn.apply(T[C].context,M)}}return!0},a.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},a.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},a.prototype.removeListener=function(u,f,m,p){var b=n?n+u:u;if(!this._events[b])return this;if(!f)return o(this,b),this;var _=this._events[b];if(_.fn)_.fn===f&&(!p||_.once)&&(!m||_.context===m)&&o(this,b);else{for(var E=0,T=[],k=_.length;E<k;E++)(_[E].fn!==f||p&&!_[E].once||m&&_[E].context!==m)&&T.push(_[E]);T.length?this._events[b]=T.length===1?T[0]:T:o(this,b)}return this},a.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(Au)),Au.exports}var Y2=Z2();const ny=Wa(Y2);var X2=class extends ny{constructor(t,n){super();Bt(this,"socket");this.socket=new window.WebSocket(t,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,n,r){const s=r||n;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,n){this.socket.close(t,n)}addEventListener(t,n,r){this.socket.addEventListener(t,n,r)}};function J2(e,t){return new X2(e,t)}var Q2=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},e5=class extends ny{constructor(t,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,u){super();Bt(this,"address");Bt(this,"rpc_id");Bt(this,"queue");Bt(this,"options");Bt(this,"autoconnect");Bt(this,"ready");Bt(this,"reconnect");Bt(this,"reconnect_timer_id");Bt(this,"reconnect_interval");Bt(this,"max_reconnects");Bt(this,"rest_options");Bt(this,"current_reconnects");Bt(this,"generate_request_id");Bt(this,"socket");Bt(this,"webSocketFactory");Bt(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new Q2,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,n),c={jsonrpc:"2.0",method:t,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,u=>{if(u)return o(u);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(t){const n=await this.call("rpc.login",t);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(t,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const n=await this.call("rpc.on",t);if(typeof t=="string"&&n[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+n[t]);return n}async unsubscribe(t){typeof t=="string"&&(t=[t]);const n=await this.call("rpc.off",t);if(typeof t=="string"&&n[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(t,n){this.socket&&this.socket.close(t||1e3,n)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Te.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,s),1))})}};const t5=BigInt(0),Ri=BigInt(1),n5=BigInt(2),r5=BigInt(7),s5=BigInt(256),i5=BigInt(113),ry=[],sy=[],iy=[];for(let e=0,t=Ri,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],ry.push(2*(5*r+n)),sy.push((e+1)*(e+2)/2%64);let s=t5;for(let i=0;i<7;i++)t=(t<<Ri^(t>>r5)*i5)%s5,t&n5&&(s^=Ri<<(Ri<<BigInt(i))-Ri);iy.push(s)}const oy=pm(iy,!0),o5=oy[0],a5=oy[1],oh=(e,t,n)=>n>32?kw(e,t,n):Bw(e,t,n),ah=(e,t,n)=>n>32?Cw(e,t,n):Rw(e,t,n);function c5(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],f=n[c+1],m=oh(u,f,1)^n[a],p=ah(u,f,1)^n[a+1];for(let b=0;b<50;b+=10)e[o+b]^=m,e[o+b+1]^=p}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=sy[o],c=oh(s,i,a),u=ah(s,i,a),f=ry[o];s=e[f],i=e[f+1],e[f]=c,e[f+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=o5[r],e[1]^=a5[r]}Dr(n)}class Zf extends Pf{constructor(t,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Xs(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=bw(this.state)}clone(){return this._cloneInto()}keccak(){T0(this.state32),c5(this.state32,this.rounds),T0(this.state32),this.posOut=0,this.pos=0}update(t){Js(this),t=Za(t),vr(t);const{blockLen:n,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Js(this,!1),vr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Xs(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(fm(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Dr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Zf(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const u5=(e,t,n)=>Nf(()=>new Zf(t,e,n)),ay=u5(1,136,256/8);class cy extends Pf{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,lm(t);const r=Za(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Dr(i)}update(t){return Js(this),this.iHash.update(t),this}digestInto(t){Js(this),vr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yf=(e,t,n)=>new cy(e,t).update(n).digest();Yf.create=(e,t)=>new cy(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ch=(e,t)=>(e+(e>=0?t:-t)/uy)/t;function l5(e,t,n){const[[r,s],[i,o]]=t,a=ch(o*e,n),c=ch(-s*e,n);let u=e-a*r-c*i,f=-a*s-c*o;const m=u<mr,p=f<mr;m&&(u=-u),p&&(f=-f);const b=wo(Math.ceil(bm(n)/2))+js;if(u<mr||u>=b||f<mr||f>=b)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:m,k1:u,k2neg:p,k2:f}}function El(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Su(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return os(n.lowS,"lowS"),os(n.prehash,"prehash"),n.format!==void 0&&El(n.format),n}let f5=class extends Error{constructor(t=""){super(t)}};const ur={Err:f5,_tlv:{encode:(e,t)=>{const{Err:n}=ur;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=ea(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?ea(s.length/2|128):"";return ea(e)+i+s+t},decode(e,t){const{Err:n}=ur;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)o=o<<8|f;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=ur;if(e<mr)throw new t("integer: negative integers are not allowed");let n=ea(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ur;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Xa(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ur,s=at("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=ur,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}},mr=BigInt(0),js=BigInt(1),uy=BigInt(2),ra=BigInt(3),d5=BigInt(4);function Ls(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let s=at("private key",t);try{r=e.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function h5(e,t={}){const n=Om("weierstrass",e,t),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;vo(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=fy(r,s);function f(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function m(j,x,l){const{x:h,y:v}=x.toAffine(),A=r.toBytes(h);if(os(l,"isCompressed"),l){f();const S=!r.isOdd(v);return Pn(ly(S),A)}else return Pn(Uint8Array.of(4),A,r.toBytes(v))}function p(j){Nn(j,void 0,"Point");const{publicKey:x,publicKeyUncompressed:l}=u,h=j.length,v=j[0],A=j.subarray(1);if(h===x&&(v===2||v===3)){const S=r.fromBytes(A);if(!r.isValid(S))throw new Error("bad point: is not on curve, wrong x");const P=E(S);let F;try{F=r.sqrt(P)}catch(y){const B=y instanceof Error?": "+y.message:"";throw new Error("bad point: is not on curve, sqrt error"+B)}f();const R=r.isOdd(F);return(v&1)===1!==R&&(F=r.neg(F)),{x:S,y:F}}else if(h===l&&v===4){const S=r.BYTES,P=r.fromBytes(A.subarray(0,S)),F=r.fromBytes(A.subarray(S,S*2));if(!T(P,F))throw new Error("bad point: is not on curve");return{x:P,y:F}}else throw new Error(`bad point: got length ${h}, expected compressed=${x} or uncompressed=${l}`)}const b=t.toBytes||m,_=t.fromBytes||p;function E(j){const x=r.sqr(j),l=r.mul(x,j);return r.add(r.add(l,r.mul(j,i.a)),i.b)}function T(j,x){const l=r.sqr(x),h=E(j);return r.eql(l,h)}if(!T(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const k=r.mul(r.pow(i.a,ra),d5),M=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(k,M)))throw new Error("bad curve params: a or b");function C(j,x,l=!1){if(!r.isValid(x)||l&&r.is0(x))throw new Error(`bad point coordinate ${j}`);return x}function U(j){if(!(j instanceof L))throw new Error("ProjectivePoint expected")}function D(j){if(!c||!c.basises)throw new Error("no endo");return l5(j,c.basises,s.ORDER)}const V=ya((j,x)=>{const{X:l,Y:h,Z:v}=j;if(r.eql(v,r.ONE))return{x:l,y:h};const A=j.is0();x==null&&(x=A?r.ONE:r.inv(v));const S=r.mul(l,x),P=r.mul(h,x),F=r.mul(v,x);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(F,r.ONE))throw new Error("invZ was invalid");return{x:S,y:P}}),K=ya(j=>{if(j.is0()){if(t.allowInfinityPoint&&!r.is0(j.Y))return;throw new Error("bad point: ZERO")}const{x,y:l}=j.toAffine();if(!r.isValid(x)||!r.isValid(l))throw new Error("bad point: x or y not field elements");if(!T(x,l))throw new Error("bad point: equation left != right");if(!j.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function X(j,x,l,h,v){return l=new L(r.mul(l.X,j),l.Y,l.Z),x=ga(h,x),l=ga(v,l),x.add(l)}class L{constructor(x,l,h){this.X=C("x",x),this.Y=C("y",l,!0),this.Z=C("z",h),Object.freeze(this)}static CURVE(){return i}static fromAffine(x){const{x:l,y:h}=x||{};if(!x||!r.isValid(l)||!r.isValid(h))throw new Error("invalid affine point");if(x instanceof L)throw new Error("projective point not allowed");return r.is0(l)&&r.is0(h)?L.ZERO:new L(l,h,r.ONE)}static fromBytes(x){const l=L.fromAffine(_(Nn(x,void 0,"point")));return l.assertValidity(),l}static fromHex(x){return L.fromBytes(at("pointHex",x))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(x=8,l=!0){return z.createCache(this,x),l||this.multiply(ra),this}assertValidity(){K(this)}hasEvenY(){const{y:x}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(x)}equals(x){U(x);const{X:l,Y:h,Z:v}=this,{X:A,Y:S,Z:P}=x,F=r.eql(r.mul(l,P),r.mul(A,v)),R=r.eql(r.mul(h,P),r.mul(S,v));return F&&R}negate(){return new L(this.X,r.neg(this.Y),this.Z)}double(){const{a:x,b:l}=i,h=r.mul(l,ra),{X:v,Y:A,Z:S}=this;let P=r.ZERO,F=r.ZERO,R=r.ZERO,d=r.mul(v,v),y=r.mul(A,A),B=r.mul(S,S),N=r.mul(v,A);return N=r.add(N,N),R=r.mul(v,S),R=r.add(R,R),P=r.mul(x,R),F=r.mul(h,B),F=r.add(P,F),P=r.sub(y,F),F=r.add(y,F),F=r.mul(P,F),P=r.mul(N,P),R=r.mul(h,R),B=r.mul(x,B),N=r.sub(d,B),N=r.mul(x,N),N=r.add(N,R),R=r.add(d,d),d=r.add(R,d),d=r.add(d,B),d=r.mul(d,N),F=r.add(F,d),B=r.mul(A,S),B=r.add(B,B),d=r.mul(B,N),P=r.sub(P,d),R=r.mul(B,y),R=r.add(R,R),R=r.add(R,R),new L(P,F,R)}add(x){U(x);const{X:l,Y:h,Z:v}=this,{X:A,Y:S,Z:P}=x;let F=r.ZERO,R=r.ZERO,d=r.ZERO;const y=i.a,B=r.mul(i.b,ra);let N=r.mul(l,A),G=r.mul(h,S),J=r.mul(v,P),oe=r.add(l,h),ae=r.add(A,S);oe=r.mul(oe,ae),ae=r.add(N,G),oe=r.sub(oe,ae),ae=r.add(l,v);let Be=r.add(A,P);return ae=r.mul(ae,Be),Be=r.add(N,J),ae=r.sub(ae,Be),Be=r.add(h,v),F=r.add(S,P),Be=r.mul(Be,F),F=r.add(G,J),Be=r.sub(Be,F),d=r.mul(y,ae),F=r.mul(B,J),d=r.add(F,d),F=r.sub(G,d),d=r.add(G,d),R=r.mul(F,d),G=r.add(N,N),G=r.add(G,N),J=r.mul(y,J),ae=r.mul(B,ae),G=r.add(G,J),J=r.sub(N,J),J=r.mul(y,J),ae=r.add(ae,J),N=r.mul(G,ae),R=r.add(R,N),N=r.mul(Be,ae),F=r.mul(oe,F),F=r.sub(F,N),N=r.mul(oe,G),d=r.mul(Be,d),d=r.add(d,N),new L(F,R,d)}subtract(x){return this.add(x.negate())}is0(){return this.equals(L.ZERO)}multiply(x){const{endo:l}=t;if(!s.isValidNot0(x))throw new Error("invalid scalar: out of range");let h,v;const A=S=>z.cached(this,S,P=>Jr(L,P));if(l){const{k1neg:S,k1:P,k2neg:F,k2:R}=D(x),{p:d,f:y}=A(P),{p:B,f:N}=A(R);v=y.add(N),h=X(l.beta,d,B,S,F)}else{const{p:S,f:P}=A(x);h=S,v=P}return Jr(L,[h,v])[0]}multiplyUnsafe(x){const{endo:l}=t,h=this;if(!s.isValid(x))throw new Error("invalid scalar: out of range");if(x===mr||h.is0())return L.ZERO;if(x===js)return h;if(z.hasCache(this))return this.multiply(x);if(l){const{k1neg:v,k1:A,k2neg:S,k2:P}=D(x),{p1:F,p2:R}=s6(L,h,A,P);return X(l.beta,F,R,v,S)}else return z.unsafe(h,x)}multiplyAndAddUnsafe(x,l,h){const v=this.multiplyUnsafe(l).add(x.multiplyUnsafe(h));return v.is0()?void 0:v}toAffine(x){return V(this,x)}isTorsionFree(){const{isTorsionFree:x}=t;return o===js?!0:x?x(L,this):z.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:x}=t;return o===js?this:x?x(L,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(x=!0){return os(x,"isCompressed"),this.assertValidity(),b(L,this,x)}toHex(x=!0){return ts(this.toBytes(x))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(x=!0){return this.toBytes(x)}_setWindowSize(x){this.precompute(x)}static normalizeZ(x){return Jr(L,x)}static msm(x,l){return Nm(L,s,x,l)}static fromPrivateKey(x){return L.BASE.multiply(Ls(s,x))}}L.BASE=new L(i.Gx,i.Gy,r.ONE),L.ZERO=new L(r.ZERO,r.ONE,r.ZERO),L.Fp=r,L.Fn=s;const $=s.BITS,z=new Pm(L,t.endo?Math.ceil($/2):$);return L.BASE.precompute(8),L}function ly(e){return Uint8Array.of(e?2:3)}function fy(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function p5(e,t={}){const{Fn:n}=e,r=t.randomBytes||Ya,s=Object.assign(fy(e.Fp,n),{seed:Rm(n.ORDER)});function i(b){try{return!!Ls(n,b)}catch{return!1}}function o(b,_){const{publicKey:E,publicKeyUncompressed:T}=s;try{const k=b.length;return _===!0&&k!==E||_===!1&&k!==T?!1:!!e.fromBytes(b)}catch{return!1}}function a(b=r(s.seed)){return t6(Nn(b,s.seed,"seed"),n.ORDER)}function c(b,_=!0){return e.BASE.multiply(Ls(n,b)).toBytes(_)}function u(b){const _=a(b);return{secretKey:_,publicKey:c(_)}}function f(b){if(typeof b=="bigint")return!1;if(b instanceof e)return!0;const{secretKey:_,publicKey:E,publicKeyUncompressed:T}=s;if(n.allowedLengths||_===E)return;const k=at("key",b).length;return k===E||k===T}function m(b,_,E=!0){if(f(b)===!0)throw new Error("first arg must be private key");if(f(_)===!1)throw new Error("second arg must be public key");const T=Ls(n,b);return e.fromHex(_).multiply(T).toBytes(E)}return Object.freeze({getPublicKey:c,getSharedSecret:m,keygen:u,Point:e,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:b=>Ls(n,b),precompute(b=8,_=e.BASE){return _.precompute(b,!1)}},lengths:s})}function m5(e,t,n={}){lm(t),vo(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Ya,s=n.hmac||((l,...h)=>Yf(t,l,Pn(...h))),{Fp:i,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:f,getSharedSecret:m,utils:p,lengths:b}=p5(e,n),_={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},E="compact";function T(l){const h=a>>js;return l>h}function k(l,h){if(!o.isValidNot0(h))throw new Error(`invalid signature ${l}: out of range 1..Point.Fn.ORDER`);return h}function M(l,h){El(h);const v=b.signature,A=h==="compact"?v:h==="recovered"?v+1:void 0;return Nn(l,A,`${h} signature`)}class C{constructor(h,v,A){this.r=k("r",h),this.s=k("s",v),A!=null&&(this.recovery=A),Object.freeze(this)}static fromBytes(h,v=E){M(h,v);let A;if(v==="der"){const{r:R,s:d}=ur.toSig(Nn(h));return new C(R,d)}v==="recovered"&&(A=h[0],v="compact",h=h.subarray(1));const S=o.BYTES,P=h.subarray(0,S),F=h.subarray(S,S*2);return new C(o.fromBytes(P),o.fromBytes(F),A)}static fromHex(h,v){return this.fromBytes(ma(h),v)}addRecoveryBit(h){return new C(this.r,this.s,h)}recoverPublicKey(h){const v=i.ORDER,{r:A,s:S,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(a*uy<v&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=P===2||P===3?A+a:A;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const d=i.toBytes(R),y=e.fromBytes(Pn(ly((P&1)===0),d)),B=o.inv(R),N=D(at("msgHash",h)),G=o.create(-N*B),J=o.create(S*B),oe=e.BASE.multiplyUnsafe(G).add(y.multiplyUnsafe(J));if(oe.is0())throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return T(this.s)}toBytes(h=E){if(El(h),h==="der")return ma(ur.hexFromSig(this));const v=o.toBytes(this.r),A=o.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Pn(Uint8Array.of(this.recovery),v,A)}return Pn(v,A)}toHex(h){return ts(this.toBytes(h))}assertValidity(){}static fromCompact(h){return C.fromBytes(at("sig",h),"compact")}static fromDER(h){return C.fromBytes(at("sig",h),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ts(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ts(this.toBytes("compact"))}}const U=n.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const v=Xa(h),A=h.length*8-c;return A>0?v>>BigInt(A):v},D=n.bits2int_modN||function(h){return o.create(U(h))},V=wo(c);function K(l){return wl("num < 2^"+c,l,mr,V),o.toBytes(l)}function X(l,h){return Nn(l,void 0,"message"),h?Nn(t(l),void 0,"prehashed message"):l}function L(l,h,v){if(["recovered","canonical"].some(G=>G in v))throw new Error("sign() legacy options not supported");const{lowS:A,prehash:S,extraEntropy:P}=Su(v,_);l=X(l,S);const F=D(l),R=Ls(o,h),d=[K(R),K(F)];if(P!=null&&P!==!1){const G=P===!0?r(b.secretKey):P;d.push(at("extraEntropy",G))}const y=Pn(...d),B=F;function N(G){const J=U(G);if(!o.isValidNot0(J))return;const oe=o.inv(J),ae=e.BASE.multiply(J).toAffine(),Be=o.create(ae.x);if(Be===mr)return;const Pe=o.create(oe*o.create(B+Be*R));if(Pe===mr)return;let Le=(ae.x===Be?0:2)|Number(ae.y&js),lt=Pe;return A&&T(Pe)&&(lt=o.neg(Pe),Le^=1),new C(Be,lt,Le)}return{seed:y,k2sig:N}}function $(l,h,v={}){l=at("message",l);const{seed:A,k2sig:S}=L(l,h,v);return Hw(t.outputLen,o.BYTES,s)(A,S)}function z(l){let h;const v=typeof l=="string"||bo(l),A=!v&&l!==null&&typeof l=="object"&&typeof l.r=="bigint"&&typeof l.s=="bigint";if(!v&&!A)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(A)h=new C(l.r,l.s);else if(v){try{h=C.fromBytes(at("sig",l),"der")}catch(S){if(!(S instanceof ur.Err))throw S}if(!h)try{h=C.fromBytes(at("sig",l),"compact")}catch{return!1}}return h||!1}function j(l,h,v,A={}){const{lowS:S,prehash:P,format:F}=Su(A,_);if(v=at("publicKey",v),h=X(at("message",h),P),"strict"in A)throw new Error("options.strict was renamed to lowS");const R=F===void 0?z(l):C.fromBytes(at("sig",l),F);if(R===!1)return!1;try{const d=e.fromBytes(v);if(S&&R.hasHighS())return!1;const{r:y,s:B}=R,N=D(h),G=o.inv(B),J=o.create(N*G),oe=o.create(y*G),ae=e.BASE.multiplyUnsafe(J).add(d.multiplyUnsafe(oe));return ae.is0()?!1:o.create(ae.x)===y}catch{return!1}}function x(l,h,v={}){const{prehash:A}=Su(v,_);return h=X(h,A),C.fromBytes(l,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:u,getPublicKey:f,getSharedSecret:m,utils:p,lengths:b,Point:e,sign:$,verify:j,recoverPublicKey:x,Signature:C,hash:t})}function y5(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=_s(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function g5(e){const{CURVE:t,curveOpts:n}=y5(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function b5(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Tm(n.Fn.ORDER,n.Fn.BITS))})}function w5(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=g5(e),i=h5(t,n),o=m5(i,r,s);return b5(e,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v5(e,t){const n=r=>w5({...e,hash:r});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xf={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},x5={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},uh=BigInt(2);function _5(e){const t=Xf.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,m=ot(f,n,t)*f%t,p=ot(m,n,t)*f%t,b=ot(p,uh,t)*u%t,_=ot(b,s,t)*b%t,E=ot(_,i,t)*_%t,T=ot(E,a,t)*E%t,k=ot(T,c,t)*T%t,M=ot(k,a,t)*E%t,C=ot(M,n,t)*f%t,U=ot(C,o,t)*_%t,D=ot(U,r,t)*u%t,V=ot(D,uh,t);if(!Al.eql(Al.sqr(V),e))throw new Error("Cannot find square root");return V}const Al=_s(Xf.p,{sqrt:_5}),E5=v5({...Xf,Fp:Al,lowS:!0,endo:x5},Of);bi.utils.randomPrivateKey;const lh=()=>{const e=bi.utils.randomPrivateKey(),t=Sl(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),{publicKey:t,secretKey:n}},Sl=bi.getPublicKey;function fh(e){try{return bi.ExtendedPoint.fromHex(e),!0}catch{return!1}}const A5=(e,t)=>bi.sign(e,t.slice(0,32)),S5=bi.verify,ni=e=>Te.Buffer.isBuffer(e)?e:e instanceof Uint8Array?Te.Buffer.from(e.buffer,e.byteOffset,e.byteLength):Te.Buffer.from(e);class I5{constructor(t){Object.assign(this,t)}encode(){return Te.Buffer.from(yu.serialize(la,this))}static decode(t){return yu.deserialize(la,this,t)}static decodeUnchecked(t){return yu.deserializeUnchecked(la,this,t)}}const la=new Map;var dy;const T5=32,Fr=32;function B5(e){return e._bn!==void 0}let dh=1;class be extends I5{constructor(t){if(super({}),this._bn=void 0,B5(t))this._bn=t._bn;else{if(typeof t=="string"){const n=Dt.decode(t);if(n.length!=Fr)throw new Error("Invalid public key input");this._bn=new D0(n)}else this._bn=new D0(t);if(this._bn.byteLength()>Fr)throw new Error("Invalid public key input")}}static unique(){const t=new be(dh);return dh+=1,new be(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Dt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(Te.Buffer);if(t.length===Fr)return t;const n=Te.Buffer.alloc(32);return t.copy(n,32-t.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,n,r){const s=Te.Buffer.concat([t.toBuffer(),Te.Buffer.from(n),r.toBuffer()]),i=vl(s);return new be(i)}static createProgramAddressSync(t,n){let r=Te.Buffer.alloc(0);t.forEach(function(i){if(i.length>T5)throw new TypeError("Max seed length exceeded");r=Te.Buffer.concat([r,ni(i)])}),r=Te.Buffer.concat([r,n.toBuffer(),Te.Buffer.from("ProgramDerivedAddress")]);const s=vl(r);if(fh(s))throw new Error("Invalid seeds, address must fall off the curve");return new be(s)}static async createProgramAddress(t,n){return this.createProgramAddressSync(t,n)}static findProgramAddressSync(t,n){let r=255,s;for(;r!=0;){try{const i=t.concat(Te.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,n){return this.findProgramAddressSync(t,n)}static isOnCurve(t){const n=new be(t);return fh(n.toBytes())}}dy=be;be.default=new dy("11111111111111111111111111111111");la.set(be,{kind:"struct",fields:[["_bn","u256"]]});new be("BPFLoader1111111111111111111111111111111111");const qs=1232,hy=127,py=64;class my extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(my.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class yy extends Error{constructor(t,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(yy.prototype,"name",{value:"TransactionExpiredTimeoutError"});class $i extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty($i.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Sa{constructor(t,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=n}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const n of this.keySegments()){if(t<n.length)return n[t];t-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ke=(e="publicKey")=>q.blob(32,e),$s=(e="string")=>{const t=q.struct([q.u32("length"),q.u32("lengthPadding"),q.blob(q.offset(q.u32(),-8),"chars")],e),n=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:Te.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>q.u32().span+q.u32().span+Te.Buffer.from(i,"utf8").length,s},R5=(e="authorized")=>q.struct([ke("staker"),ke("withdrawer")],e),k5=(e="lockup")=>q.struct([q.ns64("unixTimestamp"),q.ns64("epoch"),ke("custodian")],e),C5=(e="voteInit")=>q.struct([ke("nodePubkey"),ke("authorizedVoter"),ke("authorizedWithdrawer"),q.u8("commission")],e),P5=(e="voteAuthorizeWithSeedArgs")=>q.struct([q.u32("voteAuthorizationType"),ke("currentAuthorityDerivedKeyOwnerPubkey"),$s("currentAuthorityDerivedKeySeed"),ke("newAuthorized")],e);function xn(e){let t=0,n=0;for(;;){let r=e.shift();if(t|=(r&127)<<n*7,n+=1,(r&128)===0)break}return t}function _n(e,t){let n=t;for(;;){let r=n&127;if(n>>=7,n==0){e.push(r);break}else r|=128,e.push(r)}}function Ct(e,t){if(!e)throw new Error(t||"Assertion failed")}class rc{constructor(t,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=n}static compile(t,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new rc(n,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ct(t.length<=256,"Max static account keys length exceeded");const n=t.filter(([,c])=>c.isSigner&&c.isWritable),r=t.filter(([,c])=>c.isSigner&&!c.isWritable),s=t.filter(([,c])=>!c.isSigner&&c.isWritable),i=t.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ct(n.length>0,"Expected at least one writable signer key");const[c]=n[0];Ct(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new be(c)),...r.map(([c])=>new be(c)),...s.map(([c])=>new be(c)),...i.map(([c])=>new be(c))];return[o,a]}extractTableLookup(t){const[n,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new be(i),c=t.findIndex(u=>u.equals(a));c>=0&&(Ct(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const gy="Reached end of buffer unexpectedly";function hr(e){if(e.length===0)throw new Error(gy);return e.shift()}function En(e,...t){const[n]=t;if(t.length===2?n+(t[1]??0)>e.length:n>=e.length)throw new Error(gy);return e.splice(...t)}class qr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(n=>new be(n)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Dt.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Sa(this.staticAccountKeys)}static compile(t){const n=rc.compile(t.instructions,t.payerKey),[r,s]=n.getMessageComponents(),o=new Sa(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Dt.encode(a.data)}));return new qr({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const n=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,n)=>!this.isProgramId(n))}serialize(){const t=this.accountKeys.length;let n=[];_n(n,t);const r=this.instructions.map(m=>{const{accounts:p,programIdIndex:b}=m,_=Array.from(Dt.decode(m.data));let E=[];_n(E,p.length);let T=[];return _n(T,_.length),{programIdIndex:b,keyIndicesCount:Te.Buffer.from(E),keyIndices:p,dataLength:Te.Buffer.from(T),data:_}});let s=[];_n(s,r.length);let i=Te.Buffer.alloc(qs);Te.Buffer.from(s).copy(i);let o=s.length;r.forEach(m=>{const b=q.struct([q.u8("programIdIndex"),q.blob(m.keyIndicesCount.length,"keyIndicesCount"),q.seq(q.u8("keyIndex"),m.keyIndices.length,"keyIndices"),q.blob(m.dataLength.length,"dataLength"),q.seq(q.u8("userdatum"),m.data.length,"data")]).encode(m,i,o);o+=b}),i=i.slice(0,o);const a=q.struct([q.blob(1,"numRequiredSignatures"),q.blob(1,"numReadonlySignedAccounts"),q.blob(1,"numReadonlyUnsignedAccounts"),q.blob(n.length,"keyCount"),q.seq(ke("key"),t,"keys"),ke("recentBlockhash")]),c={numRequiredSignatures:Te.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Te.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Te.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Te.Buffer.from(n),keys:this.accountKeys.map(m=>ni(m.toBytes())),recentBlockhash:Dt.decode(this.recentBlockhash)};let u=Te.Buffer.alloc(2048);const f=a.encode(c,u);return i.copy(u,f),u.slice(0,f+i.length)}static from(t){let n=[...t];const r=hr(n);if(r!==(r&hy))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=hr(n),i=hr(n),o=xn(n);let a=[];for(let p=0;p<o;p++){const b=En(n,0,Fr);a.push(new be(Te.Buffer.from(b)))}const c=En(n,0,Fr),u=xn(n);let f=[];for(let p=0;p<u;p++){const b=hr(n),_=xn(n),E=En(n,0,_),T=xn(n),k=En(n,0,T),M=Dt.encode(Te.Buffer.from(k));f.push({programIdIndex:b,accounts:E,data:M})}const m={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Dt.encode(Te.Buffer.from(c)),accountKeys:a,instructions:f};return new qr(m)}}class Ia{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const n of this.addressTableLookups)t+=n.readonlyIndexes.length+n.writableIndexes.length;return t}getAccountKeys(t){let n;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)n=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Sa(this.staticAccountKeys,n)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(t){const n=rc.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const f of i){const m=n.extractTableLookup(f);if(m!==void 0){const[p,{writable:b,readonly:_}]=m;r.push(p),s.writable.push(...b),s.readonly.push(..._)}}const[o,a]=n.getMessageComponents(),u=new Sa(a,s).compileInstructions(t.instructions);return new Ia({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const t=Array();_n(t,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();_n(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();_n(i,this.addressTableLookups.length);const o=q.struct([q.u8("prefix"),q.struct([q.u8("numRequiredSignatures"),q.u8("numReadonlySignedAccounts"),q.u8("numReadonlyUnsignedAccounts")],"header"),q.blob(t.length,"staticAccountKeysLength"),q.seq(ke(),this.staticAccountKeys.length,"staticAccountKeys"),ke("recentBlockhash"),q.blob(r.length,"instructionsLength"),q.blob(n.length,"serializedInstructions"),q.blob(i.length,"addressTableLookupsLength"),q.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(qs),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:Dt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let t=0;const n=new Uint8Array(qs);for(const r of this.compiledInstructions){const s=Array();_n(s,r.accountKeyIndexes.length);const i=Array();_n(i,r.data.length);const o=q.struct([q.u8("programIdIndex"),q.blob(s.length,"encodedAccountKeyIndexesLength"),q.seq(q.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),q.blob(i.length,"encodedDataLength"),q.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,t)}return n.slice(0,t)}serializeAddressTableLookups(){let t=0;const n=new Uint8Array(qs);for(const r of this.addressTableLookups){const s=Array();_n(s,r.writableIndexes.length);const i=Array();_n(i,r.readonlyIndexes.length);const o=q.struct([ke("accountKey"),q.blob(s.length,"encodedWritableIndexesLength"),q.seq(q.u8(),r.writableIndexes.length,"writableIndexes"),q.blob(i.length,"encodedReadonlyIndexesLength"),q.seq(q.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,t)}return n.slice(0,t)}static deserialize(t){let n=[...t];const r=hr(n),s=r&hy;Ct(r!==s,"Expected versioned message but received legacy message");const i=s;Ct(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:hr(n),numReadonlySignedAccounts:hr(n),numReadonlyUnsignedAccounts:hr(n)},a=[],c=xn(n);for(let _=0;_<c;_++)a.push(new be(En(n,0,Fr)));const u=Dt.encode(En(n,0,Fr)),f=xn(n),m=[];for(let _=0;_<f;_++){const E=hr(n),T=xn(n),k=En(n,0,T),M=xn(n),C=new Uint8Array(En(n,0,M));m.push({programIdIndex:E,accountKeyIndexes:k,data:C})}const p=xn(n),b=[];for(let _=0;_<p;_++){const E=new be(En(n,0,Fr)),T=xn(n),k=En(n,0,T),M=xn(n),C=En(n,0,M);b.push({accountKey:E,writableIndexes:k,readonlyIndexes:C})}return new Ia({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:m,addressTableLookups:b})}}let Mr=(function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e})({});const N5=Te.Buffer.alloc(py).fill(0);class hh{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Te.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:n,isWritable:r})=>({pubkey:t.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class $r{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=t;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=t;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new hh(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,n;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(t=this.recentBlockhash,n=this.instructions),!t)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<n.length;E++)if(n[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);const s=[],i=[];n.forEach(E=>{E.keys.forEach(k=>{i.push({...k})});const T=E.programId.toString();s.includes(T)||s.push(T)}),s.forEach(E=>{i.push({pubkey:new be(E),isSigner:!1,isWritable:!1})});const o=[];i.forEach(E=>{const T=E.pubkey.toString(),k=o.findIndex(M=>M.pubkey.toString()===T);k>-1?(o[k].isWritable=o[k].isWritable||E.isWritable,o[k].isSigner=o[k].isSigner||E.isSigner):o.push(E)}),o.sort(function(E,T){if(E.isSigner!==T.isSigner)return E.isSigner?-1:1;if(E.isWritable!==T.isWritable)return E.isWritable?-1:1;const k={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return E.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",k)});const a=o.findIndex(E=>E.pubkey.equals(r));if(a>-1){const[E]=o.splice(a,1);E.isSigner=!0,E.isWritable=!0,o.unshift(E)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const E of this.signatures){const T=o.findIndex(k=>k.pubkey.equals(E.publicKey));if(T>-1)o[T].isSigner||(o[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let c=0,u=0,f=0;const m=[],p=[];o.forEach(({pubkey:E,isSigner:T,isWritable:k})=>{T?(m.push(E.toString()),c+=1,k||(u+=1)):(p.push(E.toString()),k||(f+=1))});const b=m.concat(p),_=n.map(E=>{const{data:T,programId:k}=E;return{programIdIndex:b.indexOf(k.toString()),accounts:E.keys.map(M=>b.indexOf(M.pubkey.toString())),data:Dt.encode(T)}});return _.forEach(E=>{Ct(E.programIdIndex>=0),E.accounts.forEach(T=>Ct(T>=0))}),new qr({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f},accountKeys:b,recentBlockhash:t,instructions:_})}_compile(){const t=this.compileMessage(),n=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const n=new Set;this.signatures=t.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of t){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of t){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...n){const r=t.serialize();n.forEach(s=>{const i=A5(r,s.secretKey);this._addSignature(s.publicKey,ni(i))})}addSignature(t,n){this._compile(),this._addSignature(t,n)}_addSignature(t,n){Ct(n.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=Te.Buffer.from(n)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):S5(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:n}=this,r=[];_n(r,n.length);const s=r.length+n.length*64+t.length,i=Te.Buffer.alloc(s);return Ct(n.length<256),Te.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(Ct(o.length===64,"signature has invalid length"),Te.Buffer.from(o).copy(i,r.length+a*64))}),t.copy(i,r.length+n.length*64),Ct(i.length<=qs,`Transaction too large: ${i.length} > ${qs}`),i}get keys(){return Ct(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ct(this.instructions.length===1),this.instructions[0].programId}get data(){return Ct(this.instructions.length===1),this.instructions[0].data}static from(t){let n=[...t];const r=xn(n);let s=[];for(let i=0;i<r;i++){const o=En(n,0,py);s.push(Dt.encode(Te.Buffer.from(o)))}return $r.populate(qr.from(n),s)}static populate(t,n=[]){const r=new $r;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==Dt.encode(N5)?null:Dt.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new hh({keys:i,programId:t.accountKeys[s.programIdIndex],data:Dt.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const O5=160,M5=64,L5=O5/M5,$5=1e3/L5;new be("SysvarC1ock11111111111111111111111111111111");new be("SysvarEpochSchedu1e111111111111111111111111");new be("Sysvar1nstructions1111111111111111111111111");new be("SysvarRecentB1ockHashes11111111111111111111");new be("SysvarRent111111111111111111111111111111111");new be("SysvarRewards111111111111111111111111111111");new be("SysvarS1otHashes111111111111111111111111111");new be("SysvarS1otHistory11111111111111111111111111");new be("SysvarStakeHistory1111111111111111111111111");class ph extends Error{constructor({action:t,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ye extends Error{constructor({code:t,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function Ns(e){return new Promise(t=>setTimeout(t,e))}const U5=q.nu64("lamportsPerSignature"),by=q.struct([q.u32("version"),q.u32("state"),ke("authorizedPubkey"),ke("nonce"),q.struct([U5],"feeCalculator")]);by.span;class Jf{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const n=by.decode(ni(t),0);return new Jf({authorizedPubkey:new be(n.authorizedPubkey),nonce:new be(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function ri(e){const t=q.blob(8,e),n=t.decode.bind(t),r=t.encode.bind(t),s=t,i=g2();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const u=i.encode(o);return r(u,a,c)},s}Object.freeze({Create:{index:0,layout:q.struct([q.u32("instruction"),q.ns64("lamports"),q.ns64("space"),ke("programId")])},Assign:{index:1,layout:q.struct([q.u32("instruction"),ke("programId")])},Transfer:{index:2,layout:q.struct([q.u32("instruction"),ri("lamports")])},CreateWithSeed:{index:3,layout:q.struct([q.u32("instruction"),ke("base"),$s("seed"),q.ns64("lamports"),q.ns64("space"),ke("programId")])},AdvanceNonceAccount:{index:4,layout:q.struct([q.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:q.struct([q.u32("instruction"),q.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:q.struct([q.u32("instruction"),ke("authorized")])},AuthorizeNonceAccount:{index:7,layout:q.struct([q.u32("instruction"),ke("authorized")])},Allocate:{index:8,layout:q.struct([q.u32("instruction"),q.ns64("space")])},AllocateWithSeed:{index:9,layout:q.struct([q.u32("instruction"),ke("base"),$s("seed"),q.ns64("space"),ke("programId")])},AssignWithSeed:{index:10,layout:q.struct([q.u32("instruction"),ke("base"),$s("seed"),ke("programId")])},TransferWithSeed:{index:11,layout:q.struct([q.u32("instruction"),ri("lamports"),$s("seed"),ke("programId")])},UpgradeNonceAccount:{index:12,layout:q.struct([q.u32("instruction")])}});new be("11111111111111111111111111111111");new be("BPFLoader2111111111111111111111111111111111");function F5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Iu,mh;function z5(){if(mh)return Iu;mh=1;var e=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,u,f,m;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(m=e.call(r),m==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(m==="[object Object]"){for(c=t(r).sort(),o=c.length,a="",i=0;i<o;)u=c[i],f=n(r[u],!1),f!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+f),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Iu=function(r){var s=n(r,!1);if(s!==void 0)return""+s},Iu}var D5=z5(),yh=F5(D5);const ki=32;function Tu(e){let t=0;for(;e>1;)e/=2,t++;return t}function j5(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}class q5{constructor(t,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const n=Tu(j5(t+ki+1))-Tu(ki)-1,r=this.getSlotsInEpoch(n),s=t-(r-ki);return[n,s]}else{const n=t-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ki:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Tu(ki)):this.slotsPerEpoch}}var V5=globalThis.fetch;class H5 extends e5{constructor(t,n,r){const s=i=>{const o=J2(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,n,r),this.underlyingSocket=void 0}call(...t){const n=this.underlyingSocket?.readyState;return n===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...t){const n=this.underlyingSocket?.readyState;return n===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function G5(e,t){let n;try{n=e.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${e.index}`);return n}const gh=56;class bh{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const n=G5(K5,t),r=t.length-gh;Ct(r>=0,"lookup table is invalid"),Ct(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=q.struct([q.seq(ke(),s,"addresses")]).decode(t.slice(gh));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new be(n.authority[0]):void 0,addresses:i.map(o=>new be(o))}}}const K5={index:1,layout:q.struct([q.u32("typeIndex"),ri("deactivationSlot"),q.nu64("lastExtendedSlot"),q.u8("lastExtendedStartIndex"),q.u8(),q.seq(ke(),q.offset(q.u8(),-1),"authority")])},W5=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Z5(e){const t=e.match(W5);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[n,r,s,i]=t,o=e.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const nt=Eo(Kf(be),ie(),e=>new be(e)),wy=Wf([ie(),Qe("base64")]),Qf=Eo(Kf(Te.Buffer),wy,e=>Te.Buffer.from(e[0],"base64")),Y5=30*1e3;function X5(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Ve(e){let t,n;if(typeof e=="string")t=e;else if(e){const{commitment:r,...s}=e;t=r,n=s}return{commitment:t,config:n}}function wh(e){return e.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function vy(e){return tn([te({jsonrpc:Qe("2.0"),id:ie(),result:e}),te({jsonrpc:Qe("2.0"),id:ie(),error:te({code:xi(),message:ie(),data:ge(A2())})})])}const J5=vy(xi());function Ie(e){return Eo(vy(e),J5,t=>"error"in t?t:{...t,result:ce(t.result,e)})}function ut(e){return Ie(te({context:te({slot:Z()}),value:e}))}function sc(e){return te({context:te({slot:Z()}),value:e})}function Bu(e,t){return e===0?new Ia({header:t.header,staticAccountKeys:t.accountKeys.map(n=>new be(n)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:Dt.decode(n.data)})),addressTableLookups:t.addressTableLookups}):new qr(t)}const Q5=te({foundation:Z(),foundationTerm:Z(),initial:Z(),taper:Z(),terminal:Z()}),ex=Ie(ue(le(te({epoch:Z(),effectiveSlot:Z(),amount:Z(),postBalance:Z(),commission:ge(le(Z()))})))),tx=ue(te({slot:Z(),prioritizationFee:Z()})),nx=te({total:Z(),validator:Z(),foundation:Z(),epoch:Z()}),rx=te({epoch:Z(),slotIndex:Z(),slotsInEpoch:Z(),absoluteSlot:Z(),blockHeight:ge(Z()),transactionCount:ge(Z())}),sx=te({slotsPerEpoch:Z(),leaderScheduleSlotOffset:Z(),warmup:Yn(),firstNormalEpoch:Z(),firstNormalSlot:Z()}),ix=Ym(ie(),ue(Z())),As=le(tn([te({}),ie()])),ox=te({err:As}),ax=Qe("receivedSignature"),cx=te({"solana-core":ie(),"feature-set":ge(Z())}),ux=te({program:ie(),programId:nt,parsed:xi()}),lx=te({programId:nt,accounts:ue(nt),data:ie()}),vh=ut(te({err:le(tn([te({}),ie()])),logs:le(ue(ie())),accounts:ge(le(ue(le(te({executable:Yn(),owner:ie(),lamports:Z(),data:ue(ie()),rentEpoch:ge(Z())}))))),unitsConsumed:ge(Z()),returnData:ge(le(te({programId:ie(),data:Wf([ie(),Qe("base64")])}))),innerInstructions:ge(le(ue(te({index:Z(),instructions:ue(tn([ux,lx]))}))))})),fx=ut(te({byIdentity:Ym(ie(),ue(Z())),range:te({firstSlot:Z(),lastSlot:Z()})}));function dx(e,t,n,r,s,i){const o=n||V5;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(f,m)=>{const p=await new Promise((b,_)=>{try{r(f,m,(E,T)=>b([E,T]))}catch(E){_(E)}});return await o(...p)}),new W2(async(f,m)=>{const p={method:"POST",body:f,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},d_)};try{let b=5,_,E=500;for(;c?_=await c(e,p):_=await o(e,p),!(_.status!==429||s===!0||(b-=1,b===0));)console.error(`Server responded with ${_.status} ${_.statusText}.  Retrying after ${E}ms delay...`),await Ns(E),E*=2;const T=await _.text();_.ok?m(null,T):m(new Error(`${_.status} ${_.statusText}: ${T}`))}catch(b){b instanceof Error&&m(b)}},{})}function hx(e){return(t,n)=>new Promise((r,s)=>{e.request(t,n,(i,o)=>{if(i){s(i);return}r(o)})})}function px(e){return t=>new Promise((n,r)=>{t.length===0&&n([]);const s=t.map(i=>e.request(i.methodName,i.args));e.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const mx=Ie(Q5),yx=Ie(nx),gx=Ie(tx),bx=Ie(rx),wx=Ie(sx),vx=Ie(ix),xx=Ie(Z()),_x=ut(te({total:Z(),circulating:Z(),nonCirculating:Z(),nonCirculatingAccounts:ue(nt)})),Il=te({amount:ie(),uiAmount:le(Z()),decimals:Z(),uiAmountString:ge(ie())}),Ex=ut(ue(te({address:nt,amount:ie(),uiAmount:le(Z()),decimals:Z(),uiAmountString:ge(ie())}))),Ax=ut(ue(te({pubkey:nt,account:te({executable:Yn(),owner:nt,lamports:Z(),data:Qf,rentEpoch:Z()})}))),Tl=te({program:ie(),parsed:xi(),space:Z()}),Sx=ut(ue(te({pubkey:nt,account:te({executable:Yn(),owner:nt,lamports:Z(),data:Tl,rentEpoch:Z()})}))),Ix=ut(ue(te({lamports:Z(),address:nt}))),qi=te({executable:Yn(),owner:nt,lamports:Z(),data:Qf,rentEpoch:Z()}),Tx=te({pubkey:nt,account:qi}),Bx=Eo(tn([Kf(Te.Buffer),Tl]),tn([wy,Tl]),e=>Array.isArray(e)?ce(e,Qf):e),Bl=te({executable:Yn(),owner:nt,lamports:Z(),data:Bx,rentEpoch:Z()}),Rx=te({pubkey:nt,account:Bl}),kx=te({state:tn([Qe("active"),Qe("inactive"),Qe("activating"),Qe("deactivating")]),active:Z(),inactive:Z()}),Cx=Ie(ue(te({signature:ie(),slot:Z(),err:As,memo:le(ie()),blockTime:ge(le(Z()))}))),Px=Ie(ue(te({signature:ie(),slot:Z(),err:As,memo:le(ie()),blockTime:ge(le(Z()))}))),Nx=te({subscription:Z(),result:sc(qi)}),Ox=te({pubkey:nt,account:qi}),Mx=te({subscription:Z(),result:sc(Ox)}),Lx=te({parent:Z(),slot:Z(),root:Z()}),$x=te({subscription:Z(),result:Lx}),Ux=tn([te({type:tn([Qe("firstShredReceived"),Qe("completed"),Qe("optimisticConfirmation"),Qe("root")]),slot:Z(),timestamp:Z()}),te({type:Qe("createdBank"),parent:Z(),slot:Z(),timestamp:Z()}),te({type:Qe("frozen"),slot:Z(),timestamp:Z(),stats:te({numTransactionEntries:Z(),numSuccessfulTransactions:Z(),numFailedTransactions:Z(),maxTransactionsPerEntry:Z()})}),te({type:Qe("dead"),slot:Z(),timestamp:Z(),err:ie()})]),Fx=te({subscription:Z(),result:Ux}),zx=te({subscription:Z(),result:sc(tn([ox,ax]))}),Dx=te({subscription:Z(),result:Z()}),jx=te({pubkey:ie(),gossip:le(ie()),tpu:le(ie()),rpc:le(ie()),version:le(ie())}),xh=te({votePubkey:ie(),nodePubkey:ie(),activatedStake:Z(),epochVoteAccount:Yn(),epochCredits:ue(Wf([Z(),Z(),Z()])),commission:Z(),lastVote:Z(),rootSlot:le(Z())}),qx=Ie(te({current:ue(xh),delinquent:ue(xh)})),Vx=tn([Qe("processed"),Qe("confirmed"),Qe("finalized")]),Hx=te({slot:Z(),confirmations:le(Z()),err:As,confirmationStatus:ge(Vx)}),Gx=ut(ue(le(Hx))),Kx=Ie(Z()),xy=te({accountKey:nt,writableIndexes:ue(Z()),readonlyIndexes:ue(Z())}),ed=te({signatures:ue(ie()),message:te({accountKeys:ue(ie()),header:te({numRequiredSignatures:Z(),numReadonlySignedAccounts:Z(),numReadonlyUnsignedAccounts:Z()}),instructions:ue(te({accounts:ue(Z()),data:ie(),programIdIndex:Z()})),recentBlockhash:ie(),addressTableLookups:ge(ue(xy))})}),_y=te({pubkey:nt,signer:Yn(),writable:Yn(),source:ge(tn([Qe("transaction"),Qe("lookupTable")]))}),Ey=te({accountKeys:ue(_y),signatures:ue(ie())}),Ay=te({parsed:xi(),program:ie(),programId:nt}),Sy=te({accounts:ue(nt),data:ie(),programId:nt}),Wx=tn([Sy,Ay]),Zx=tn([te({parsed:xi(),program:ie(),programId:ie()}),te({accounts:ue(ie()),data:ie(),programId:ie()})]),Iy=Eo(Wx,Zx,e=>"accounts"in e?ce(e,Sy):ce(e,Ay)),Ty=te({signatures:ue(ie()),message:te({accountKeys:ue(_y),instructions:ue(Iy),recentBlockhash:ie(),addressTableLookups:ge(le(ue(xy)))})}),Ta=te({accountIndex:Z(),mint:ie(),owner:ge(ie()),programId:ge(ie()),uiTokenAmount:Il}),By=te({writable:ue(nt),readonly:ue(nt)}),ic=te({err:As,fee:Z(),innerInstructions:ge(le(ue(te({index:Z(),instructions:ue(te({accounts:ue(Z()),data:ie(),programIdIndex:Z()}))})))),preBalances:ue(Z()),postBalances:ue(Z()),logMessages:ge(le(ue(ie()))),preTokenBalances:ge(le(ue(Ta))),postTokenBalances:ge(le(ue(Ta))),loadedAddresses:ge(By),computeUnitsConsumed:ge(Z()),costUnits:ge(Z())}),td=te({err:As,fee:Z(),innerInstructions:ge(le(ue(te({index:Z(),instructions:ue(Iy)})))),preBalances:ue(Z()),postBalances:ue(Z()),logMessages:ge(le(ue(ie()))),preTokenBalances:ge(le(ue(Ta))),postTokenBalances:ge(le(ue(Ta))),loadedAddresses:ge(By),computeUnitsConsumed:ge(Z()),costUnits:ge(Z())}),_i=tn([Qe(0),Qe("legacy")]),Ss=te({pubkey:ie(),lamports:Z(),postBalance:le(Z()),rewardType:le(ie()),commission:ge(le(Z()))}),Yx=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),transactions:ue(te({transaction:ed,meta:le(ic),version:ge(_i)})),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),Xx=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),Jx=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),transactions:ue(te({transaction:Ey,meta:le(ic),version:ge(_i)})),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),Qx=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),transactions:ue(te({transaction:Ty,meta:le(td),version:ge(_i)})),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),e_=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),transactions:ue(te({transaction:Ey,meta:le(td),version:ge(_i)})),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),t_=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),rewards:ge(ue(Ss)),blockTime:le(Z()),blockHeight:le(Z())}))),n_=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),transactions:ue(te({transaction:ed,meta:le(ic)})),rewards:ge(ue(Ss)),blockTime:le(Z())}))),_h=Ie(le(te({blockhash:ie(),previousBlockhash:ie(),parentSlot:Z(),signatures:ue(ie()),blockTime:le(Z())}))),Ru=Ie(le(te({slot:Z(),meta:le(ic),blockTime:ge(le(Z())),transaction:ed,version:ge(_i)}))),sa=Ie(le(te({slot:Z(),transaction:Ty,meta:le(td),blockTime:ge(le(Z())),version:ge(_i)}))),r_=ut(te({blockhash:ie(),lastValidBlockHeight:Z()})),s_=ut(Yn()),i_=te({slot:Z(),numTransactions:Z(),numSlots:Z(),samplePeriodSecs:Z()}),o_=Ie(ue(i_)),a_=ut(le(te({feeCalculator:te({lamportsPerSignature:Z()})}))),c_=Ie(ie()),u_=Ie(ie()),l_=te({err:As,logs:ue(ie()),signature:ie()}),f_=te({result:sc(l_),subscription:Z()}),d_={"solana-client":"js/1.0.0-maintenance"};class h_{constructor(t,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async f=>{const{commitment:m,config:p}=Ve(f),b=this._buildArgs([],m,void 0,p),_=yh(b);return u[_]=u[_]??(async()=>{try{const E=await this._rpcRequest("getBlockHeight",b),T=ce(E,Ie(Z()));if("error"in T)throw new ye(T.error,"failed to get block height information");return T.result}finally{delete u[_]}})(),await u[_]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=X5(t),this._rpcWsEndpoint=r||Z5(t),this._rpcClient=dx(t,s,i,o,a,c),this._rpcRequest=hx(this._rpcClient),this._rpcBatchRequest=px(this._rpcClient),this._rpcWebSocket=new H5(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=ce(o,ut(Z()));if("error"in a)throw new ye(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,n){return await this.getBalanceAndContext(t,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const n=await this._rpcRequest("getBlockTime",[t]),r=ce(n,Ie(le(Z())));if("error"in r)throw new ye(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),n=ce(t,Ie(Z()));if("error"in n)throw new ye(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),n=ce(t,xx);if("error"in n)throw new ye(n.error,"failed to get first available block");return n.result}async getSupply(t){let n={};typeof t=="string"?n={commitment:t}:t?n={...t,commitment:t&&t.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=ce(r,_x);if("error"in s)throw new ye(s.error,"failed to get supply");return s.result}async getTokenSupply(t,n){const r=this._buildArgs([t.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=ce(s,ut(Il));if("error"in i)throw new ye(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,n){const r=this._buildArgs([t.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=ce(s,ut(Il));if("error"in i)throw new ye(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,n,r){const{commitment:s,config:i}=Ve(r);let o=[t.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=ce(c,Ax);if("error"in u)throw new ye(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,n,r){let s=[t.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=ce(o,Sx);if("error"in a)throw new ye(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const n={...t,commitment:t&&t.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ce(s,Ix);if("error"in i)throw new ye(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,n){const r=this._buildArgs([t.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ce(s,Ex);if("error"in i)throw new ye(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=ce(o,ut(le(qi)));if("error"in a)throw new ye(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=ce(o,ut(le(Bl)));if("error"in a)throw new ye(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,n){try{return(await this.getAccountInfoAndContext(t,n)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,n){const{commitment:r,config:s}=Ve(n),i=t.map(u=>u.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ce(a,ut(ue(le(Bl))));if("error"in c)throw new ye(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(t,n){const{commitment:r,config:s}=Ve(n),i=t.map(u=>u.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=ce(a,ut(ue(le(qi))));if("error"in c)throw new ye(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(t,n){return(await this.getMultipleAccountsInfoAndContext(t,n)).value}async getStakeActivation(t,n,r){const{commitment:s,config:i}=Ve(n),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=ce(a,Ie(kx));if("error"in c)throw new ye(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,n){const{commitment:r,config:s}=Ve(n),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:wh(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=ue(Tx),f=o.withContext===!0?ce(c,ut(u)):ce(c,Ie(u));if("error"in f)throw new ye(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async getParsedProgramAccounts(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=ce(o,Ie(ue(Rx)));if("error"in a)throw new ye(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,n){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=Dt.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ct(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((n,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:n}){let r,s,i=!1;const o=new Promise((c,u)=>{try{r=this.onSignature(n,(m,p)=>{r=void 0;const b={context:p,value:m};c({__type:Mr.PROCESSED,response:b})},t);const f=new Promise(m=>{r==null?m():s=this._onSubscriptionStateChange(r,p=>{p==="subscribed"&&m()})});(async()=>{if(await f,i)return;const m=await this.getSignatureStatus(n);if(i||m==null)return;const{context:p,value:b}=m;if(b!=null)if(b?.err)u(b.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Mr.PROCESSED,response:{context:p,value:b}})}})()}catch(f){u(f)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(m=>{const p=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let b=await p();if(!i){for(;b<=r;)if(await Ns(1e3),i||(b=await p(),i))return;m({__type:Mr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),u=this.getCancellationPromise(n);let f;try{const m=await Promise.race([u,c,o]);if(m.__type===Mr.PROCESSED)f=m.response;else throw new my(s)}finally{i=!0,a()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(b=>{let _=i,E=null;const T=async()=>{try{const{context:k,value:M}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return E=k.slot,M?.nonce}catch{return _}};(async()=>{if(_=await T(),!a)for(;;){if(i!==_){b({__type:Mr.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await Ns(2e3),a||(_=await T(),a))return}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),m=this.getCancellationPromise(n);let p;try{const b=await Promise.race([m,f,c]);if(b.__type===Mr.PROCESSED)p=b.response;else{let _;for(;;){const E=await this.getSignatureStatus(o);if(E==null)break;if(E.context.slot<(b.slotInWhichNonceDidAdvance??r)){await Ns(400);continue}_=E;break}if(_?.value){const E=t||"finalized",{confirmationStatus:T}=_.value;switch(E){case"processed":case"recent":if(T!=="processed"&&T!=="confirmed"&&T!=="finalized")throw new $i(o);break;case"confirmed":case"single":case"singleGossip":if(T!=="confirmed"&&T!=="finalized")throw new $i(o);break;case"finalized":case"max":case"root":if(T!=="finalized")throw new $i(o);break;default:}p={context:_.context,value:{err:_.value.err}}}else throw new $i(o)}}finally{a=!0,u()}return p}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:n}){let r;const s=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:Mr.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===Mr.PROCESSED)a=c.response;else throw new yy(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),n=ce(t,Ie(ue(jx)));if("error"in n)throw new ye(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(t){const n=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",n),s=ce(r,qx);if("error"in s)throw new ye(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=ce(i,Ie(Z()));if("error"in o)throw new ye(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ce(i,Ie(ie()));if("error"in o)throw new ye(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,n){const r=[t,n],s=await this._rpcRequest("getSlotLeaders",r),i=ce(s,Ie(ue(nt)));if("error"in i)throw new ye(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,n){const{context:r,value:s}=await this.getSignatureStatuses([t],n);Ct(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,n){const r=[t];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=ce(s,Gx);if("error"in i)throw new ye(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ce(i,Ie(Z()));if("error"in o)throw new ye(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const n=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",n),s=ce(r,mx);if("error"in s)throw new ye(s.error,"failed to get inflation");return s.result}async getInflationReward(t,n,r){const{commitment:s,config:i}=Ve(r),o=this._buildArgs([t.map(u=>u.toBase58())],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=ce(a,ex);if("error"in c)throw new ye(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),n=ce(t,yx);if("error"in n)throw new ye(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ce(i,bx);if("error"in o)throw new ye(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),n=ce(t,wx);if("error"in n)throw new ye(n.error,"failed to get epoch schedule");const r=n.result;return new q5(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),n=ce(t,vx);if("error"in n)throw new ye(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(t,n){const r=this._buildArgs([t],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ce(s,Kx);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const n=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=ce(n,o_);if("error"in r)throw new ye(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,n){const r=this._buildArgs([t],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ce(s,a_);if("error"in i)throw new ye(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,n){const r=ni(t.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=ce(i,ut(le(Z())));if("error"in o)throw new ye(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const n=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=n?.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ce(s,gx);if("error"in i)throw new ye(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ce(i,r_);if("error"in o)throw new ye(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=ce(o,s_);if("error"in a)throw new ye(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),n=ce(t,Ie(cx));if("error"in n)throw new ye(n.error,"failed to get version");return n.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),n=ce(t,Ie(ie()));if("error"in n)throw new ye(n.error,"failed to get genesis hash");return n.result}async getBlock(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=ce(o,Jx);if("error"in a)throw a.error;return a.result}case"none":{const a=ce(o,Xx);if("error"in a)throw a.error;return a.result}default:{const a=ce(o,Yx);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:f,version:m})=>({meta:f,transaction:{...u,message:Bu(m,u.message)},version:m}))}:null}}}catch(a){throw new ye(a,"failed to get confirmed block")}}async getParsedBlock(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=ce(o,e_);if("error"in a)throw a.error;return a.result}case"none":{const a=ce(o,t_);if("error"in a)throw a.error;return a.result}default:{const a=ce(o,Qx);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ye(a,"failed to get block")}}async getBlockProduction(t){let n,r;if(typeof t=="string")r=t;else if(t){const{commitment:a,...c}=t;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=ce(i,fx);if("error"in o)throw new ye(o.error,"failed to get block production information");return o.result}async getTransaction(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=ce(o,Ru);if("error"in a)throw new ye(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Bu(c.version,c.transaction.message)}}}async getParsedTransaction(t,n){const{commitment:r,config:s}=Ve(n),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=ce(o,sa);if("error"in a)throw new ye(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,n){const{commitment:r,config:s}=Ve(n),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=ce(c,sa);if("error"in u)throw new ye(u.error,"failed to get transactions");return u.result})}async getTransactions(t,n){const{commitment:r,config:s}=Ve(n),i=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=ce(c,Ru);if("error"in u)throw new ye(u.error,"failed to get transactions");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Bu(f.version,f.transaction.message)}}})}async getConfirmedBlock(t,n){const r=this._buildArgsAtLeastConfirmed([t],n),s=await this._rpcRequest("getBlock",r),i=ce(s,n_);if("error"in i)throw new ye(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:u})=>{const f=new qr(c.message);return{meta:u,transaction:{...c,message:f}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:$r.populate(c.message,c.signatures)}))}}async getBlocks(t,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[t,n]:[t],r),i=await this._rpcRequest("getBlocks",s),o=ce(i,Ie(ue(Z())));if("error"in o)throw new ye(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,n){const r=this._buildArgsAtLeastConfirmed([t],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ce(s,_h);if("error"in i)throw new ye(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,n){const r=this._buildArgsAtLeastConfirmed([t],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ce(s,_h);if("error"in i)throw new ye(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,n){const r=this._buildArgsAtLeastConfirmed([t],n),s=await this._rpcRequest("getTransaction",r),i=ce(s,Ru);if("error"in i)throw new ye(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new qr(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:$r.populate(a,c)}}async getParsedConfirmedTransaction(t,n){const r=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ce(s,sa);if("error"in i)throw new ye(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,n){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=ce(o,sa);if("error"in a)throw new ye(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,n,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ce(i,Cx);if("error"in o)throw new ye(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,n,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=ce(i,Px);if("error"in o)throw new ye(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,n){const{context:r,value:s}=await this.getAccountInfoAndContext(t,n);let i=null;return s!==null&&(i=new bh({key:t,state:bh.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,n){const{context:r,value:s}=await this.getAccountInfoAndContext(t,n);let i=null;return s!==null&&(i=Jf.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,n){return await this.getNonceAndContext(t,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,n){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),n]),s=ce(r,c_);if("error"in s)throw new ye(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Ns(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Y5;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Ns($5/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:n,config:r}=Ve(t),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ce(i,ut(Z()));if("error"in o)throw new ye(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,n,r){if("message"in t){const E=t.serialize(),T=Te.Buffer.from(E).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const k=n||{};k.encoding="base64","commitment"in k||(k.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(k.innerInstructions=n.innerInstructions);const M=[T,k],C=await this._rpcRequest("simulateTransaction",M),U=ce(C,vh);if("error"in U)throw new Error("failed to simulate transaction: "+U.error.message);return U.result}let s;if(t instanceof $r){let _=t;s=new $r,s.feePayer=_.feePayer,s.instructions=t.instructions,s.nonceInfo=_.nonceInfo,s.signatures=_.signatures}else s=$r.populate(t),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let _=this._disableBlockhashCaching;for(;;){const E=await this._blockhashWithExpiryBlockHeight(_);if(s.lastValidBlockHeight=E.lastValidBlockHeight,s.recentBlockhash=E.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const T=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(T)&&!this._blockhashInfo.transactionSignatures.includes(T)){this._blockhashInfo.simulatedSignatures.push(T);break}else _=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(r){const _=(Array.isArray(r)?r:o.nonProgramIds()).map(E=>E.toBase58());f.accounts={encoding:"base64",addresses:_}}i&&(f.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(f.innerInstructions=n.innerInstructions);const m=[u,f],p=await this._rpcRequest("simulateTransaction",m),b=ce(p,vh);if("error"in b){let _;if("data"in b.error&&(_=b.error.data.logs,_&&Array.isArray(_))){const E=`
    `,T=E+_.join(E);console.error(b.error.message,T)}throw new ph({action:"simulate",signature:"",transactionMessage:b.error.message,logs:_})}return b.result}async sendTransaction(t,n,r){if("version"in t){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,n){const r=ni(t).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(t,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],a=await this._rpcRequest("sendTransaction",o),c=ce(a,u_);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new ph({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(t,n){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(n.state)}catch{}})}}_onSubscriptionStateChange(t,n){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,n=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,n){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:n,subscription:r}=ce(t,Nx);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(t,n){const r=this._nextClientSubscriptionId++,s=yh([t.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:n,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Ct(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,n,r){const{commitment:s,config:i}=Ve(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:n,subscription:r}=ce(t,Mx);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(t,n,r,s){const{commitment:i,config:o}=Ve(r),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:wh(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,n,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:n,subscription:r}=ce(t,f_);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(t){const{result:n,subscription:r}=ce(t,$x);this._handleServerNotification(r,[n])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:n,subscription:r}=ce(t,Fx);this._handleServerNotification(r,[n])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${n}' events could not be found.`)}_buildArgs(t,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,n,r,s)}_wsOnSignatureNotification(t){const{result:n,subscription:r}=ce(t,zx);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(t,n,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(c,u)=>{n(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:n,subscription:r}=ce(t,Dx);this._handleServerNotification(r,[n])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class zi{constructor(t){this._keypair=void 0,this._keypair=t??lh()}static generate(){return new zi(lh())}static fromSecretKey(t,n){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!n||!n.skipValidation){const s=t.slice(0,32),i=Sl(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new zi({publicKey:r,secretKey:t})}static fromSeed(t){const n=Sl(t),r=new Uint8Array(64);return r.set(t),r.set(n,32),new zi({publicKey:n,secretKey:r})}get publicKey(){return new be(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:q.struct([q.u32("instruction"),ri("recentSlot"),q.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:q.struct([q.u32("instruction")])},ExtendLookupTable:{index:2,layout:q.struct([q.u32("instruction"),ri(),q.seq(ke(),q.offset(q.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:q.struct([q.u32("instruction")])},CloseLookupTable:{index:4,layout:q.struct([q.u32("instruction")])}});new be("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:q.struct([q.u8("instruction"),q.u32("units"),q.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:q.struct([q.u8("instruction"),q.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:q.struct([q.u8("instruction"),q.u32("units")])},SetComputeUnitPrice:{index:3,layout:q.struct([q.u8("instruction"),ri("microLamports")])}});new be("ComputeBudget111111111111111111111111111111");q.struct([q.u8("numSignatures"),q.u8("padding"),q.u16("signatureOffset"),q.u16("signatureInstructionIndex"),q.u16("publicKeyOffset"),q.u16("publicKeyInstructionIndex"),q.u16("messageDataOffset"),q.u16("messageDataSize"),q.u16("messageInstructionIndex")]);new be("Ed25519SigVerify111111111111111111111111111");E5.utils.isValidPrivateKey;q.struct([q.u8("numSignatures"),q.u16("signatureOffset"),q.u8("signatureInstructionIndex"),q.u16("ethAddressOffset"),q.u8("ethAddressInstructionIndex"),q.u16("messageDataOffset"),q.u16("messageDataSize"),q.u8("messageInstructionIndex"),q.blob(20,"ethAddress"),q.blob(64,"signature"),q.u8("recoveryId")]);new be("KeccakSecp256k11111111111111111111111111111");var Ry;new be("StakeConfig11111111111111111111111111111111");class ky{constructor(t,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=n,this.custodian=r}}Ry=ky;ky.default=new Ry(0,0,be.default);Object.freeze({Initialize:{index:0,layout:q.struct([q.u32("instruction"),R5(),k5()])},Authorize:{index:1,layout:q.struct([q.u32("instruction"),ke("newAuthorized"),q.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:q.struct([q.u32("instruction")])},Split:{index:3,layout:q.struct([q.u32("instruction"),q.ns64("lamports")])},Withdraw:{index:4,layout:q.struct([q.u32("instruction"),q.ns64("lamports")])},Deactivate:{index:5,layout:q.struct([q.u32("instruction")])},Merge:{index:7,layout:q.struct([q.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:q.struct([q.u32("instruction"),ke("newAuthorized"),q.u32("stakeAuthorizationType"),$s("authoritySeed"),ke("authorityOwner")])}});new be("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:q.struct([q.u32("instruction"),C5()])},Authorize:{index:1,layout:q.struct([q.u32("instruction"),ke("newAuthorized"),q.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:q.struct([q.u32("instruction"),q.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:q.struct([q.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:q.struct([q.u32("instruction"),P5()])}});new be("Vote111111111111111111111111111111111111111");new be("Va1idator1nfo111111111111111111111111111111");te({name:ie(),website:ge(ie()),details:ge(ie()),iconUrl:ge(ie()),keybaseUsername:ge(ie())});new be("Vote111111111111111111111111111111111111111");q.struct([ke("nodePubkey"),ke("authorizedWithdrawer"),q.u8("commission"),q.nu64(),q.seq(q.struct([q.nu64("slot"),q.u32("confirmationCount")]),q.offset(q.u32(),-8),"votes"),q.u8("rootSlotValid"),q.nu64("rootSlot"),q.nu64(),q.seq(q.struct([q.nu64("epoch"),ke("authorizedVoter")]),q.offset(q.u32(),-8),"authorizedVoters"),q.struct([q.seq(q.struct([ke("authorizedPubkey"),q.nu64("epochOfLastAuthorizedSwitch"),q.nu64("targetEpoch")]),32,"buf"),q.nu64("idx"),q.u8("isEmpty")],"priorVoters"),q.nu64(),q.seq(q.struct([q.nu64("epoch"),q.nu64("credits"),q.nu64("prevCredits")]),q.offset(q.u32(),-8),"epochCredits"),q.struct([q.nu64("slot"),q.nu64("timestamp")],"lastTimestamp")]);function p_(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){const f=e.charAt(u),m=f.charCodeAt(0);if(t[m]!==255)throw new TypeError(f+" is ambiguous");t[m]=u}const n=e.length,r=e.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let f=0,m=0,p=0;const b=u.length;for(;p!==b&&u[p]===0;)p++,f++;const _=(b-p)*i+1>>>0,E=new Uint8Array(_);for(;p!==b;){let M=u[p],C=0;for(let U=_-1;(M!==0||C<m)&&U!==-1;U--,C++)M+=256*E[U]>>>0,E[U]=M%n>>>0,M=M/n>>>0;if(M!==0)throw new Error("Non-zero carry");m=C,p++}let T=_-m;for(;T!==_&&E[T]===0;)T++;let k=r.repeat(f);for(;T<_;++T)k+=e.charAt(E[T]);return k}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let f=0,m=0,p=0;for(;u[f]===r;)m++,f++;const b=(u.length-f)*s+1>>>0,_=new Uint8Array(b);for(;f<u.length;){const M=u.charCodeAt(f);if(M>255)return;let C=t[M];if(C===255)return;let U=0;for(let D=b-1;(C!==0||U<p)&&D!==-1;D--,U++)C+=n*_[D]>>>0,_[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");p=U,f++}let E=b-p;for(;E!==b&&_[E]===0;)E++;const T=new Uint8Array(m+(b-E));let k=m;for(;E!==b;)T[k++]=_[E++];return T}function c(u){const f=a(u);if(f)return f;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var m_="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const y_=p_(m_);var g_=Object.defineProperty,b_=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),nd=(e,t)=>{for(var n in t)g_(e,n,{get:t[n],enumerable:!0})},w_={84532:{usdcAddress:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",usdcName:"USDC"},8453:{usdcAddress:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",usdcName:"USD Coin"},43113:{usdcAddress:"0x5425890298aed601595a70AB815c96711a31Bc65",usdcName:"USD Coin"},43114:{usdcAddress:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",usdcName:"USD Coin"},4689:{usdcAddress:"0xcdf79194c6c285077a58da47641d4dbe51f63542",usdcName:"Bridged USDC"},103:{usdcAddress:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",usdcName:"USDC"},101:{usdcAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",usdcName:"USDC"},1328:{usdcAddress:"0x4fcf1784b31630811181f670aea7a7bef803eaed",usdcName:"USDC"},1329:{usdcAddress:"0xe15fc38f6d8c56af07bbcbe3baf5708a2bf42392",usdcName:"USDC"},137:{usdcAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",usdcName:"USD Coin"},80002:{usdcAddress:"0x41E94Eb019C0762f9Bfcf9Fb1E58725BfB0e7582",usdcName:"USDC"},3338:{usdcAddress:"0xbbA60da06c2c5424f03f7434542280FCAd453d10",usdcName:"USDC"},2741:{usdcAddress:"0x84a71ccd554cc1b02749b35d22f684cc8ec987e1",usdcName:"Bridged USDC"},11124:{usdcAddress:"0xe4C7fBB0a626ed208021ccabA6Be1566905E2dFc",usdcName:"Bridged USDC"}},v_=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationUsed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"Blacklisted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newBlacklister",type:"address"}],name:"BlacklisterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"burner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newMasterMinter",type:"address"}],name:"MasterMinterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"MinterConfigured",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldMinter",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"previousOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newAddress",type:"address"}],name:"PauserChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"UnBlacklisted",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[],name:"CANCEL_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"RECEIVE_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"TRANSFER_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"authorizationState",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"blacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"blacklister",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"configureMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currency",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"decrement",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"increment",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"tokenName",type:"string"},{internalType:"string",name:"tokenSymbol",type:"string"},{internalType:"string",name:"tokenCurrency",type:"string"},{internalType:"uint8",name:"tokenDecimals",type:"uint8"},{internalType:"address",name:"newMasterMinter",type:"address"},{internalType:"address",name:"newPauser",type:"address"},{internalType:"address",name:"newBlacklister",type:"address"},{internalType:"address",name:"newOwner",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newName",type:"string"}],name:"initializeV2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"lostAndFound",type:"address"}],name:"initializeV2_1",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"accountsToBlacklist",type:"address[]"},{internalType:"string",name:"newSymbol",type:"string"}],name:"initializeV2_2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"masterMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"minterAllowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"removeMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"unBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newBlacklister",type:"address"}],name:"updateBlacklister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newMasterMinter",type:"address"}],name:"updateMasterMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newPauser",type:"address"}],name:"updatePauser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"}],Me;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return e.objectValues(o)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},e.find=(s,i)=>{for(const o of s)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Me||(Me={}));var Eh;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Eh||(Eh={}));const he=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lr=e=>{switch(typeof e){case"undefined":return he.undefined;case"string":return he.string;case"number":return Number.isNaN(e)?he.nan:he.number;case"boolean":return he.boolean;case"function":return he.function;case"bigint":return he.bigint;case"symbol":return he.symbol;case"object":return Array.isArray(e)?he.array:e===null?he.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?he.promise:typeof Map<"u"&&e instanceof Map?he.map:typeof Set<"u"&&e instanceof Set?he.set:typeof Date<"u"&&e instanceof Date?he.date:he.object;default:return he.unknown}},re=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xr extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}static assert(t){if(!(t instanceof xr))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xr.create=e=>new xr(e);const Rl=(e,t)=>{let n;switch(e.code){case re.invalid_type:e.received===he.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case re.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Me.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:n=`Unrecognized key(s) in object: ${Me.joinValues(e.keys,", ")}`;break;case re.invalid_union:n="Invalid input";break;case re.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Me.joinValues(e.options)}`;break;case re.invalid_enum_value:n=`Invalid enum value. Expected ${Me.joinValues(e.options)}, received '${e.received}'`;break;case re.invalid_arguments:n="Invalid function arguments";break;case re.invalid_return_type:n="Invalid function return type";break;case re.invalid_date:n="Invalid date";break;case re.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Me.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case re.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case re.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case re.custom:n="Invalid input";break;case re.invalid_intersection_types:n="Intersection results could not be merged";break;case re.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case re.not_finite:n="Number must be finite";break;default:n=t.defaultError,Me.assertNever(e)}return{message:n}};let x_=Rl;function __(){return x_}const E_=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:t,defaultError:a}).message;return{...s,path:i,message:a}};function fe(e,t){const n=__(),r=E_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Rl?void 0:Rl].filter(s=>!!s)});e.common.issues.push(r)}class nn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return ve;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return nn.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ve;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const ve=Object.freeze({status:"aborted"}),Ui=e=>({status:"dirty",value:e}),Bn=e=>({status:"valid",value:e}),Ah=e=>e.status==="aborted",Sh=e=>e.status==="dirty",si=e=>e.status==="valid",Ba=e=>typeof Promise<"u"&&e instanceof Promise;var me;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(me||(me={}));class Xn{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ih=(e,t)=>{if(si(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xr(e.common.issues);return this._error=n,this._error}}};function Ae(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(o,a)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:s}}class Ce{get description(){return this._def.description}_getType(t){return Lr(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Lr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new nn,ctx:{common:t.parent.common,data:t.data,parsedType:Lr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Ba(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lr(t)},s=this._parseSync({data:t,path:r.path,parent:r});return Ih(r,s)}"~validate"(t){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lr(t)};if(!this["~standard"].async)try{const r=this._parseSync({data:t,path:[],parent:n});return si(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(r=>si(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Lr(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(Ba(s)?s:Promise.resolve(s));return Ih(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=t(s),a=()=>i.addIssue({code:re.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new ds({schema:this,typeName:xe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return yr.create(this,this._def)}nullable(){return hs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Kn.create(this)}promise(){return Oa.create(this,this._def)}or(t){return ka.create([this,t],this._def)}and(t){return Ca.create(this,t,this._def)}transform(t){return new ds({...Ae(this._def),schema:this,typeName:xe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Ma({...Ae(this._def),innerType:this,defaultValue:n,typeName:xe.ZodDefault})}brand(){return new Oy({typeName:xe.ZodBranded,type:this,...Ae(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new La({...Ae(this._def),innerType:this,catchValue:n,typeName:xe.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return sd.create(this,t)}readonly(){return $a.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const A_=/^c[^\s-]{8,}$/i,S_=/^[0-9a-z]+$/,I_=/^[0-9A-HJKMNP-TV-Z]{26}$/i,T_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,B_=/^[a-z0-9_-]{21}$/i,R_=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,k_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,C_=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,P_="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ku;const N_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,M_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,L_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$_=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,U_=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Cy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",F_=new RegExp(`^${Cy}$`);function Py(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function z_(e){return new RegExp(`^${Py(e)}$`)}function D_(e){let t=`${Cy}T${Py(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function j_(e,t){return!!((t==="v4"||!t)&&N_.test(e)||(t==="v6"||!t)&&M_.test(e))}function q_(e,t){if(!R_.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function V_(e,t){return!!((t==="v4"||!t)&&O_.test(e)||(t==="v6"||!t)&&L_.test(e))}class Hn extends Ce{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==he.string){const i=this._getOrReturnCtx(t);return fe(i,{code:re.invalid_type,expected:he.string,received:i.parsedType}),ve}const r=new nn;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),fe(s,{code:re.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),fe(s,{code:re.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,a=t.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(t,s),o?fe(s,{code:re.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&fe(s,{code:re.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")C_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"email",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ku||(ku=new RegExp(P_,"u")),ku.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"emoji",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")T_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"uuid",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")B_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"nanoid",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")A_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"cuid",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")S_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"cuid2",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")I_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"ulid",code:re.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),fe(s,{validation:"url",code:re.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"regex",code:re.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?D_(i).test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?F_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?z_(i).test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{code:re.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?k_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"duration",code:re.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?j_(t.data,i.version)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"ip",code:re.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?q_(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"jwt",code:re.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?V_(t.data,i.version)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"cidr",code:re.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?$_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"base64",code:re.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?U_.test(t.data)||(s=this._getOrReturnCtx(t,s),fe(s,{validation:"base64url",code:re.invalid_string,message:i.message}),r.dirty()):Me.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:re.invalid_string,...me.errToObj(r)})}_addCheck(t){return new Hn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...me.errToObj(t)})}url(t){return this._addCheck({kind:"url",...me.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...me.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...me.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...me.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...me.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...me.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...me.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...me.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...me.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...me.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...me.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...me.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...me.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...me.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...me.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...me.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...me.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...me.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...me.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...me.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...me.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...me.errToObj(n)})}nonempty(t){return this.min(1,me.errToObj(t))}trim(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Hn.create=e=>new Hn({checks:[],typeName:xe.ZodString,coerce:e?.coerce??!1,...Ae(e)});function H_(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(e.toFixed(s).replace(".","")),o=Number.parseInt(t.toFixed(s).replace(".",""));return i%o/10**s}class cs extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==he.number){const i=this._getOrReturnCtx(t);return fe(i,{code:re.invalid_type,expected:he.number,received:i.parsedType}),ve}let r;const s=new nn;for(const i of this._def.checks)i.kind==="int"?Me.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),fe(r,{code:re.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?H_(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),fe(r,{code:re.not_finite,message:i.message}),s.dirty()):Me.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,me.toString(n))}gt(t,n){return this.setLimit("min",t,!1,me.toString(n))}lte(t,n){return this.setLimit("max",t,!0,me.toString(n))}lt(t,n){return this.setLimit("max",t,!1,me.toString(n))}setLimit(t,n,r,s){return new cs({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:me.toString(s)}]})}_addCheck(t){return new cs({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:me.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:me.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Me.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}cs.create=e=>new cs({checks:[],typeName:xe.ZodNumber,coerce:e?.coerce||!1,...Ae(e)});class us extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==he.bigint)return this._getInvalidInput(t);let r;const s=new nn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),fe(r,{code:re.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Me.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return fe(n,{code:re.invalid_type,expected:he.bigint,received:n.parsedType}),ve}gte(t,n){return this.setLimit("min",t,!0,me.toString(n))}gt(t,n){return this.setLimit("min",t,!1,me.toString(n))}lte(t,n){return this.setLimit("max",t,!0,me.toString(n))}lt(t,n){return this.setLimit("max",t,!1,me.toString(n))}setLimit(t,n,r,s){return new us({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:me.toString(s)}]})}_addCheck(t){return new us({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}us.create=e=>new us({checks:[],typeName:xe.ZodBigInt,coerce:e?.coerce??!1,...Ae(e)});class Ra extends Ce{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==he.boolean){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.boolean,received:r.parsedType}),ve}return Bn(t.data)}}Ra.create=e=>new Ra({typeName:xe.ZodBoolean,coerce:e?.coerce||!1,...Ae(e)});class ii extends Ce{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==he.date){const i=this._getOrReturnCtx(t);return fe(i,{code:re.invalid_type,expected:he.date,received:i.parsedType}),ve}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return fe(i,{code:re.invalid_date}),ve}const r=new nn;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),fe(s,{code:re.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),fe(s,{code:re.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Me.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ii({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:me.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:me.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ii.create=e=>new ii({checks:[],coerce:e?.coerce||!1,typeName:xe.ZodDate,...Ae(e)});class Th extends Ce{_parse(t){if(this._getType(t)!==he.symbol){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.symbol,received:r.parsedType}),ve}return Bn(t.data)}}Th.create=e=>new Th({typeName:xe.ZodSymbol,...Ae(e)});class kl extends Ce{_parse(t){if(this._getType(t)!==he.undefined){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.undefined,received:r.parsedType}),ve}return Bn(t.data)}}kl.create=e=>new kl({typeName:xe.ZodUndefined,...Ae(e)});class Cl extends Ce{_parse(t){if(this._getType(t)!==he.null){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.null,received:r.parsedType}),ve}return Bn(t.data)}}Cl.create=e=>new Cl({typeName:xe.ZodNull,...Ae(e)});class Pl extends Ce{constructor(){super(...arguments),this._any=!0}_parse(t){return Bn(t.data)}}Pl.create=e=>new Pl({typeName:xe.ZodAny,...Ae(e)});class Bh extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Bn(t.data)}}Bh.create=e=>new Bh({typeName:xe.ZodUnknown,...Ae(e)});class Vr extends Ce{_parse(t){const n=this._getOrReturnCtx(t);return fe(n,{code:re.invalid_type,expected:he.never,received:n.parsedType}),ve}}Vr.create=e=>new Vr({typeName:xe.ZodNever,...Ae(e)});class Rh extends Ce{_parse(t){if(this._getType(t)!==he.undefined){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.void,received:r.parsedType}),ve}return Bn(t.data)}}Rh.create=e=>new Rh({typeName:xe.ZodVoid,...Ae(e)});class Kn extends Ce{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==he.array)return fe(n,{code:re.invalid_type,expected:he.array,received:n.parsedType}),ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(fe(n,{code:o?re.too_big:re.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(fe(n,{code:re.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(fe(n,{code:re.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Xn(n,o,n.path,a)))).then(o=>nn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Xn(n,o,n.path,a)));return nn.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Kn({...this._def,minLength:{value:t,message:me.toString(n)}})}max(t,n){return new Kn({...this._def,maxLength:{value:t,message:me.toString(n)}})}length(t,n){return new Kn({...this._def,exactLength:{value:t,message:me.toString(n)}})}nonempty(t){return this.min(1,t)}}Kn.create=(e,t)=>new Kn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:xe.ZodArray,...Ae(t)});function Os(e){if(e instanceof kt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=yr.create(Os(r))}return new kt({...e._def,shape:()=>t})}else return e instanceof Kn?new Kn({...e._def,type:Os(e.element)}):e instanceof yr?yr.create(Os(e.unwrap())):e instanceof hs?hs.create(Os(e.unwrap())):e instanceof ls?ls.create(e.items.map(t=>Os(t))):e}class kt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Me.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==he.object){const u=this._getOrReturnCtx(t);return fe(u,{code:re.invalid_type,expected:he.object,received:u.parsedType}),ve}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Vr&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const f=i[u],m=s.data[u];c.push({key:{status:"valid",value:u},value:f._parse(new Xn(s,m,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Vr){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(u==="strict")a.length>0&&(fe(s,{code:re.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of a){const m=s.data[f];c.push({key:{status:"valid",value:f},value:u._parse(new Xn(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of c){const m=await f.key,p=await f.value;u.push({key:m,value:p,alwaysSet:f.alwaysSet})}return u}).then(u=>nn.mergeObjectSync(r,u)):nn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return me.errToObj,new kt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{const s=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:me.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new kt({...this._def,unknownKeys:"strip"})}passthrough(){return new kt({...this._def,unknownKeys:"passthrough"})}extend(t){return new kt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new kt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:xe.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new kt({...this._def,catchall:t})}pick(t){const n={};for(const r of Me.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new kt({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Me.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new kt({...this._def,shape:()=>n})}deepPartial(){return Os(this)}partial(t){const n={};for(const r of Me.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new kt({...this._def,shape:()=>n})}required(t){const n={};for(const r of Me.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof yr;)i=i._def.innerType;n[r]=i}return new kt({...this._def,shape:()=>n})}keyof(){return Ny(Me.objectKeys(this.shape))}}kt.create=(e,t)=>new kt({shape:()=>e,unknownKeys:"strip",catchall:Vr.create(),typeName:xe.ZodObject,...Ae(t)});kt.strictCreate=(e,t)=>new kt({shape:()=>e,unknownKeys:"strict",catchall:Vr.create(),typeName:xe.ZodObject,...Ae(t)});kt.lazycreate=(e,t)=>new kt({shape:e,unknownKeys:"strip",catchall:Vr.create(),typeName:xe.ZodObject,...Ae(t)});class ka extends Ce{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xr(a.ctx.common.issues));return fe(n,{code:re.invalid_union,unionErrors:o}),ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new xr(c));return fe(n,{code:re.invalid_union,unionErrors:a}),ve}}get options(){return this._def.options}}ka.create=(e,t)=>new ka({options:e,typeName:xe.ZodUnion,...Ae(t)});const cr=e=>e instanceof Ol?cr(e.schema):e instanceof ds?cr(e.innerType()):e instanceof Na?[e.value]:e instanceof fs?e.options:e instanceof Ml?Me.objectValues(e.enum):e instanceof Ma?cr(e._def.innerType):e instanceof kl?[void 0]:e instanceof Cl?[null]:e instanceof yr?[void 0,...cr(e.unwrap())]:e instanceof hs?[null,...cr(e.unwrap())]:e instanceof Oy||e instanceof $a?cr(e.unwrap()):e instanceof La?cr(e._def.innerType):[];class rd extends Ce{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==he.object)return fe(n,{code:re.invalid_type,expected:he.object,received:n.parsedType}),ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(fe(n,{code:re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const i of n){const o=cr(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);s.set(a,i)}}return new rd({typeName:xe.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...Ae(r)})}}function Nl(e,t){const n=Lr(e),r=Lr(t);if(e===t)return{valid:!0,data:e};if(n===he.object&&r===he.object){const s=Me.objectKeys(t),i=Me.objectKeys(e).filter(a=>s.indexOf(a)!==-1),o={...e,...t};for(const a of i){const c=Nl(e[a],t[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===he.array&&r===he.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i],c=Nl(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===he.date&&r===he.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ca extends Ce{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,o)=>{if(Ah(i)||Ah(o))return ve;const a=Nl(i.value,o.value);return a.valid?((Sh(i)||Sh(o))&&n.dirty(),{status:n.value,value:a.data}):(fe(r,{code:re.invalid_intersection_types}),ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ca.create=(e,t,n)=>new Ca({left:e,right:t,typeName:xe.ZodIntersection,...Ae(n)});class ls extends Ce{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==he.array)return fe(r,{code:re.invalid_type,expected:he.array,received:r.parsedType}),ve;if(r.data.length<this._def.items.length)return fe(r,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&r.data.length>this._def.items.length&&(fe(r,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Xn(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>nn.mergeArray(n,o)):nn.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new ls({...this._def,rest:t})}}ls.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ls({items:e,typeName:xe.ZodTuple,rest:null,...Ae(t)})};class Pa extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==he.object)return fe(r,{code:re.invalid_type,expected:he.object,received:r.parsedType}),ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Xn(r,a,r.path,a)),value:o._parse(new Xn(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?nn.mergeObjectAsync(n,s):nn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ce?new Pa({keyType:t,valueType:n,typeName:xe.ZodRecord,...Ae(r)}):new Pa({keyType:Hn.create(),valueType:t,typeName:xe.ZodRecord,...Ae(n)})}}class kh extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==he.map)return fe(r,{code:re.invalid_type,expected:he.map,received:r.parsedType}),ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new Xn(r,a,r.path,[u,"key"])),value:i._parse(new Xn(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,f=await c.value;if(u.status==="aborted"||f.status==="aborted")return ve;(u.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(u.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,f=c.value;if(u.status==="aborted"||f.status==="aborted")return ve;(u.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(u.value,f.value)}return{status:n.value,value:a}}}}kh.create=(e,t,n)=>new kh({valueType:t,keyType:e,typeName:xe.ZodMap,...Ae(n)});class Vi extends Ce{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==he.set)return fe(r,{code:re.invalid_type,expected:he.set,received:r.parsedType}),ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(fe(r,{code:re.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(fe(r,{code:re.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const f of c){if(f.status==="aborted")return ve;f.status==="dirty"&&n.dirty(),u.add(f.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new Xn(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(t,n){return new Vi({...this._def,minSize:{value:t,message:me.toString(n)}})}max(t,n){return new Vi({...this._def,maxSize:{value:t,message:me.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Vi.create=(e,t)=>new Vi({valueType:e,minSize:null,maxSize:null,typeName:xe.ZodSet,...Ae(t)});class Ol extends Ce{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ol.create=(e,t)=>new Ol({getter:e,typeName:xe.ZodLazy,...Ae(t)});class Na extends Ce{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return fe(n,{received:n.data,code:re.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:t.data}}get value(){return this._def.value}}Na.create=(e,t)=>new Na({value:e,typeName:xe.ZodLiteral,...Ae(t)});function Ny(e,t){return new fs({values:e,typeName:xe.ZodEnum,...Ae(t)})}class fs extends Ce{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return fe(n,{expected:Me.joinValues(r),received:n.parsedType,code:re.invalid_type}),ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return fe(n,{received:n.data,code:re.invalid_enum_value,options:r}),ve}return Bn(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return fs.create(t,{...this._def,...n})}exclude(t,n=this._def){return fs.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}fs.create=Ny;class Ml extends Ce{_parse(t){const n=Me.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==he.string&&r.parsedType!==he.number){const s=Me.objectValues(n);return fe(r,{expected:Me.joinValues(s),received:r.parsedType,code:re.invalid_type}),ve}if(this._cache||(this._cache=new Set(Me.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Me.objectValues(n);return fe(r,{received:r.data,code:re.invalid_enum_value,options:s}),ve}return Bn(t.data)}get enum(){return this._def.values}}Ml.create=(e,t)=>new Ml({values:e,typeName:xe.ZodNativeEnum,...Ae(t)});class Oa extends Ce{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==he.promise&&n.common.async===!1)return fe(n,{code:re.invalid_type,expected:he.promise,received:n.parsedType}),ve;const r=n.parsedType===he.promise?n.data:Promise.resolve(n.data);return Bn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Oa.create=(e,t)=>new Oa({type:e,typeName:xe.ZodPromise,...Ae(t)});class ds extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:o=>{fe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return ve;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?ve:c.status==="dirty"||n.value==="dirty"?Ui(c.value):c});{if(n.value==="aborted")return ve;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?ve:a.status==="dirty"||n.value==="dirty"?Ui(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!si(o))return ve;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>si(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):ve);Me.assertNever(s)}}ds.create=(e,t,n)=>new ds({schema:e,typeName:xe.ZodEffects,effect:t,...Ae(n)});ds.createWithPreprocess=(e,t,n)=>new ds({schema:t,effect:{type:"preprocess",transform:e},typeName:xe.ZodEffects,...Ae(n)});class yr extends Ce{_parse(t){return this._getType(t)===he.undefined?Bn(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}yr.create=(e,t)=>new yr({innerType:e,typeName:xe.ZodOptional,...Ae(t)});class hs extends Ce{_parse(t){return this._getType(t)===he.null?Bn(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}hs.create=(e,t)=>new hs({innerType:e,typeName:xe.ZodNullable,...Ae(t)});class Ma extends Ce{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===he.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ma.create=(e,t)=>new Ma({innerType:e,typeName:xe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ae(t)});class La extends Ce{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ba(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}La.create=(e,t)=>new La({innerType:e,typeName:xe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ae(t)});class Ch extends Ce{_parse(t){if(this._getType(t)!==he.nan){const r=this._getOrReturnCtx(t);return fe(r,{code:re.invalid_type,expected:he.nan,received:r.parsedType}),ve}return{status:"valid",value:t.data}}}Ch.create=e=>new Ch({typeName:xe.ZodNaN,...Ae(e)});class Oy extends Ce{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class sd extends Ce{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ve:i.status==="dirty"?(n.dirty(),Ui(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new sd({in:t,out:n,typeName:xe.ZodPipeline})}}class $a extends Ce{_parse(t){const n=this._def.innerType._parse(t),r=s=>(si(s)&&(s.value=Object.freeze(s.value)),s);return Ba(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}$a.create=(e,t)=>new $a({innerType:e,typeName:xe.ZodReadonly,...Ae(t)});var xe;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(xe||(xe={}));const He=Hn.create,An=cs.create;us.create;const My=Ra.create,G_=ii.create,oi=Pl.create;Vr.create;const oc=Kn.create,Ft=kt.create,Ly=ka.create,K_=rd.create;Ca.create;ls.create;const ns=Pa.create,W_=Na.create,er=fs.create;Oa.create;yr.create;hs.create;const Z_={string:(e=>Hn.create({...e,coerce:!0})),number:(e=>cs.create({...e,coerce:!0})),boolean:(e=>Ra.create({...e,coerce:!0})),bigint:(e=>us.create({...e,coerce:!0})),date:(e=>ii.create({...e,coerce:!0}))},Y_="1.1.0";let fn=class Ll extends Error{constructor(t,n={}){const r=n.cause instanceof Ll?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Ll&&n.cause.docsPath||n.docsPath,i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Y_}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function Tr(e,t){return e.exec(t)?.groups}const $y=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Uy=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Fy=/^\(.+?\).*?$/,Ph=/^tuple(?<array>(\[(\d*)\])*)$/;function $l(e){let t=e.type;if(Ph.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const i=e.components[s];t+=$l(i),s<n-1&&(t+=", ")}const r=Tr(Ph,e.type);return t+=`)${r?.array??""}`,$l({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Ms(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=$l(s),r!==n-1&&(t+=", ")}return t}function Ua(e){return e.type==="function"?`function ${e.name}(${Ms(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${Ms(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Ms(e.inputs)})`:e.type==="error"?`error ${e.name}(${Ms(e.inputs)})`:e.type==="constructor"?`constructor(${Ms(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const zy=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function X_(e){return zy.test(e)}function J_(e){return Tr(zy,e)}const Dy=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Q_(e){return Dy.test(e)}function eE(e){return Tr(Dy,e)}const jy=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function tE(e){return jy.test(e)}function nE(e){return Tr(jy,e)}const qy=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function ac(e){return qy.test(e)}function rE(e){return Tr(qy,e)}const Vy=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function sE(e){return Vy.test(e)}function iE(e){return Tr(Vy,e)}const Hy=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function oE(e){return Hy.test(e)}function aE(e){return Tr(Hy,e)}const cE=/^receive\(\) external payable$/;function uE(e){return cE.test(e)}const Nh=new Set(["memory","indexed","storage","calldata"]),lE=new Set(["indexed"]),Ul=new Set(["calldata","memory","storage"]);class fE extends fn{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class dE extends fn{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class hE extends fn{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class pE extends fn{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class mE extends fn{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class yE extends fn{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class gE extends fn{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class bE extends fn{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class wE extends fn{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ei extends fn{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class vE extends fn{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class xE extends fn{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _E extends fn{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class EE extends fn{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function AE(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return t?`${t}:${e}${r}`:e}const Cu=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Fl(e,t={}){if(tE(e))return SE(e,t);if(Q_(e))return IE(e,t);if(X_(e))return TE(e,t);if(sE(e))return BE(e,t);if(oE(e))return RE(e);if(uE(e))return{type:"receive",stateMutability:"payable"};throw new vE({signature:e})}function SE(e,t={}){const n=nE(e);if(!n)throw new Ei({signature:e,type:"function"});const r=pn(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(_r(r[a],{modifiers:Ul,structs:t,type:"function"}));const o=[];if(n.returns){const a=pn(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(_r(a[u],{modifiers:Ul,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function IE(e,t={}){const n=eE(e);if(!n)throw new Ei({signature:e,type:"event"});const r=pn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_r(r[o],{modifiers:lE,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function TE(e,t={}){const n=J_(e);if(!n)throw new Ei({signature:e,type:"error"});const r=pn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_r(r[o],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function BE(e,t={}){const n=iE(e);if(!n)throw new Ei({signature:e,type:"constructor"});const r=pn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(_r(r[o],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function RE(e){const t=aE(e);if(!t)throw new Ei({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const kE=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,CE=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,PE=/^u?int$/;function _r(e,t){const n=AE(e,t?.type,t?.structs);if(Cu.has(n))return Cu.get(n);const r=Fy.test(e),s=Tr(r?CE:kE,e);if(!s)throw new mE({param:e});if(s.name&&OE(s.name))throw new yE({param:e,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const m=pn(s.type),p=[],b=m.length;for(let _=0;_<b;_++)p.push(_r(m[_],{structs:a}));u={components:p}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(PE.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,t?.type!=="struct"&&!Gy(c))throw new hE({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new gE({param:e,type:t?.type,modifier:s.modifier});if(Ul.has(s.modifier)&&!ME(c,!!s.array))throw new bE({param:e,type:t?.type,modifier:s.modifier})}const f={type:`${c}${s.array??""}`,...i,...o,...u};return Cu.set(n,f),f}function pn(e,t=[],n="",r=0){const s=e.trim().length;for(let i=0;i<s;i++){const o=e[i],a=e.slice(i+1);switch(o){case",":return r===0?pn(a,[...t,n.trim()]):pn(a,t,`${n}${o}`,r);case"(":return pn(a,t,`${n}${o}`,r+1);case")":return pn(a,t,`${n}${o}`,r-1);default:return pn(a,t,`${n}${o}`,r)}}if(n==="")return t;if(r!==0)throw new EE({current:n,depth:r});return t.push(n.trim()),t}function Gy(e){return e==="address"||e==="bool"||e==="function"||e==="string"||$y.test(e)||Uy.test(e)}const NE=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function OE(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||$y.test(e)||Uy.test(e)||NE.test(e)}function ME(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function id(e){const t={},n=e.length;for(let o=0;o<n;o++){const a=e[o];if(!ac(a))continue;const c=rE(a);if(!c)throw new Ei({signature:a,type:"struct"});const u=c.properties.split(";"),f=[],m=u.length;for(let p=0;p<m;p++){const _=u[p].trim();if(!_)continue;const E=_r(_,{type:"struct"});f.push(E)}if(!f.length)throw new xE({signature:a});t[c.name]=f}const r={},s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=Ky(c,t)}return r}const LE=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Ky(e,t,n=new Set){const r=[],s=e.length;for(let i=0;i<s;i++){const o=e[i];if(Fy.test(o.type))r.push(o);else{const c=Tr(LE,o.type);if(!c?.type)throw new wE({abiParameter:o});const{array:u,type:f}=c;if(f in t){if(n.has(f))throw new _E({type:f});r.push({...o,type:`tuple${u??""}`,components:Ky(t[f]??[],t,new Set([...n,f]))})}else if(Gy(f))r.push(o);else throw new dE({type:f})}}return r}function Wy(e){const t=id(e),n=[],r=e.length;for(let s=0;s<r;s++){const i=e[s];ac(i)||n.push(Fl(i,t))}return n}function Oh(e){let t;if(typeof e=="string")t=Fl(e);else{const n=id(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(!ac(i)){t=Fl(i,n);break}}}if(!t)throw new fE({signature:e});return t}function Mh(e){const t=[];if(typeof e=="string"){const n=pn(e),r=n.length;for(let s=0;s<r;s++)t.push(_r(n[s],{modifiers:Nh}))}else{const n=id(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(ac(i))continue;const o=pn(i),a=o.length;for(let c=0;c<a;c++)t.push(_r(o[c],{modifiers:Nh,structs:n}))}}if(t.length===0)throw new pE({params:e});return t}function pe(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:i=>t(e,i)}function Ln(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new WE(e.type);return`${e.name}(${cc(e.inputs,{includeName:t})})`}function cc(e,{includeName:t=!1}={}){return e?e.map(n=>$E(n,{includeName:t})).join(t?", ":","):""}function $E(e,{includeName:t}){return e.type.startsWith("tuple")?`(${cc(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function $n(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function tt(e){return $n(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Zy="2.38.6";let Pu={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Zy}`},ee=class zl extends Error{constructor(t,n={}){const r=n.cause instanceof zl?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof zl&&n.cause.docsPath||n.docsPath,i=Pu.getDocsUrl?.({...n,docsPath:s}),o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Pu.version?[`Version: ${Pu.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Zy}walk(t){return Yy(this,t)}};function Yy(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Yy(e.cause,t):t?null:e}class Xy extends ee{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Fa extends ee{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Jy extends ee{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${cc(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Ao extends ee{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class UE extends ee{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class FE extends ee{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${tt(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class zE extends ee{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class DE extends ee{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Lh extends ee{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Qy extends ee{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class jE extends ee{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class eg extends ee{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class $h extends ee{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class ai extends ee{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class tg extends ee{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class qE extends ee{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class VE extends ee{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Ln(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Ln(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let HE=class extends ee{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Hi extends ee{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${cc(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class uc extends ee{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ln(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class GE extends ee{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class KE extends ee{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let ng=class extends ee{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class WE extends ee{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class ZE extends ee{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let rg=class extends ee{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},sg=class extends ee{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Uh extends ee{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Is(e,{dir:t,size:n=32}={}){return typeof e=="string"?zr(e,{dir:t,size:n}):YE(e,{dir:t,size:n})}function zr(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new sg({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function YE(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new sg({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=t==="right";r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}let ig=class extends ee{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},XE=class extends ee{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class JE extends ee{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let QE=class extends ee{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function In(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Dn(e,{size:t}){if(tt(e)>t)throw new QE({givenSize:tt(e),maxSize:t})}function ze(e,t={}){const{signed:n}=t;t.size&&Dn(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function eA(e,t={}){let n=e;if(t.size&&(Dn(n,{size:t.size}),n=In(n)),In(n)==="0x00")return!1;if(In(n)==="0x01")return!0;throw new JE(n)}function mn(e,t={}){return Number(ze(e,t))}const tA=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oe(e,t={}){return typeof e=="number"||typeof e=="bigint"?ne(e,t):typeof e=="string"?ci(e,t):typeof e=="boolean"?og(e,t):Ot(e,t)}function og(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Dn(n,{size:t.size}),Is(n,{size:t.size})):n}function Ot(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=tA[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Dn(r,{size:t.size}),Is(r,{dir:"right",size:t.size})):r}function ne(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof e=="bigint"?"n":"";throw new ig({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Is(a,{size:r}):a}const nA=new TextEncoder;function ci(e,t={}){const n=nA.encode(e);return Ot(n,t)}const rA=new TextEncoder;function gr(e,t={}){return typeof e=="number"||typeof e=="bigint"?iA(e,t):typeof e=="boolean"?sA(e,t):$n(e)?un(e,t):rs(e,t)}function sA(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Dn(n,{size:t.size}),Is(n,{size:t.size})):n}const ir={zero:48,nine:57,A:65,F:70,a:97,f:102};function Fh(e){if(e>=ir.zero&&e<=ir.nine)return e-ir.zero;if(e>=ir.A&&e<=ir.F)return e-(ir.A-10);if(e>=ir.a&&e<=ir.f)return e-(ir.a-10)}function un(e,t={}){let n=e;t.size&&(Dn(n,{size:t.size}),n=Is(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Fh(r.charCodeAt(a++)),u=Fh(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new ee(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function iA(e,t){const n=ne(e,t);return un(n)}function rs(e,t={}){const n=rA.encode(e);return typeof t.size=="number"?(Dn(n,{size:t.size}),Is(n,{dir:"right",size:t.size})):n}function Ut(e,t){const n=t||"hex",r=ay($n(e,{strict:!1})?gr(e):e);return n==="bytes"?r:Oe(r)}const oA=e=>Ut(gr(e));function aA(e){return oA(e)}function cA(e){let t=!0,n="",r=0,s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!i)throw new ee("Unable to normalize signature.");return s}const uA=e=>{const t=typeof e=="string"?e:Ua(e);return cA(t)};function ag(e){return aA(uA(e))}const lc=ag;let Nt=class extends ee{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},So=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Nu=new So(8192);function Io(e,t){if(Nu.has(`${e}.${t}`))return Nu.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=Ut(rs(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Nu.set(`${e}.${t}`,i),i}function Vs(e,t){if(!Ye(e,{strict:!1}))throw new Nt({address:e});return Io(e,t)}const lA=/^0x[a-fA-F0-9]{40}$/,Ou=new So(8192);function Ye(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ou.has(r))return Ou.get(r);const s=lA.test(e)?e.toLowerCase()===e?!0:n?Io(e)===e:!0:!1;return Ou.set(r,s),s}function Tn(e){return typeof e[0]=="string"?Rn(e):fA(e)}function fA(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Rn(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ps(e,t,n,{strict:r}={}){return $n(e,{strict:!1})?Dl(e,t,n,{strict:r}):lg(e,t,n,{strict:r})}function cg(e,t){if(typeof t=="number"&&t>0&&t>tt(e)-1)throw new rg({offset:t,position:"start",size:tt(e)})}function ug(e,t,n){if(typeof t=="number"&&typeof n=="number"&&tt(e)!==n-t)throw new rg({offset:n,position:"end",size:tt(e)})}function lg(e,t,n,{strict:r}={}){cg(e,t);const s=e.slice(t,n);return r&&ug(s,t,n),s}function Dl(e,t,n,{strict:r}={}){cg(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&ug(s,t,n),s}const dA=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fg=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Gr(e,t){if(e.length!==t.length)throw new zE({expectedLength:e.length,givenLength:t.length});const n=hA({params:e,values:t}),r=ad(n);return r.length===0?"0x":r}function hA({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(od({param:e[r],value:t[r]}));return n}function od({param:e,value:t}){const n=cd(e.type);if(n){const[r,s]=n;return mA(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return vA(t,{param:e});if(e.type==="address")return pA(t);if(e.type==="bool")return gA(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=fg.exec(e.type)??[];return bA(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return yA(t,{param:e});if(e.type==="string")return wA(t);throw new GE(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ad(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?t+=32:t+=tt(a)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?(n.push(ne(t+s,{size:32})),r.push(a),s+=tt(a)):n.push(a)}return Tn([...n,...r])}function pA(e){if(!Ye(e))throw new Nt({address:e});return{dynamic:!1,encoded:zr(e.toLowerCase())}}function mA(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new ng(e);if(!r&&e.length!==t)throw new UE({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let o=0;o<e.length;o++){const a=od({param:n,value:e[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=ad(i);if(r){const a=ne(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Tn([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Tn(i.map(({encoded:o})=>o))}}function yA(e,{param:t}){const[,n]=t.type.split("bytes"),r=tt(e);if(!n){let s=e;return r%32!==0&&(s=zr(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Tn([zr(ne(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new FE({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:zr(e,{dir:"right"})}}function gA(e){if(typeof e!="boolean")throw new ee(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:zr(og(e))}}function bA(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new ig({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:ne(e,{size:32,signed:t})}}function wA(e){const t=ci(e),n=Math.ceil(tt(t)/32),r=[];for(let s=0;s<n;s++)r.push(zr(ps(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Tn([zr(ne(tt(t),{size:32})),...r])}}function vA(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],o=Array.isArray(e)?s:i.name,a=od({param:i,value:e[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?ad(r):Tn(r.map(({encoded:s})=>s))}}function cd(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const To=e=>ps(ag(e),0,4);function Ts(e){const{abi:t,args:n=[],name:r}=e,s=$n(r,{strict:!1}),i=t.filter(a=>s?a.type==="function"?To(a)===r:a.type==="event"?lc(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,f)=>{const m="inputs"in a&&a.inputs[f];return m?jl(u,m):!1})){if(o&&"inputs"in o&&o.inputs){const u=dg(a.inputs,o.inputs,n);if(u)throw new VE({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function jl(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Ye(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>jl(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>jl(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function dg(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return dg(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ye(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ye(n[r],{strict:!1}):!1)return o}}const zh="/docs/contract/encodeEventTopics";function Bo(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=Ts({abi:t,name:n});if(!c)throw new $h(n,{docsPath:zh});s=c}if(s.type!=="event")throw new $h(void 0,{docsPath:zh});const i=Ln(s),o=lc(i);let a=[];if(r&&"inputs"in s){const c=s.inputs?.filter(f=>"indexed"in f&&f.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(f=>r[f.name])??[]:[];u.length>0&&(a=c?.map((f,m)=>Array.isArray(u[m])?u[m].map((p,b)=>Dh({param:f,value:u[m][b]})):typeof u[m]<"u"&&u[m]!==null?Dh({param:f,value:u[m]}):null)??[])}return[o,...a]}function Dh({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ut(gr(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new ZE(e.type);return Gr([e],[t])}function fc(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:i,transport:o})=>{i==="success"&&t===r&&(n[s]=o.request)}),(r=>n[r]||e.request)}async function hg(e,t){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=t,u=fc(e,{method:"eth_newFilter"}),f=i?Bo({abi:r,args:s,eventName:i}):void 0,m=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?ne(o):o,toBlock:typeof c=="bigint"?ne(c):c,topics:f}]});return{abi:r,args:s,eventName:i,id:m,request:u(m),strict:!!a,type:"event"}}function Xe(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const jh="/docs/contract/encodeFunctionData";function xA(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const i=Ts({abi:t,args:n,name:r});if(!i)throw new ai(r,{docsPath:jh});s=i}if(s.type!=="function")throw new ai(void 0,{docsPath:jh});return{abi:[s],functionName:To(Ln(s))}}function rn(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:xA(e),s=n[0],i=r,o="inputs"in s&&s.inputs?Gr(s.inputs,t??[]):void 0;return Rn([i,o??"0x"])}const _A={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},pg={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},EA={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let qh=class extends ee{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},mg=class extends ee{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},AA=class extends ee{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const SA={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new AA({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new mg({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new qh({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new qh({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function ud(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(SA);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function IA(e,t={}){typeof t.size<"u"&&Dn(e,{size:t.size});const n=Ot(e,t);return ze(n,t)}function TA(e,t={}){let n=e;if(typeof t.size<"u"&&(Dn(n,{size:t.size}),n=In(n)),n.length>1||n[0]>1)throw new XE(n);return!!n[0]}function br(e,t={}){typeof t.size<"u"&&Dn(e,{size:t.size});const n=Ot(e,t);return mn(n,t)}function BA(e,t={}){let n=e;return typeof t.size<"u"&&(Dn(n,{size:t.size}),n=In(n,{dir:"right"})),new TextDecoder().decode(n)}function Ro(e,t){const n=typeof t=="string"?un(t):t,r=ud(n);if(tt(n)===0&&e.length>0)throw new Ao;if(tt(t)&&tt(t)<32)throw new Jy({data:typeof t=="string"?t:Ot(t),params:e,size:tt(t)});let s=0;const i=[];for(let o=0;o<e.length;++o){const a=e[o];r.setPosition(s);const[c,u]=Hs(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function Hs(e,t,{staticPosition:n}){const r=cd(t.type);if(r){const[s,i]=r;return kA(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return OA(e,t,{staticPosition:n});if(t.type==="address")return RA(e);if(t.type==="bool")return CA(e);if(t.type.startsWith("bytes"))return PA(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return NA(e,t);if(t.type==="string")return MA(e,{staticPosition:n});throw new KE(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Vh=32,ql=32;function RA(e){const t=e.readBytes(32);return[Io(Ot(lg(t,-20))),32]}function kA(e,t,{length:n,staticPosition:r}){if(!n){const o=br(e.readBytes(ql)),a=r+o,c=a+Vh;e.setPosition(a);const u=br(e.readBytes(Vh)),f=Gi(t);let m=0;const p=[];for(let b=0;b<u;++b){e.setPosition(c+(f?b*32:m));const[_,E]=Hs(e,t,{staticPosition:c});m+=E,p.push(_)}return e.setPosition(r+32),[p,32]}if(Gi(t)){const o=br(e.readBytes(ql)),a=r+o,c=[];for(let u=0;u<n;++u){e.setPosition(a+u*32);const[f]=Hs(e,t,{staticPosition:a});c.push(f)}return e.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Hs(e,t,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function CA(e){return[TA(e.readBytes(32),{size:32}),32]}function PA(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const o=br(e.readBytes(32));e.setPosition(n+o);const a=br(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[Ot(c),32]}return[Ot(e.readBytes(Number.parseInt(s,10),32)),32]}function NA(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?IA(s,{signed:n}):br(s,{signed:n}),32]}function OA(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Gi(t)){const o=br(e.readBytes(ql)),a=n+o;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(a+i);const[f,m]=Hs(e,u,{staticPosition:a});i+=m,s[r?c:u?.name]=f}return e.setPosition(n+32),[s,32]}for(let o=0;o<t.components.length;++o){const a=t.components[o],[c,u]=Hs(e,a,{staticPosition:n});s[r?o:a?.name]=c,i+=u}return[s,i]}function MA(e,{staticPosition:t}){const n=br(e.readBytes(32)),r=t+n;e.setPosition(r);const s=br(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=BA(In(i));return e.setPosition(t+32),[o,32]}function Gi(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(Gi);const n=cd(e.type);return!!(n&&Gi({...e,type:n[1]}))}function LA(e){const{abi:t,data:n}=e,r=ps(n,0,4);if(r==="0x")throw new Ao;const i=[...t||[],pg,EA].find(o=>o.type==="error"&&r===To(Ln(o)));if(!i)throw new Qy(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Ro(i.inputs,ps(n,4)):void 0,errorName:i.name}}const Mt=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function yg({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof t[i]=="object"?Mt(t[i]):t[i]}`).join(", ")})`}const $A={gwei:9,wei:18},UA={ether:-9,wei:9};function gg(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ld(e,t="wei"){return gg(e,$A[t])}function ln(e,t="wei"){return gg(e,UA[t])}class FA extends ee{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class zA extends ee{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Hh(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function DA(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Hh(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Hh(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function ko(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class jA extends ee{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class qA extends ee{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class VA extends ee{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",ko(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class HA extends ee{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class GA extends ee{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p}){const b=ko({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:m,value:typeof p<"u"&&`${ld(p)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ln(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ln(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ln(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class bg extends ee{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),t&&i!==void 0&&(o=`Transaction at block hash "${t}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class wg extends ee{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class vg extends ee{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class KA extends ee{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const WA=e=>e,fd=e=>e;class xg extends ee{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p,stateOverride:b}){const _=n?Xe(n):void 0;let E=ko({from:_?.address,to:m,value:typeof p<"u"&&`${ld(p)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ln(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ln(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ln(u)} gwei`,nonce:f});b&&(E+=`
${DA(b)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",E].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class _g extends ee{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Ts({abi:n,args:r,name:o}),u=c?yg({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=c?Ln(c,{includeName:!0}):void 0,m=ko({address:s&&WA(s),function:f,args:u&&u!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],m&&"Contract Call:",m].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=o,this.sender=a}}class Vl extends ee{constructor({abi:t,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=LA({abi:t,data:n});const{abiItem:f,errorName:m,args:p}=o;if(m==="Error")c=p[0];else if(m==="Panic"){const[b]=p;c=_A[b]}else{const b=f?Ln(f,{includeName:!0}):void 0,_=f&&p?yg({abiItem:f,args:p,includeFunctionName:!1,includeName:!1}):void 0;a=[b?`Error: ${b}`:"",_&&_!=="()"?`       ${[...Array(m?.length??0).keys()].map(()=>" ").join("")}${_}`:""]}}catch(f){i=f}else s&&(c=s);let u;i instanceof Qy&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class ZA extends ee{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class YA extends ee{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class dc extends ee{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class Di extends ee{constructor({body:t,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${fd(o)}`,t&&`Request body: ${Mt(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=i,this.url=o}}class dd extends ee{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${fd(r)}`,`Request body: ${Mt(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Gh extends ee{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${fd(n)}`,`Request body: ${Mt(t)}`],name:"TimeoutError"})}}const XA=-1;class dn extends ee{constructor(t,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:t,docsPath:r,metaMessages:s||t?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||t.name,this.code=t instanceof dd?t.code:n??XA}}class gn extends dn{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Ki extends dn{constructor(t){super(t,{code:Ki.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ki,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Wi extends dn{constructor(t){super(t,{code:Wi.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Zi extends dn{constructor(t,{method:n}={}){super(t,{code:Zi.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Zi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Yi extends dn{constructor(t){super(t,{code:Yi.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Yi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ms extends dn{constructor(t){super(t,{code:ms.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ms,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ys extends dn{constructor(t){super(t,{code:ys.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ys,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Xi extends dn{constructor(t){super(t,{code:Xi.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Xi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ji extends dn{constructor(t){super(t,{code:Ji.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Ji,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Qi extends dn{constructor(t){super(t,{code:Qi.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Qi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Qr extends dn{constructor(t,{method:n}={}){super(t,{code:Qr.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Qr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ui extends dn{constructor(t){super(t,{code:ui.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ui,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class eo extends dn{constructor(t){super(t,{code:eo.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Gs extends gn{constructor(t){super(t,{code:Gs.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class to extends gn{constructor(t){super(t,{code:to.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(to,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class no extends gn{constructor(t,{method:n}={}){super(t,{code:no.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ro extends gn{constructor(t){super(t,{code:ro.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ro,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class so extends gn{constructor(t){super(t,{code:so.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(so,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class io extends gn{constructor(t){super(t,{code:io.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(io,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class li extends gn{constructor(t){super(t,{code:li.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(li,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class oo extends gn{constructor(t){super(t,{code:oo.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(oo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ao extends gn{constructor(t){super(t,{code:ao.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ao,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class co extends gn{constructor(t){super(t,{code:co.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(co,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class uo extends gn{constructor(t){super(t,{code:uo.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(uo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class lo extends gn{constructor(t){super(t,{code:lo.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class fi extends gn{constructor(t){super(t,{code:fi.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(fi,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class JA extends dn{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const QA=3;function gs(e,{abi:t,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=e instanceof dc?e:e instanceof ee?e.walk(_=>"data"in _)||e.walk():{},{code:c,data:u,details:f,message:m,shortMessage:p}=a,b=e instanceof Ao?new ZA({functionName:i}):[QA,ms.code].includes(c)&&(u||f||m||p)?new Vl({abi:t,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof dd?f:p??m}):e;return new _g(b,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function Eg(e){const t=Ut(`0x${e.substring(4)}`).substring(26);return Io(`0x${t}`)}const eS="modulepreload",tS=function(e){return"/"+e},Kh={},Ag=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(n.map(u=>{if(u=tS(u),u in Kh)return;Kh[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":eS,f||(p.as="script"),p.crossOrigin="",p.href=u,a&&p.setAttribute("nonce",a),document.head.appendChild(p),f)return new Promise((b,_)=>{p.addEventListener("load",b),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};async function nS({hash:e,signature:t}){const n=$n(e)?e:Oe(e),{secp256k1:r}=await Ag(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>lT);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:m,yParity:p}=t,b=Number(p??m),_=Wh(b);return new r.Signature(ze(u),ze(f)).addRecoveryBit(_)}const o=$n(t)?t:Oe(t);if(tt(o)!==65)throw new Error("invalid signature length");const a=mn(`0x${o.slice(130)}`),c=Wh(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Wh(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Sg({hash:e,signature:t}){return Eg(await nS({hash:e,signature:t}))}function Er(e,t="hex"){const n=Ig(e),r=ud(new Uint8Array(n.length));return n.encode(r),t==="hex"?Ot(r.bytes):r.bytes}function Ig(e){return Array.isArray(e)?rS(e.map(t=>Ig(t))):sS(e)}function rS(e){const t=e.reduce((s,i)=>s+i.length,0),n=Tg(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function sS(e){const t=typeof e=="string"?un(e):e,n=Tg(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Tg(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new ee("Length is too large.")}function Bg(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,i=Ut(Rn(["0x05",Er([t?ne(t):"0x",s,n?ne(n):"0x"])]));return r==="bytes"?un(i):i}async function hc(e){const{authorization:t,signature:n}=e;return Sg({hash:Bg(t),signature:n??t})}class iS extends ee{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p}){const b=ko({from:n?.address,to:m,value:typeof p<"u"&&`${ld(p)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ln(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ln(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ln(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Us extends ee{constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Us,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Us,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class bs extends ee{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ln(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(bs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Hl extends ee{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ln(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Hl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Gl extends ee{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Gl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Kl extends ee{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Kl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Wl extends ee{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Wl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Zl extends ee{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Zl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Yl extends ee{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Yl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Xl extends ee{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Xl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Jl extends ee{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Jl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class fo extends ee{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ln(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ln(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(fo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Co extends ee{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function pc(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof ee?e.walk(s=>s?.code===Us.code):e;return r instanceof ee?new Us({cause:e,message:r.details}):Us.nodeMessage.test(n)?new Us({cause:e,message:e.details}):bs.nodeMessage.test(n)?new bs({cause:e,maxFeePerGas:t?.maxFeePerGas}):Hl.nodeMessage.test(n)?new Hl({cause:e,maxFeePerGas:t?.maxFeePerGas}):Gl.nodeMessage.test(n)?new Gl({cause:e,nonce:t?.nonce}):Kl.nodeMessage.test(n)?new Kl({cause:e,nonce:t?.nonce}):Wl.nodeMessage.test(n)?new Wl({cause:e,nonce:t?.nonce}):Zl.nodeMessage.test(n)?new Zl({cause:e}):Yl.nodeMessage.test(n)?new Yl({cause:e,gas:t?.gas}):Xl.nodeMessage.test(n)?new Xl({cause:e,gas:t?.gas}):Jl.nodeMessage.test(n)?new Jl({cause:e}):fo.nodeMessage.test(n)?new fo({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Co({cause:e})}function oS(e,{docsPath:t,...n}){const r=(()=>{const s=pc(e,n);return s instanceof Co?e:s})();return new iS(r,{docsPath:t,...n})}function Po(e,{format:t}){if(!t)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in e&&(n[a]=e[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=t(e||{});return r(s),n}function mc(e,t){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const o=t(s,i);if(n)for(const a of n)delete o[a];return{...o,...r(s,i)}},type:e})}const aS={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Kr(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=uS(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>Ot(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=ne(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=ne(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=ne(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=ne(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=ne(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=ne(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=aS[e.type]),typeof e.value<"u"&&(n.value=ne(e.value)),n}const cS=mc("transactionRequest",Kr);function uS(e){return e.map(t=>({address:t.address,r:t.r?ne(BigInt(t.r)):t.r,s:t.s?ne(BigInt(t.s)):t.s,chainId:ne(t.chainId),nonce:ne(t.nonce),...typeof t.yParity<"u"?{yParity:ne(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:ne(t.v)}:{}}))}function Zh(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Uh({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Uh({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function lS(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:i}=e,o={};if(i!==void 0&&(o.code=i),t!==void 0&&(o.balance=ne(t)),n!==void 0&&(o.nonce=ne(n)),r!==void 0&&(o.state=Zh(r)),s!==void 0){if(o.state)throw new zA;o.stateDiff=Zh(s)}return o}function hd(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!Ye(n,{strict:!1}))throw new Nt({address:n});if(t[n])throw new FA({address:n});t[n]=lS(r)}return t}const fS=2n**16n-1n,yc=2n**256n-1n;function Br(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=e,o=t?Xe(t):void 0;if(o&&!Ye(o.address))throw new Nt({address:o.address});if(i&&!Ye(i))throw new Nt({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new jA;if(r&&r>yc)throw new bs({maxFeePerGas:r});if(s&&r&&s>r)throw new fo({maxFeePerGas:r,maxPriorityFeePerGas:s})}class dS extends ee{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class pd extends ee{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class hS extends ee{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ln(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Rg extends ee{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const kg={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function gc(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?mn(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?mn(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?kg[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=pS(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const Cg=mc("transaction",gc);function pS(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function md(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:gc(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const Pg=mc("block",md);async function Gn(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){const i=s??!1,o=n!==void 0?ne(n):void 0;let a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new Rg({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||md)(a,"getBlock")}async function yd(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function mS(e,t){return Ng(e,t)}async function Ng(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const i=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof i=="function"){const a=n||await pe(e,Gn,"getBlock")({}),c=await i({block:a,client:e,request:s});if(c===null)throw new Error;return c}if(typeof i<"u")return i;const o=await e.request({method:"eth_maxPriorityFeePerGas"});return ze(o)}catch{const[i,o]=await Promise.all([n?Promise.resolve(n):pe(e,Gn,"getBlock")({}),pe(e,yd,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new pd;const a=o-i.baseFeePerGas;return a<0n?0n:a}}async function yS(e,t){return Ql(e,t)}async function Ql(e,t){const{block:n,chain:r=e.chain,request:s,type:i="eip1559"}=t||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new dS;const c=10**(o.toString().split(".")[1]?.length??0),u=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),f=n||await pe(e,Gn,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new pd;const p=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await Ng(e,{block:f,chain:r,request:s}),b=u(f.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??b+p,maxPriorityFeePerGas:p}}return{gasPrice:s?.gasPrice??u(await pe(e,yd,"getGasPrice")({}))}}async function gd(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?ne(r):n]},{dedupe:!!r});return mn(s)}function bd(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>un(i)):e.blobs,s=[];for(const i of r)s.push(Uint8Array.from(t.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ot(i))}function wd(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>un(o)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(o=>un(o)):e.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ot(o))}function Og(e,t){const n=t||"hex",r=vl($n(e,{strict:!1})?gr(e):e);return n==="bytes"?r:Oe(r)}function gS(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=Og(t,"bytes");return s.set([n],0),r==="bytes"?s:Ot(s)}function Mg(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const i of t)s.push(gS({commitment:i,to:r,version:n}));return s}const Yh=6,Lg=32,vd=4096,$g=Lg*vd,Xh=$g*Yh-1-1*vd*Yh,Ug=1;class bS extends ee{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Fg extends ee{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class wS extends ee{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class vS extends ee{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Ug}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function xS(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?un(e.data):e.data,r=tt(n);if(!r)throw new Fg;if(r>Xh)throw new bS({maxSize:Xh,size:r});const s=[];let i=!0,o=0;for(;i;){const a=ud(new Uint8Array($g));let c=0;for(;c<vd;){const u=n.slice(o,o+(Lg-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return t==="bytes"?s.map(a=>a.bytes):s.map(a=>Ot(a.bytes))}function zg(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??xS({data:t,to:r}),i=e.commitments??bd({blobs:s,kzg:n,to:r}),o=e.proofs??wd({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Dg(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new VA({transaction:e})}async function Rr(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return mn(t)}const xd=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Jh=new Map;async function Ai(e,t){const{account:n=e.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=xd,type:f}=t,m=n&&Xe(n),p={...t,...m?{from:m?.address}:{}};let b;async function _(){return b||(b=await pe(e,Gn,"getBlock")({blockTag:"latest"}),b)}let E;async function T(){return E||(s?s.id:typeof t.chainId<"u"?t.chainId:(E=await pe(e,Rr,"getChainId")({}),E))}if(u.includes("nonce")&&typeof a>"u"&&m)if(c){const k=await T();p.nonce=await c.consume({address:m.address,chainId:k,client:e})}else p.nonce=await pe(e,gd,"getTransactionCount")({address:m.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const k=bd({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const M=Mg({commitments:k,to:"hex"});p.blobVersionedHashes=M}if(u.includes("sidecars")){const M=wd({blobs:r,commitments:k,kzg:o}),C=zg({blobs:r,commitments:k,proofs:M,to:"hex"});p.sidecars=C}}if(u.includes("chainId")&&(p.chainId=await T()),(u.includes("fees")||u.includes("type"))&&typeof f>"u")try{p.type=Dg(p)}catch{let k=Jh.get(e.uid);typeof k>"u"&&(k=typeof(await _())?.baseFeePerGas=="bigint",Jh.set(e.uid,k)),p.type=k?"eip1559":"legacy"}if(u.includes("fees"))if(p.type!=="legacy"&&p.type!=="eip2930"){if(typeof p.maxFeePerGas>"u"||typeof p.maxPriorityFeePerGas>"u"){const k=await _(),{maxFeePerGas:M,maxPriorityFeePerGas:C}=await Ql(e,{block:k,chain:s,request:p});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<C)throw new hS({maxPriorityFeePerGas:C});p.maxPriorityFeePerGas=C,p.maxFeePerGas=M}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new pd;if(typeof t.gasPrice>"u"){const k=await _(),{gasPrice:M}=await Ql(e,{block:k,chain:s,request:p,type:"legacy"});p.gasPrice=M}}return u.includes("gas")&&typeof i>"u"&&(p.gas=await pe(e,_d,"estimateGas")({...p,account:m,prepare:m?.type==="local"?[]:["blobVersionedHashes"]})),Br(p),delete p.parameters,p}async function _d(e,t){const{account:n=e.account,prepare:r=!0}=t,s=n?Xe(n):void 0,i=(()=>{if(Array.isArray(r))return r;if(s?.type!=="local")return["blobVersionedHashes"]})();try{const{accessList:o,authorizationList:a,blobs:c,blobVersionedHashes:u,blockNumber:f,blockTag:m,data:p,gas:b,gasPrice:_,maxFeePerBlobGas:E,maxFeePerGas:T,maxPriorityFeePerGas:k,nonce:M,value:C,stateOverride:U,...D}=r?await Ai(e,{...t,parameters:i}):t,K=(typeof f=="bigint"?ne(f):void 0)||m,X=hd(U),L=await(async()=>{if(D.to)return D.to;if(a&&a.length>0)return await hc({authorization:a[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`")})})();Br(t);const $=e.chain?.formatters?.transactionRequest?.format,j=($||Kr)({...Po(D,{format:$}),account:s,accessList:o,authorizationList:a,blobs:c,blobVersionedHashes:u,data:p,gas:b,gasPrice:_,maxFeePerBlobGas:E,maxFeePerGas:T,maxPriorityFeePerGas:k,nonce:M,to:L,value:C},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:X?[j,K??e.experimental_blockTag??"latest",X]:K?[j,K]:[j]}))}catch(o){throw oS(o,{...t,account:s,chain:e.chain})}}async function _S(e,t){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=t,c=rn({abi:n,args:s,functionName:i});try{return await pe(e,_d,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(u){const f=a.account?Xe(a.account):void 0;throw gs(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:f?.address})}}function No(e,t){if(!Ye(e,{strict:!1}))throw new Nt({address:e});if(!Ye(t,{strict:!1}))throw new Nt({address:t});return e.toLowerCase()===t.toLowerCase()}const Qh="/docs/contract/decodeEventLog";function Ed(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[o,...a]=s;if(!o)throw new jE({docsPath:Qh});const c=t.find(E=>E.type==="event"&&o===lc(Ln(E)));if(!(c&&"name"in c)||c.type!=="event")throw new eg(o,{docsPath:Qh});const{name:u,inputs:f}=c,m=f?.some(E=>!("name"in E&&E.name)),p=m?[]:{},b=f.map((E,T)=>[E,T]).filter(([E])=>"indexed"in E&&E.indexed);for(let E=0;E<b.length;E++){const[T,k]=b[E],M=a[E];if(!M)throw new uc({abiItem:c,param:T});p[m?k:T.name||k]=ES({param:T,value:M})}const _=f.filter(E=>!("indexed"in E&&E.indexed));if(_.length>0){if(n&&n!=="0x")try{const E=Ro(_,n);if(E)if(m)for(let T=0;T<f.length;T++)p[T]=p[T]??E.shift();else for(let T=0;T<_.length;T++)p[_[T].name]=E[T]}catch(E){if(i)throw E instanceof Jy||E instanceof mg?new Hi({abiItem:c,data:n,params:_,size:tt(n)}):E}else if(i)throw new Hi({abiItem:c,data:"0x",params:_,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function ES({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Ro([e],t)||[])[0]}function Ad(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(o=>{try{const a=t.find(u=>u.type==="event"&&o.topics[0]===lc(u));if(!a)return null;const c=Ed({...o,abi:[a],strict:s});return i&&!i.includes(c.eventName)||!AS({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...o}}catch(a){let c,u;if(a instanceof eg)return null;if(a instanceof Hi||a instanceof uc){if(s)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...o,args:u?[]:{},eventName:c}}}).filter(Boolean)}function AS(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,o,a){try{return i.type==="address"?No(o,a):i.type==="string"||i.type==="bytes"?Ut(gr(o))===a:o===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,t[o])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,t[i])):!1}):!1}function Jn(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Sd(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const u=c??!1,f=o??(i?[i]:void 0);let m=[];f&&(m=[f.flatMap(E=>Bo({abi:[E],eventName:E.name,args:o?void 0:a}))],i&&(m=m[0]));let p;n?p=await e.request({method:"eth_getLogs",params:[{address:t,topics:m,blockHash:n}]}):p=await e.request({method:"eth_getLogs",params:[{address:t,topics:m,fromBlock:typeof r=="bigint"?ne(r):r,toBlock:typeof s=="bigint"?ne(s):s}]});const b=p.map(_=>Jn(_));return f?Ad({abi:f,args:a,logs:b,strict:u}):b}async function jg(e,t){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:u}=t,f=o?Ts({abi:n,name:o}):void 0,m=f?void 0:n.filter(p=>p.type==="event");return pe(e,Sd,"getLogs")({address:r,args:s,blockHash:i,event:f,events:m,fromBlock:a,toBlock:c,strict:u})}const Mu="/docs/contract/decodeFunctionResult";function Bs(e){const{abi:t,args:n,functionName:r,data:s}=e;let i=t[0];if(r){const a=Ts({abi:t,args:n,name:r});if(!a)throw new ai(r,{docsPath:Mu});i=a}if(i.type!=="function")throw new ai(void 0,{docsPath:Mu});if(!i.outputs)throw new tg(i.name,{docsPath:Mu});const o=Ro(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const SS="0.1.1";function IS(){return SS}class Re extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof Re){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof Re&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${IS()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=t}walk(t){return qg(this,t)}}function qg(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?qg(e.cause,t):t?null:e}function Oo(e,t){if(Fs(e)>t)throw new qS({givenSize:Fs(e),maxSize:t})}const or={zero:48,nine:57,A:65,F:70,a:97,f:102};function ep(e){if(e>=or.zero&&e<=or.nine)return e-or.zero;if(e>=or.A&&e<=or.F)return e-(or.A-10);if(e>=or.a&&e<=or.f)return e-(or.a-10)}function TS(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new VS({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=e[o?i:e.length-i-1]}return s}function Vg(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function bc(e,t){if(yn(e)>t)throw new YS({givenSize:yn(e),maxSize:t})}function BS(e,t){if(typeof t=="number"&&t>0&&t>yn(e)-1)throw new Qg({offset:t,position:"start",size:yn(e)})}function RS(e,t,n){if(typeof t=="number"&&typeof n=="number"&&yn(e)!==n-t)throw new Qg({offset:n,position:"end",size:yn(e)})}function Hg(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new XS({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const kS="#__bigint";function Gg(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+kS:s,n)}const CS=new TextDecoder,PS=new TextEncoder;function NS(e){return e instanceof Uint8Array?e:typeof e=="string"?Kg(e):OS(e)}function OS(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Kg(e,t={}){const{size:n}=t;let r=e;n&&(bc(e,n),r=vs(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=ep(s.charCodeAt(c++)),f=ep(s.charCodeAt(c++));if(u===void 0||f===void 0)throw new Re(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+f}return o}function MS(e,t={}){const{size:n}=t,r=PS.encode(e);return typeof n=="number"?(Oo(r,n),LS(r,n)):r}function LS(e,t){return TS(e,{dir:"right",size:t})}function Fs(e){return e.length}function $S(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function US(e,t={}){const{size:n}=t;typeof n<"u"&&Oo(e,n);const r=Fn(e,t);return Yg(r,t)}function FS(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(Oo(r,n),r=Wg(r)),r.length>1||r[0]>1)throw new jS(r);return!!r[0]}function wr(e,t={}){const{size:n}=t;typeof n<"u"&&Oo(e,n);const r=Fn(e,t);return Xg(r,t)}function zS(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(Oo(r,n),r=DS(r)),CS.decode(r)}function Wg(e){return Vg(e,{dir:"left"})}function DS(e){return Vg(e,{dir:"right"})}class jS extends Re{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let qS=class extends Re{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},VS=class extends Re{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const HS=new TextEncoder,GS=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function KS(e,t={}){const{strict:n=!1}=t;if(!e)throw new tp(e);if(typeof e!="string")throw new tp(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new np(e);if(!e.startsWith("0x"))throw new np(e)}function Un(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function WS(e){return e instanceof Uint8Array?Fn(e):Array.isArray(e)?Fn(new Uint8Array(e)):e}function Zg(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(bc(n,t.size),ws(n,t.size)):n}function Fn(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=GS[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(bc(r,t.size),vs(r,t.size)):r}function Jt(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof e=="bigint"?"n":"";throw new Jg({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ws(c,r):c}function Id(e,t={}){return Fn(HS.encode(e),t)}function ws(e,t){return Hg(e,{dir:"left",size:t})}function vs(e,t){return Hg(e,{dir:"right",size:t})}function Wn(e,t,n,r={}){const{strict:s}=r;BS(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&RS(i,t,n),i}function yn(e){return Math.ceil((e.length-2)/2)}function Yg(e,t={}){const{signed:n}=t;t.size&&bc(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function Xg(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:Yg(e,t))}function ZS(e,t={}){const{strict:n=!1}=t;try{return KS(e,{strict:n}),!0}catch{return!1}}class Jg extends Re{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class tp extends Re{constructor(t){super(`Value \`${typeof t=="object"?Gg(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class np extends Re{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class YS extends Re{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Qg extends Re{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class XS extends Re{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function JS(e){return{address:e.address,amount:Jt(e.amount),index:Jt(e.index),validatorIndex:Jt(e.validatorIndex)}}function e1(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:Jt(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:Jt(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:Jt(e.gasLimit)},...typeof e.number=="bigint"&&{number:Jt(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:Jt(e.prevRandao)},...typeof e.time=="bigint"&&{time:Jt(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(JS)}}}const za=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],ef=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],t1=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],n1=[...t1,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],QS=[...t1,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],rp=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],sp=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],r1=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],ip=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],e8="0x82ad56cb",s1="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",t8="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",n8="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Td="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class tf extends ee{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class r8 extends ee{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id}  ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id}  ${t.name}`],name:"ChainMismatchError"})}}class s8 extends ee{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class i1 extends ee{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Mo extends ee{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Lu="/docs/contract/encodeDeployData";function wc(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Xy({docsPath:Lu});if(!("inputs"in s))throw new Fa({docsPath:Lu});if(!s.inputs||s.inputs.length===0)throw new Fa({docsPath:Lu});const i=Gr(s.inputs,n);return Rn([r,i])}function Si({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new tf({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new tf({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function o1(e,{docsPath:t,...n}){const r=(()=>{const s=pc(e,n);return s instanceof Co?e:s})();return new xg(r,{docsPath:t,...n})}function Bd(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const $u=new Map;function a1({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const f=c();o();const m=f.map(({args:p})=>p);m.length!==0&&e(m).then(p=>{s&&Array.isArray(p)&&p.sort(s);for(let b=0;b<f.length;b++){const{resolve:_}=f[b];_?.([p[b],p])}}).catch(p=>{for(let b=0;b<f.length;b++){const{reject:_}=f[b];_?.(p)}})},o=()=>$u.delete(t),a=()=>c().map(({args:f})=>f),c=()=>$u.get(t)||[],u=f=>$u.set(t,[...c(),f]);return{flush:o,async schedule(f){const{promise:m,resolve:p,reject:b}=Bd();return n?.([...a(),f])&&i(),c().length>0?(u({args:f,resolve:p,reject:b}),m):(u({args:f,resolve:p,reject:b}),setTimeout(i,r),m)}}}async function vc(e,t){const{account:n=e.account,authorizationList:r,batch:s=!!e.batch?.multicall,blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:f,data:m,factory:p,factoryData:b,gas:_,gasPrice:E,maxFeePerBlobGas:T,maxFeePerGas:k,maxPriorityFeePerGas:M,nonce:C,to:U,value:D,stateOverride:V,...K}=t,X=n?Xe(n):void 0;if(f&&(p||b))throw new ee("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&U)throw new ee("Cannot provide both `code` & `to` as parameters.");const L=f&&m,$=p&&b&&U&&m,z=L||$,j=L?c1({code:f,data:m}):$?a8({data:m,factory:p,factoryData:b,to:U}):m;try{Br(t);const l=(typeof i=="bigint"?ne(i):void 0)||o,h=u?e1(u):void 0,v=hd(V),A=e.chain?.formatters?.transactionRequest?.format,P=(A||Kr)({...Po(K,{format:A}),accessList:a,account:X,authorizationList:r,blobs:c,data:j,gas:_,gasPrice:E,maxFeePerBlobGas:T,maxFeePerGas:k,maxPriorityFeePerGas:M,nonce:C,to:z?void 0:U,value:D},"call");if(s&&i8({request:P})&&!v&&!h)try{return await o8(e,{...P,blockNumber:i,blockTag:o})}catch(d){if(!(d instanceof i1)&&!(d instanceof tf))throw d}const F=(()=>{const d=[P,l];return v&&h?[...d,v,h]:v?[...d,v]:h?[...d,{},h]:d})(),R=await e.request({method:"eth_call",params:F});return R==="0x"?{data:void 0}:{data:R}}catch(x){const l=c8(x),{offchainLookup:h,offchainLookupSignature:v}=await Ag(async()=>{const{offchainLookup:A,offchainLookupSignature:S}=await import("./assets/ccip-By0oT4sS.js");return{offchainLookup:A,offchainLookupSignature:S}},[]);if(e.ccipRead!==!1&&l?.slice(0,10)===v&&U)return{data:await h(e,{data:l,to:U})};throw z&&l?.slice(0,10)==="0x101bb98d"?new YA({factory:p}):o1(x,{...t,account:X,chain:e.chain})}}function i8({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(e8)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function o8(e,t){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",data:a,to:c}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return Si({blockNumber:i,chain:e.chain,contract:"multicall3"});throw new i1})(),m=(typeof i=="bigint"?ne(i):void 0)||o,{schedule:p}=a1({id:`${e.uid}.${m}`,wait:s,shouldSplitBatch(E){return E.reduce((k,{data:M})=>k+(M.length-2),0)>n*2},fn:async E=>{const T=E.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),k=rn({abi:za,args:[T],functionName:"aggregate3"}),M=await e.request({method:"eth_call",params:[{...u===null?{data:c1({code:Td,data:k})}:{to:u,data:k}},m]});return Bs({abi:za,args:[T],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:b,success:_}]=await p({data:a,to:c});if(!_)throw new dc({data:b});return b==="0x"?{data:void 0}:{data:b}}function c1(e){const{code:t,data:n}=e;return wc({abi:Wy(["constructor(bytes, bytes)"]),bytecode:s1,args:[t,n]})}function a8(e){const{data:t,factory:n,factoryData:r,to:s}=e;return wc({abi:Wy(["constructor(address, bytes, address, bytes)"]),bytecode:t8,args:[s,t,n,r]})}function c8(e){if(!(e instanceof ee))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function zn(e,t){const{abi:n,address:r,args:s,functionName:i,...o}=t,a=rn({abi:n,args:s,functionName:i});try{const{data:c}=await pe(e,vc,"call")({...o,data:a,to:r});return Bs({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw gs(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function u8(e,t){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=t,c=a.account?Xe(a.account):e.account,u=rn({abi:n,args:s,functionName:o});try{const{data:f}=await pe(e,vc,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),m=Bs({abi:n,args:s,functionName:o,data:f||"0x"}),p=n.filter(b=>"name"in b&&b.name===t.functionName);return{result:m,request:{abi:p,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(f){throw gs(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c?.address})}}const Uu=new Map,op=new Map;let l8=0;function Ar(e,t,n){const r=++l8,s=()=>Uu.get(e)||[],i=()=>{const f=s();Uu.set(e,f.filter(m=>m.id!==r))},o=()=>{const f=s();if(!f.some(p=>p.id===r))return;const m=op.get(e);if(f.length===1&&m){const p=m();p instanceof Promise&&p.catch(()=>{})}i()},a=s();if(Uu.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return o;const c={};for(const f in t)c[f]=((...m)=>{const p=s();if(p.length!==0)for(const b of p)b.fns[f]?.(...m)});const u=n(c);return typeof u=="function"&&op.set(e,u),o}async function nf(e){return new Promise(t=>setTimeout(t,e))}function Ii(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:i}));const c=await n?.(a)??r;await nf(c);const u=async()=>{s&&(await e({unpoll:i}),await nf(r),u())};u()})(),i}const f8=new Map,d8=new Map;function h8(e){const t=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=t(e,f8),r=t(e,d8);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function p8(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=h8(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=e(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const m8=e=>`blockNumber.${e}`;async function Lo(e,{cacheTime:t=e.cacheTime}={}){const n=await p8(()=>e.request({method:"eth_blockNumber"}),{cacheKey:m8(e.uid),cacheTime:t});return BigInt(n)}async function xc(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Jn(i));return!("abi"in t)||!t.abi?s:Ad({abi:t.abi,logs:s,strict:n})}async function _c(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function y8(e,t){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:u,poll:f,pollingInterval:m=e.pollingInterval,strict:p}=t;return(typeof f<"u"?f:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const T=p??!1,k=Mt(["watchContractEvent",r,s,i,e.uid,o,m,T,a]);return Ar(k,{onLogs:u,onError:c},M=>{let C;a!==void 0&&(C=a-1n);let U,D=!1;const V=Ii(async()=>{if(!D){try{U=await pe(e,hg,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:T,fromBlock:a})}catch{}D=!0;return}try{let K;if(U)K=await pe(e,xc,"getFilterChanges")({filter:U});else{const X=await pe(e,Lo,"getBlockNumber")({});C&&C<X?K=await pe(e,jg,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:C+1n,toBlock:X,strict:T}):K=[],C=X}if(K.length===0)return;if(i)M.onLogs(K);else for(const X of K)M.onLogs([X])}catch(K){U&&K instanceof ys&&(D=!1),M.onError?.(K)}},{emitOnBegin:!0,interval:m});return async()=>{U&&await pe(e,_c,"uninstallFilter")({filter:U}),V()}})})():(()=>{const T=p??!1,k=Mt(["watchContractEvent",r,s,i,e.uid,o,m,T]);let M=!0,C=()=>M=!1;return Ar(k,{onLogs:u,onError:c},U=>((async()=>{try{const D=(()=>{if(e.transport.type==="fallback"){const X=e.transport.transports.find(L=>L.config.type==="webSocket"||L.config.type==="ipc");return X?X.value:e.transport}return e.transport})(),V=o?Bo({abi:n,eventName:o,args:s}):[],{unsubscribe:K}=await D.subscribe({params:["logs",{address:r,topics:V}],onData(X){if(!M)return;const L=X.result;try{const{eventName:$,args:z}=Ed({abi:n,data:L.data,topics:L.topics,strict:p}),j=Jn(L,{args:z,eventName:$});U.onLogs([j])}catch($){let z,j;if($ instanceof Hi||$ instanceof uc){if(p)return;z=$.abiItem.name,j=$.abiItem.inputs?.some(l=>!("name"in l&&l.name))}const x=Jn(L,{args:j?[]:{},eventName:z});U.onLogs([x])}},onError(X){U.onError?.(X)}});C=K,M||C()}catch(D){c?.(D)}})(),()=>C()))})()}class tr extends ee{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class ss extends ee{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function $o({chain:e,currentChainId:t}){if(!e)throw new s8;if(t!==e.id)throw new r8({chain:e,currentChainId:t})}function Ec(e,{docsPath:t,...n}){const r=(()=>{const s=pc(e,n);return s instanceof Co?e:s})();return new GA(r,{docsPath:t,...n})}async function Ac(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Fu=new So(128);async function Uo(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,type:_,value:E,...T}=t;if(typeof n>"u")throw new tr({docsPath:"/docs/actions/wallet/sendTransaction"});const k=n?Xe(n):null;try{Br(t);const M=await(async()=>{if(t.to)return t.to;if(t.to!==null&&i&&i.length>0)return await hc({authorization:i[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`.")})})();if(k?.type==="json-rpc"||k===null){let C;r!==null&&(C=await pe(e,Rr,"getChainId")({}),$o({currentChainId:C,chain:r}));const U=e.chain?.formatters?.transactionRequest?.format,V=(U||Kr)({...Po(T,{format:U}),accessList:s,account:k,authorizationList:i,blobs:o,chainId:C,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,to:M,type:_,value:E},"sendTransaction"),K=Fu.get(e.uid),X=K?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:X,params:[V]},{retryCount:0})}catch(L){if(K===!1)throw L;const $=L;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[V]},{retryCount:0}).then(z=>(Fu.set(e.uid,!0),z)).catch(z=>{const j=z;throw j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError"?(Fu.set(e.uid,!1),$):j});throw $}}if(k?.type==="local"){const C=await pe(e,Ai,"prepareTransactionRequest")({account:k,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,nonceManager:k.nonceManager,parameters:[...xd,"sidecars"],type:_,value:E,...T,to:M}),U=r?.serializers?.transaction,D=await k.signTransaction(C,{serializer:U});return await pe(e,Ac,"sendRawTransaction")({serializedTransaction:D})}throw k?.type==="smart"?new ss({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ss({docsPath:"/docs/actions/wallet/sendTransaction",type:k?.type})}catch(M){throw M instanceof ss?M:Ec(M,{...t,account:k,chain:t.chain||void 0})}}async function di(e,t){return di.internal(e,Uo,"sendTransaction",t)}(function(e){async function t(n,r,s,i){const{abi:o,account:a=n.account,address:c,args:u,dataSuffix:f,functionName:m,...p}=i;if(typeof a>"u")throw new tr({docsPath:"/docs/contract/writeContract"});const b=a?Xe(a):null,_=rn({abi:o,args:u,functionName:m});try{return await pe(n,r,s)({data:`${_}${f?f.replace("0x",""):""}`,to:c,account:b,...p})}catch(E){throw gs(E,{abi:o,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:m,sender:b?.address})}}e.internal=t})(di||(di={}));class g8 extends ee{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}function Da(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const f=typeof t=="function"?t({count:a,error:u}):t;f&&await nf(f),o({count:a+1})};try{const u=await e();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}const u1={"0x0":"reverted","0x1":"success"};function Rd(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Jn(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?mn(e.transactionIndex):null,status:e.status?u1[e.status]:null,type:e.type?kg[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const l1=mc("transactionReceipt",Rd),f1="0x5792579257925792579257925792579257925792579257925792579257925792",d1=ne(0,{size:32});async function h1(e,t){const{account:n=e.account,capabilities:r,chain:s=e.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:u="2.0.0"}=t,f=n?Xe(n):null,m=t.calls.map(p=>{const b=p,_=b.abi?rn({abi:b.abi,functionName:b.functionName,args:b.args}):b.data;return{data:b.dataSuffix&&_?Tn([_,b.dataSuffix]):_,to:b.to,value:b.value?ne(b.value):void 0}});try{const p=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:m,capabilities:r,chainId:ne(s.id),from:f?.address,id:c,version:u}]},{retryCount:0});return typeof p=="string"?{id:p}:p}catch(p){const b=p;if(i&&(b.name==="MethodNotFoundRpcError"||b.name==="MethodNotSupportedRpcError"||b.name==="UnknownRpcError"||b.details.toLowerCase().includes("does not exist / is not available")||b.details.toLowerCase().includes("missing or invalid. request()")||b.details.toLowerCase().includes("did not match any variant of untagged enum")||b.details.toLowerCase().includes("account upgraded to unsupported contract")||b.details.toLowerCase().includes("eip-7702 not supported")||b.details.toLowerCase().includes("unsupported wc_ method")||b.details.toLowerCase().includes("feature toggled misconfigured")||b.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(r&&Object.values(r).some(M=>!M.optional)){const M="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new li(new ee(M,{details:M}))}if(a&&m.length>1){const k="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new fi(new ee(k,{details:k}))}const _=[];for(const k of m){const M=Uo(e,{account:f,chain:s,data:k.data,to:k.to,value:k.value?ze(k.value):void 0});_.push(M),o>0&&await new Promise(C=>setTimeout(C,o))}const E=await Promise.allSettled(_);if(E.every(k=>k.status==="rejected"))throw E[0].reason;const T=E.map(k=>k.status==="fulfilled"?k.value:d1);return{id:Tn([...T,ne(s.id,{size:32}),f1])}}throw Ec(p,{...t,account:f,chain:t.chain})}}async function p1(e,t){async function n(f){if(f.endsWith(f1.slice(2))){const p=In(Dl(f,-64,-32)),b=Dl(f,0,-64).slice(2).match(/.{1,64}/g),_=await Promise.all(b.map(T=>d1.slice(2)!==T?e.request({method:"eth_getTransactionReceipt",params:[`0x${T}`]},{dedupe:!0}):void 0)),E=_.some(T=>T===null)?100:_.every(T=>T?.status==="0x1")?200:_.every(T=>T?.status==="0x0")?500:600;return{atomic:!1,chainId:mn(p),receipts:_.filter(Boolean),status:E,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(t.id),[c,u]=(()=>{const f=a.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...a,atomic:r,chainId:s?mn(s):void 0,receipts:i?.map(f=>({...f,blockNumber:ze(f.blockNumber),gasUsed:ze(f.gasUsed),status:u1[f.status]}))??[],statusCode:u,status:c,version:o}}async function m1(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:E})=>E===200||E>=300,retryCount:i=4,retryDelay:o=({count:E})=>~~(1<<E)*200,timeout:a=6e4,throwOnFailure:c=!1}=t,u=Mt(["waitForCallsStatus",e.uid,n]),{promise:f,resolve:m,reject:p}=Bd();let b;const _=Ar(u,{resolve:m,reject:p},E=>{const T=Ii(async()=>{const k=M=>{clearTimeout(b),T(),M(),_()};try{const M=await Da(async()=>{const C=await pe(e,p1,"getCallsStatus")({id:n});if(c&&C.status==="failure")throw new g8(C);return C},{retryCount:i,delay:o});if(!s(M))return;k(()=>E.resolve(M))}catch(M){k(()=>E.reject(M))}},{interval:r,emitOnBegin:!0});return T});return b=a?setTimeout(()=>{_(),clearTimeout(b),p(new b8({id:n}))},a):void 0,await f}class b8 extends ee{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const rf=256;let ia=rf,oa;function y1(e=11){if(!oa||ia+e>rf*2){oa="",ia=0;for(let t=0;t<rf;t++)oa+=(256+Math.random()*256|0).toString(16).substring(1)}return oa.substring(ia,ia+++e)}function g1(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=e,a=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),f=e.pollingInterval??u,m=e.cacheTime??f,p=e.account?Xe(e.account):void 0,{config:b,request:_,value:E}=e.transport({chain:n,pollingInterval:f}),T={...b,...E},k={account:p,batch:t,cacheTime:m,ccipRead:r,chain:n,key:s,name:i,pollingInterval:f,request:_,transport:T,type:o,uid:y1(),...a?{experimental_blockTag:a}:{}};function M(C){return U=>{const D=U(C);for(const K in k)delete D[K];const V={...C,...D};return Object.assign(V,{extend:M(V)})}}return Object.assign(k,{extend:M(k)})}function kd(e){if(!(e instanceof ee))return!1;const t=e.walk(n=>n instanceof Vl);return t instanceof Vl?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}function w8(e){const{abi:t,data:n}=e,r=ps(n,0,4),s=t.find(i=>i.type==="function"&&r===To(Ln(i)));if(!s)throw new qE(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Ro(s.inputs,ps(n,4)):void 0}}const zu="/docs/contract/encodeErrorResult";function ap(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const c=Ts({abi:t,args:r,name:n});if(!c)throw new Lh(n,{docsPath:zu});s=c}if(s.type!=="error")throw new Lh(void 0,{docsPath:zu});const i=Ln(s),o=To(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new DE(s.name,{docsPath:zu});a=Gr(s.inputs,r)}return Rn([o,a])}const Du="/docs/contract/encodeFunctionResult";function v8(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const o=Ts({abi:t,name:n});if(!o)throw new ai(n,{docsPath:Du});s=o}if(s.type!=="function")throw new ai(void 0,{docsPath:Du});if(!s.outputs)throw new tg(s.name,{docsPath:Du});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new ng(r)})();return Gr(s.outputs,i)}const Sc="x-batch-gateway:true";async function x8(e){const{data:t,ccipRequest:n}=e,{args:[r]}=w8({abi:ef,data:t}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(Sc)?await x8({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=_8(c)}})),v8({abi:ef,functionName:"query",result:[s,i]})}function _8(e){return e.name==="HttpRequestError"&&e.status?ap({abi:ef,errorName:"HttpError",args:[e.status,e.shortMessage]}):ap({abi:[pg],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function b1(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return $n(t)?t:null}function sf(e){let t=new Uint8Array(32).fill(0);if(!e)return Ot(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=b1(n[r]),i=s?gr(s):Ut(rs(n[r]),"bytes");t=Ut(Tn([t,i]),"bytes")}return Ot(t)}function E8(e){return`[${e.slice(2)}]`}function A8(e){const t=new Uint8Array(32).fill(0);return e?b1(e)||Ut(rs(e)):Ot(t)}function Cd(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(rs(t).byteLength+2);let r=0;const s=t.split(".");for(let i=0;i<s.length;i++){let o=rs(s[i]);o.byteLength>255&&(o=rs(E8(A8(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function S8(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Si({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),f=c?.ensTlds;if(f&&!f.some(p=>i.endsWith(p)))return null;const m=s!=null?[sf(i),BigInt(s)]:[sf(i)];try{const p=rn({abi:sp,functionName:"addr",args:m}),b={address:u,abi:n1,functionName:"resolveWithGateways",args:[Oe(Cd(i)),p,o??[Sc]],blockNumber:n,blockTag:r},E=await pe(e,zn,"readContract")(b);if(E[0]==="0x")return null;const T=Bs({abi:sp,args:m,functionName:"addr",data:E[0]});return T==="0x"||In(T)==="0x00"?null:T}catch(p){if(a)throw p;if(kd(p))return null;throw p}}class I8 extends ee{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class Ci extends ee{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Pd extends ee{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class T8 extends ee{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const B8=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,R8=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,k8=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,C8=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function P8(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function cp(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function w1({uri:e,gatewayUrls:t}){const n=k8.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=cp(t?.ipfs,"https://ipfs.io"),s=cp(t?.arweave,"https://arweave.net"),i=e.match(B8),{protocol:o,subpath:a,target:c,subtarget:u=""}=i?.groups||{},f=o==="ipns:/"||a==="ipns/",m=o==="ipfs:/"||a==="ipfs/"||R8.test(e);if(e.startsWith("http")&&!f&&!m){let b=e;return t?.arweave&&(b=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((f||m)&&c)return{uri:`${r}/${f?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let p=e.replace(C8,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new Pd({uri:e})}function v1(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new I8({data:e});return e.image||e.image_url||e.image_data}async function N8({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Nd({gatewayUrls:e,uri:v1(n)})}catch{throw new Pd({uri:t})}}async function Nd({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=w1({uri:t,gatewayUrls:e});if(r||await P8(n))return n;throw new Pd({uri:t})}function O8(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Ci({reason:"Only EIP-155 supported"});if(!o)throw new Ci({reason:"Chain ID not found"});if(!c)throw new Ci({reason:"Contract address not found"});if(!s)throw new Ci({reason:"Token ID not found"});if(!a)throw new Ci({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function M8(e,{nft:t}){if(t.namespace==="erc721")return zn(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return zn(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new T8({namespace:t.namespace})}async function L8(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?$8(e,{gatewayUrls:t,record:n}):Nd({uri:n,gatewayUrls:t})}async function $8(e,{gatewayUrls:t,record:n}){const r=O8(n),s=await M8(e,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=w1({uri:s,gatewayUrls:t});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=a?atob(i.replace("data:application/json;base64,","")):i,f=JSON.parse(u);return Nd({uri:v1(f),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),N8({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,c)})}async function x1(e,t){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Si({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),f=c?.ensTlds;if(f&&!f.some(m=>i.endsWith(m)))return null;try{const m={address:u,abi:n1,args:[Oe(Cd(i)),rn({abi:rp,functionName:"text",args:[sf(i),s]}),o??[Sc]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},b=await pe(e,zn,"readContract")(m);if(b[0]==="0x")return null;const _=Bs({abi:rp,functionName:"text",data:b[0]});return _===""?null:_}catch(m){if(a)throw m;if(kd(m))return null;throw m}}async function U8(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await pe(e,x1,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await L8(e,{record:c,gatewayUrls:r})}catch{return null}}async function F8(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:a}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Si({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const f={address:u,abi:QS,args:[n,i,o??[Sc]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},m=pe(e,zn,"readContract"),[p]=await m(f);return p||null}catch(f){if(a)throw f;if(kd(f))return null;throw f}}async function z8(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:i}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Si({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i?.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a?.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await pe(e,zn,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Oe(Cd(s))],blockNumber:n,blockTag:r});return c}async function _1(e,t){const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:b,..._}=t,E=n?Xe(n):void 0;try{Br(t);const k=(typeof r=="bigint"?ne(r):void 0)||s,M=e.chain?.formatters?.transactionRequest?.format,U=(M||Kr)({...Po(_,{format:M}),account:E,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:b},"createAccessList"),D=await e.request({method:"eth_createAccessList",params:[U,k]});return{accessList:D.accessList,gasUsed:BigInt(D.gasUsed)}}catch(T){throw o1(T,{...t,account:E,chain:e.chain})}}async function D8(e){const t=fc(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function E1(e,{address:t,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),u=fc(e,{method:"eth_newFilter"});let f=[];c&&(f=[c.flatMap(b=>Bo({abi:[b],eventName:b.name,args:n}))],r&&(f=f[0]));const m=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof i=="bigint"?ne(i):i,toBlock:typeof a=="bigint"?ne(a):a,...f.length?{topics:f}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:m,request:u(m),strict:!!o,toBlock:a,type:"event"}}async function A1(e){const t=fc(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function j8(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?ne(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(i)}async function q8(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function V8(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?ne(n):void 0;let i;return t?i=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):i=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),mn(i)}async function of(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?ne(n):void 0,i=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(i!=="0x")return i}class H8 extends ee{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function G8(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[i,o,a,c,u,f,m]=await pe(e,zn,"readContract")({abi:K8,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:u,salt:f},extensions:m,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new H8({address:n}):o}}const K8=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function W8(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function Z8(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?ne(n):void 0,o=await e.request({method:"eth_feeHistory",params:[ne(t),i||r,s]},{dedupe:!!i});return W8(o)}async function Y8(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(i=>Jn(i));return t.abi?Ad({abi:t.abi,logs:s,strict:n}):s}function X8(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!Ye(s))throw new Nt({address:s});if(r<0)throw new Mo({chainId:r})}Od(e)}function J8(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Fg;for(const n of t){const r=tt(n),s=mn(ps(n,0,1));if(r!==32)throw new wS({hash:n,size:r});if(s!==Ug)throw new vS({hash:n,version:s})}}Od(e)}function Od(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new Mo({chainId:t});if(s&&!Ye(s))throw new Nt({address:s});if(r&&r>yc)throw new bs({maxFeePerGas:r});if(n&&r&&n>r)throw new fo({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Q8(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=e;if(t<=0)throw new Mo({chainId:t});if(i&&!Ye(i))throw new Nt({address:i});if(n||s)throw new ee("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>yc)throw new bs({maxFeePerGas:r})}function e3(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=e;if(i&&!Ye(i))throw new Nt({address:i});if(typeof t<"u"&&t<=0)throw new Mo({chainId:t});if(n||s)throw new ee("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>yc)throw new bs({maxFeePerGas:r})}function Ic(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new HA({storageKey:s[i]});if(!Ye(r,{strict:!1}))throw new Nt({address:r});t.push([r,s])}return t}function Md(e,t){const n=Dg(e);return n==="eip1559"?r3(e,t):n==="eip2930"?s3(e,t):n==="eip4844"?n3(e,t):n==="eip7702"?t3(e,t):i3(e,t)}function t3(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:m}=e;X8(e);const p=Ic(f),b=o3(n);return Rn(["0x04",Er([ne(r),i?ne(i):"0x",u?ne(u):"0x",c?ne(c):"0x",s?ne(s):"0x",o??"0x",a?ne(a):"0x",m??"0x",p,b,...Fo(e,t)])])}function n3(e,t){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:m}=e;J8(e);let p=e.blobVersionedHashes,b=e.sidecars;if(e.blobs&&(typeof p>"u"||typeof b>"u")){const C=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(V=>Ot(V)),U=e.kzg,D=bd({blobs:C,kzg:U});if(typeof p>"u"&&(p=Mg({commitments:D})),typeof b>"u"){const V=wd({blobs:C,commitments:D,kzg:U});b=zg({blobs:C,commitments:D,proofs:V})}}const _=Ic(f),E=[ne(n),s?ne(s):"0x",u?ne(u):"0x",c?ne(c):"0x",r?ne(r):"0x",i??"0x",o?ne(o):"0x",m??"0x",_,a?ne(a):"0x",p??[],...Fo(e,t)],T=[],k=[],M=[];if(b)for(let C=0;C<b.length;C++){const{blob:U,commitment:D,proof:V}=b[C];T.push(U),k.push(D),M.push(V)}return Rn(["0x03",Er(b?[E,T,k,M]:E)])}function r3(e,t){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:f}=e;Od(e);const m=Ic(u),p=[ne(n),s?ne(s):"0x",c?ne(c):"0x",a?ne(a):"0x",r?ne(r):"0x",i??"0x",o?ne(o):"0x",f??"0x",m,...Fo(e,t)];return Rn(["0x02",Er(p)])}function s3(e,t){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:u}=e;Q8(e);const f=Ic(c),m=[ne(n),i?ne(i):"0x",u?ne(u):"0x",r?ne(r):"0x",o??"0x",a?ne(a):"0x",s??"0x",f,...Fo(e,t)];return Rn(["0x01",Er(m)])}function i3(e,t){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=e;e3(e);let u=[i?ne(i):"0x",c?ne(c):"0x",r?ne(r):"0x",o??"0x",a?ne(a):"0x",s??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const b=27n+(t.v===27n?0n:1n);if(t.v!==b)throw new qA({v:t.v});return b})(),m=In(t.r),p=In(t.s);u=[...u,ne(f),m==="0x00"?"0x":m,p==="0x00"?"0x":p]}else n>0&&(u=[...u,ne(n),"0x","0x"]);return Er(u)}function Fo(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=In(n.r),o=In(n.s);return[typeof s=="number"?s?ne(1):"0x":r===0n?"0x":r===1n?ne(1):r===27n?"0x":ne(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function o3(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...i}=n,o=n.address;t.push([r?Oe(r):"0x",o,s?Oe(s):"0x",...Fo({},i)])}return t}async function a3({address:e,authorization:t,signature:n}){return No(Vs(e),await hc({authorization:t,signature:n}))}const aa=new So(8192);function c3(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(aa.get(n))return aa.get(n);const r=e().finally(()=>aa.delete(n));return aa.set(n,r),r}function u3(e,t={}){return async(n,r={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...t,...r},{method:u}=n;if(i?.exclude?.includes(u))throw new Qr(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new Qr(new Error("method not supported"),{method:u});const f=s?ci(`${c}.${Mt(n)}`):void 0;return c3(()=>Da(async()=>{try{return await e(n)}catch(m){const p=m;switch(p.code){case Ki.code:throw new Ki(p);case Wi.code:throw new Wi(p);case Zi.code:throw new Zi(p,{method:n.method});case Yi.code:throw new Yi(p);case ms.code:throw new ms(p);case ys.code:throw new ys(p);case Xi.code:throw new Xi(p);case Ji.code:throw new Ji(p);case Qi.code:throw new Qi(p);case Qr.code:throw new Qr(p,{method:n.method});case ui.code:throw new ui(p);case eo.code:throw new eo(p);case Gs.code:throw new Gs(p);case to.code:throw new to(p);case no.code:throw new no(p);case ro.code:throw new ro(p);case so.code:throw new so(p);case io.code:throw new io(p);case li.code:throw new li(p);case oo.code:throw new oo(p);case ao.code:throw new ao(p);case co.code:throw new co(p);case uo.code:throw new uo(p);case lo.code:throw new lo(p);case fi.code:throw new fi(p);case 5e3:throw new Gs(p);default:throw m instanceof ee?m:new JA(p)}}},{delay:({count:m,error:p})=>{if(p&&p instanceof Di){const b=p?.headers?.get("Retry-After");if(b?.match(/\d/))return Number.parseInt(b,10)*1e3}return~~(1<<m)*o},retryCount:a,shouldRetry:({error:m})=>l3(m)}),{enabled:s,id:f})}}function l3(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===ui.code||e.code===ms.code:e instanceof Di&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function sn(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}function f3(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r&&a.abort()},n)),s(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(t),i(a)}finally{clearTimeout(o)}})()})}function d3(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const up=d3();function h3(e,t={}){return{async request(n){const{body:r,fetchFn:s=t.fetchFn??fetch,onRequest:i=t.onRequest,onResponse:o=t.onResponse,timeout:a=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:f,signal:m}=c;try{const p=await f3(async({signal:_})=>{const E={...c,body:Array.isArray(r)?Mt(r.map(C=>({jsonrpc:"2.0",id:C.id??up.take(),...C}))):Mt({jsonrpc:"2.0",id:r.id??up.take(),...r}),headers:{"Content-Type":"application/json",...u},method:f||"POST",signal:m||(a>0?_:null)},T=new Request(e,E),k=await i?.(T,E)??{...E,url:e};return await s(k.url??e,k)},{errorInstance:new Gh({body:r,url:e}),timeout:a,signal:!0});o&&await o(p);let b;if(p.headers.get("Content-Type")?.startsWith("application/json"))b=await p.json();else{b=await p.text();try{b=JSON.parse(b||"{}")}catch(_){if(p.ok)throw _;b={error:b}}}if(!p.ok)throw new Di({body:r,details:Mt(b.error)||p.statusText,headers:p.headers,status:p.status,url:e});return b}catch(p){throw p instanceof Di||p instanceof Gh?p:new Di({body:r,cause:p,url:e})}}}}const p3=`Ethereum Signed Message:
`;function m3(e){const t=typeof e=="string"?ci(e):typeof e.raw=="string"?e.raw:Ot(e.raw),n=ci(`${p3}${tt(t)}`);return Tn([n,t])}function Ld(e,t){return Ut(m3(e),t)}class y3 extends ee{constructor({domain:t}){super(`Invalid domain "${Mt(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class g3 extends ee{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class b3 extends ee{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function w3(e){const{domain:t,message:n,primaryType:r,types:s}=e,i=(c,u)=>{const f={...u};for(const m of c){const{name:p,type:b}=m;b==="address"&&(f[p]=f[p].toLowerCase())}return f},o=s.EIP712Domain?t?i(s.EIP712Domain,t):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Mt({domain:o,message:a,primaryType:r,types:s})}function S1(e){const{domain:t,message:n,primaryType:r,types:s}=e,i=(o,a)=>{for(const c of o){const{name:u,type:f}=c,m=a[u],p=f.match(fg);if(p&&(typeof m=="number"||typeof m=="bigint")){const[E,T,k]=p;ne(m,{signed:T==="int",size:Number.parseInt(k,10)/8})}if(f==="address"&&typeof m=="string"&&!Ye(m))throw new Nt({address:m});const b=f.match(dA);if(b){const[E,T]=b;if(T&&tt(m)!==Number.parseInt(T,10))throw new HE({expectedSize:Number.parseInt(T,10),givenSize:tt(m)})}const _=s[f];_&&(v3(f),i(_,m))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new y3({domain:t});i(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new g3({primaryType:r,types:s})}function I1({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function v3(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new b3({type:e})}function T1(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:I1({domain:t}),...e.types};S1({domain:t,message:n,primaryType:r,types:s});const i=["0x1901"];return t&&i.push(x3({domain:t,types:s})),r!=="EIP712Domain"&&i.push(B1({data:n,primaryType:r,types:s})),Ut(Tn(i))}function x3({domain:e,types:t}){return B1({data:e,primaryType:"EIP712Domain",types:t})}function B1({data:e,primaryType:t,types:n}){const r=R1({data:e,primaryType:t,types:n});return Ut(r)}function R1({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[_3({primaryType:t,types:n})];for(const i of n[t]){const[o,a]=C1({types:n,name:i.name,type:i.type,value:e[i.name]});r.push(o),s.push(a)}return Gr(r,s)}function _3({primaryType:e,types:t}){const n=Oe(E3({primaryType:e,types:t}));return Ut(n)}function E3({primaryType:e,types:t}){let n="";const r=k1({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const i of s)n+=`${i}(${t[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function k1({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const i of t[s])k1({primaryType:i.type,types:t},n);return n}function C1({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},Ut(R1({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ut(r)];if(n==="string")return[{type:"bytes32"},Ut(Oe(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>C1({name:t,type:s,types:e,value:o}));return[{type:"bytes32"},Ut(Gr(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}const lp="0x0000000000000000000000000000000000000000000000000000000000000000";class A3 extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const S3={checksum:new A3(8192)},ju=S3.checksum;function P1(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=ay(NS(e));return n==="Bytes"?r:Fn(r)}const I3=/^0x[a-fA-F0-9]{40}$/;function Tc(e,t={}){const{strict:n=!0}=t;if(!I3.test(e))throw new fp({address:e,cause:new T3});if(n){if(e.toLowerCase()===e)return;if(N1(e)!==e)throw new fp({address:e,cause:new B3})}}function N1(e){if(ju.has(e))return ju.get(e);Tc(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=P1(MS(t),{as:"Bytes"}),r=t.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return ju.set(e,s),s}function af(e,t={}){const{strict:n=!0}=t??{};try{return Tc(e,{strict:n}),!0}catch{return!1}}class fp extends Re{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class T3 extends Re{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class B3 extends Re{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const R3=/^(.*)\[([0-9]*)\]$/,k3=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,O1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,dp=2n**256n-1n;function Ks(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=Fd(t.type);if(i){const[o,a]=i;return P3(e,{...t,type:a},{checksumAddress:r,length:o,staticPosition:s})}if(t.type==="tuple")return L3(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return C3(e,{checksum:r});if(t.type==="bool")return N3(e);if(t.type.startsWith("bytes"))return O3(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return M3(e,t);if(t.type==="string")return $3(e,{staticPosition:s});throw new Dd(t.type)}const hp=32,cf=32;function C3(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(i=>n?N1(i):i)(Fn($S(r,-20))),32]}function P3(e,t,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=wr(e.readBytes(cf)),u=i+c,f=u+hp;e.setPosition(u);const m=wr(e.readBytes(hp)),p=ho(t);let b=0;const _=[];for(let E=0;E<m;++E){e.setPosition(f+(p?E*32:b));const[T,k]=Ks(e,t,{checksumAddress:r,staticPosition:f});b+=k,_.push(T)}return e.setPosition(i+32),[_,32]}if(ho(t)){const c=wr(e.readBytes(cf)),u=i+c,f=[];for(let m=0;m<s;++m){e.setPosition(u+m*32);const[p]=Ks(e,t,{checksumAddress:r,staticPosition:u});f.push(p)}return e.setPosition(i+32),[f,32]}let o=0;const a=[];for(let c=0;c<s;++c){const[u,f]=Ks(e,t,{checksumAddress:r,staticPosition:i+o});o+=f,a.push(u)}return[a,o]}function N3(e){return[FS(e.readBytes(32),{size:32}),32]}function O3(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const o=wr(e.readBytes(32));e.setPosition(n+o);const a=wr(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[Fn(c),32]}return[Fn(e.readBytes(Number.parseInt(s,10),32)),32]}function M3(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?US(s,{signed:n}):wr(s,{signed:n}),32]}function L3(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=t.components.length===0||t.components.some(({name:c})=>!c),o=i?[]:{};let a=0;if(ho(t)){const c=wr(e.readBytes(cf)),u=s+c;for(let f=0;f<t.components.length;++f){const m=t.components[f];e.setPosition(u+a);const[p,b]=Ks(e,m,{checksumAddress:r,staticPosition:u});a+=b,o[i?f:m?.name]=p}return e.setPosition(s+32),[o,32]}for(let c=0;c<t.components.length;++c){const u=t.components[c],[f,m]=Ks(e,u,{checksumAddress:r,staticPosition:s});o[i?c:u?.name]=f,a+=m}return[o,a]}function $3(e,{staticPosition:t}){const n=wr(e.readBytes(32)),r=t+n;e.setPosition(r);const s=wr(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=zS(Wg(i));return e.setPosition(t+32),[o,32]}function U3({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push($d({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function $d({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=Fd(r.type);if(s){const[i,o]=s;return z3(n,{checksumAddress:e,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return H3(n,{checksumAddress:e,parameter:r});if(r.type==="address")return F3(n,{checksum:e});if(r.type==="bool")return j3(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=O1.exec(r.type)??[];return q3(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return D3(n,{type:r.type});if(r.type==="string")return V3(n);throw new Dd(r.type)}function Ud(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?t+=32:t+=yn(a)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?(n.push(Jt(t+s,{size:32})),r.push(a),s+=yn(a)):n.push(a)}return Un(...n,...r)}function F3(e,t){const{checksum:n=!1}=t;return Tc(e,{strict:n}),{dynamic:!1,encoded:ws(e.toLowerCase())}}function z3(e,t){const{checksumAddress:n,length:r,parameter:s}=t,i=r===null;if(!Array.isArray(e))throw new eI(e);if(!i&&e.length!==r)throw new Q3({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<e.length;c++){const u=$d({checksumAddress:n,parameter:s,value:e[c]});u.dynamic&&(o=!0),a.push(u)}if(i||o){const c=Ud(a);if(i){const u=Jt(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Un(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Un(...a.map(({encoded:c})=>c))}}function D3(e,{type:t}){const[,n]=t.split("bytes"),r=yn(e);if(!n){let s=e;return r%32!==0&&(s=vs(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:Un(ws(Jt(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new L1({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:vs(e)}}function j3(e){if(typeof e!="boolean")throw new Re(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ws(Zg(e))}}function q3(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Jg({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:Jt(e,{size:32,signed:t})}}function V3(e){const t=Id(e),n=Math.ceil(yn(t)/32),r=[];for(let s=0;s<n;s++)r.push(vs(Wn(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:Un(vs(Jt(yn(t),{size:32})),...r)}}function H3(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(e)?o:a.name,u=$d({checksumAddress:n,parameter:a,value:e[c]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Ud(i):Un(...i.map(({encoded:o})=>o))}}function Fd(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function ho(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(ho);const n=Fd(e.type);return!!(n&&ho({...e,type:n[1]}))}const G3={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Z3({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new W3({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new pp({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new pp({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function K3(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(G3);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class pp extends Re{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class W3 extends Re{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class Z3 extends Re{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Y3(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof t=="string"?Kg(t):t,o=K3(i);if(Fs(i)===0&&e.length>0)throw new J3;if(Fs(i)&&Fs(i)<32)throw new X3({data:typeof t=="string"?t:Fn(t),parameters:e,size:Fs(i)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const f=e[u];o.setPosition(a);const[m,p]=Ks(o,f,{checksumAddress:s,staticPosition:0});a+=p,r==="Array"?c.push(m):c[f.name??u]=m}return c}function zd(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new $1({expectedLength:e.length,givenLength:t.length});const s=U3({checksumAddress:r,parameters:e,values:t}),i=Ud(s);return i.length===0?"0x":i}function uf(e,t){if(e.length!==t.length)throw new $1({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r];n.push(uf.encode(s,i))}return Un(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return Tc(c),ws(c.toLowerCase(),s?32:0)}if(n==="string")return Id(r);if(n==="bytes")return r;if(n==="bool")return ws(Zg(r),s?32:1);const i=n.match(O1);if(i){const[c,u,f="256"]=i,m=Number.parseInt(f,10)/8;return Jt(r,{size:s?32:m,signed:u==="int"})}const o=n.match(k3);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new L1({expectedSize:Number.parseInt(u,10),value:r});return vs(r,s?32:0)}const a=n.match(R3);if(a&&Array.isArray(r)){const[c,u]=a,f=[];for(let m=0;m<r.length;m++)f.push(t(u,r[m],!0));return f.length===0?"0x":Un(...f)}throw new Dd(n)}e.encode=t})(uf||(uf={}));function M1(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?Mh(e):e}class X3 extends Re{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ms(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class J3 extends Re{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Q3 extends Re{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class L1 extends Re{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${yn(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class $1 extends Re{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class eI extends Re{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Dd extends Re{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function U1(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new qu({signature:e});if(typeof e.s>"u")throw new qu({signature:e});if(n&&typeof e.yParity>"u")throw new qu({signature:e});if(e.r<0n||e.r>dp)throw new aI({value:e.r});if(e.s<0n||e.s>dp)throw new cI({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new qd({value:e.yParity})}function tI(e){return F1(Fn(e))}function F1(e){if(e.length!==130&&e.length!==132)throw new oI({signature:e});const t=BigInt(Wn(e,0,32)),n=BigInt(Wn(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return jd(s)}catch{throw new qd({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function nI(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return rI(e)}function rI(e){const t=typeof e=="string"?F1(e):e instanceof Uint8Array?tI(e):typeof e.r=="string"?iI(e):e.v?sI(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return U1(t),t}function sI(e){return{r:e.r,s:e.s,yParity:jd(e.v)}}function iI(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=jd(n)),typeof r!="number")throw new qd({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function jd(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new uI({value:e})}class oI extends Re{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${yn(WS(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class qu extends Re{constructor({signature:t}){super(`Signature \`${Gg(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class aI extends Re{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class cI extends Re{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class qd extends Re{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class uI extends Re{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function lI(e,t={}){return typeof e.chainId=="string"?fI(e):{...e,...t.signature}}function fI(e){const{address:t,chainId:n,nonce:r}=e,s=nI(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const dI="0x8010801080108010801080108010801080108010801080108010801080108010",hI=M1("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function z1(e){if(typeof e=="string"){if(Wn(e,-32)!==dI)throw new yI(e)}else U1(e.authorization)}function pI(e){z1(e);const t=Xg(Wn(e,-64,-32)),n=Wn(e,-t-64,-64),r=Wn(e,0,-t-64),[s,i,o]=Y3(hI,n);return{authorization:lI({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function mI(e){try{return z1(e),!0}catch{return!1}}let yI=class extends Re{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function gI(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function bI(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?mn(e.nonce):void 0,storageProof:e.storageProof?gI(e.storageProof):void 0}}async function wI(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?ne(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,o||i]});return bI(a)}async function vI(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?ne(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,i||r]})}async function Vd(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){const o=r||"latest",a=n!==void 0?ne(n):void 0;let c=null;if(s?c=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,ne(i)]},{dedupe:!0}):c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,ne(i)]},{dedupe:!!a}),!c)throw new bg({blockHash:t,blockNumber:n,blockTag:o,hash:s,index:i});return(e.chain?.formatters?.transaction?.format||gc)(c,"getTransaction")}async function xI(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([pe(e,Lo,"getBlockNumber")({}),t?pe(e,Vd,"getTransaction")({hash:t}):void 0]),i=n?.blockNumber||s?.blockNumber;return i?r-i+1n:0n}async function fa(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new wg({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Rd)(n,"getTransactionReceipt")}async function _I(e,t){const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=t,u=t.contracts,{batchSize:f=t.batchSize??1024,deployless:m=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},p=(()=>{if(t.multicallAddress)return t.multicallAddress;if(m)return null;if(e.chain)return Si({blockNumber:i,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),b=[[]];let _=0,E=0;for(let M=0;M<u.length;M++){const{abi:C,address:U,args:D,functionName:V}=u[M];try{const K=rn({abi:C,args:D,functionName:V});E+=(K.length-2)/2,f>0&&E>f&&b[_].length>0&&(_++,E=(K.length-2)/2,b[_]=[]),b[_]=[...b[_],{allowFailure:!0,callData:K,target:U}]}catch(K){const X=gs(K,{abi:C,address:U,args:D,docsPath:"/docs/contract/multicall",functionName:V,sender:n});if(!s)throw X;b[_]=[...b[_],{allowFailure:!0,callData:"0x",target:U}]}}const T=await Promise.allSettled(b.map(M=>pe(e,zn,"readContract")({...p===null?{code:Td}:{address:p},abi:za,account:n,args:[M],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),k=[];for(let M=0;M<T.length;M++){const C=T[M];if(C.status==="rejected"){if(!s)throw C.reason;for(let D=0;D<b[M].length;D++)k.push({status:"failure",error:C.reason,result:void 0});continue}const U=C.value;for(let D=0;D<U.length;D++){const{returnData:V,success:K}=U[D],{callData:X}=b[M][D],{abi:L,address:$,functionName:z,args:j}=u[k.length];try{if(X==="0x")throw new Ao;if(!K)throw new dc({data:V});const x=Bs({abi:L,args:j,data:V,functionName:z});k.push(s?{result:x,status:"success"}:x)}catch(x){const l=gs(x,{abi:L,address:$,args:j,docsPath:"/docs/contract/multicall",functionName:z});if(!s)throw l;k.push({error:l,result:void 0,status:"failure"})}}}if(k.length!==u.length)throw new ee("multicall results mismatch");return k}async function lf(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=t;try{const c=[];for(const p of s){const b=p.blockOverrides?e1(p.blockOverrides):void 0,_=p.calls.map(T=>{const k=T,M=k.account?Xe(k.account):void 0,C=k.abi?rn(k):k.data,U={...k,account:M,data:k.dataSuffix?Tn([C||"0x",k.dataSuffix]):C,from:k.from??M?.address};return Br(U),Kr(U)}),E=p.stateOverrides?hd(p.stateOverrides):void 0;c.push({blockOverrides:b,calls:_,stateOverrides:E})}const f=(typeof n=="bigint"?ne(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},f]})).map((p,b)=>({...md(p),calls:p.calls.map((_,E)=>{const{abi:T,args:k,functionName:M,to:C}=s[b].calls[E],U=_.error?.data??_.returnData,D=BigInt(_.gasUsed),V=_.logs?.map($=>Jn($)),K=_.status==="0x1"?"success":"failure",X=T&&K==="success"&&U!=="0x"?Bs({abi:T,data:U,functionName:M}):null,L=(()=>{if(K==="success")return;let $;if(_.error?.data==="0x"?$=new Ao:_.error&&($=new dc(_.error)),!!$)return gs($,{abi:T??[],address:C??"0x",args:k,functionName:M??"<unknown>"})})();return{data:U,gasUsed:D,logs:V,status:K,...K==="success"?{result:X}:{error:L}}})}))}catch(c){const u=c,f=pc(u,{});throw f instanceof Co?u:f}}function ff(e){let t=!0,n="",r=0,s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!i)throw new Re("Unable to normalize signature.");return s}function df(e,t){const n=typeof e,r=t.type;switch(r){case"address":return af(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>df(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>df(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function D1(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return D1(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?af(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?af(n[r],{strict:!1}):!1)return o}}function j1(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Oh(e):e;return{...r,...n?{hash:zs(r)}:{}}}function Bc(e,t,n){const{args:r=[],prepare:s=!0}=n??{},i=ZS(t,{strict:!1}),o=e.filter(u=>i?u.type==="function"||u.type==="error"?q1(u)===Wn(t,0,4):u.type==="event"?zs(u)===t:!1:"name"in u&&u.name===t);if(o.length===0)throw new ja({name:t});if(o.length===1)return{...o[0],...s?{hash:zs(o[0])}:{}};let a;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:zs(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((m,p)=>{const b="inputs"in u&&u.inputs[p];return b?df(m,b):!1})){if(a&&"inputs"in a&&a.inputs){const m=D1(u.inputs,a.inputs,r);if(m)throw new AI({abiItem:u,type:m[0]},{abiItem:a,type:m[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...f]=o;return{...u,overloads:f}})();if(!c)throw new ja({name:t});return{...c,...s?{hash:zs(c)}:{}}}function q1(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return Bc(n,r)}return e[0]})();return Wn(zs(t),0,4)}function EI(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return Bc(r,s)}return e[0]})(),n=typeof t=="string"?t:Ua(t);return ff(n)}function zs(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return Bc(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:P1(Id(EI(t)))}class AI extends Re{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${ff(Ua(t.abiItem))}\`, and`,`\`${n.type}\` in \`${ff(Ua(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ja extends Re{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function SI(...e){const[t,n]=(()=>{if(Array.isArray(e[0])){const[i,o]=e;return[TI(i),o]}return e})(),{bytecode:r,args:s}=n;return Un(r,t.inputs?.length&&s?.length?zd(t.inputs,s):"0x")}function II(e){return j1(e)}function TI(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new ja({name:"constructor"});return t}function BI(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,f,m]=e;return[mp(u,f,{args:m}),m]}const[a,c]=e;return[a,c]})(),{overloads:r}=t,s=r?mp([t,...r],t.name,{args:n}):t,i=RI(s),o=n.length>0?zd(s.inputs,n):void 0;return o?Un(i,o):i}function Ps(e,t={}){return j1(e,t)}function mp(e,t,n){const r=Bc(e,t,n);if(r.type!=="function")throw new ja({name:t,type:"function"});return r}function RI(e){return q1(e)}const kI="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",qn="0x0000000000000000000000000000000000000000",CI="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function PI(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=t,u=t.account?Xe(t.account):void 0;if(o&&!u)throw new ee("`account` is required when `traceAssetChanges` is true");const f=u?SI(II("constructor(bytes, bytes)"),{bytecode:s1,args:[CI,BI(Ps("function getBalance(address)"),[u.address])]}):void 0,m=o?await Promise.all(t.calls.map(async S=>{if(!S.data&&!S.abi)return;const{accessList:P}=await _1(e,{account:u.address,...S,data:S.abi?rn(S):S.data});return P.map(({address:F,storageKeys:R})=>R.length>0?F:null)})).then(S=>S.flat().filter(Boolean)):[],p=await lf(e,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:f}],stateOverrides:i},{calls:m.map((S,P)=>({abi:[Ps("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:S,from:qn,nonce:P})),stateOverrides:[{address:qn,nonce:0}]}]:[],{calls:[...s,{}].map(S=>({...S,from:u?.address})),stateOverrides:i},...o?[{calls:[{data:f}]},{calls:m.map((S,P)=>({abi:[Ps("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:S,from:qn,nonce:P})),stateOverrides:[{address:qn,nonce:0}]},{calls:m.map((S,P)=>({to:S,abi:[Ps("function decimals() returns (uint256)")],functionName:"decimals",from:qn,nonce:P})),stateOverrides:[{address:qn,nonce:0}]},{calls:m.map((S,P)=>({to:S,abi:[Ps("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:qn,nonce:P})),stateOverrides:[{address:qn,nonce:0}]},{calls:m.map((S,P)=>({to:S,abi:[Ps("function symbol() returns (string)")],functionName:"symbol",from:qn,nonce:P})),stateOverrides:[{address:qn,nonce:0}]}]:[]],traceTransfers:a,validation:c}),b=o?p[2]:p[0],[_,E,,T,k,M,C,U]=o?p:[],{calls:D,...V}=b,K=D.slice(0,-1)??[],X=_?.calls??[],L=E?.calls??[],$=[...X,...L].map(S=>S.status==="success"?ze(S.data):null),z=T?.calls??[],j=k?.calls??[],x=[...z,...j].map(S=>S.status==="success"?ze(S.data):null),l=(M?.calls??[]).map(S=>S.status==="success"?S.result:null),h=(U?.calls??[]).map(S=>S.status==="success"?S.result:null),v=(C?.calls??[]).map(S=>S.status==="success"?S.result:null),A=[];for(const[S,P]of x.entries()){const F=$[S];if(typeof P!="bigint"||typeof F!="bigint")continue;const R=l[S-1],d=h[S-1],y=v[S-1],B=S===0?{address:kI,decimals:18,symbol:"ETH"}:{address:m[S-1],decimals:y||R?Number(R??1):void 0,symbol:d??void 0};A.some(N=>N.token.address===B.address)||A.push({token:B,value:{pre:F,post:P,diff:P-F}})}return{assetChanges:A,block:V,results:K}}const V1="0x6492649264926492649264926492649264926492649264926492649264926492";function NI(e){if(Wn(e,-32)!==V1)throw new LI(e)}function OI(e){const{data:t,signature:n,to:r}=e;return Un(zd(M1("address, bytes, bytes"),[r,t,n]),V1)}function MI(e){try{return NI(e),!0}catch{return!1}}class LI extends Re{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hd=BigInt(0),hf=BigInt(1);function zo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Gd(e){if(!zo(e))throw new Error("Uint8Array expected")}function po(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function ca(e){const t=e.toString(16);return t.length&1?"0"+t:t}function H1(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Hd:BigInt("0x"+e)}const G1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",$I=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function mo(e){if(Gd(e),G1)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=$I[e[n]];return t}const ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function yp(e){if(e>=ar._0&&e<=ar._9)return e-ar._0;if(e>=ar.A&&e<=ar.F)return e-(ar.A-10);if(e>=ar.a&&e<=ar.f)return e-(ar.a-10)}function qa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(G1)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=yp(e.charCodeAt(i)),a=yp(e.charCodeAt(i+1));if(o===void 0||a===void 0){const c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function is(e){return H1(mo(e))}function K1(e){return Gd(e),H1(mo(Uint8Array.from(e).reverse()))}function Do(e,t){return qa(e.toString(16).padStart(t*2,"0"))}function W1(e,t){return Do(e,t).reverse()}function wn(e,t,n){let r;if(typeof t=="string")try{r=qa(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(zo(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Va(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Gd(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}const Vu=e=>typeof e=="bigint"&&Hd<=e;function Kd(e,t,n){return Vu(e)&&Vu(t)&&Vu(n)&&t<=e&&e<n}function Ws(e,t,n,r){if(!Kd(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function UI(e){let t;for(t=0;e>Hd;e>>=hf,t+=1);return t}const Rc=e=>(hf<<BigInt(e))-hf,Hu=e=>new Uint8Array(e),gp=e=>Uint8Array.from(e);function FI(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Hu(e),s=Hu(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...m)=>n(s,r,...m),c=(m=Hu(0))=>{s=a(gp([0]),m),r=a(),m.length!==0&&(s=a(gp([1]),m),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const p=[];for(;m<t;){r=a();const b=r.slice();p.push(b),m+=r.length}return Va(...p)};return(m,p)=>{o(),c(m);let b;for(;!(b=p(u()));)c();return o(),b}}const zI={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||zo(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function kc(e,t,n={}){const r=(s,i,o)=>{const a=zI[i];if(typeof a!="function")throw new Error("invalid validator function");const c=e[s];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function bp(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cn=BigInt(0),en=BigInt(1),es=BigInt(2),DI=BigInt(3),Z1=BigInt(4),Y1=BigInt(5),X1=BigInt(8);function on(e,t){const n=e%t;return n>=cn?n:t+n}function bn(e,t,n){let r=e;for(;t-- >cn;)r*=r,r%=n;return r}function pf(e,t){if(e===cn)throw new Error("invert: expected non-zero number");if(t<=cn)throw new Error("invert: expected positive modulus, got "+t);let n=on(e,t),r=t,s=cn,i=en;for(;n!==cn;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==en)throw new Error("invert: does not exist");return on(s,t)}function J1(e,t){const n=(e.ORDER+en)/Z1,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function jI(e,t){const n=(e.ORDER-Y1)/X1,r=e.mul(t,es),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,es),s),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function qI(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-en,n=0;for(;t%es===cn;)t/=es,n++;let r=es;const s=Wd(e);for(;wp(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return J1;let i=s.pow(r,t);const o=(t+en)/es;return function(c,u){if(c.is0(u))return u;if(wp(c,u)!==1)throw new Error("Cannot find square root");let f=n,m=c.mul(c.ONE,i),p=c.pow(u,t),b=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let _=1,E=c.sqr(p);for(;!c.eql(E,c.ONE);)if(_++,E=c.sqr(E),_===f)throw new Error("Cannot find square root");const T=en<<BigInt(f-_-1),k=c.pow(m,T);f=_,m=c.sqr(k),p=c.mul(p,m),b=c.mul(b,k)}return b}}function VI(e){return e%Z1===DI?J1:e%X1===Y1?jI:qI(e)}const HI=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GI(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=HI.reduce((r,s)=>(r[s]="function",r),t);return kc(e,n)}function KI(e,t,n){if(n<cn)throw new Error("invalid exponent, negatives unsupported");if(n===cn)return e.ONE;if(n===en)return t;let r=e.ONE,s=t;for(;n>cn;)n&en&&(r=e.mul(r,s)),s=e.sqr(s),n>>=en;return r}function Q1(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),i=e.inv(s);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),i),r}function wp(e,t){const n=(e.ORDER-en)/es,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function eb(e,t){t!==void 0&&Xs(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Wd(e,t,n=!1,r={}){if(e<=cn)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=eb(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:Rc(s),ZERO:cn,ONE:en,create:c=>on(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return cn<=c&&c<e},is0:c=>c===cn,isOdd:c=>(c&en)===en,neg:c=>on(-c,e),eql:(c,u)=>c===u,sqr:c=>on(c*c,e),add:(c,u)=>on(c+u,e),sub:(c,u)=>on(c-u,e),mul:(c,u)=>on(c*u,e),pow:(c,u)=>KI(a,c,u),div:(c,u)=>on(c*pf(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>pf(c,e),sqrt:r.sqrt||(c=>(o||(o=VI(e)),o(a,c))),toBytes:c=>n?W1(c,i):Do(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?K1(c):is(c)},invertBatch:c=>Q1(a,c),cmov:(c,u,f)=>f?u:c});return Object.freeze(a)}function tb(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function nb(e){const t=tb(e);return t+Math.ceil(t/2)}function WI(e,t,n=!1){const r=e.length,s=tb(t),i=nb(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?K1(e):is(e),a=on(o,t-en)+en;return n?W1(a,s):Do(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vp=BigInt(0),mf=BigInt(1);function Gu(e,t){const n=t.negate();return e?n:t}function rb(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ku(e,t){rb(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,i=Rc(e),o=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function xp(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=mf);const u=t*r,f=u+Math.abs(a)-1,m=a===0,p=a<0,b=t%2!==0;return{nextN:c,offset:f,isZero:m,isNeg:p,isNegF:b,offsetF:u}}function ZI(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function YI(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Wu=new WeakMap,sb=new WeakMap;function Zu(e){return sb.get(e)||1}function XI(e,t){return{constTimeNegate:Gu,hasPrecomputes(n){return Zu(n)!==1},unsafeLadder(n,r,s=e.ZERO){let i=n;for(;r>vp;)r&mf&&(s=s.add(i)),i=i.double(),r>>=mf;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Ku(r,t),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let f=1;f<i;f++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=e.ZERO,o=e.BASE;const a=Ku(n,t);for(let c=0;c<a.windows;c++){const{nextN:u,offset:f,isZero:m,isNeg:p,isNegF:b,offsetF:_}=xp(s,c,a);s=u,m?o=o.add(Gu(b,r[_])):i=i.add(Gu(p,r[f]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=e.ZERO){const o=Ku(n,t);for(let a=0;a<o.windows&&s!==vp;a++){const{nextN:c,offset:u,isZero:f,isNeg:m}=xp(s,a,o);if(s=c,!f){const p=r[u];i=i.add(m?p.negate():p)}}return i},getPrecomputes(n,r,s){let i=Wu.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Wu.set(r,s(i))),i},wNAFCached(n,r,s){const i=Zu(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Zu(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){rb(r,t),sb.set(n,r),Wu.delete(n)}}}function JI(e,t,n,r){ZI(n,e),YI(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=UI(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Rc(c),f=new Array(Number(u)+1).fill(o),m=Math.floor((t.BITS-1)/c)*c;let p=o;for(let b=m;b>=0;b-=c){f.fill(o);for(let E=0;E<i;E++){const T=r[E],k=Number(T>>BigInt(b)&u);f[k]=f[k].add(n[E])}let _=o;for(let E=f.length-1,T=o;E>0;E--)T=T.add(f[E]),_=_.add(T);if(p=p.add(_),b!==0)for(let E=0;E<c;E++)p=p.double()}return p}function ib(e){return GI(e.Fp),kc(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eb(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _p(e){e.lowS!==void 0&&po("lowS",e.lowS),e.prehash!==void 0&&po("prehash",e.prehash)}function QI(e){const t=ib(e);kc(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class eT extends Error{constructor(t=""){super(t)}}const lr={Err:eT,_tlv:{encode:(e,t)=>{const{Err:n}=lr;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=ca(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?ca(s.length/2|128):"";return ca(e)+i+s+t},decode(e,t){const{Err:n}=lr;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)o=o<<8|f;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=lr;if(e<pr)throw new t("integer: negative integers are not allowed");let n=ca(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=lr;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return is(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=lr,s=wn("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=lr,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}};function Yu(e,t){return mo(Do(e,t))}const pr=BigInt(0),$t=BigInt(1);BigInt(2);const Xu=BigInt(3),tT=BigInt(4);function nT(e){const t=QI(e),{Fp:n}=t,r=Wd(t.n,t.nBitLength),s=t.toBytes||((C,U,D)=>{const V=U.toAffine();return Va(Uint8Array.from([4]),n.toBytes(V.x),n.toBytes(V.y))}),i=t.fromBytes||(C=>{const U=C.subarray(1),D=n.fromBytes(U.subarray(0,n.BYTES)),V=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:D,y:V}});function o(C){const{a:U,b:D}=t,V=n.sqr(C),K=n.mul(V,C);return n.add(n.add(K,n.mul(C,U)),D)}function a(C,U){const D=n.sqr(U),V=o(C);return n.eql(D,V)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,Xu),tT),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function f(C){return Kd(C,$t,t.n)}function m(C){const{allowedPrivateKeyLengths:U,nByteLength:D,wrapPrivateKey:V,n:K}=t;if(U&&typeof C!="bigint"){if(zo(C)&&(C=mo(C)),typeof C!="string"||!U.includes(C.length))throw new Error("invalid private key");C=C.padStart(D*2,"0")}let X;try{X=typeof C=="bigint"?C:is(wn("private key",C,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof C)}return V&&(X=on(X,K)),Ws("private key",X,$t,K),X}function p(C){if(!(C instanceof E))throw new Error("ProjectivePoint expected")}const b=bp((C,U)=>{const{px:D,py:V,pz:K}=C;if(n.eql(K,n.ONE))return{x:D,y:V};const X=C.is0();U==null&&(U=X?n.ONE:n.inv(K));const L=n.mul(D,U),$=n.mul(V,U),z=n.mul(K,U);if(X)return{x:n.ZERO,y:n.ZERO};if(!n.eql(z,n.ONE))throw new Error("invZ was invalid");return{x:L,y:$}}),_=bp(C=>{if(C.is0()){if(t.allowInfinityPoint&&!n.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:U,y:D}=C.toAffine();if(!n.isValid(U)||!n.isValid(D))throw new Error("bad point: x or y not FE");if(!a(U,D))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class E{constructor(U,D,V){if(U==null||!n.isValid(U))throw new Error("x required");if(D==null||!n.isValid(D)||n.is0(D))throw new Error("y required");if(V==null||!n.isValid(V))throw new Error("z required");this.px=U,this.py=D,this.pz=V,Object.freeze(this)}static fromAffine(U){const{x:D,y:V}=U||{};if(!U||!n.isValid(D)||!n.isValid(V))throw new Error("invalid affine point");if(U instanceof E)throw new Error("projective point not allowed");const K=X=>n.eql(X,n.ZERO);return K(D)&&K(V)?E.ZERO:new E(D,V,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){const D=Q1(n,U.map(V=>V.pz));return U.map((V,K)=>V.toAffine(D[K])).map(E.fromAffine)}static fromHex(U){const D=E.fromAffine(i(wn("pointHex",U)));return D.assertValidity(),D}static fromPrivateKey(U){return E.BASE.multiply(m(U))}static msm(U,D){return JI(E,r,U,D)}_setWindowSize(U){M.setWindowSize(this,U)}assertValidity(){_(this)}hasEvenY(){const{y:U}=this.toAffine();if(n.isOdd)return!n.isOdd(U);throw new Error("Field doesn't support isOdd")}equals(U){p(U);const{px:D,py:V,pz:K}=this,{px:X,py:L,pz:$}=U,z=n.eql(n.mul(D,$),n.mul(X,K)),j=n.eql(n.mul(V,$),n.mul(L,K));return z&&j}negate(){return new E(this.px,n.neg(this.py),this.pz)}double(){const{a:U,b:D}=t,V=n.mul(D,Xu),{px:K,py:X,pz:L}=this;let $=n.ZERO,z=n.ZERO,j=n.ZERO,x=n.mul(K,K),l=n.mul(X,X),h=n.mul(L,L),v=n.mul(K,X);return v=n.add(v,v),j=n.mul(K,L),j=n.add(j,j),$=n.mul(U,j),z=n.mul(V,h),z=n.add($,z),$=n.sub(l,z),z=n.add(l,z),z=n.mul($,z),$=n.mul(v,$),j=n.mul(V,j),h=n.mul(U,h),v=n.sub(x,h),v=n.mul(U,v),v=n.add(v,j),j=n.add(x,x),x=n.add(j,x),x=n.add(x,h),x=n.mul(x,v),z=n.add(z,x),h=n.mul(X,L),h=n.add(h,h),x=n.mul(h,v),$=n.sub($,x),j=n.mul(h,l),j=n.add(j,j),j=n.add(j,j),new E($,z,j)}add(U){p(U);const{px:D,py:V,pz:K}=this,{px:X,py:L,pz:$}=U;let z=n.ZERO,j=n.ZERO,x=n.ZERO;const l=t.a,h=n.mul(t.b,Xu);let v=n.mul(D,X),A=n.mul(V,L),S=n.mul(K,$),P=n.add(D,V),F=n.add(X,L);P=n.mul(P,F),F=n.add(v,A),P=n.sub(P,F),F=n.add(D,K);let R=n.add(X,$);return F=n.mul(F,R),R=n.add(v,S),F=n.sub(F,R),R=n.add(V,K),z=n.add(L,$),R=n.mul(R,z),z=n.add(A,S),R=n.sub(R,z),x=n.mul(l,F),z=n.mul(h,S),x=n.add(z,x),z=n.sub(A,x),x=n.add(A,x),j=n.mul(z,x),A=n.add(v,v),A=n.add(A,v),S=n.mul(l,S),F=n.mul(h,F),A=n.add(A,S),S=n.sub(v,S),S=n.mul(l,S),F=n.add(F,S),v=n.mul(A,F),j=n.add(j,v),v=n.mul(R,F),z=n.mul(P,z),z=n.sub(z,v),v=n.mul(P,A),x=n.mul(R,x),x=n.add(x,v),new E(z,j,x)}subtract(U){return this.add(U.negate())}is0(){return this.equals(E.ZERO)}wNAF(U){return M.wNAFCached(this,U,E.normalizeZ)}multiplyUnsafe(U){const{endo:D,n:V}=t;Ws("scalar",U,pr,V);const K=E.ZERO;if(U===pr)return K;if(this.is0()||U===$t)return this;if(!D||M.hasPrecomputes(this))return M.wNAFCachedUnsafe(this,U,E.normalizeZ);let{k1neg:X,k1:L,k2neg:$,k2:z}=D.splitScalar(U),j=K,x=K,l=this;for(;L>pr||z>pr;)L&$t&&(j=j.add(l)),z&$t&&(x=x.add(l)),l=l.double(),L>>=$t,z>>=$t;return X&&(j=j.negate()),$&&(x=x.negate()),x=new E(n.mul(x.px,D.beta),x.py,x.pz),j.add(x)}multiply(U){const{endo:D,n:V}=t;Ws("scalar",U,$t,V);let K,X;if(D){const{k1neg:L,k1:$,k2neg:z,k2:j}=D.splitScalar(U);let{p:x,f:l}=this.wNAF($),{p:h,f:v}=this.wNAF(j);x=M.constTimeNegate(L,x),h=M.constTimeNegate(z,h),h=new E(n.mul(h.px,D.beta),h.py,h.pz),K=x.add(h),X=l.add(v)}else{const{p:L,f:$}=this.wNAF(U);K=L,X=$}return E.normalizeZ([K,X])[0]}multiplyAndAddUnsafe(U,D,V){const K=E.BASE,X=($,z)=>z===pr||z===$t||!$.equals(K)?$.multiplyUnsafe(z):$.multiply(z),L=X(this,D).add(X(U,V));return L.is0()?void 0:L}toAffine(U){return b(this,U)}isTorsionFree(){const{h:U,isTorsionFree:D}=t;if(U===$t)return!0;if(D)return D(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:U,clearCofactor:D}=t;return U===$t?this:D?D(E,this):this.multiplyUnsafe(t.h)}toRawBytes(U=!0){return po("isCompressed",U),this.assertValidity(),s(E,this,U)}toHex(U=!0){return po("isCompressed",U),mo(this.toRawBytes(U))}}E.BASE=new E(t.Gx,t.Gy,n.ONE),E.ZERO=new E(n.ZERO,n.ONE,n.ZERO);const{endo:T,nBitLength:k}=t,M=XI(E,T?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:E,normPrivateKeyToScalar:m,weierstrassEquation:o,isWithinCurveOrder:f}}function rT(e){const t=ib(e);return kc(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function sT(e){const t=rT(e),{Fp:n,n:r,nByteLength:s,nBitLength:i}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(h){return on(h,r)}function u(h){return pf(h,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:m,weierstrassEquation:p,isWithinCurveOrder:b}=nT({...t,toBytes(h,v,A){const S=v.toAffine(),P=n.toBytes(S.x),F=Va;return po("isCompressed",A),A?F(Uint8Array.from([v.hasEvenY()?2:3]),P):F(Uint8Array.from([4]),P,n.toBytes(S.y))},fromBytes(h){const v=h.length,A=h[0],S=h.subarray(1);if(v===o&&(A===2||A===3)){const P=is(S);if(!Kd(P,$t,n.ORDER))throw new Error("Point is not on curve");const F=p(P);let R;try{R=n.sqrt(F)}catch(B){const N=B instanceof Error?": "+B.message:"";throw new Error("Point is not on curve"+N)}const d=(R&$t)===$t;return(A&1)===1!==d&&(R=n.neg(R)),{x:P,y:R}}else if(v===a&&A===4){const P=n.fromBytes(S.subarray(0,n.BYTES)),F=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:P,y:F}}else{const P=o,F=a;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+F+", got "+v)}}});function _(h){const v=r>>$t;return h>v}function E(h){return _(h)?c(-h):h}const T=(h,v,A)=>is(h.slice(v,A));class k{constructor(v,A,S){Ws("r",v,$t,r),Ws("s",A,$t,r),this.r=v,this.s=A,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(v){const A=s;return v=wn("compactSignature",v,A*2),new k(T(v,0,A),T(v,A,2*A))}static fromDER(v){const{r:A,s:S}=lr.toSig(wn("DER",v));return new k(A,S)}assertValidity(){}addRecoveryBit(v){return new k(this.r,this.s,v)}recoverPublicKey(v){const{r:A,s:S,recovery:P}=this,F=K(wn("msgHash",v));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const R=P===2||P===3?A+t.n:A;if(R>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=(P&1)===0?"02":"03",y=f.fromHex(d+Yu(R,n.BYTES)),B=u(R),N=c(-F*B),G=c(S*B),J=f.BASE.multiplyAndAddUnsafe(y,N,G);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return qa(this.toDERHex())}toDERHex(){return lr.hexFromSig(this)}toCompactRawBytes(){return qa(this.toCompactHex())}toCompactHex(){const v=s;return Yu(this.r,v)+Yu(this.s,v)}}const M={isValidPrivateKey(h){try{return m(h),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const h=nb(t.n);return WI(t.randomBytes(h),t.n)},precompute(h=8,v=f.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function C(h,v=!0){return f.fromPrivateKey(h).toRawBytes(v)}function U(h){if(typeof h=="bigint")return!1;if(h instanceof f)return!0;const A=wn("key",h).length,S=n.BYTES,P=S+1,F=2*S+1;if(!(t.allowedPrivateKeyLengths||s===P))return A===P||A===F}function D(h,v,A=!0){if(U(h)===!0)throw new Error("first arg must be private key");if(U(v)===!1)throw new Error("second arg must be public key");return f.fromHex(v).multiply(m(h)).toRawBytes(A)}const V=t.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const v=is(h),A=h.length*8-i;return A>0?v>>BigInt(A):v},K=t.bits2int_modN||function(h){return c(V(h))},X=Rc(i);function L(h){return Ws("num < 2^"+i,h,pr,X),Do(h,s)}function $(h,v,A=z){if(["recovered","canonical"].some(ae=>ae in A))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:P}=t;let{lowS:F,prehash:R,extraEntropy:d}=A;F==null&&(F=!0),h=wn("msgHash",h),_p(A),R&&(h=wn("prehashed msgHash",S(h)));const y=K(h),B=m(v),N=[L(B),L(y)];if(d!=null&&d!==!1){const ae=d===!0?P(n.BYTES):d;N.push(wn("extraEntropy",ae))}const G=Va(...N),J=y;function oe(ae){const Be=V(ae);if(!b(Be))return;const Pe=u(Be),Le=f.BASE.multiply(Be).toAffine(),lt=c(Le.x);if(lt===pr)return;const $e=c(Pe*c(J+lt*B));if($e===pr)return;let De=(Le.x===lt?0:2)|Number(Le.y&$t),Wr=$e;return F&&_($e)&&(Wr=E($e),De^=1),new k(lt,Wr,De)}return{seed:G,k2sig:oe}}const z={lowS:t.lowS,prehash:!1},j={lowS:t.lowS,prehash:!1};function x(h,v,A=z){const{seed:S,k2sig:P}=$(h,v,A),F=t;return FI(F.hash.outputLen,F.nByteLength,F.hmac)(S,P)}f.BASE._setWindowSize(8);function l(h,v,A,S=j){const P=h;v=wn("msgHash",v),A=wn("publicKey",A);const{lowS:F,prehash:R,format:d}=S;if(_p(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(d!==void 0&&d!=="compact"&&d!=="der")throw new Error("format must be compact or der");const y=typeof P=="string"||zo(P),B=!y&&!d&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!y&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let N,G;try{if(B&&(N=new k(P.r,P.s)),y){try{d!=="compact"&&(N=k.fromDER(P))}catch(De){if(!(De instanceof lr.Err))throw De}!N&&d!=="der"&&(N=k.fromCompact(P))}G=f.fromHex(A)}catch{return!1}if(!N||F&&N.hasHighS())return!1;R&&(v=t.hash(v));const{r:J,s:oe}=N,ae=K(v),Be=u(oe),Pe=c(ae*Be),Le=c(J*Be),lt=f.BASE.multiplyAndAddUnsafe(G,Pe,Le)?.toAffine();return lt?c(lt.x)===J:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:D,sign:x,verify:l,ProjectivePoint:f,Signature:k,utils:M}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iT(e){return{hash:e,hmac:(t,...n)=>Yf(e,t,Pn(...n)),randomBytes:Ya}}function oT(e,t){const n=r=>sT({...e,...iT(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ob=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ep=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aT=BigInt(0),cT=BigInt(1),yf=BigInt(2),Ap=(e,t)=>(e+t/yf)/t;function uT(e){const t=ob,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,m=bn(f,n,t)*f%t,p=bn(m,n,t)*f%t,b=bn(p,yf,t)*u%t,_=bn(b,s,t)*b%t,E=bn(_,i,t)*_%t,T=bn(E,a,t)*E%t,k=bn(T,c,t)*T%t,M=bn(k,a,t)*E%t,C=bn(M,n,t)*f%t,U=bn(C,o,t)*_%t,D=bn(U,r,t)*u%t,V=bn(D,yf,t);if(!gf.eql(gf.sqr(V),e))throw new Error("Cannot find square root");return V}const gf=Wd(ob,void 0,void 0,{sqrt:uT}),Cc=oT({a:aT,b:BigInt(7),Fp:gf,n:Ep,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ep,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-cT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Ap(i*e,t),c=Ap(-r*e,t);let u=on(e-a*n-c*s,t),f=on(-a*r-c*i,t);const m=u>o,p=f>o;if(m&&(u=t-u),p&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:u,k2neg:p,k2:f}}}},Of),lT=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Cc},Symbol.toStringTag,{value:"Module"}));function ab({r:e,s:t,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new Cc.Signature(ze(e),ze(t)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:un(o)}async function Pc(e,t){const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:i=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,o=(()=>{const a=t.signature;return $n(a)?a:typeof a=="object"&&"r"in a&&"s"in a?ab(a):Ot(a)})();try{return mI(o)?await fT(e,{...t,multicallAddress:i,signature:o}):await dT(e,{...t,verifierAddress:s,signature:o})}catch(a){try{if(No(Vs(n),await Sg({hash:r,signature:o})))return!0}catch{}if(a instanceof xs)return!1;throw a}}async function fT(e,t){const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=t,{authorization:a,data:c,signature:u,to:f}=pI(t.signature);if(await of(e,{address:n,blockNumber:r,blockTag:s})===Rn(["0xef0100",a.address]))return await hT(e,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const p={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:ne(a.r,{size:32}),s:ne(a.s,{size:32}),yParity:a.yParity};if(!await a3({address:n,authorization:p}))throw new xs;const _=await pe(e,zn,"readContract")({...o?{address:o}:{code:Td},authorizationList:[p],abi:za,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:f??n,callData:c}]:[],{allowFailure:!0,target:n,callData:rn({abi:r1,functionName:"isValidSignature",args:[i,u]})}]]});if(_[_.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new xs}async function dT(e,t){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=t,u=await(async()=>!r&&!s||MI(o)?o:OI({data:s,signature:o,to:r}))(),f=a?{to:a,data:rn({abi:ip,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:wc({abi:ip,args:[n,i,u],bytecode:n8}),...c},{data:m}=await pe(e,vc,"call")(f).catch(p=>{throw p instanceof xg?new xs:p});if(eA(m??"0x0"))return!0;throw new xs}async function hT(e,t){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=t;if((await pe(e,zn,"readContract")({address:n,abi:r1,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof _g?new xs:c})).startsWith("0x1626ba7e"))return!0;throw new xs}class xs extends Error{}async function pT(e,{address:t,message:n,factory:r,factoryData:s,signature:i,...o}){const a=Ld(n);return Pc(e,{address:t,factory:r,factoryData:s,hash:a,signature:i,...o})}async function mT(e,t){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:u,...f}=t,m=T1({message:o,primaryType:a,types:c,domain:u});return Pc(e,{address:n,factory:r,factoryData:s,hash:m,signature:i,...f})}function cb(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=e.pollingInterval}){const a=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const m=Mt(["watchBlockNumber",e.uid,t,n,o]);return Ar(m,{onBlockNumber:r,onError:s},p=>Ii(async()=>{try{const b=await pe(e,Lo,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(b===c)return;if(b-c>1&&n)for(let _=c+1n;_<b;_++)p.onBlockNumber(_,c),c=_}(c===void 0||b>c)&&(p.onBlockNumber(b,c),c=b)}catch(b){p.onError?.(b)}},{emitOnBegin:t,interval:o}))})():(()=>{const m=Mt(["watchBlockNumber",e.uid,t,n]);return Ar(m,{onBlockNumber:r,onError:s},p=>{let b=!0,_=()=>b=!1;return(async()=>{try{const E=(()=>{if(e.transport.type==="fallback"){const k=e.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return k?k.value:e.transport}return e.transport})(),{unsubscribe:T}=await E.subscribe({params:["newHeads"],onData(k){if(!b)return;const M=ze(k.result?.number);p.onBlockNumber(M,c),c=M},onError(k){p.onError?.(k)}});_=T,b||_()}catch(E){s?.(E)}})(),()=>_()})})()}async function ub(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:D})=>~~(1<<D)*200,timeout:c=18e4}=t,u=Mt(["waitForTransactionReceipt",e.uid,s]),f=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let m,p,b,_=!1,E,T;const{promise:k,resolve:M,reject:C}=Bd(),U=c?setTimeout(()=>{T?.(),E?.(),C(new KA({hash:s}))},c):void 0;return E=Ar(u,{onReplaced:i,resolve:M,reject:C},async D=>{if(b=await pe(e,fa,"getTransactionReceipt")({hash:s}).catch(()=>{}),b&&r<=1){clearTimeout(U),D.resolve(b),E?.();return}T=pe(e,cb,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(V){const K=L=>{clearTimeout(U),T?.(),L(),E?.()};let X=V;if(!_)try{if(b){if(r>1&&(!b.blockNumber||X-b.blockNumber+1n<r))return;K(()=>D.resolve(b));return}if(n&&!m&&(_=!0,await Da(async()=>{m=await pe(e,Vd,"getTransaction")({hash:s}),m.blockNumber&&(X=m.blockNumber)},{delay:a,retryCount:o}),_=!1),b=await pe(e,fa,"getTransactionReceipt")({hash:s}),r>1&&(!b.blockNumber||X-b.blockNumber+1n<r))return;K(()=>D.resolve(b))}catch(L){if(L instanceof bg||L instanceof wg){if(!m){_=!1;return}try{p=m,_=!0;const $=await Da(()=>pe(e,Gn,"getBlock")({blockNumber:X,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:x})=>x instanceof Rg});_=!1;const z=$.transactions.find(({from:x,nonce:l})=>x===p.from&&l===p.nonce);if(!z||(b=await pe(e,fa,"getTransactionReceipt")({hash:z.hash}),r>1&&(!b.blockNumber||X-b.blockNumber+1n<r)))return;let j="replaced";z.to===p.to&&z.value===p.value&&z.input===p.input?j="repriced":z.from===z.to&&z.value===0n&&(j="cancelled"),K(()=>{D.onReplaced?.({reason:j,replacedTransaction:p,transaction:z,transactionReceipt:b}),D.resolve(b)})}catch($){K(()=>D.reject($))}}else K(()=>D.reject(L))}}})}),k}function yT(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=e.pollingInterval}){const u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),f=o??!1;let m;return u?(()=>{const _=Mt(["watchBlocks",e.uid,t,n,r,f,c]);return Ar(_,{onBlock:s,onError:i},E=>Ii(async()=>{try{const T=await pe(e,Gn,"getBlock")({blockTag:t,includeTransactions:f});if(T.number!==null&&m?.number!=null){if(T.number===m.number)return;if(T.number-m.number>1&&n)for(let k=m?.number+1n;k<T.number;k++){const M=await pe(e,Gn,"getBlock")({blockNumber:k,includeTransactions:f});E.onBlock(M,m),m=M}}(m?.number==null||t==="pending"&&T?.number==null||T.number!==null&&T.number>m.number)&&(E.onBlock(T,m),m=T)}catch(T){E.onError?.(T)}},{emitOnBegin:r,interval:c}))})():(()=>{let _=!0,E=!0,T=()=>_=!1;return(async()=>{try{r&&pe(e,Gn,"getBlock")({blockTag:t,includeTransactions:f}).then(C=>{_&&E&&(s(C,void 0),E=!1)}).catch(i);const k=(()=>{if(e.transport.type==="fallback"){const C=e.transport.transports.find(U=>U.config.type==="webSocket"||U.config.type==="ipc");return C?C.value:e.transport}return e.transport})(),{unsubscribe:M}=await k.subscribe({params:["newHeads"],async onData(C){if(!_)return;const U=await pe(e,Gn,"getBlock")({blockNumber:C.result?.number,includeTransactions:f}).catch(()=>{});_&&(s(U,m),E=!1,m=U)},onError(C){i?.(C)}});T=M,_||T()}catch(k){i?.(k)}})(),()=>T()})()}function gT(e,{address:t,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:u,pollingInterval:f=e.pollingInterval,strict:m}){const p=typeof u<"u"?u:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),b=m??!1;return p?(()=>{const T=Mt(["watchEvent",t,n,r,e.uid,s,f,o]);return Ar(T,{onLogs:c,onError:a},k=>{let M;o!==void 0&&(M=o-1n);let C,U=!1;const D=Ii(async()=>{if(!U){try{C=await pe(e,E1,"createEventFilter")({address:t,args:n,event:s,events:i,strict:b,fromBlock:o})}catch{}U=!0;return}try{let V;if(C)V=await pe(e,xc,"getFilterChanges")({filter:C});else{const K=await pe(e,Lo,"getBlockNumber")({});M&&M!==K?V=await pe(e,Sd,"getLogs")({address:t,args:n,event:s,events:i,fromBlock:M+1n,toBlock:K}):V=[],M=K}if(V.length===0)return;if(r)k.onLogs(V);else for(const K of V)k.onLogs([K])}catch(V){C&&V instanceof ys&&(U=!1),k.onError?.(V)}},{emitOnBegin:!0,interval:f});return async()=>{C&&await pe(e,_c,"uninstallFilter")({filter:C}),D()}})})():(()=>{let T=!0,k=()=>T=!1;return(async()=>{try{const M=(()=>{if(e.transport.type==="fallback"){const V=e.transport.transports.find(K=>K.config.type==="webSocket"||K.config.type==="ipc");return V?V.value:e.transport}return e.transport})(),C=i??(s?[s]:void 0);let U=[];C&&(U=[C.flatMap(K=>Bo({abi:[K],eventName:K.name,args:n}))],s&&(U=U[0]));const{unsubscribe:D}=await M.subscribe({params:["logs",{address:t,topics:U}],onData(V){if(!T)return;const K=V.result;try{const{eventName:X,args:L}=Ed({abi:C??[],data:K.data,topics:K.topics,strict:b}),$=Jn(K,{args:L,eventName:X});c([$])}catch(X){let L,$;if(X instanceof Hi||X instanceof uc){if(m)return;L=X.abiItem.name,$=X.abiItem.inputs?.some(j=>!("name"in j&&j.name))}const z=Jn(K,{args:$?[]:{},eventName:L});c([z])}},onError(V){a?.(V)}});k=D,T||k()}catch(M){a?.(M)}})(),()=>k()})()}function bT(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=Mt(["watchPendingTransactions",e.uid,t,i]);return Ar(u,{onTransactions:r,onError:n},f=>{let m;const p=Ii(async()=>{try{if(!m)try{m=await pe(e,A1,"createPendingTransactionFilter")({});return}catch(_){throw p(),_}const b=await pe(e,xc,"getFilterChanges")({filter:m});if(b.length===0)return;if(t)f.onTransactions(b);else for(const _ of b)f.onTransactions([_])}catch(b){f.onError?.(b)}},{emitOnBegin:!0,interval:i});return async()=>{m&&await pe(e,_c,"uninstallFilter")({filter:m}),p()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:m}=await e.transport.subscribe({params:["newPendingTransactions"],onData(p){if(!u)return;const b=p.result;r([b])},onError(p){n?.(p)}});f=m,u||f()}catch(m){n?.(m)}})(),()=>f()})()}function wT(e){const{scheme:t,statement:n,...r}=e.match(vT)?.groups??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=e.match(xT)?.groups??{},f=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const vT=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,xT=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function _T(e){const{address:t,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ye(r.address,{strict:!1})||t&&!No(r.address,t))return!1}catch{return!1}return!0}async function ET(e,t){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=t,f=wT(s);if(!f.address||!_T({address:n,domain:r,message:f,nonce:i,scheme:o,time:c}))return!1;const p=Ld(s);return Pc(e,{address:f.address,hash:p,signature:a,...u})}async function Zd(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,ne(r)]:[t]},{retryCount:0}),o=(e.chain?.formatters?.transactionReceipt?.format||Rd)(s);if(o.status==="reverted"&&n)throw new vg({receipt:o});return o}function Ha(e){return{call:t=>vc(e,t),createAccessList:t=>_1(e,t),createBlockFilter:()=>D8(e),createContractEventFilter:t=>hg(e,t),createEventFilter:t=>E1(e,t),createPendingTransactionFilter:()=>A1(e),estimateContractGas:t=>_S(e,t),estimateGas:t=>_d(e,t),getBalance:t=>j8(e,t),getBlobBaseFee:()=>q8(e),getBlock:t=>Gn(e,t),getBlockNumber:t=>Lo(e,t),getBlockTransactionCount:t=>V8(e,t),getBytecode:t=>of(e,t),getChainId:()=>Rr(e),getCode:t=>of(e,t),getContractEvents:t=>jg(e,t),getEip712Domain:t=>G8(e,t),getEnsAddress:t=>S8(e,t),getEnsAvatar:t=>U8(e,t),getEnsName:t=>F8(e,t),getEnsResolver:t=>z8(e,t),getEnsText:t=>x1(e,t),getFeeHistory:t=>Z8(e,t),estimateFeesPerGas:t=>yS(e,t),getFilterChanges:t=>xc(e,t),getFilterLogs:t=>Y8(e,t),getGasPrice:()=>yd(e),getLogs:t=>Sd(e,t),getProof:t=>wI(e,t),estimateMaxPriorityFeePerGas:t=>mS(e,t),getStorageAt:t=>vI(e,t),getTransaction:t=>Vd(e,t),getTransactionConfirmations:t=>xI(e,t),getTransactionCount:t=>gd(e,t),getTransactionReceipt:t=>fa(e,t),multicall:t=>_I(e,t),prepareTransactionRequest:t=>Ai(e,t),readContract:t=>zn(e,t),sendRawTransaction:t=>Ac(e,t),sendRawTransactionSync:t=>Zd(e,t),simulate:t=>lf(e,t),simulateBlocks:t=>lf(e,t),simulateCalls:t=>PI(e,t),simulateContract:t=>u8(e,t),verifyHash:t=>Pc(e,t),verifyMessage:t=>pT(e,t),verifySiweMessage:t=>ET(e,t),verifyTypedData:t=>mT(e,t),uninstallFilter:t=>_c(e,t),waitForTransactionReceipt:t=>ub(e,t),watchBlocks:t=>yT(e,t),watchBlockNumber:t=>cb(e,t),watchContractEvent:t=>y8(e,t),watchEvent:t=>gT(e,t),watchPendingTransactions:t=>bT(e,t)}}function AT(e){const{key:t="public",name:n="Public Client"}=e;return g1({...e,key:t,name:n,type:"publicClient"}).extend(Ha)}async function ST(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:ne(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function IT(e,t){const{abi:n,args:r,bytecode:s,...i}=t,o=wc({abi:n,args:r,bytecode:s});return Uo(e,{...i,...i.authorizationList?{to:null}:{},data:o})}async function TT(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>Io(n))}async function BT(e,t={}){const{account:n=e.account,chainId:r}=t,s=n?Xe(n):void 0,i=r?[s?.address,[ne(r)]]:[s?.address],o=await e.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,u]of Object.entries(o)){a[Number(c)]={};for(let[f,m]of Object.entries(u))f==="addSubAccount"&&(f="unstable_addSubAccount"),a[Number(c)][f]=m}return typeof r=="number"?a[r]:a}async function RT(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function lb(e,t){const{account:n=e.account,chainId:r,nonce:s}=t;if(!n)throw new tr({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Xe(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:Xe(t.executor)})(),a={address:t.contractAddress??t.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=e.chain?.id??await pe(e,Rr,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await pe(e,gd,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o?.address&&No(o.address,i.address))&&(a.nonce+=1)),a}async function kT(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Vs(n))}async function CT(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function PT(e,t){const{chain:n=e.chain}=t,r=t.timeout??Math.max((n?.blockTime??0)*3,5e3),s=await h1(e,t);return await m1(e,{...t,id:s.id,timeout:r})}const Ju=new So(128);async function fb(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,pollingInterval:_,throwOnReceiptRevert:E,type:T,value:k,...M}=t,C=t.timeout??Math.max((r?.blockTime??0)*3,5e3);if(typeof n>"u")throw new tr({docsPath:"/docs/actions/wallet/sendTransactionSync"});const U=n?Xe(n):null;try{Br(t);const D=await(async()=>{if(t.to)return t.to;if(t.to!==null&&i&&i.length>0)return await hc({authorization:i[0]}).catch(()=>{throw new ee("`to` is required. Could not infer from `authorizationList`.")})})();if(U?.type==="json-rpc"||U===null){let V;r!==null&&(V=await pe(e,Rr,"getChainId")({}),$o({currentChainId:V,chain:r}));const K=e.chain?.formatters?.transactionRequest?.format,L=(K||Kr)({...Po(M,{format:K}),accessList:s,account:U,authorizationList:i,blobs:o,chainId:V,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,to:D,type:T,value:k},"sendTransaction"),$=Ju.get(e.uid),z=$?"wallet_sendTransaction":"eth_sendTransaction",j=await(async()=>{try{return await e.request({method:z,params:[L]},{retryCount:0})}catch(l){if($===!1)throw l;const h=l;if(h.name==="InvalidInputRpcError"||h.name==="InvalidParamsRpcError"||h.name==="MethodNotFoundRpcError"||h.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(v=>(Ju.set(e.uid,!0),v)).catch(v=>{const A=v;throw A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError"?(Ju.set(e.uid,!1),h):A});throw h}})(),x=await pe(e,ub,"waitForTransactionReceipt")({checkReplacement:!1,hash:j,pollingInterval:_,timeout:C});if(E&&x.status==="reverted")throw new vg({receipt:x});return x}if(U?.type==="local"){const V=await pe(e,Ai,"prepareTransactionRequest")({account:U,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:b,nonceManager:U.nonceManager,parameters:[...xd,"sidecars"],type:T,value:k,...M,to:D}),K=r?.serializers?.transaction,X=await U.signTransaction(V,{serializer:K});return await pe(e,Zd,"sendRawTransactionSync")({serializedTransaction:X,throwOnReceiptRevert:E})}throw U?.type==="smart"?new ss({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ss({docsPath:"/docs/actions/wallet/sendTransactionSync",type:U?.type})}catch(D){throw D instanceof ss?D:Ec(D,{...t,account:U,chain:t.chain||void 0})}}async function NT(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function OT(e,t){const{account:n=e.account}=t;if(!n)throw new tr({docsPath:"/docs/eip7702/signAuthorization"});const r=Xe(n);if(!r.signAuthorization)throw new ss({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await lb(e,t);return r.signAuthorization(s)}async function MT(e,{account:t=e.account,message:n}){if(!t)throw new tr({docsPath:"/docs/actions/wallet/signMessage"});const r=Xe(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ci(n):n.raw instanceof Uint8Array?Oe(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function db(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new tr({docsPath:"/docs/actions/wallet/signTransaction"});const i=Xe(n);Br({account:i,...t});const o=await pe(e,Rr,"getChainId")({});r!==null&&$o({currentChainId:o,chain:r});const c=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||Kr;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c({...s,account:i},"signTransaction"),chainId:ne(o),from:i.address}]},{retryCount:0})}async function hb(e,t){const{account:n=e.account,domain:r,message:s,primaryType:i}=t;if(!n)throw new tr({docsPath:"/docs/actions/wallet/signTypedData"});const o=Xe(n),a={EIP712Domain:I1({domain:r}),...t.types};if(S1({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=w3({domain:r,message:s,primaryType:i,types:a});return e.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function LT(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:ne(t)}]},{retryCount:0})}async function $T(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function UT(e,t){return di.internal(e,fb,"sendTransactionSync",t)}function FT(e){return{addChain:t=>ST(e,t),deployContract:t=>IT(e,t),getAddresses:()=>TT(e),getCallsStatus:t=>p1(e,t),getCapabilities:t=>BT(e,t),getChainId:()=>Rr(e),getPermissions:()=>RT(e),prepareAuthorization:t=>lb(e,t),prepareTransactionRequest:t=>Ai(e,t),requestAddresses:()=>kT(e),requestPermissions:t=>CT(e,t),sendCalls:t=>h1(e,t),sendCallsSync:t=>PT(e,t),sendRawTransaction:t=>Ac(e,t),sendRawTransactionSync:t=>Zd(e,t),sendTransaction:t=>Uo(e,t),sendTransactionSync:t=>fb(e,t),showCallsStatus:t=>NT(e,t),signAuthorization:t=>OT(e,t),signMessage:t=>MT(e,t),signTransaction:t=>db(e,t),signTypedData:t=>hb(e,t),switchChain:t=>LT(e,t),waitForCallsStatus:t=>m1(e,t),watchAsset:t=>$T(e,t),writeContract:t=>di(e,t),writeContractSync:t=>UT(e,t)}}function zT(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return g1({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(FT)}function DT({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=y1();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:u3(r,{methods:t,retryCount:s,retryDelay:i,uid:u}),value:c}}class jT extends ee{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function pb(e,t={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:f,raw:m}=t;return({chain:p,retryCount:b,timeout:_})=>{const{batchSize:E=1e3,wait:T=0}=typeof n=="object"?n:{},k=t.retryCount??b,M=_??t.timeout??1e4,C=p?.rpcUrls.default.http[0];if(!C)throw new jT;const U=h3(C,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:M});return DT({key:i,methods:o,name:a,async request({method:D,params:V}){const K={method:D,params:V},{schedule:X}=a1({id:C,wait:T,shouldSplitBatch(j){return j.length>E},fn:j=>U.request({body:j}),sort:(j,x)=>j.id-x.id}),L=async j=>n?X(j):[await U.request({body:j})],[{error:$,result:z}]=await L(K);if(m)return{error:$,result:z};if($)throw new dd({body:K,error:$,url:C});return z},retryCount:k,retryDelay:f,timeout:M,type:"http"},{fetchOptions:s,url:C})}}const Yd=50000n,Sp=fS*32n,mb={block:Pg({format(e){const t=e.transactions?.map(n=>{if(typeof n=="string")return n;const r=mb.transaction?.format(n);return r.typeHex==="0x71"?r.type="eip712":r.typeHex==="0xff"&&(r.type="priority"),r});return{l1BatchNumber:e.l1BatchNumber?ze(e.l1BatchNumber):null,l1BatchTimestamp:e.l1BatchTimestamp?ze(e.l1BatchTimestamp):null,transactions:t}}}),transaction:Cg({format(e){const t={};return e.type==="0x71"?t.type="eip712":e.type==="0xff"&&(t.type="priority"),{...t,l1BatchNumber:e.l1BatchNumber?ze(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?ze(e.l1BatchTxIndex):null}}}),transactionReceipt:l1({format(e){return{l1BatchNumber:e.l1BatchNumber?ze(e.l1BatchNumber):null,l1BatchTxIndex:e.l1BatchTxIndex?ze(e.l1BatchTxIndex):null,logs:e.logs.map(t=>({...Jn(t),l1BatchNumber:t.l1BatchNumber?ze(t.l1BatchNumber):null,transactionLogIndex:mn(t.transactionLogIndex),logType:t.logType})),l2ToL1Logs:e.l2ToL1Logs.map(t=>({blockNumber:ze(t.blockHash),blockHash:t.blockHash,l1BatchNumber:t.l1BatchNumber?ze(t.l1BatchNumber):null,transactionIndex:ze(t.transactionIndex),shardId:ze(t.shardId),isService:t.isService,sender:t.sender,key:t.key,value:t.value,transactionHash:t.transactionHash,logIndex:ze(t.logIndex)}))}}}),transactionRequest:cS({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(e){return e.gasPerPubdata||e.paymaster&&e.paymasterInput||e.factoryDeps||e.customSignature?{eip712Meta:{...e.gasPerPubdata?{gasPerPubdata:Oe(e.gasPerPubdata)}:{gasPerPubdata:Oe(Yd)},...e.paymaster&&e.paymasterInput?{paymasterParams:{paymaster:e.paymaster,paymasterInput:Array.from(un(e.paymasterInput))}}:{},...e.factoryDeps?{factoryDeps:e.factoryDeps.map(t=>Array.from(un(t)))}:{},...e.customSignature?{customSignature:Array.from(un(e.customSignature))}:{}},type:"0x71"}:{}}})};class yb extends ee{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join(`
`),{name:"InvalidEip712TransactionError"})}}function jo(e){return!!(e.type==="eip712"||"customSignature"in e&&e.customSignature||"paymaster"in e&&e.paymaster||"paymasterInput"in e&&e.paymasterInput||"gasPerPubdata"in e&&typeof e.gasPerPubdata=="bigint"||"factoryDeps"in e&&e.factoryDeps)}function gb(e){const{chainId:t,to:n,from:r,paymaster:s,paymasterInput:i}=e;if(!jo(e))throw new yb;if(!t||t<=0)throw new Mo({chainId:t});if(n&&!Ye(n))throw new Nt({address:n});if(r&&!Ye(r))throw new Nt({address:r});if(s&&!Ye(s))throw new Nt({address:s});if(s&&!i)throw new ee("`paymasterInput` must be provided when `paymaster` is defined");if(!s&&i)throw new ee("`paymaster` must be provided when `paymasterInput` is defined")}function qT(e,t){return jo(e)?HT(e):Md(e,t)}const VT={transaction:qT};function HT(e){const{chainId:t,gas:n,nonce:r,to:s,from:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:f,paymaster:m,paymasterInput:p,gasPerPubdata:b,data:_}=e;gb(e);const E=[r?Oe(r):"0x",c?Oe(c):"0x",a?Oe(a):"0x",n?Oe(n):"0x",s??"0x",o?Oe(o):"0x",_??"0x",Oe(t),Oe(""),Oe(""),Oe(t),i??"0x",Oe(b||Yd),f??[],u??"0x",m&&p?[m,p]:[]];return Rn(["0x71",Er(E)])}class GT extends ee{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class KT extends ee{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class WT extends ee{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function bf(e){const t=gr(e);if(t.length%32!==0)throw new WT({givenLength:t.length});if(t.length>Sp)throw new GT({givenLength:t.length,maxBytecodeSize:Sp});const n=Og(t),r=gr(n),s=t.length/32;if(s%2===0)throw new KT({givenLengthInWords:s});const i=gr(s),o=Is(i,{size:2}),a=new Uint8Array([1,0]);return r.set(a,0),r.set(o,2),r}const ZT=e=>{gb(e);const t=YT(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function YT(e){const{gas:t,nonce:n,to:r,from:s,value:i,maxFeePerGas:o,maxPriorityFeePerGas:a,factoryDeps:c,paymaster:u,paymasterInput:f,gasPerPubdata:m,data:p}=e;return{txType:113n,from:BigInt(s),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:m??Yd,maxFeePerGas:o??0n,maxPriorityFeePerGas:a??0n,paymaster:u?BigInt(u):0n,nonce:n?BigInt(n):0n,value:i??0n,data:p??"0x",factoryDeps:c?.map(b=>Oe(bf(b)))??[],paymasterInput:f||"0x"}}const bb={blockTime:1e3,formatters:mb,serializers:VT,custom:{getEip712Domain:ZT}},XT=sn({...bb,blockTime:200,id:2741,name:"Abstract",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.mainnet.abs.xyz"],webSocket:["wss://api.mainnet.abs.xyz/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.mainnet.abs.xyz"}},contracts:{multicall3:{address:"0xAa4De41dba0Ca5dCBb288b7cC6b708F3aaC759E7",blockCreated:5288},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:5263}}}),JT=sn({...bb,blockTime:200,id:11124,name:"Abstract Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.testnet.abs.xyz"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.testnet.abs.xyz"}},testnet:!0,contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963",blockCreated:358349},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:431682}}}),QT={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},eB={block:Pg({format(e){return{transactions:e.transactions?.map(n=>{if(typeof n=="string")return n;const r=gc(n);return r.typeHex==="0x7e"&&(r.isSystemTx=n.isSystemTx,r.mint=n.mint?ze(n.mint):void 0,r.sourceHash=n.sourceHash,r.type="deposit"),r}),stateRoot:e.stateRoot}}}),transaction:Cg({format(e){const t={};return e.type==="0x7e"&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?ze(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:l1({format(e){return{l1GasPrice:e.l1GasPrice?ze(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?ze(e.l1GasUsed):null,l1Fee:e.l1Fee?ze(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};function tB(e,t){return sB(e)?rB(e):Md(e,t)}const nB={transaction:tB};function rB(e){iB(e);const{sourceHash:t,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=e,u=[t,r,a??"0x",o?Oe(o):"0x",c?Oe(c):"0x",s?Oe(s):"0x",i?"0x1":"0x",n??"0x"];return Rn(["0x7e",Er(u)])}function sB(e){return e.type==="deposit"||typeof e.sourceHash<"u"}function iB(e){const{from:t,to:n}=e;if(t&&!Ye(t))throw new Nt({address:t});if(n&&!Ye(n))throw new Nt({address:n})}const Ga={blockTime:2e3,contracts:QT,formatters:eB,serializers:nB},oB=sn({id:43114,name:"Avalanche",blockTime:1700,nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),aB=sn({id:43113,name:"Avalanche Fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://testnet.snowtrace.io",apiUrl:"https://api-testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0}),Pi=1,wb=sn({...Ga,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...Ga.contracts,disputeGameFactory:{[Pi]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Pi]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Pi]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Pi]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Pi});({...wb});const Ni=11155111,vb=sn({...Ga,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...Ga.contracts,disputeGameFactory:{[Ni]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Ni]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Ni]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Ni]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Ni});({...vb});const cB=sn({id:4689,name:"IoTeX",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.mainnet.iotex.io"],webSocket:["wss://babel-api.mainnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://iotexscan.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:22163670}}}),uB=sn({id:4690,name:"IoTeX Testnet",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.testnet.iotex.io"],webSocket:["wss://babel-api.testnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://testnet.iotexscan.io"}},contracts:{multicall3:{address:"0xb5cecD6894c6f473Ec726A176f1512399A2e355d",blockCreated:24347592}},testnet:!0}),lB=sn({id:3338,name:"Peaq",nativeCurrency:{decimals:18,name:"peaq",symbol:"PEAQ"},rpcUrls:{default:{http:["https://quicknode1.peaq.xyz","https://quicknode2.peaq.xyz","https://quicknode3.peaq.xyz"],webSocket:["wss://quicknode1.peaq.xyz","wss://quicknode2.peaq.xyz","wss://quicknode3.peaq.xyz"]}},blockExplorers:{default:{name:"Subscan",url:"https://peaq.subscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3566354}}}),fB=sn({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),dB=sn({id:80002,name:"Polygon Amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://amoy.polygonscan.com",apiUrl:"https://api-amoy.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3127388}},testnet:!0}),hB=sn({id:1329,name:"Sei Network",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc.sei-apis.com/"],webSocket:["wss://evm-ws.sei-apis.com/"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com",apiUrl:"https://seitrace.com/pacific-1/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11"}}}),pB=sn({id:1328,name:"Sei Testnet",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc-testnet.sei-apis.com"],webSocket:["wss://evm-ws-testnet.sei-apis.com"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:98697651}},testnet:!0});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mB(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function xb(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function wf(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function _b(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function vf(e){if(!Array.isArray(e))throw new Error("array expected")}function Eb(e,t){if(!xb(!0,t))throw new Error(`${e}: array of strings expected`)}function yB(e,t){if(!xb(!1,t))throw new Error(`${e}: array of numbers expected`)}function gB(...e){const t=i=>i,n=(i,o)=>a=>i(o(a)),r=e.map(i=>i.encode).reduceRight(n,t),s=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:s}}function bB(e){const t=typeof e=="string"?e.split(""):e,n=t.length;Eb("alphabet",t);const r=new Map(t.map((s,i)=>[s,i]));return{encode:s=>(vf(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:s=>(vf(s),s.map(i=>{wf("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return o}))}}function wB(e=""){return wf("join",e),{encode:t=>(Eb("join.decode",t),t.join(e)),decode:t=>(wf("join.decode",t),t.split(e))}}function Ip(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(vf(e),!e.length)return[];let r=0;const s=[],i=Array.from(e,a=>{if(_b(a),a<0||a>=t)throw new Error(`invalid integer: ${a}`);return a}),o=i.length;for(;;){let a=0,c=!0;for(let u=r;u<o;u++){const f=i[u],m=t*a,p=m+f;if(!Number.isSafeInteger(p)||m/t!==a||p-f!==m)throw new Error("convertRadix: carry overflow");const b=p/n;a=p%n;const _=Math.floor(b);if(i[u]=_,!Number.isSafeInteger(_)||_*n+a!==p)throw new Error("convertRadix: carry overflow");if(c)_?c=!1:r=u;else continue}if(s.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)s.push(0);return s.reverse()}function vB(e){_b(e);const t=2**8;return{encode:n=>{if(!mB(n))throw new Error("radix.encode input should be Uint8Array");return Ip(Array.from(n),t,e)},decode:n=>(yB("radix.decode",n),Uint8Array.from(Ip(n,e,t)))}}const xB=e=>gB(vB(58),bB(e),wB("")),_B=xB("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function EB(e){if(typeof e=="string"){if(!Ye(e,{strict:!1}))throw new Nt({address:e});return{address:e,type:"json-rpc"}}if(!Ye(e.address,{strict:!1}))throw new Nt({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}let Qu=!1;async function qo({hash:e,privateKey:t,to:n="object"}){const{r,s,recovery:i}=Cc.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:$n(Qu,{strict:!1})?un(Qu):Qu}),o={r:ne(r,{size:32}),s:ne(s,{size:32}),v:i?28n:27n,yParity:i};return n==="bytes"||n==="hex"?ab({...o,to:n}):o}async function AB(e){const{chainId:t,nonce:n,privateKey:r,to:s="object"}=e,i=e.contractAddress??e.address,o=await qo({hash:Bg({address:i,chainId:t,nonce:n}),privateKey:r,to:s});return s==="object"?{address:i,chainId:t,nonce:n,...o}:o}async function SB({message:e,privateKey:t}){return await qo({hash:Ld(e),privateKey:t,to:"hex"})}async function IB(e){const{privateKey:t,transaction:n,serializer:r=Md}=e,s=n.type==="eip4844"?{...n,sidecars:!1}:n,i=await qo({hash:Ut(await r(s)),privateKey:t});return await r(n,i)}async function TB(e){const{privateKey:t,...n}=e;return await qo({hash:T1(n),privateKey:t,to:"hex"})}function BB(e,t={}){const{nonceManager:n}=t,r=Oe(Cc.getPublicKey(e.slice(2),!1)),s=Eg(r);return{...EB({address:s,nonceManager:n,async sign({hash:o}){return qo({hash:o,privateKey:e,to:"hex"})},async signAuthorization(o){return AB({...o,privateKey:e})},async signMessage({message:o}){return SB({message:o,privateKey:e})},async signTransaction(o,{serializer:a}={}){return IB({privateKey:e,transaction:o,serializer:a})},async signTypedData(o){return TB({...o,privateKey:e})}}),publicKey:r,source:"privateKey"}}const RB="0x0000000000000000000000000000000000008006",kB="0x0000000000000000000000000000000000010000",Tp=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],name:"AccountNonceOrderingUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"aaVersion",type:"uint8"}],name:"AccountVersionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployerAddress",type:"address"},{indexed:!0,internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"contractAddress",type:"address"}],name:"ContractDeployed",type:"event"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"create2Account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"createAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"extendedAccountVersion",outputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_keccak256BytecodeHash",type:"bytes32"}],name:"forceDeployKeccak256",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment",name:"_deployment",type:"tuple"},{internalType:"address",name:"_sender",type:"address"}],name:"forceDeployOnAddress",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment[]",name:"_deployments",type:"tuple[]"}],name:"forceDeployOnAddresses",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getAccountInfo",outputs:[{components:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"supportedAAVersion",type:"uint8"},{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],internalType:"struct IContractDeployer.AccountInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"uint256",name:"_senderNonce",type:"uint256"}],name:"getNewAddressCreate",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"getNewAddressCreate2",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_version",type:"uint8"}],name:"updateAccountVersion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"_nonceOrdering",type:"uint8"}],name:"updateNonceOrdering",outputs:[],stateMutability:"nonpayable",type:"function"}],Bp=1,el="/docs/contract/encodeDeployData";function CB(e){const{abi:t,args:n,bytecode:r,deploymentType:s,salt:i}=e;if(!n||n.length===0){const{functionName:f,argsContractDeployer:m}=Rp(s,i??lp,Oe(bf(r)),"0x");return rn({abi:Tp,functionName:f,args:m})}const o=t.find(f=>"type"in f&&f.type==="constructor");if(!o)throw new Xy({docsPath:el});if(!("inputs"in o))throw new Fa({docsPath:el});if(!o.inputs||o.inputs.length===0)throw new Fa({docsPath:el});const a=Gr(o.inputs,n),{functionName:c,argsContractDeployer:u}=Rp(s,i??lp,Oe(bf(r)),a);return rn({abi:Tp,functionName:c,args:u})}function Rp(e,t,n,r){const s=[t,n,r];return{create:{functionName:"create",argsContractDeployer:s},create2:{functionName:"create2",argsContractDeployer:s},createAccount:{functionName:"createAccount",argsContractDeployer:[...s,Bp]},create2Account:{functionName:"create2Account",argsContractDeployer:[...s,Bp]}}[e||"create"]}function Ab(e){if(!jo(e))throw new yb;Br(e)}async function PB(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t,i=n?Xe(n):e.account;if(!i)throw new tr({docsPath:"/docs/actions/wallet/signTransaction"});if(Ab({account:i,chain:r,...t}),!r?.custom?.getEip712Domain)throw new ee("`getEip712Domain` not found on chain.");if(!r?.serializers?.transaction)throw new ee("transaction serializer not found on chain.");const o=await pe(e,Rr,"getChainId")({});r!==null&&$o({currentChainId:o,chain:r});const a=r?.custom.getEip712Domain({...s,chainId:o,from:i.address,type:"eip712"}),c=await hb(e,{...a,account:i});return r?.serializers?.transaction({chainId:o,...s,customSignature:c,type:"eip712"},{r:"0x0",s:"0x0",v:0n})}async function Sb(e,t){return jo(t)?PB(e,t):await db(e,t)}async function Ib(e,t){const{account:n=e.account,chain:r=e.chain}=t,s=n?Xe(n):e.account;if(!s)throw new tr({docsPath:"/docs/actions/wallet/sendTransaction"});try{Ab(t);const i=await Ai(e,{...t,nonceManager:s.nonceManager,parameters:["gas","nonce","fees"]});let o;r!==null&&(o=await pe(e,Rr,"getChainId")({}),$o({currentChainId:o,chain:r}));const a=await Sb(e,{...i,chainId:o});return await pe(e,Ac,"sendRawTransaction")({serializedTransaction:a})}catch(i){throw Ec(i,{...t,account:s,chain:r})}}function NB(e,t){const{abi:n,args:r,bytecode:s,deploymentType:i,salt:o,...a}=t,c=CB({abi:n,args:r,bytecode:s,deploymentType:i,salt:o});return a.factoryDeps=a.factoryDeps||[],a.factoryDeps.includes(s)||a.factoryDeps.push(s),Ib(e,{...a,data:c,to:i==="create2"||i==="create2Account"?kB:RB})}async function kp(e,t){return jo(t)?Ib(e,t):Uo(e,t)}function OB(){return e=>({sendTransaction:t=>kp(e,t),signTransaction:t=>Sb(e,t),deployContract:t=>NB(e,t),writeContract:t=>di(Object.assign(e,{sendTransaction:n=>kp(e,n)}),t)})}function MB(e,t,n=t){if(!t.match(new RegExp(`^[${e}]*$`)))throw new de(_a,{alphabet:e,base:e.length,value:n})}var LB=e=>qt({getSizeFromValue:t=>{const[n,r]=Cp(t,e[0]);if(!r)return t.length;const s=Pp(r,e);return n.length+Math.ceil(s.toString(16).length/2)},write(t,n,r){if(MB(e,t),t==="")return r;const[s,i]=Cp(t,e[0]);if(!i)return n.set(new Uint8Array(s.length).fill(0),r),r+s.length;let o=Pp(i,e);const a=[];for(;o>0n;)a.unshift(Number(o%256n)),o/=256n;const c=[...Array(s.length).fill(0),...a];return n.set(c,r),r+c.length}}),$B=e=>ct({read(t,n){const r=n===0?t:t.slice(n);if(r.length===0)return["",0];let s=r.findIndex(c=>c!==0);s=s===-1?r.length:s;const i=e[0].repeat(s);if(s===r.length)return[i,t.length];const o=r.slice(s).reduce((c,u)=>c*256n+BigInt(u),0n),a=UB(o,e);return[i+a,t.length]}});function Cp(e,t){const[n,r]=e.split(new RegExp(`((?!${t}).*)`));return[n,r]}function Pp(e,t){const n=BigInt(t.length);let r=0n;for(const s of e)r*=n,r+=BigInt(t.indexOf(s));return r}function UB(e,t){const n=BigInt(t.length),r=[];for(;e>0n;)r.unshift(t[Number(e%n)]),e/=n;return r.join("")}var Tb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",FB=()=>LB(Tb),zB=()=>$B(Tb),Np="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bb=()=>qt({getSizeFromValue:e=>{try{return atob(e).length}catch{throw new de(_a,{alphabet:Np,base:64,value:e})}},write(e,t,n){try{const r=atob(e).split("").map(s=>s.charCodeAt(0));return t.set(r,n),r.length+n}catch{throw new de(_a,{alphabet:Np,base:64,value:e})}}}),DB=()=>ct({read(e,t=0){const n=e.slice(t);return[btoa(String.fromCharCode(...n)),e.length]}}),jB=e=>e.replace(/\u0000/g,""),qB=globalThis.TextDecoder,Oi=()=>{let e;return ct({read(t,n){const r=(e||(e=new qB)).decode(t.slice(n));return[jB(r),t.length]}})};function VB(e,t){try{return"exists"in e&&!e.exists?e:Object.freeze({...e,data:t.decode(e.data)})}catch{throw new de(ov,{address:e.address})}}function HB(e,t){if(!t)return Object.freeze({address:e,exists:!1});const n=Bb().encode(t.data[0]);return Object.freeze({...GB(t),address:e,data:n,exists:!0})}function GB(e){return Object.freeze({executable:e.executable,lamports:e.lamports,programAddress:e.owner,space:e.space})}async function Rb(e,t,n={}){const{abortSignal:r,...s}=n,i=await e.getAccountInfo(t,{...s,encoding:"base64"}).send({abortSignal:r});return HB(t,i.value)}function KB(e){if(!e.exists)throw new de(iv,{address:e.address})}function WB(){if(typeof globalThis.crypto>"u"||typeof globalThis.crypto.getRandomValues!="function")throw new de(hv)}function Nc(){if(!globalThis.isSecureContext)throw new de(av)}function ZB(){if(Nc(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.digest!="function")throw new de(cv)}function kb(){if(Nc(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.exportKey!="function")throw new de(uv)}function YB(){if(Nc(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.sign!="function")throw new de(lv)}function XB(){if(Nc(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.verify!="function")throw new de(fv)}var tl,nl;function Xd(){return tl||(tl=FB()),tl}function JB(){return nl||(nl=zB()),nl}function QB(e){if(e.length<32||e.length>44)return!1;const t=Xd();try{return t.encode(e).byteLength===32}catch{return!1}}function eR(e){if(e.length<32||e.length>44)throw new de(ev,{actualLength:e.length});const r=Xd().encode(e).byteLength;if(r!==32)throw new de(Q6,{actualLength:r})}function tR(e){return eR(e),e}function Zs(){return Hr(qf(Xd(),32),e=>tR(e))}function Ne(){return wi(JB(),32)}function nR(){return Vm(Zs(),Ne())}function Jd(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare}var rR=37095705934669439343138083508754565189542113879843219016388785533085940283555n,Yt=57896044618658097711785492504343953926634992332820282019728792003956564819949n,Op=19681161376707505956807079304988542015446066515923890162744021073123829784752n;function vn(e){const t=e%Yt;return t>=0n?t:Yt+t}function Vn(e,t){let n=e;for(;t-- >0n;)n*=n,n%=Yt;return n}function sR(e){const n=e*e%Yt*e%Yt,r=Vn(n,2n)*n%Yt,s=Vn(r,1n)*e%Yt,i=Vn(s,5n)*s%Yt,o=Vn(i,10n)*i%Yt,a=Vn(o,20n)*o%Yt,c=Vn(a,40n)*a%Yt,u=Vn(c,80n)*c%Yt,f=Vn(u,80n)*c%Yt,m=Vn(f,10n)*i%Yt;return Vn(m,2n)*e%Yt}function iR(e,t){const n=vn(t*t*t),r=vn(n*n*t),s=sR(e*r);let i=vn(e*n*s);const o=vn(t*i*i),a=i,c=vn(i*Op),u=o===e,f=o===vn(-e),m=o===vn(-e*Op);return u&&(i=a),(f||m)&&(i=c),(vn(i)&1n)===1n&&(i=vn(-i)),!u&&!f?null:i}function oR(e,t){const n=vn(e*e),r=vn(n-1n),s=vn(rR*n+1n),i=iR(r,s);if(i===null)return!1;const o=(t&128)!==0;return!(i===0n&&o)}function aR(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function cR(e){const n=`0x${e.reduce((r,s,i)=>`${aR(i===31?s&-129:s)}${r}`,"")}`;return BigInt(n)}function uR(e){if(e.byteLength!==32)return!1;const t=cR(e);return oR(t,e[31])}var Mp=32,Lp=16,lR=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function fR({programAddress:e,seeds:t}){if(ZB(),t.length>Lp)throw new de(nv,{actual:t.length,maxSeeds:Lp});let n;const r=t.reduce((c,u,f)=>{const m=typeof u=="string"?(n||(n=new TextEncoder)).encode(u):u;if(m.byteLength>Mp)throw new de(rv,{actual:m.byteLength,index:f,maxSeedLength:Mp});return c.push(...m),c},[]),s=nR(),i=s.encode(e),o=await crypto.subtle.digest("SHA-256",new Uint8Array([...r,...i,...lR])),a=new Uint8Array(o);if(uR(a))throw new de(Um);return s.decode(a)}async function dR({programAddress:e,seeds:t}){let n=255;for(;n>0;)try{return[await fR({programAddress:e,seeds:[...t,new Uint8Array([n])]}),n]}catch(r){if(zf(r,Um))n--;else throw r}throw new de(sv)}async function Cb(e){if(kb(),e.type!=="public"||e.algorithm.name!=="Ed25519")throw new de(tv);const t=await crypto.subtle.exportKey("raw",e);return Ne().decode(new Uint8Array(t))}function hR(e,t,n){if(t!==n)throw new de(Lv,{actual:n,codecDescription:e,expected:t})}function pR(e){return e.reduce((t,n)=>t===null||n===null?null:Math.max(t,n),0)}function hi(e){return e.reduce((t,n)=>t===null||n===null?null:t+n,0)}function Vo(e){return et(e)?e.fixedSize:null}function Ti(e){return et(e)?e.fixedSize:e.maxSize??null}function pi(e,t={}){const n=t.size??Wm(),r=Ka(n,Vo(e)),s=Ka(n,Ti(e))??void 0;return qt({...r!==null?{fixedSize:r}:{getSizeFromValue:i=>(typeof n=="object"?ti(i.length,n):0)+[...i].reduce((a,c)=>a+ti(c,e),0),maxSize:s},write:(i,o,a)=>(typeof n=="number"&&hR("array",n,i.length),typeof n=="object"&&(a=n.write(i.length,o,a)),i.forEach(c=>{a=e.write(c,o,a)}),a)})}function Sr(e,t={}){const n=t.size??dr(),r=Vo(e),s=Ka(n,r),i=Ka(n,Ti(e))??void 0;return ct({...s!==null?{fixedSize:s}:{maxSize:i},read:(o,a)=>{const c=[];if(typeof n=="object"&&o.slice(a).length===0)return[c,a];if(n==="remainder"){for(;a<o.length;){const[m,p]=e.read(o,a);a=p,c.push(m)}return[c,a]}const[u,f]=typeof n=="number"?[n,a]:n.read(o,a);a=f;for(let m=0;m<u;m+=1){const[p,b]=e.read(o,a);a=b,c.push(p)}return[c,a]}})}function Ka(e,t){return typeof e!="number"?null:e===0?0:t===null?null:t*e}function Cn(e={}){return Sn(e.size??Zn(),t=>Number(t)===1)}function Qd(){return qt({getSizeFromValue:e=>e.length,write:(e,t,n)=>(t.set(e,n),n+e.length)})}function yo(){return ct({read:(e,t)=>{const n=e.slice(t);return[n,t+n.length]}})}var mR=()=>ct({read(e,t){return[e.slice(t).reduce((r,s)=>r+s.toString(16).padStart(2,"0"),""),e.length]}});function Pb(e){return ct({fixedSize:e.length,read:(t,n)=>{const r=mR();if(!Zr(t,e,n))throw new de(Dv,{constant:e,data:t,hexConstant:r.decode(e),hexData:r.decode(t),offset:n});return[void 0,n+e.length]}})}function mi(e){const t=hi(e.map(Vo)),n=hi(e.map(Ti))??void 0;return ct({...t===null?{maxSize:n}:{fixedSize:t},read:(r,s)=>{const i=[];return e.forEach(o=>{const[a,c]=o.read(r,s);i.push(a),s=c}),[i,s]}})}function Nb(e,t){const n=gR(e),r=(i,o)=>{const a=t(i,o);return yR(e,a),e[a].read(i,o)};if(n!==null)return ct({fixedSize:n,read:r});const s=bR(e);return ct({...s!==null?{maxSize:s}:{},read:r})}function yR(e,t){if(typeof e[t]>"u")throw new de(zv,{maxRange:e.length-1,minRange:0,variant:t})}function gR(e){if(e.length===0)return 0;if(!et(e[0]))return null;const t=e[0].fixedSize;return e.every(r=>et(r)&&r.fixedSize===t)?t:null}function bR(e){return pR(e.map(t=>Ti(t)))}function wR(e,t={}){const n=t.discriminator??"__kind",r=t.size??Zn();return Nb(e.map(([s,i])=>Sn(mi([r,i]),([,o])=>({[n]:s,...o}))),(s,i)=>Number(r.read(s,i)[0]))}function vR(e){const t=[...new Set(Object.values(e).filter(o=>typeof o=="number"))].sort(),n=Object.fromEntries(Object.entries(e).slice(t.length)),r=Object.keys(n),s=Object.values(n),i=[...new Set([...r,...s.filter(o=>typeof o=="string")])];return{enumKeys:r,enumRecord:n,enumValues:s,numericalValues:t,stringValues:i}}function xR({discriminator:e,enumKeys:t,enumValues:n,useValuesAsDiscriminators:r}){return r?_R(n,s=>s===e):e>=0&&e<t.length?e:-1}function _R(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}function ER(e){if(e.length===0)return"";let t=[e[0],e[0]];const n=[];for(let r=1;r<e.length;r++){const s=e[r];t[1]+1===s?t[1]=s:(n.push(t[0]===t[1]?`${t[0]}`:`${t[0]}-${t[1]}`),t=[s,s])}return n.push(t[0]===t[1]?`${t[0]}`:`${t[0]}-${t[1]}`),n.join(", ")}function AR(e,t={}){const n=t.size??Zn(),r=t.useValuesAsDiscriminators??!1,{enumKeys:s,enumValues:i,numericalValues:o}=vR(e);if(r&&i.some(a=>typeof a=="string"))throw new de(jv,{stringValues:i.filter(a=>typeof a=="string")});return Sn(n,a=>{const c=Number(a),u=xR({discriminator:c,enumKeys:s,enumValues:i,useValuesAsDiscriminators:r});if(u<0){const f=r?o:[...Array(s.length).keys()];throw new de($v,{discriminator:c,formattedValidDiscriminators:ER(f),validDiscriminators:f})}return i[u]})}function SR(e,t){return Sn(mi([...t,e]),n=>n[n.length-1])}function IR(e,t,n={}){return Sn(Sr(mi([e,t]),n),r=>new Map(r))}function Ys(){return ct({fixedSize:0,read:(e,t)=>[void 0,t]})}function nr(e){const t=e.map(([,s])=>s),n=hi(t.map(Vo)),r=hi(t.map(Ti))??void 0;return qt({...n===null?{getSizeFromValue:s=>e.map(([i,o])=>ti(s[i],o)).reduce((i,o)=>i+o,0),maxSize:r}:{fixedSize:n},write:(s,i,o)=>(e.forEach(([a,c])=>{o=c.write(s[a],i,o)}),o)})}function Ue(e){const t=e.map(([,s])=>s),n=hi(t.map(Vo)),r=hi(t.map(Ti))??void 0;return ct({...n===null?{maxSize:r}:{fixedSize:n},read:(s,i)=>{const o={};return e.forEach(([a,c])=>{const[u,f]=c.read(s,i);i=f,o[a]=u}),[o,i]}})}var TR=e=>({__option:"Some",value:e}),BR=()=>({__option:"None"});function Xt(e,t={}){const n=t.prefix===null?Sn(Ys(),()=>!1):Cn({size:t.prefix??Zn()}),r=t.noneValue==="zeroes"?(o2(e),wi(Ys(),e.fixedSize)):t.noneValue?Pb(t.noneValue):Ys();return Nb([Sn(mi([n,r]),()=>BR()),Sn(mi([n,e]),([,s])=>TR(s))],(s,i)=>{if(t.prefix===null&&!t.noneValue)return+(i<s.length);if(t.prefix===null&&t.noneValue!=null){const o=t.noneValue==="zeroes"?new Uint8Array(r.fixedSize).fill(0):t.noneValue;return Zr(s,o,i)?0:1}return Number(n.read(s,i)[0])})}function Ir(e,...t){return t.reduce((n,r)=>r(n),e)}var On=(e=>(e[e.WRITABLE_SIGNER=3]="WRITABLE_SIGNER",e[e.READONLY_SIGNER=2]="READONLY_SIGNER",e[e.WRITABLE=1]="WRITABLE",e[e.READONLY=0]="READONLY",e))(On||{}),RR=2,kR=1;function yi(e){return e>=2}function go(e){return(e&kR)!==0}function $p(e,t){return e|t}function CR(e){return e|RR}var Oc=Object.freeze({name:"Ed25519"});function PR(e){return new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...e])}async function xf(e,t=!1){const n=e.byteLength;if(n!==32)throw new de(mv,{actualLength:n});const r=PR(e);return await crypto.subtle.importKey("pkcs8",r,Oc,t,["sign"])}async function NR(e,t=!1){if(kb(),e.extractable===!1)throw new de(dv,{key:e});const n=await crypto.subtle.exportKey("jwk",e);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:t,key_ops:["verify"],kty:"OKP",x:n.x},"Ed25519",t,["verify"])}async function e0(e,t){YB();const n=await crypto.subtle.sign(Oc,e,t);return new Uint8Array(n)}async function OR(e,t,n){return XB(),await crypto.subtle.verify(Oc,e,t,n)}async function MR(e,t=!1){if(WB(),e.byteLength!==64)throw new de(pv,{byteLength:e.byteLength});const[n,r]=await Promise.all([crypto.subtle.importKey("raw",e.slice(32),Oc,!0,["verify"]),xf(e.slice(0,32),t)]),s=new Uint8Array(32);crypto.getRandomValues(s);const i=await e0(r,s);if(!await OR(n,i,s))throw new de(yv);return{privateKey:r,publicKey:n}}async function LR(e,t=!1){const n=xf(e,t),[r,s]=await Promise.all([(t?n:xf(e,!0)).then(async i=>await NR(i,!0)),n]);return{privateKey:s,publicKey:r}}function Ob(e){return JSON.parse($R(e),(t,n)=>DR(n)?zR(n):n)}function $R(e){const t=[];let n=!1;for(let r=0;r<e.length;r++){let s=!1;if(e[r]==="\\"&&(t.push(e[r++]),s=!s),e[r]==='"'){t.push(e[r]),s||(n=!n);continue}if(!n){const i=UR(e,r);if(i?.length){r+=i.length-1,i.match(/\.|[eE]-/)?t.push(i):t.push(FR(i));continue}}t.push(e[r])}return t.join("")}function UR(e,t){const n=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?/;if(!e[t]?.match(/[-\d]/))return null;const r=e.slice(t).match(n);return r?r[0]:null}function FR(e){return`{"$n":"${e}"}`}function zR({$n:e}){if(e.match(/[eE]/)){const[t,n]=e.split(/[eE]/);return BigInt(t)*BigInt(10)**BigInt(n)}return BigInt(e)}function DR(e){return!!e&&typeof e=="object"&&"$n"in e&&typeof e.$n=="string"}var Up=0n;function jR(){const e=Up;return Up++,e.toString()}function _f(e){return{id:jR(),jsonrpc:"2.0",method:e.methodName,params:e.params}}function Mb(e,t){return VR(JSON.stringify(e,(n,r)=>typeof r=="bigint"?qR(r):r,t))}function qR(e){return{$n:`${e}`}}function VR(e){return e.replace(/\{\s*"\$n"\s*:\s*"(-?\d+)"\s*\}/g,"$1")}function HR(e){return GR(e)}function GR(e){return new Proxy(e.api,{defineProperty(){return!1},deleteProperty(){return!1},get(t,n,r){if(n!=="then")return function(...s){const i=n.toString(),o=Reflect.get(t,i,r);if(!o)throw new de(Vv,{method:i,params:s});const a=o(...s);return KR(e,a)}}})}function KR({transport:e},t){return{async send(n){return await t.execute({signal:n?.abortSignal,transport:e})}}}function WR(e){return new Proxy({},{defineProperty(){return!1},deleteProperty(){return!1},get(...t){const[n,r]=t,s=r.toString();return function(...i){const o=Object.freeze({methodName:s,params:i}),a=e?.requestTransformer?e?.requestTransformer(o):o;return Object.freeze({execute:async({signal:c,transport:u})=>{const f=_f(a),m=await u({payload:f,signal:c});return e?.responseTransformer?e.responseTransformer(m,a):m}})}}})}function Lb(e){return e==null||typeof e!="object"||Array.isArray(e)?!1:"jsonrpc"in e&&e.jsonrpc==="2.0"&&"method"in e&&typeof e.method=="string"&&"params"in e}function ZR(e){return typeof e=="bigint"?Number(e):e}var se={};function $b(e){return function t(n,r){if(Array.isArray(n))return n.map((s,i)=>{const o={...r,keyPath:[...r.keyPath,i]};return t(s,o)});if(typeof n=="object"&&n!==null){const s={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const o={...r,keyPath:[...r.keyPath,i]};s[i]=t(n[i],o)}return s}else return e.reduce((s,i)=>i(s,r),n)}}function Ub(e,t){return n=>{const r=$b(e);return Object.freeze({...n,params:r(n.params,t)})}}function YR(e,t){return n=>$b(e)(n,t)}function XR(){return Ub([ZR],{keyPath:[]})}function JR({commitmentPropertyName:e,params:t,optionsObjectPositionInParams:n,overrideCommitment:r}){const s=t[n];if(s===void 0||s&&typeof s=="object"&&!Array.isArray(s)){if(s&&e in s){if(!s[e]||s[e]==="finalized"){const i=[...t],{[e]:o,...a}=s;return Object.keys(a).length>0?i[n]=a:n===i.length-1?i.length--:i[n]=void 0,i}}else if(r!=="finalized"){const i=[...t];return i[n]={...s,[e]:r},i}}return t}function QR({defaultCommitment:e,optionsObjectPositionByMethod:t}){return n=>{const{params:r,methodName:s}=n;if(!Array.isArray(r))return n;const i=t[s];return i==null?n:Object.freeze({methodName:s,params:JR({commitmentPropertyName:s==="sendTransaction"?"preflightCommitment":"commitment",optionsObjectPositionInParams:i,overrideCommitment:e,params:r})})}}function e4(e){return(t,{keyPath:n})=>(typeof t=="bigint"&&e&&(t>Number.MAX_SAFE_INTEGER||t<-Number.MAX_SAFE_INTEGER)&&e(n,t),t)}function t4(e){return t=>Ub([e4((...r)=>e(t,...r))],{keyPath:[]})(t)}var n4={accountNotifications:1,blockNotifications:1,getAccountInfo:1,getBalance:1,getBlock:1,getBlockHeight:0,getBlockProduction:0,getBlocks:2,getBlocksWithLimit:2,getEpochInfo:0,getFeeForMessage:1,getInflationGovernor:0,getInflationReward:1,getLargestAccounts:0,getLatestBlockhash:0,getLeaderSchedule:1,getMinimumBalanceForRentExemption:1,getMultipleAccounts:1,getProgramAccounts:1,getSignaturesForAddress:1,getSlot:0,getSlotLeader:0,getStakeMinimumDelegation:0,getSupply:0,getTokenAccountBalance:1,getTokenAccountsByDelegate:2,getTokenAccountsByOwner:2,getTokenLargestAccounts:1,getTokenSupply:1,getTransaction:1,getTransactionCount:0,getVoteAccounts:0,isBlockhashValid:1,logsNotifications:1,programNotifications:1,requestAirdrop:2,sendTransaction:1,signatureNotifications:1,simulateTransaction:1};function Fb(e){const t=e?.onIntegerOverflow;return n=>Ir(n,t?t4(t):r=>r,XR(),QR({defaultCommitment:e?.defaultCommitment,optionsObjectPositionByMethod:n4}))}function r4(e){return function(n,{keyPath:r}){return typeof n=="number"&&Number.isInteger(n)||typeof n=="bigint"?s4(r,e)?Number(n):BigInt(n):n}}function s4(e,t){return t.some(n=>{if(n.length!==e.length)return!1;for(let r=e.length-1;r>=0;r--){const s=e[r],i=n[r];if(i!==s&&(i!==se||typeof s!="number"))return!1}return!0})}function zb(e){return YR([r4(e)],{keyPath:[]})}function i4(){return e=>e.result}function o4(){return e=>{const t=e;if("error"in t)throw Df(t.error);return t}}function a4(e){return(t,n)=>{const r=n.methodName,s=e?.allowedNumericKeyPaths&&r?e.allowedNumericKeyPaths[r]:void 0;return Ir(t,i=>o4()(i,n),i=>i4()(i,n),i=>zb(s??[])(i,n))}}function c4(e){return(t,n)=>{const r=n.methodName,s=e?.allowedNumericKeyPaths&&r?e.allowedNumericKeyPaths[r]:void 0;return Ir(t,i=>zb(s??[])(i,n))}}var Ef=[["data","parsed","info","tokenAmount","decimals"],["data","parsed","info","tokenAmount","uiAmount"],["data","parsed","info","rentExemptReserve","decimals"],["data","parsed","info","rentExemptReserve","uiAmount"],["data","parsed","info","delegatedAmount","decimals"],["data","parsed","info","delegatedAmount","uiAmount"],["data","parsed","info","extensions",se,"state","olderTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",se,"state","newerTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",se,"state","preUpdateAverageRate"],["data","parsed","info","extensions",se,"state","currentRate"]],Ds=[...Ef,["data","parsed","info","lastExtendedSlotStartIndex"],["data","parsed","info","slashPenalty"],["data","parsed","info","warmupCooldownRate"],["data","parsed","info","decimals"],["data","parsed","info","numRequiredSigners"],["data","parsed","info","numValidSigners"],["data","parsed","info","stake","delegation","warmupCooldownRate"],["data","parsed","info","exemptionThreshold"],["data","parsed","info","burnPercent"],["data","parsed","info","commission"],["data","parsed","info","votes",se,"confirmationCount"]],rl=[["index"],["instructions",se,"accounts",se],["instructions",se,"programIdIndex"],["instructions",se,"stackHeight"]],Fp=[["addressTableLookups",se,"writableIndexes",se],["addressTableLookups",se,"readonlyIndexes",se],["header","numReadonlySignedAccounts"],["header","numReadonlyUnsignedAccounts"],["header","numRequiredSignatures"],["instructions",se,"accounts",se],["instructions",se,"programIdIndex"],["instructions",se,"stackHeight"]];function u4(e){return WR({requestTransformer:Fb(e),responseTransformer:a4({allowedNumericKeyPaths:l4()})})}var sl;function l4(){return sl||(sl={getAccountInfo:Ds.map(e=>["value",...e]),getBlock:[["transactions",se,"meta","preTokenBalances",se,"accountIndex"],["transactions",se,"meta","preTokenBalances",se,"uiTokenAmount","decimals"],["transactions",se,"meta","postTokenBalances",se,"accountIndex"],["transactions",se,"meta","postTokenBalances",se,"uiTokenAmount","decimals"],["transactions",se,"meta","rewards",se,"commission"],...rl.map(e=>["transactions",se,"meta","innerInstructions",se,...e]),...Fp.map(e=>["transactions",se,"transaction","message",...e]),["rewards",se,"commission"]],getClusterNodes:[[se,"featureSet"],[se,"shredVersion"]],getInflationGovernor:[["initial"],["foundation"],["foundationTerm"],["taper"],["terminal"]],getInflationRate:[["foundation"],["total"],["validator"]],getInflationReward:[[se,"commission"]],getMultipleAccounts:Ds.map(e=>["value",se,...e]),getProgramAccounts:Ds.flatMap(e=>[["value",se,"account",...e],[se,"account",...e]]),getRecentPerformanceSamples:[[se,"samplePeriodSecs"]],getTokenAccountBalance:[["value","decimals"],["value","uiAmount"]],getTokenAccountsByDelegate:Ef.map(e=>["value",se,"account",...e]),getTokenAccountsByOwner:Ef.map(e=>["value",se,"account",...e]),getTokenLargestAccounts:[["value",se,"decimals"],["value",se,"uiAmount"]],getTokenSupply:[["value","decimals"],["value","uiAmount"]],getTransaction:[["meta","preTokenBalances",se,"accountIndex"],["meta","preTokenBalances",se,"uiTokenAmount","decimals"],["meta","postTokenBalances",se,"accountIndex"],["meta","postTokenBalances",se,"uiTokenAmount","decimals"],["meta","rewards",se,"commission"],...rl.map(e=>["meta","innerInstructions",se,...e]),...Fp.map(e=>["transaction","message",...e])],getVersion:[["feature-set"]],getVoteAccounts:[["current",se,"commission"],["delinquent",se,"commission"]],simulateTransaction:[...Ds.map(e=>["value","accounts",se,...e]),...rl.map(e=>["value","innerInstructions",se,...e])]}),sl}function f4(e){const t={};for(const n in e)t[n.toLowerCase()]=e[n];return t}function d4(e){const{fromJson:t,headers:n,toJson:r,url:s}=e;let i;const o=n&&f4(n);return async function({payload:c,signal:u}){const f=r?r(c):JSON.stringify(c),m={...i,body:f,headers:{...o,accept:"application/json","content-length":f.length.toString(),"content-type":"application/json; charset=utf-8"},method:"POST",signal:u},p=await fetch(s,m);if(!p.ok)throw new de(qv,{headers:p.headers,message:p.statusText,statusCode:p.status});return t?t(await p.text(),c):await p.json()}}var h4=["getAccountInfo","getBalance","getBlock","getBlockCommitment","getBlockHeight","getBlockProduction","getBlocks","getBlocksWithLimit","getBlockTime","getClusterNodes","getEpochInfo","getEpochSchedule","getFeeForMessage","getFirstAvailableBlock","getGenesisHash","getHealth","getHighestSnapshotSlot","getIdentity","getInflationGovernor","getInflationRate","getInflationReward","getLargestAccounts","getLatestBlockhash","getLeaderSchedule","getMaxRetransmitSlot","getMaxShredInsertSlot","getMinimumBalanceForRentExemption","getMultipleAccounts","getProgramAccounts","getRecentPerformanceSamples","getRecentPrioritizationFees","getSignaturesForAddress","getSignatureStatuses","getSlot","getSlotLeader","getSlotLeaders","getStakeMinimumDelegation","getSupply","getTokenAccountBalance","getTokenAccountsByDelegate","getTokenAccountsByOwner","getTokenLargestAccounts","getTokenSupply","getTransaction","getTransactionCount","getVersion","getVoteAccounts","index","isBlockhashValid","minimumLedgerSlot","requestAirdrop","sendTransaction","simulateTransaction"];function zp(e){return Lb(e)&&h4.includes(e.method)}function p4(e){return d4({...e,fromJson:(t,n)=>zp(n)?Ob(t):JSON.parse(t),toJson:t=>zp(t)?Mb(t):JSON.stringify(t)})}var m4=Object.prototype.toString,y4=Object.keys||function(e){const t=[];for(const n in e)t.push(n);return t};function Fi(e,t){let n,r,s,i,o,a,c;if(e===!0)return"true";if(e===!1)return"false";switch(typeof e){case"object":if(e===null)return null;if("toJSON"in e&&typeof e.toJSON=="function")return Fi(e.toJSON(),t);if(c=m4.call(e),c==="[object Array]"){for(s="[",r=e.length-1,n=0;n<r;n++)s+=Fi(e[n],!0)+",";return r>-1&&(s+=Fi(e[n],!0)),s+"]"}else if(c==="[object Object]"){for(i=y4(e).sort(),r=i.length,s="",n=0;n<r;)o=i[n],a=Fi(e[o],!1),a!==void 0&&(s&&(s+=","),s+=JSON.stringify(o)+":"+a),n++;return"{"+s+"}"}else return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"bigint":return`${e.toString()}n`;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}function Db(e){const t=Fi(e,!1);if(t!==void 0)return""+t}function jb(e,t,n){let r="";if(typeof t[0]=="number"){const o=t[0]+1,a=o%10,c=o%100;a==1&&c!=11?r=o+"st":a==2&&c!=12?r=o+"nd":a==3&&c!=13?r=o+"rd":r=o+"th"}else r=`\`${t[0].toString()}\``;const s=t.length>1?t.slice(1).map(o=>typeof o=="number"?`[${o}]`:o).join("."):void 0,i=new de(Fm,{argumentLabel:r,keyPath:t,methodName:e,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...s!==void 0?{path:s}:void 0});return Qa(i,jb),i}var g4={defaultCommitment:"confirmed",onIntegerOverflow(e,t,n){throw jb(e.methodName,t,n)}},b4=globalThis.AbortController,Dp;function jp(){return{}}function w4(e,t){let n;return async function(s){const{payload:i,signal:o}=s,a=t(i);if(a===void 0)return await e(s);if(n||(queueMicrotask(()=>{n=void 0}),n={}),n[a]==null){const u=new b4,f=(async()=>{try{return await e({...s,signal:u.signal})}catch(m){if(m===(Dp||(Dp=jp())))return;throw m}})();n[a]={abortController:u,numConsumers:0,responsePromise:f}}const c=n[a];if(c.numConsumers++,o){const u=c.responsePromise;return await new Promise((f,m)=>{const p=b=>{o.removeEventListener("abort",p),c.numConsumers-=1,queueMicrotask(()=>{c.numConsumers===0&&c.abortController.abort(Dp||(Dp=jp()))}),m(b.target.reason)};o.addEventListener("abort",p),u.then(f).catch(m).finally(()=>{o.removeEventListener("abort",p)})})}else return await c.responsePromise}}function v4(e){return Lb(e)?Db([e.method,e.params]):void 0}function x4(e){const t={};for(const n in e)t[n.toLowerCase()]=e[n];return t}function _4(e){return Ir(p4({...e,headers:{...e.headers?x4(e.headers):void 0,"solana-client":"js/2.3.0"}}),t=>w4(t,v4))}function qb(e,t){return E4(_4({url:e,...t}))}function E4(e){return HR({api:u4(g4),transport:e})}var A4=globalThis.AbortController,S4=globalThis.EventTarget,qp;function Vp(){return Symbol(void 0)}var il=Symbol();function I4({abortSignal:e,dataChannelName:t,dataPublisher:n,errorChannelName:r}){const s=new Map;function i(u){for(const[f,m]of s.entries())m.__hasPolled?(s.delete(f),m.onError(u)):m.publishQueue.push({__type:1,err:u})}const o=new A4;e.addEventListener("abort",()=>{o.abort(),i(qp||(qp=Vp()))});const a={signal:o.signal};let c=il;return n.on(r,u=>{c===il&&(c=u,o.abort(),i(u))},a),n.on(t,u=>{s.forEach((f,m)=>{if(f.__hasPolled){const{onData:p}=f;s.set(m,{__hasPolled:!1,publishQueue:[]}),p(u)}else f.publishQueue.push({__type:0,data:u})})},a),{async*[Symbol.asyncIterator](){if(e.aborted)return;if(c!==il)throw c;const u=Symbol();s.set(u,{__hasPolled:!1,publishQueue:[]});try{for(;;){const f=s.get(u);if(!f)throw new de(Zv);if(f.__hasPolled)throw new de(Yv);const m=f.publishQueue;try{if(m.length){f.publishQueue=[];for(const p of m)if(p.__type===0)yield p.data;else throw p.err}else yield await new Promise((p,b)=>{s.set(u,{__hasPolled:!0,onData:p,onError:b})})}catch(p){if(p===(qp||(qp=Vp())))return;throw p}}}finally{s.delete(u)}}}}function Vb(e){return{on(t,n,r){function s(i){if(i instanceof CustomEvent){const o=i.detail;n(o)}else n()}return e.addEventListener(t,s,r),()=>{e.removeEventListener(t,s)}}}}function T4(e,t,n){let r;const s=new S4,i=Vb(s);return{...i,on(o,a,c){r||(r={dispose:e.on(t,b=>{const _=n(b);if(!_)return;const[E,T]=_;s.dispatchEvent(new CustomEvent(E,{detail:T}))}),numSubscribers:0}),r.numSubscribers++;const u=i.on(o,a,c);let f=!0;function m(){f&&(f=!1,c?.signal.removeEventListener("abort",m),r.numSubscribers--,r.numSubscribers===0&&(r.dispose(),r=void 0),u())}return c?.signal.addEventListener("abort",m),m}}}function Hp(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function B4(e){const t=new Set,n={deferreds:t,settled:!1};return Promise.resolve(e).then(r=>{for(const{resolve:s}of t)s(r);t.clear(),n.settled=!0},r=>{for(const{reject:s}of t)s(r);t.clear(),n.settled=!0}),n}var ol=new WeakMap;async function R4(e){let t;return await new Promise((r,s)=>{t={reject:s,resolve:r};for(const i of e){if(!Hp(i)){Promise.resolve(i).then(r,s);continue}let o=ol.get(i);o===void 0?(o=B4(i),o.deferreds.add(t),ol.set(i,o)):o.settled?Promise.resolve(i).then(r,s):o.deferreds.add(t)}}).finally(()=>{for(const r of e)Hp(r)&&ol.get(r).deferreds.delete(t)})}function k4(e){return new Proxy(e.api,{defineProperty(){return!1},deleteProperty(){return!1},get(t,n,r){if(n!=="then")return function(...s){const i=n.toString(),o=Reflect.get(t,i,r);if(!o)throw new de(Hv,{notificationName:i});const a=o(...s);return C4(e.transport,a)}}})}function C4(e,t){return{async subscribe({abortSignal:n}){const r=await e({signal:n,...t});return I4({abortSignal:n,dataChannelName:"notification",dataPublisher:r,errorChannelName:"error"})}}}function P4(e){return new Proxy({},{defineProperty(){return!1},deleteProperty(){return!1},get(...t){const[n,r]=t,s=r.toString();return function(...i){const o={methodName:s,params:i},a=e.requestTransformer?e.requestTransformer(o):o;return{execute(c){return e.planExecutor({...c,request:a})},request:a}}}})}function N4(e,t){return Object.freeze({...e,on(n,r,s){return n!=="message"?e.on(n,r,s):e.on("message",i=>r(t(i)),s)}})}function O4(e,t){return Object.freeze({...e,send:n=>e.send(t(n))})}var M4=globalThis.AbortController,Af=new WeakMap;function L4(e,t){return Hb(-1,e,t)}function $4(e,t){Hb(1,e,t)}function U4(e){let t=Af.get(e);return t||Af.set(e,t={}),t}function Hb(e,t,n){if(n===void 0)return;const r=U4(t);!r[n]&&e>0&&(r[n]=0);const s=e+r[n];return s<=0?delete r[n]:r[n]=s,s}var Gp=new WeakMap;function F4(e,t,n){let r=Gp.get(e);r||Gp.set(e,r=new WeakMap);const s=n??e;let i=r.get(s);return i||r.set(s,i=T4(e,"message",o=>{const a=o;if(!("method"in a))return;const c=n?n(a.params.result,t):a.params.result;return[`notification:${a.params.subscription}`,c]})),i}async function z4({channel:e,responseTransformer:t,signal:n,subscribeRequest:r,unsubscribeMethodName:s}){let i;e.on("error",()=>{i=void 0,Af.delete(e)},{signal:n});const o=new Promise((m,p)=>{function b(){if(L4(e,i)===0){const _=_f({methodName:s,params:[i]});i=void 0,e.send(_).catch(()=>{})}p(this.reason)}n.aborted?b.call(n):n.addEventListener("abort",b)}),a=_f(r);await e.send(a);const c=new Promise((m,p)=>{const b=new M4;n.addEventListener("abort",b.abort.bind(b));const _={signal:b.signal};e.on("error",E=>{b.abort(),p(E)},_),e.on("message",E=>{E&&typeof E=="object"&&"id"in E&&E.id===a.id&&(b.abort(),"error"in E?p(Df(E.error)):m(E.result))},_)});if(i=await R4([o,c]),i==null)throw new de(Gv);$4(e,i);const u=F4(e,r,t),f=`notification:${i}`;return{on(m,p,b){switch(m){case"notification":return u.on(f,p,b);case"error":return e.on("error",p,b);default:throw new de(Xv,{channelName:m,supportedChannelNames:["notification","error"]})}}}}function D4(e){const t=Fb(e),n=c4({allowedNumericKeyPaths:q4()});return P4({planExecutor({request:r,...s}){return z4({...s,responseTransformer:n,subscribeRequest:{...r,methodName:r.methodName.replace(/Notifications$/,"Subscribe")},unsubscribeMethodName:r.methodName.replace(/Notifications$/,"Unsubscribe")})},requestTransformer:t})}function j4(e){return D4(e)}var al;function q4(){return al||(al={accountNotifications:Ds.map(e=>["value",...e]),blockNotifications:[["value","block","transactions",se,"meta","preTokenBalances",se,"accountIndex"],["value","block","transactions",se,"meta","preTokenBalances",se,"uiTokenAmount","decimals"],["value","block","transactions",se,"meta","postTokenBalances",se,"accountIndex"],["value","block","transactions",se,"meta","postTokenBalances",se,"uiTokenAmount","decimals"],["value","block","transactions",se,"meta","rewards",se,"commission"],["value","block","transactions",se,"meta","innerInstructions",se,"index"],["value","block","transactions",se,"meta","innerInstructions",se,"instructions",se,"programIdIndex"],["value","block","transactions",se,"meta","innerInstructions",se,"instructions",se,"accounts",se],["value","block","transactions",se,"transaction","message","addressTableLookups",se,"writableIndexes",se],["value","block","transactions",se,"transaction","message","addressTableLookups",se,"readonlyIndexes",se],["value","block","transactions",se,"transaction","message","instructions",se,"programIdIndex"],["value","block","transactions",se,"transaction","message","instructions",se,"accounts",se],["value","block","transactions",se,"transaction","message","header","numReadonlySignedAccounts"],["value","block","transactions",se,"transaction","message","header","numReadonlyUnsignedAccounts"],["value","block","transactions",se,"transaction","message","header","numRequiredSignatures"],["value","block","rewards",se,"commission"]],programNotifications:Ds.flatMap(e=>[["value",se,"account",...e],[se,"account",...e]])}),al}var V4=globalThis.EventTarget,Mi=globalThis.WebSocket,Kp=1e3;function H4({sendBufferHighWatermark:e,signal:t,url:n}){if(t.aborted)return Promise.reject(t.reason);let r,s=!1;const i=new Set;function o(){i.forEach(k=>{k()}),i.clear()}function a(){o(),s||E(t.reason),_.readyState!==Mi.CLOSED&&_.readyState!==Mi.CLOSING&&_.close(Kp)}function c(k){o(),r?.onCancel(),t.removeEventListener("abort",a),_.removeEventListener("close",c),_.removeEventListener("error",u),_.removeEventListener("message",f),_.removeEventListener("open",b),!t.aborted&&!(k.wasClean&&k.code===Kp)&&m.dispatchEvent(new CustomEvent("error",{detail:new de(_l,{cause:k})}))}function u(k){if(!t.aborted&&!s){const M=new de(Wv,{errorEvent:k});E(M),m.dispatchEvent(new CustomEvent("error",{detail:M}))}}function f(k){t.aborted||m.dispatchEvent(new CustomEvent("message",{detail:k.data}))}const m=new V4,p=Vb(m);function b(){s=!0,T({...p,async send(k){if(_.readyState!==Mi.OPEN)throw new de(_l);if(!r&&_.bufferedAmount>e){let M;const C=new Promise((U,D)=>{const V=setInterval(()=>{(_.readyState!==Mi.OPEN||!(_.bufferedAmount>e))&&(clearInterval(V),r=void 0,U())},16);M=()=>{r=void 0,clearInterval(V),D(new de(Kv))}});r={onCancel:M,promise:C}}if(r){if(ArrayBuffer.isView(k)&&!(k instanceof DataView)){const M=k.constructor;k=new M(k)}await r.promise}_.send(k)}})}const _=new Mi(n);t.addEventListener("abort",a),_.addEventListener("close",c),_.addEventListener("error",u),_.addEventListener("message",f),_.addEventListener("open",b);let E,T;return new Promise((k,M)=>{E=M,T=k})}function Gb(e,t,n){let r="";if(typeof t[0]=="number"){const o=t[0]+1,a=o%10,c=o%100;a==1&&c!=11?r=o+"st":a==2&&c!=12?r=o+"nd":a==3&&c!=13?r=o+"rd":r=o+"th"}else r=`\`${t[0].toString()}\``;const s=t.length>1?t.slice(1).map(o=>typeof o=="number"?`[${o}]`:o).join("."):void 0,i=new de(Fm,{argumentLabel:r,keyPath:t,methodName:e,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...s!==void 0?{path:s}:void 0});return Qa(i,Gb),i}var G4={defaultCommitment:"confirmed",onIntegerOverflow(e,t,n){throw Gb(e.methodName,t,n)}},t0=globalThis.AbortController,K4={jsonrpc:"2.0",method:"ping"};function W4({abortSignal:e,channel:t,intervalMs:n}){let r;function s(){t.send(K4).catch(a=>{zf(a,_l)&&o.abort()})}function i(){clearInterval(r),r=setInterval(s,n)}const o=new t0;return o.signal.addEventListener("abort",()=>{clearInterval(r)}),e.addEventListener("abort",()=>{o.abort()}),t.on("error",()=>{o.abort()},{signal:o.signal}),t.on("message",i,{signal:o.signal}),globalThis.navigator.onLine&&i(),globalThis.addEventListener("offline",function(){clearInterval(r)},{signal:o.signal}),globalThis.addEventListener("online",function(){s(),i()},{signal:o.signal}),{...t,send(...a){return o.signal.aborted||i(),t.send(...a)}}}function Z4(){return{entries:[],freeChannelIndex:-1}}function Y4(e,{maxSubscriptionsPerChannel:t,minChannels:n}){const r=Z4();function s(){if(r.entries.length<n){r.freeChannelIndex=-1;return}let i;for(let o=0;o<r.entries.length;o++){const a=(r.freeChannelIndex+o+2)%r.entries.length,c=r.entries[a];c.subscriptionCount<t&&(!i||i.subscriptionCount>=c.subscriptionCount)&&(i={poolIndex:a,subscriptionCount:c.subscriptionCount})}r.freeChannelIndex=i?.poolIndex??-1}return function({abortSignal:o}){let a;function c(){const u=r.entries.findIndex(f=>f===a);r.entries.splice(u,1),a.dispose(),s()}if(r.freeChannelIndex===-1){const u=new t0,f=e({abortSignal:u.signal});f.then(m=>{m.on("error",c,{signal:u.signal})}).catch(c),a={channel:f,dispose(){u.abort()},subscriptionCount:0},r.entries.push(a)}else a=r.entries[r.freeChannelIndex];return a.subscriptionCount++,o.addEventListener("abort",function(){a.subscriptionCount--,a.subscriptionCount===0?c():r.freeChannelIndex!==-1&&(r.freeChannelIndex--,s())}),s(),a.channel}}function X4(e){return Ir(e,t=>N4(t,Ob),t=>O4(t,Mb))}function J4(e){return Q4({...e,jsonSerializer:X4})}function Q4(e){if(/^wss?:/i.test(e.url)===!1){const s=e.url.match(/^([^:]+):/);throw new DOMException(s?`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${s[1]}:' is not allowed.`:`Failed to construct 'WebSocket': The URL '${e.url}' is invalid.`)}const{intervalMs:t,...n}=e;return Y4(({abortSignal:s})=>H4({...n,sendBufferHighWatermark:e.sendBufferHighWatermark??131072,signal:s}).then(e.jsonSerializer).then(i=>W4({abortSignal:s,channel:i,intervalMs:t??5e3})),{maxSubscriptionsPerChannel:e.maxSubscriptionsPerChannel??100,minChannels:e.minChannels??1})}function ek(e){const t=new Map;return function(r){const{request:s,signal:i}=r,o=Db([s.methodName,s.params]);let a=t.get(o);if(!a){const c=new t0,u=e({...r,signal:c.signal});u.then(f=>{f.on("error",()=>{t.delete(o),c.abort()},{signal:c.signal})}).catch(()=>{}),t.set(o,a={abortController:c,dataPublisherPromise:u,numSubscribers:0})}return a.numSubscribers++,i.addEventListener("abort",()=>{a.numSubscribers--,a.numSubscribers===0&&queueMicrotask(()=>{a.numSubscribers===0&&(t.delete(o),a.abortController.abort())})},{signal:a.abortController.signal}),a.dataPublisherPromise}}function tk({createChannel:e}){return Ir(nk(e),t=>ek(t))}function nk(e){return async({execute:t,signal:n})=>{const r=await e({abortSignal:n});return await t({channel:r,signal:n})}}function rk(e,t){const n=tk({createChannel:J4({...t,url:e})});return sk(n)}function Wp(e,t){return rk(e,t)}function sk(e){return k4({api:j4(G4),transport:e})}function ik(e){return QB(e)}function ok(e){return"lifetimeConstraint"in e&&typeof e.lifetimeConstraint.blockhash=="string"&&typeof e.lifetimeConstraint.lastValidBlockHeight=="bigint"&&ik(e.lifetimeConstraint.blockhash)}function Kb(e,t){return"lifetimeConstraint"in t&&t.lifetimeConstraint&&"blockhash"in t.lifetimeConstraint&&t.lifetimeConstraint.blockhash===e.blockhash&&t.lifetimeConstraint.lastValidBlockHeight===e.lastValidBlockHeight?t:Object.freeze({...t,lifetimeConstraint:Object.freeze(e)})}function ak(e,t,n=t){if(!t.match(new RegExp(`^[${e}]*$`)))throw new de(_a,{alphabet:e,base:e.length,value:n})}var ck=e=>qt({getSizeFromValue:t=>{const[n,r]=Zp(t,e[0]);if(!r)return t.length;const s=Yp(r,e);return n.length+Math.ceil(s.toString(16).length/2)},write(t,n,r){if(ak(e,t),t==="")return r;const[s,i]=Zp(t,e[0]);if(!i)return n.set(new Uint8Array(s.length).fill(0),r),r+s.length;let o=Yp(i,e);const a=[];for(;o>0n;)a.unshift(Number(o%256n)),o/=256n;const c=[...Array(s.length).fill(0),...a];return n.set(c,r),r+c.length}}),uk=e=>ct({read(t,n){const r=n===0?t:t.slice(n);if(r.length===0)return["",0];let s=r.findIndex(c=>c!==0);s=s===-1?r.length:s;const i=e[0].repeat(s);if(s===r.length)return[i,t.length];const o=r.slice(s).reduce((c,u)=>c*256n+BigInt(u),0n),a=lk(o,e);return[i+a,t.length]}});function Zp(e,t){const[n,r]=e.split(new RegExp(`((?!${t}).*)`));return[n,r]}function Yp(e,t){const n=BigInt(t.length);let r=0n;for(const s of e)r*=n,r+=BigInt(t.indexOf(s));return r}function lk(e,t){const n=BigInt(t.length),r=[];for(;e>0n;)r.unshift(t[Number(e%n)]),e/=n;return r.join("")}var Wb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fk=()=>ck(Wb),dk=()=>uk(Wb),cl;function hk(){if(!cl){const e=pi(Qt(),{size:as()});cl=nr([["lookupTableAddress",Zs()],["writableIndexes",e],["readonlyIndexes",e]])}return cl}var ul;function pk(){if(!ul){const e=Sr(Zn(),{size:jr()});ul=Sn(Ue([["lookupTableAddress",Ne()],["writableIndexes",e],["readonlyIndexes",e]]),t=>"readableIndices"in t?{...t,readonlyIndexes:t.readableIndices,writableIndexes:t.writableIndices}:t)}return ul}var ll;function fl(){return ll||(ll=Qt()),ll}var dl;function hl(){return dl||(dl=Zn()),dl}function mk(){return nr([["numSignerAccounts",fl()],["numReadonlySignerAccounts",fl()],["numReadonlyNonSignerAccounts",fl()]])}function yk(){return Ue([["numSignerAccounts",hl()],["numReadonlySignerAccounts",hl()],["numReadonlyNonSignerAccounts",hl()]])}var pl;function gk(){return pl||(pl=Hr(nr([["programAddressIndex",Qt()],["accountIndices",pi(Qt(),{size:as()})],["data",u2(Qd(),as())]]),e=>e.accountIndices!==void 0&&e.data!==void 0?e:{...e,accountIndices:e.accountIndices??[],data:e.data??new Uint8Array(0)})),pl}var ml;function bk(){return ml||(ml=Sn(Ue([["programAddressIndex",Zn()],["accountIndices",Sr(Zn(),{size:jr()})],["data",Fe(yo(),jr())]]),e=>{if(e.accountIndices.length&&e.data.byteLength)return e;const{accountIndices:t,data:n,...r}=e;return{...r,...t.length?{accountIndices:t}:null,...n.byteLength?{data:n}:null}})),ml}var Sf=128;function wk(){return qt({getSizeFromValue:e=>e==="legacy"?0:1,maxSize:1,write:(e,t,n)=>{if(e==="legacy")return n;if(e<0||e>127)throw new de(_v,{actualVersion:e});return t.set([e|Sf],n),n+1}})}function Zb(){return ct({maxSize:1,read:(e,t)=>{const n=e[t];return(n&Sf)===0?["legacy",t]:[n^Sf,t+1]}})}function Xp(){return nr(Yb())}function Jp(){return Hr(nr([...Yb(),["addressTableLookups",xk()]]),e=>e.version==="legacy"?e:{...e,addressTableLookups:e.addressTableLookups??[]})}function Yb(){return[["version",wk()],["header",mk()],["staticAccounts",pi(Zs(),{size:as()})],["lifetimeToken",qf(fk(),32)],["instructions",pi(gk(),{size:as()})]]}function vk(){return[["version",Zb()],["header",yk()],["staticAccounts",Sr(Ne(),{size:jr()})],["lifetimeToken",wi(dk(),32)],["instructions",Sr(bk(),{size:jr()})],["addressTableLookups",_k()]]}function xk(){return pi(hk(),{size:as()})}function _k(){return Sr(pk(),{size:jr()})}function Ek(){return qt({getSizeFromValue:e=>e.version==="legacy"?Xp().getSizeFromValue(e):Jp().getSizeFromValue(e),write:(e,t,n)=>e.version==="legacy"?Xp().write(e,t,n):Jp().write(e,t,n)})}function Ak(){return Sn(Ue(vk()),({addressTableLookups:e,...t})=>t.version==="legacy"||!e?.length?t:{...t,addressTableLookups:e})}function Qp(e,t,n){e[t]=n(e[t]??{role:On.READONLY})}var Rt=Symbol("AddressMapTypeProperty");function Sk(e,t){const n={[e]:{[Rt]:0,role:On.WRITABLE_SIGNER}},r=new Set;for(const s of t){Qp(n,s.programAddress,o=>{if(r.add(s.programAddress),Rt in o){if(go(o.role))switch(o[Rt]){case 0:throw new de(xv,{programAddress:s.programAddress});default:throw new de(Y0,{programAddress:s.programAddress})}if(o[Rt]===2)return o}return{[Rt]:2,role:On.READONLY}});let i;if(s.accounts)for(const o of s.accounts)Qp(n,o.address,a=>{const{address:c,...u}=o;if(Rt in a)switch(a[Rt]){case 0:return a;case 1:{const f=$p(a.role,u.role);if("lookupTableAddress"in u){if(a.lookupTableAddress!==u.lookupTableAddress&&(i||(i=Jd()))(u.lookupTableAddress,a.lookupTableAddress)<0)return{[Rt]:1,...u,role:f}}else if(yi(u.role))return{[Rt]:2,role:f};return a.role!==f?{...a,role:f}:a}case 2:{const f=$p(a.role,u.role);if(r.has(o.address)){if(go(u.role))throw new de(Y0,{programAddress:o.address});return a.role!==f?{...a,role:f}:a}else return"lookupTableAddress"in u&&!yi(a.role)?{...u,[Rt]:1,role:f}:a.role!==f?{...a,role:f}:a}}return"lookupTableAddress"in u?{...u,[Rt]:1}:{...u,[Rt]:2}})}return n}function Ik(e){let t;return Object.entries(e).sort(([r,s],[i,o])=>{if(s[Rt]!==o[Rt]){if(s[Rt]===0)return-1;if(o[Rt]===0)return 1;if(s[Rt]===2)return-1;if(o[Rt]===2)return 1}const a=yi(s.role);if(a!==yi(o.role))return a?-1:1;const c=go(s.role);return c!==go(o.role)?c?-1:1:(t||(t=Jd()),s[Rt]===1&&o[Rt]===1&&s.lookupTableAddress!==o.lookupTableAddress?t(s.lookupTableAddress,o.lookupTableAddress):t(r,i))}).map(([r,s])=>({address:r,...s}))}function Tk(e){var n;const t={};for(const r of e){if(!("lookupTableAddress"in r))continue;const s=t[n=r.lookupTableAddress]||(t[n]={readableIndices:[],readonlyIndexes:[],writableIndexes:[],writableIndices:[]});r.role===On.WRITABLE?(s.writableIndexes.push(r.addressIndex),s.writableIndices.push(r.addressIndex)):(s.readableIndices.push(r.addressIndex),s.readonlyIndexes.push(r.addressIndex))}return Object.keys(t).sort(Jd()).map(r=>({lookupTableAddress:r,...t[r]}))}function Bk(e){let t=0,n=0,r=0;for(const s of e){if("lookupTableAddress"in s)break;const i=go(s.role);yi(s.role)?(r++,i||n++):i||t++}return{numReadonlyNonSignerAccounts:t,numReadonlySignerAccounts:n,numSignerAccounts:r}}function Rk(e){const t={};for(const[n,r]of e.entries())t[r.address]=n;return t}function kk(e,t){const n=Rk(t);return e.map(({accounts:r,data:s,programAddress:i})=>({programAddressIndex:n[i],...r?{accountIndices:r.map(({address:o})=>n[o])}:null,...s?{data:s}:null}))}function Ck(e){return"nonce"in e?e.nonce:e.blockhash}function Pk(e){const t=e.findIndex(r=>"lookupTableAddress"in r);return(t===-1?e:e.slice(0,t)).map(({address:r})=>r)}function Nk(e){const t=Sk(e.feePayer.address,e.instructions),n=Ik(t);return{...e.version!=="legacy"?{addressTableLookups:Tk(n)}:null,header:Bk(n),instructions:kk(e.instructions,n),lifetimeToken:Ck(e.lifetimeConstraint),staticAccounts:Pk(n),version:e.version}}function Ok(e){return Object.freeze({instructions:Object.freeze([]),version:e.version})}var Mk="SysvarRecentB1ockHashes11111111111111111111",Lk="11111111111111111111111111111111";function $k(e){return e.programAddress===Lk&&e.data!=null&&Uk(e.data)&&e.accounts?.length===3&&e.accounts[0].address!=null&&e.accounts[0].role===On.WRITABLE&&e.accounts[1].address===Mk&&e.accounts[1].role===On.READONLY&&e.accounts[2].address!=null&&yi(e.accounts[2].role)}function Uk(e){return e.byteLength===4&&e[0]===4&&e[1]===0&&e[2]===0&&e[3]===0}function Fk(e){return"lifetimeConstraint"in e&&typeof e.lifetimeConstraint.nonce=="string"&&e.instructions[0]!=null&&$k(e.instructions[0])}function zk(e,t){if("feePayer"in t&&e===t.feePayer?.address&&Dk(t.feePayer))return t;const n={...t,feePayer:Object.freeze({address:e})};return Object.freeze(n),n}function Dk(e){return!!e&&"address"in e&&typeof e.address=="string"&&Object.keys(e).length===1}function Xb(e,t){return Jb([e],t)}function Jb(e,t){return Object.freeze({...t,instructions:Object.freeze([...t.instructions,...e])})}function jk(e,t){return qk([e],t)}function qk(e,t){return Object.freeze({...t,instructions:Object.freeze([...e,...t.instructions])})}var Vk=Fk;function Hk(e){const t=Object.values(e);if(t.length===0)throw new de(Av);return t.map(n=>n||new Uint8Array(64).fill(0))}function Gk(){return Hr(pi(qf(Qd(),64),{size:as()}),Hk)}function Kk(){return nr([["signatures",Gk()],["messageBytes",Qd()]])}function Wk(){return Sn(Ue([["signatures",Sr(wi(yo(),64),{size:jr()})],["messageBytes",yo()]]),Zk)}function Zk(e){const{messageBytes:t,signatures:n}=e,r=mi([Zb(),m2(Zn(),2),Sr(Ne(),{size:jr()})]),[s,i,o]=r.decode(t),a=o.slice(0,i);if(a.length!==n.length)throw new de(Sv,{numRequiredSignatures:i,signaturesLength:n.length,signerAddresses:a});const c={};return a.forEach((u,f)=>{const m=n[f];m.every(p=>p===0)?c[u]=null:c[u]=m}),{messageBytes:t,signatures:Object.freeze(c)}}function Qb(e){const t=Nk(e),n=Ek().encode(t),r=t.staticAccounts.slice(0,t.header.numSignerAccounts),s={};for(const o of r)s[o]=null;let i;return ok(e)?i={blockhash:e.lifetimeConstraint.blockhash,lastValidBlockHeight:e.lifetimeConstraint.lastValidBlockHeight}:i={nonce:e.lifetimeConstraint.nonce,nonceAccountAddress:e.instructions[0].accounts[0].address},Object.freeze({lifetimeConstraint:i,messageBytes:n,signatures:Object.freeze(s)})}function Yk(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])}async function Xk(e,t){let n,r;if(await Promise.all(e.map(async s=>{const i=await Cb(s.publicKey),o=t.signatures[i];if(o===void 0){r||(r=new Set),r.add(i);return}if(r)return;const a=await e0(s.privateKey,t.messageBytes);o!==null&&Yk(a,o)||(n||(n={}),n[i]=a)})),r&&r.size>0){const s=Object.keys(t.signatures);throw new de(Ev,{expectedAddresses:s,unexpectedAddresses:[...r]})}return n?Object.freeze({...t,signatures:Object.freeze({...t.signatures,...n})}):t}function n0(e){const t=Kk().encode(e);return DB().decode(t)}function r0(e){const t={};return e.forEach(n=>{if(!t[n.address])t[n.address]=n;else if(t[n.address]!==n)throw new de(vv,{address:n.address})}),Object.values(t)}function Ho(e){return"modifyAndSignTransactions"in e&&typeof e.modifyAndSignTransactions=="function"}function gi(e){return"signTransactions"in e&&typeof e.signTransactions=="function"}function ew(e){return"signAndSendTransactions"in e&&typeof e.signAndSendTransactions=="function"}function Mc(e){return gi(e)||Ho(e)||ew(e)}function Jk(e){return r0((e.accounts??[]).flatMap(t=>"signer"in t?t.signer:[]))}function Qk(e){return r0([...e.feePayer&&Mc(e.feePayer)?[e.feePayer]:[],...e.instructions.flatMap(Jk)])}async function tw(e){const t=await Cb(e.publicKey);return Object.freeze({address:t,keyPair:e,signMessages:r=>Promise.all(r.map(async s=>Object.freeze({[t]:await e0(e.privateKey,s.content)}))),signTransactions:r=>Promise.all(r.map(async s=>{const i=await Xk([e],s);return Object.freeze({[t]:i.signatures[t]})}))})}async function eC(e,t){return await tw(await MR(e,t))}async function tC(e,t){return await tw(await LR(e,t))}async function nC(e,t){const{partialSigners:n,modifyingSigners:r}=rC(r0(Qk(e).filter(Mc)),{identifySendingSigner:!1});return await oC(e,r,n,t)}function rC(e,t={}){const r=t.identifySendingSigner??!0?sC(e):null,s=e.filter(a=>a!==r&&(Ho(a)||gi(a))),i=iC(s),o=s.filter(gi).filter(a=>!i.includes(a));return Object.freeze({modifyingSigners:i,partialSigners:o,sendingSigner:r})}function sC(e){const t=e.filter(ew);if(t.length===0)return null;const n=t.filter(r=>!Ho(r)&&!gi(r));return n.length>0?n[0]:t[0]}function iC(e){const t=e.filter(Ho);if(t.length===0)return[];const n=t.filter(r=>!gi(r));return n.length>0?n:[t[0]]}async function oC(e,t=[],n=[],r){const s=Qb(e),i=await t.reduce(async(a,c)=>{const[u]=await c.modifyAndSignTransactions([await a],r);return Object.freeze(u)},Promise.resolve(s)),o=await Promise.all(n.map(async a=>{const[c]=await a.signTransactions([i],r);return c}));return Object.freeze({...i,signatures:Object.freeze(o.reduce((a,c)=>({...a,...c}),i.signatures??{}))})}var nw="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",rw=(e=>(e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen",e))(rw||{});function aC(){return AR(rw)}function cC(){return wi(yo(),36)}function Li(){return wi(yo(),64)}function uC(){return wR([["Uninitialized",Ys()],["TransferFeeConfig",Fe(Ue([["transferFeeConfigAuthority",Ne()],["withdrawWithheldAuthority",Ne()],["withheldAmount",Zt()],["olderTransferFee",em()],["newerTransferFee",em()]]),qe())],["TransferFeeAmount",Fe(Ue([["withheldAmount",Zt()]]),qe())],["MintCloseAuthority",Fe(Ue([["closeAuthority",Ne()]]),qe())],["ConfidentialTransferMint",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["autoApproveNewAccounts",Cn()],["auditorElgamalPubkey",Xt(Ne(),{prefix:null,noneValue:"zeroes"})]]),qe())],["ConfidentialTransferAccount",Fe(Ue([["approved",Cn()],["elgamalPubkey",Ne()],["pendingBalanceLow",Li()],["pendingBalanceHigh",Li()],["availableBalance",Li()],["decryptableAvailableBalance",cC()],["allowConfidentialCredits",Cn()],["allowNonConfidentialCredits",Cn()],["pendingBalanceCreditCounter",Zt()],["maximumPendingBalanceCreditCounter",Zt()],["expectedPendingBalanceCreditCounter",Zt()],["actualPendingBalanceCreditCounter",Zt()]]),qe())],["DefaultAccountState",Fe(Ue([["state",aC()]]),qe())],["ImmutableOwner",Fe(Ue([]),qe())],["MemoTransfer",Fe(Ue([["requireIncomingTransferMemos",Cn()]]),qe())],["NonTransferable",Fe(Ue([]),qe())],["InterestBearingConfig",Fe(Ue([["rateAuthority",Ne()],["initializationTimestamp",Zt()],["preUpdateAverageRate",eh()],["lastUpdateTimestamp",Zt()],["currentRate",eh()]]),qe())],["CpiGuard",Fe(Ue([["lockCpi",Cn()]]),qe())],["PermanentDelegate",Fe(Ue([["delegate",Ne()]]),qe())],["NonTransferableAccount",Fe(Ue([]),qe())],["TransferHook",Fe(Ue([["authority",Ne()],["programId",Ne()]]),qe())],["TransferHookAccount",Fe(Ue([["transferring",Cn()]]),qe())],["ConfidentialTransferFee",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["elgamalPubkey",Ne()],["harvestToMintEnabled",Cn()],["withheldAmount",Li()]]),qe())],["ConfidentialTransferFeeAmount",Fe(Ue([["withheldAmount",Li()]]),qe())],["MetadataPointer",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["metadataAddress",Xt(Ne(),{prefix:null,noneValue:"zeroes"})]]),qe())],["TokenMetadata",Fe(Ue([["updateAuthority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["mint",Ne()],["name",Fe(Oi(),dr())],["symbol",Fe(Oi(),dr())],["uri",Fe(Oi(),dr())],["additionalMetadata",IR(Fe(Oi(),dr()),Fe(Oi(),dr()))]]),qe())],["GroupPointer",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["groupAddress",Xt(Ne(),{prefix:null,noneValue:"zeroes"})]]),qe())],["TokenGroup",Fe(Ue([["updateAuthority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["mint",Ne()],["size",Zt()],["maxSize",Zt()]]),qe())],["GroupMemberPointer",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["memberAddress",Xt(Ne(),{prefix:null,noneValue:"zeroes"})]]),qe())],["TokenGroupMember",Fe(Ue([["mint",Ne()],["group",Ne()],["memberNumber",Zt()]]),qe())],["ConfidentialMintBurn",Ys()],["ScaledUiAmountConfig",Fe(Ue([["authority",Ne()],["multiplier",Q0()],["newMultiplierEffectiveTimestamp",Zt()],["newMultiplier",Q0()]]),qe())],["PausableConfig",Fe(Ue([["authority",Xt(Ne(),{prefix:null,noneValue:"zeroes"})],["paused",Cn()]]),qe())],["PausableAccount",Ys()]],{size:qe()})}function em(){return Ue([["epoch",Zt()],["maximumFee",Zt()],["transferFeeBasisPoints",qe()]])}function lC(){return Ue([["mintAuthority",Xt(Ne(),{prefix:dr(),noneValue:"zeroes"})],["supply",Zt()],["decimals",Zn()],["isInitialized",Cn()],["freezeAuthority",Xt(Ne(),{prefix:dr(),noneValue:"zeroes"})],["extensions",Xt(SR(Sr(uC(),{size:"remainder"}),[Pb(p2(Qt(),83).encode(1))]),{prefix:null})]])}function fC(e){return VB(e,lC())}async function dC(e,t,n){const r=await hC(e,t,n);return KB(r),r}async function hC(e,t,n){const r=await Rb(e,t,n);return fC(r)}var pC="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",s0="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb";function mC(e){if(!e)throw new Error("Expected a Address.");return typeof e=="object"&&"address"in e?e.address:Array.isArray(e)?e[0]:e}function sw(e,t){return n=>{if(!n.value)return Object.freeze({address:e,role:On.READONLY});const r=n.isWritable?On.WRITABLE:On.READONLY;return Object.freeze({address:mC(n.value),role:tm(n.value)?CR(r):r,...tm(n.value)?{signer:n.value}:{}})}}function tm(e){return!!e&&typeof e=="object"&&"address"in e&&Mc(e)}async function If(e,t={}){const{programAddress:n="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=t;return await dR({programAddress:n,seeds:[Zs().encode(e.owner),Zs().encode(e.tokenProgram),Zs().encode(e.mint)]})}var yC=0;function gC(){return Hr(nr([["discriminator",Qt()]]),e=>({...e,discriminator:yC}))}function bC(e,t){const n=t?.programAddress??pC,s={payer:{value:e.payer??null,isWritable:!0},ata:{value:e.ata??null,isWritable:!0},owner:{value:e.owner??null,isWritable:!1},mint:{value:e.mint??null,isWritable:!1},systemProgram:{value:e.systemProgram??null,isWritable:!1},tokenProgram:{value:e.tokenProgram??null,isWritable:!1}};s.tokenProgram.value||(s.tokenProgram.value="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),s.systemProgram.value||(s.systemProgram.value="11111111111111111111111111111111");const i=sw(n);return{accounts:[i(s.payer),i(s.ata),i(s.owner),i(s.mint),i(s.systemProgram),i(s.tokenProgram)],programAddress:n,data:gC().encode({})}}var wC=12;function vC(){return Hr(nr([["discriminator",Qt()],["amount",Hf()],["decimals",Qt()]]),e=>({...e,discriminator:wC}))}function xC(e,t){const n=t?.programAddress??s0,s={source:{value:e.source??null,isWritable:!0},mint:{value:e.mint??null,isWritable:!1},destination:{value:e.destination??null,isWritable:!0},authority:{value:e.authority??null,isWritable:!1}},i={...e},o=(i.multiSigners??[]).map(u=>({address:u.address,role:On.READONLY_SIGNER,signer:u})),a=sw(n);return{accounts:[a(s.source),a(s.mint),a(s.destination),a(s.authority),...o],programAddress:n,data:vC().encode(i)}}Ly([He().transform(e=>e.replace(/[^0-9.-]+/g,"")),An()]).pipe(Z_.number().min(1e-4).max(999999999));var Lc=er(["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","solana-devnet","solana","sei","sei-testnet","polygon","polygon-amoy","peaq"]),i0=["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","sei","sei-testnet","polygon","polygon-amoy","peaq"],Tf=new Map([["abstract",2741],["abstract-testnet",11124],["base-sepolia",84532],["base",8453],["avalanche-fuji",43113],["avalanche",43114],["iotex",4689],["sei",1329],["sei-testnet",1328],["polygon",137],["polygon-amoy",80002],["peaq",3338]]),$c=["solana-devnet","solana"],nm=new Map([["solana-devnet",103],["solana",101]]);Object.fromEntries([...i0,...$c].map(e=>[Tf.get(e),e]));function o0(e){const t=u0(e);return AT({chain:t,transport:pb()}).extend(Ha)}function _C(){return o0("base-sepolia")}function EC(){return o0("avalanche-fuji")}function a0(e,t){const n=u0(e),r=zT({chain:n,transport:pb(),account:BB(t)});return iw(n)?r.extend(Ha).extend(OB()):r.extend(Ha)}function AC(e){return a0("base-sepolia",e)}function SC(e){return a0("avalanche-fuji",e)}function Uc(e){return typeof e=="object"&&e!==null&&"chain"in e&&"transport"in e}function c0(e){const t=e;return typeof e=="object"&&e!==null&&typeof t.address=="string"&&typeof t.type=="string"&&typeof t.sign=="function"&&typeof t.signMessage=="function"&&typeof t.signTypedData=="function"&&typeof t.signTransaction=="function"}function u0(e){if(!e)throw new Error("NETWORK environment variable is not set");switch(e){case"abstract":return XT;case"abstract-testnet":return JT;case"base":return wb;case"base-sepolia":return vb;case"avalanche":return oB;case"avalanche-fuji":return aB;case"sei":return hB;case"sei-testnet":return pB;case"polygon":return fB;case"polygon-amoy":return dB;case"peaq":return lB;case"iotex":return cB;case"iotex-testnet":return uB;default:throw new Error(`Unsupported network: ${e}`)}}var IC=new Set([2741,11124]);function iw(e){return IC.has(e.id)}var TC="https://api.devnet.solana.com",BC="https://api.mainnet-beta.solana.com",RC="wss://api.devnet.solana.com",kC="wss://api.mainnet-beta.solana.com";function ow(e){return qb(e||TC)}function aw(e){return qb(e||BC)}function Go(e,t){if(e==="solana-devnet")return ow(t);if(e==="solana")return aw(t);throw new Error("Invalid network")}function CC(e,t){if(e==="solana-devnet")return Wp(t?rm(t):RC);if(e==="solana")return Wp(t?rm(t):kC);throw new Error("Invalid network")}function rm(e){return e.startsWith("http")?e.replace("http","ws"):e}function PC(e){if(!$c.find(t=>t===e))throw new Error(`Unsupported SVM network: ${e}`);return Go(e)}async function NC(e){const t=_B.decode(e);if(t.length===64)return await eC(t);if(t.length===32)return await tC(t);throw new Error(`Unexpected key length: ${t.length}. Expected 32 or 64 bytes.`)}function cw(e){return typeof e=="object"&&e!==null&&Mc(e)}function OC(e){return Uc(e)||c0(e)}function MC(e){return cw(e)}function sm(e){return"evm"in e&&"svm"in e}var LC={};nd(LC,{authorizationPrimaryType:()=>$C,authorizationTypes:()=>uw,config:()=>w_,createClientAvalancheFuji:()=>EC,createClientSepolia:()=>_C,createConnectedClient:()=>o0,createSigner:()=>a0,createSignerAvalancheFuji:()=>SC,createSignerSepolia:()=>AC,getChainFromNetwork:()=>u0,isAccount:()=>c0,isSignerWallet:()=>Uc,isZkStackChain:()=>iw,usdcABI:()=>v_});var uw={TransferWithAuthorization:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"validAfter",type:"uint256"},{name:"validBefore",type:"uint256"},{name:"nonce",type:"bytes32"}]},$C="TransferWithAuthorization",UC={};nd(UC,{SvmAddressRegex:()=>l0});var l0=/^[1-9A-HJ-NP-Za-km-z]{32,44}$/,FC=/^[A-Za-z0-9+/]*={0,2}$/;function im(e){return typeof globalThis<"u"&&typeof globalThis.btoa=="function"?globalThis.btoa(e):Buffer.from(e).toString("base64")}function zC(e){return typeof globalThis<"u"&&typeof globalThis.atob=="function"?globalThis.atob(e):Buffer.from(e,"base64").toString("utf-8")}var DC=18,Bf=/^0x[0-9a-fA-F]{40}$/,f0=/^0x[a-fA-F0-9]{40}|[A-Za-z0-9][A-Za-z0-9-]{0,34}[A-Za-z0-9]$/,jC=/^0x[0-9a-fA-F]{64}$/,qC=/^0x[0-9a-fA-F]+$/,d0=["exact"],Ko=[1],h0=["insufficient_funds","invalid_exact_evm_payload_authorization_valid_after","invalid_exact_evm_payload_authorization_valid_before","invalid_exact_evm_payload_authorization_value","invalid_exact_evm_payload_signature","invalid_exact_evm_payload_recipient_mismatch","invalid_exact_svm_payload_transaction","invalid_exact_svm_payload_transaction_amount_mismatch","invalid_exact_svm_payload_transaction_create_ata_instruction","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_payee","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_asset","invalid_exact_svm_payload_transaction_instructions","invalid_exact_svm_payload_transaction_instructions_length","invalid_exact_svm_payload_transaction_instructions_compute_limit_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction_too_high","invalid_exact_svm_payload_transaction_instruction_not_spl_token_transfer_checked","invalid_exact_svm_payload_transaction_instruction_not_token_2022_transfer_checked","invalid_exact_svm_payload_transaction_fee_payer_included_in_instruction_accounts","invalid_exact_svm_payload_transaction_fee_payer_transferring_funds","invalid_exact_svm_payload_transaction_not_a_transfer_instruction","invalid_exact_svm_payload_transaction_receiver_ata_not_found","invalid_exact_svm_payload_transaction_sender_ata_not_found","invalid_exact_svm_payload_transaction_simulation_failed","invalid_exact_svm_payload_transaction_transfer_to_incorrect_ata","invalid_network","invalid_payload","invalid_payment_requirements","invalid_scheme","invalid_payment","payment_expired","unsupported_scheme","invalid_x402_version","invalid_transaction_state","invalid_x402_version","settle_exact_svm_block_height_exceeded","settle_exact_svm_transaction_confirmation_timed_out","unsupported_scheme","unexpected_settle_error","unexpected_verify_error"],da=e=>Number.isInteger(Number(e))&&Number(e)>=0,VC=e=>t=>t.length<=e,p0=He().regex(Bf).or(He().regex(l0)),HC=He().regex(f0).or(He().regex(l0)),Wo=Ft({scheme:er(d0),network:Lc,maxAmountRequired:He().refine(da),resource:He().url(),description:He(),mimeType:He(),outputSchema:ns(oi()).optional(),payTo:p0,maxTimeoutSeconds:An().int(),asset:HC,extra:ns(oi()).optional()}),GC=Ft({from:He().regex(Bf),to:He().regex(Bf),value:He().refine(da).refine(VC(DC)),validAfter:He().refine(da),validBefore:He().refine(da),nonce:He().regex(jC)}),KC=Ft({signature:He().regex(qC),authorization:GC}),WC=Ft({transaction:He().regex(FC)}),lw=Ft({x402Version:An().refine(e=>Ko.includes(e)),scheme:er(d0),network:Lc,payload:Ly([KC,WC])});Ft({x402Version:An().refine(e=>Ko.includes(e)),error:er(h0).optional(),accepts:oc(Wo).optional(),payer:He().regex(f0).optional()});var ZC=er(["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"]),YC=Ft({type:W_("http"),method:ZC,queryParams:ns(He(),He()).optional(),bodyType:er(["json","form-data","multipart-form-data","text","binary"]).optional(),bodyFields:ns(He(),oi()).optional(),headerFields:ns(He(),oi()).optional()});K_("type",[YC]);var XC=Ft({resource:He(),type:er(["http"]),x402Version:An().refine(e=>Ko.includes(e)),accepts:oc(Wo),lastUpdated:G_(),metadata:ns(oi()).optional()});Ft({paymentPayload:lw,paymentRequirements:Wo});Ft({paymentPayload:lw,paymentRequirements:Wo});Ft({isValid:My(),invalidReason:er(h0).optional(),payer:p0.optional()});Ft({success:My(),errorReason:er(h0).optional(),payer:p0.optional(),transaction:He().regex(f0),network:Lc});Ft({type:He().optional(),limit:An().optional(),offset:An().optional()});Ft({x402Version:An().refine(e=>Ko.includes(e)),items:oc(XC),pagination:Ft({limit:An(),offset:An(),total:An()})});var JC=Ft({x402Version:An().refine(e=>Ko.includes(e)),scheme:er(d0),network:Lc,extra:ns(oi()).optional()});Ft({kinds:oc(JC)});function QC(e){if(Tf.has(e))return Tf.get(e);if(nm.has(e))return nm.get(e);throw new Error(`Unsupported network: ${e}`)}function om(e){const t=zC(e);return JSON.parse(t)}var fw={};nd(fw,{createDevnetRpcClient:()=>ow,createMainnetRpcClient:()=>aw,createSignerFromBase58:()=>NC,createSvmConnectedClient:()=>PC,decodeTransactionFromPayload:()=>e9,getRpcClient:()=>Go,getRpcSubscriptions:()=>CC,getTokenPayerFromTransaction:()=>t9,isSignerWallet:()=>cw,signAndSimulateTransaction:()=>n9,signTransactionWithSigner:()=>dw});function e9(e){try{const n=Bb().encode(e.transaction);return Wk().decode(n)}catch(t){throw console.error("error",t),new Error("invalid_exact_svm_payload_transaction")}}function t9(e){const t=Ak().decode(e.messageBytes),n=t.staticAccounts??[],r=t.instructions??[];for(const s of r){const i=s.programAddressIndex,o=n[i].toString();if(o===nw.toString()||o===s0.toString()){const a=s.accountIndices??[];if(a.length>=4){const c=a[3],u=n[c].toString();if(u)return u}}}return""}async function n9(e,t,n){const r=await dw(e,t),s=n0(r),i={sigVerify:!0,replaceRecentBlockhash:!1,commitment:"confirmed",encoding:"base64",accounts:void 0,innerInstructions:void 0,minContextSlot:void 0};return await n.simulateTransaction(s,i).send()}async function dw(e,t){if(Ho(e)){const[n]=await e.modifyAndSignTransactions([t]);if(!n)throw new Error("transaction_signer_failed_to_return_transaction");return n}if(gi(e)){const[n]=await e.signTransactions([t]);if(!n)throw new Error("transaction_signer_failed_to_return_signatures");return r9(t,n)}throw new Error("transaction_signer_must_support_offline_signing")}function r9(e,t){return Object.freeze({...e,signatures:Object.freeze({...e.signatures,...t})})}Ft({paymentHeader:He(),paymentRequirements:Wo});var m0="ComputeBudget111111111111111111111111111111";function s9(e){const t="data"in e?e.data:e;if(Zr(t,Qt().encode(0),0))return 0;if(Zr(t,Qt().encode(1),0))return 1;if(Zr(t,Qt().encode(2),0))return 2;if(Zr(t,Qt().encode(3),0))return 3;if(Zr(t,Qt().encode(4),0))return 4;throw new Error("The provided instruction could not be identified as a computeBudget instruction.")}var i9=2;function o9(){return Hr(nr([["discriminator",Qt()],["units",Wm()]]),e=>({...e,discriminator:i9}))}function Rf(e,t){const n=m0,r={...e};return{programAddress:n,data:o9().encode(r)}}var a9=3;function c9(){return Hr(nr([["discriminator",Qt()],["microLamports",Hf()]]),e=>({...e,discriminator:a9}))}function u9(e,t){const n=m0,r={...e};return{programAddress:n,data:c9().encode(r)}}var l9=14e5;function f9(e){const t=d9(e);if(t<0)return null;const n=dr().decode(e.instructions[t].data,1);return{index:t,units:n}}function d9(e){return e.instructions.findIndex(h9)}function h9(e){return e.programAddress===m0&&s9(e.data)===2}function p9(e,t){const n=u=>e,r=f9(t);if(!r)return Xb(Rf({units:n()}),t);const{index:s,units:i}=r,o=n();if(o===i)return t;const a=Rf({units:o}),c=[...t.instructions];return c.splice(s,1,a),Object.freeze({...t,instructions:c})}var m9={blockhash:"11111111111111111111111111111111",lastValidBlockHeight:0n};function y9(e){return"lifetimeConstraint"in e?e:g9(e)}function g9(e){return Kb(m9,e)}async function b9({transactionMessage:e,...t}){const n=!Vk(e),r=Ir(e,y9,s=>p9(l9,s),Qb);return await w9({transaction:r,replaceRecentBlockhash:n,...t})}async function w9({abortSignal:e,rpc:t,transaction:n,...r}){const s=n0(n);try{const{value:{err:i,unitsConsumed:o}}=await t.simulateTransaction(s,{...r,encoding:"base64",sigVerify:!1}).send({abortSignal:e});if(o==null)throw new de(X0);const a=o>4294967295n?4294967295:Number(o);if(i)throw new de(J0,{cause:i,unitsConsumed:a});return a}catch(i){throw zf(i,J0)?i:new de(X0,{cause:i})}}function v9({rpc:e}){return async function(n,r){return await b9({...r,rpc:e,transactionMessage:n})}}function x9(e,t){return Xb(u9({microLamports:e}),t)}function hw(e){let t;if(i0.includes(e.network)){const n=e.payload;return t={...e,payload:{...n,authorization:Object.fromEntries(Object.entries(n.authorization).map(([r,s])=>[r,typeof s=="bigint"?s.toString():s]))}},im(JSON.stringify(t))}if($c.includes(e.network))return t={...e,payload:e.payload},im(JSON.stringify(t));throw new Error("Invalid network")}async function _9(e,{from:t,to:n,value:r,validAfter:s,validBefore:i,nonce:o},{asset:a,network:c,extra:u}){const f=QC(c),m=u?.name,p=u?.version,b={types:uw,domain:{name:m,version:p,chainId:f,verifyingContract:Vs(a)},primaryType:"TransferWithAuthorization",message:{from:Vs(t),to:Vs(n),value:r,validAfter:s,validBefore:i,nonce:o}};if(Uc(e))return{signature:await e.signTypedData(b)};if(c0(e)&&e.signTypedData)return{signature:await e.signTypedData(b)};throw new Error("Invalid wallet client provided does not support signTypedData")}function E9(){const e=typeof globalThis.crypto<"u"&&typeof globalThis.crypto.getRandomValues=="function"?globalThis.crypto:b_("crypto").webcrypto;return Oe(e.getRandomValues(new Uint8Array(32)))}function A9(e,t,n){const r=E9(),s=BigInt(Math.floor(Date.now()/1e3)-600).toString(),i=BigInt(Math.floor(Date.now()/1e3+n.maxTimeoutSeconds)).toString();return{x402Version:t,scheme:n.scheme,network:n.network,payload:{signature:void 0,authorization:{from:e,to:n.payTo,value:n.maxAmountRequired,validAfter:s.toString(),validBefore:i.toString(),nonce:r}}}}async function S9(e,t,n){const{signature:r}=await _9(e,n.payload.authorization,t);return{...n,payload:{...n.payload,signature:r}}}async function I9(e,t,n){const r=Uc(e)?e.account.address:e.address,s=A9(r,t,n);return S9(e,n,s)}async function T9(e,t,n){const r=await I9(e,t,n);return hw(r)}async function B9(e,t,n,r){const s=await R9(e,t,n,r);return hw(s)}async function R9(e,t,n,r){const s=await k9(e,n,r),i=await nC(s),o=n0(i);return{scheme:n.scheme,network:n.network,x402Version:t,payload:{transaction:o}}}async function k9(e,t,n){const r=Go(t.network,n?.svmConfig?.rpcUrl),s=await C9(e,t,n),i=t.extra?.feePayer,o=Ir(Ok({version:0}),m=>x9(1,m),m=>zk(i,m),m=>Jb(s,m)),c=await v9({rpc:r})(o),{value:u}=await r.getLatestBlockhash().send();return Ir(o,m=>jk(Rf({units:c}),m),m=>Kb(u,m))}async function C9(e,t,n){const{asset:r}=t,s=Go(t.network,n?.svmConfig?.rpcUrl),i=await dC(s,r),o=i.programAddress;if(o.toString()!==nw.toString()&&o.toString()!==s0.toString())throw new Error("Asset was not created by a known token program");const a=[],c=await P9(t,o,n);c&&a.push(c);const u=await N9(e,t,i.data.decimals,o);return a.push(u),a}async function P9(e,t,n){const{asset:r,payTo:s,extra:i}=e;if(!i?.feePayer)throw new Error("feePayer is required in paymentRequirements.extra in order to set the facilitator as the fee payer for the create associated token account instruction");const[a]=await If({mint:r,owner:s,tokenProgram:t}),c=Go(e.network,n?.svmConfig?.rpcUrl);if(!(await Rb(c,a)).exists)return bC({payer:e.extra?.feePayer,ata:a,owner:s,mint:r,tokenProgram:t})}async function N9(e,t,n,r){const{asset:s,maxAmountRequired:i,payTo:o}=t,[a]=await If({mint:s,owner:e.address,tokenProgram:r}),[c]=await If({mint:s,owner:o,tokenProgram:r});return xC({source:a,mint:s,destination:c,authority:e,amount:BigInt(i),decimals:n},{programAddress:r})}async function O9(e,t,n,r){if(n.scheme==="exact"){if(i0.includes(n.network)){const s=sm(e)?e.evm:e;if(!OC(s))throw new Error("Invalid evm wallet client provided");return await T9(s,t,n)}if($c.includes(n.network)){const s=sm(e)?e.svm:e;if(!MC(s))throw new Error("Invalid svm wallet client provided");return await B9(s,t,n,r)}throw new Error("Unsupported network")}throw new Error("Unsupported scheme")}const M9="solscan.io",am="http://localhost:3001",L9="https://mainnet.helius-rpc.com/?api-key=d94f96c1-6be8-42be-90c4-311dec83c9f7",$9="[226,39,208,92,40,59,186,218,236,162,191,198,207,155,247,54,31,191,28,109,138,231,194,187,0,62,24,10,99,81,177,186,82,69,230,132,106,119,127,167,101,2,45,122,228,61,72,147,106,15,23,232,153,252,167,148,162,124,89,91,27,207,70,177]";let yl=null,ha=null,pa=null;(async()=>{try{const e=JSON.parse($9);yl=zi.fromSecretKey(new Uint8Array(e)),pa=new h_(L9,"confirmed");const t=y_.encode(yl.secretKey);ha=await fw.createSignerFromBase58(t),console.log("[vizor] Wallet loaded:",yl.publicKey.toBase58())}catch(e){console.error("[vizor] Failed to load wallet:",e)}})();function gl(e,t){chrome.tabs.sendMessage(e,{type:"URL_CHANGED",url:t}).catch(()=>{})}function cm(e){return!!e&&e.includes("://solscan.io/")}if(chrome.webNavigation?.onCommitted){const e={url:[{hostEquals:M9}]},t=n=>gl(n.tabId,n.url);chrome.webNavigation.onCommitted.addListener(t,e),chrome.webNavigation.onHistoryStateUpdated.addListener(t,e)}else console.warn("[vizor] webNavigation unavailable; using tabs fallback"),chrome.tabs.onUpdated.addListener((e,t,n)=>{const r=t.url??n.url;(t.status==="complete"||t.url)&&cm(r)&&gl(e,r)}),chrome.tabs.onActivated.addListener(async e=>{try{const t=await chrome.tabs.get(e.tabId);cm(t.url)&&gl(e.tabId,t.url)}catch{}});function U9(e){if(e?.text&&typeof e.text=="string")return e.text;const t=[];if(e?.explainer&&t.push(String(e.explainer)),Array.isArray(e?.keypoints)&&e.keypoints.length){t.push("");for(const n of e.keypoints)t.push(` ${String(n)}`)}return e?.when&&(t.push(""),t.push(String(e.when))),t.join(`
`).trim()||"No explanation available."}async function um(e,t={}){let n=await fetch(e,t);if(n.status===402){if(console.log("[vizor] Got 402, signer available:",!!ha,"connection available:",!!pa),!ha||!pa)return console.error("[vizor] Wallet not initialized yet. Please wait for wallet to load."),n;try{const r=await n.json();if(console.log("[vizor] Raw payment requirements:",JSON.stringify(r,null,2)),!r.accepts||!Array.isArray(r.accepts)||r.accepts.length===0)throw new Error("No payment options in accepts array");const s=r.accepts[0];console.log("[vizor] Selected payment option:",JSON.stringify(s,null,2)),console.log("[vizor] Creating payment header...");const i=await O9(ha,1,s,{svmConfig:{rpcUrl:pa.rpcEndpoint}});console.log("[vizor] Payment header created, length:",i.length),console.log("[vizor] Retrying request with payment..."),n=await fetch(e,{...t,headers:{...t.headers,"x-payment":i}}),console.log("[vizor] Retry response status:",n.status)}catch(r){throw console.error("[vizor] Payment failed:",r),r}}return n}chrome.runtime.onMessage.addListener((e,t,n)=>e?.type==="EXPLAIN_TX"?((async()=>{try{const r=String(e.signature||""),s=String(e.tz||Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC");if(!r){n({ok:!1,error:"Missing signature"});return}const i=await um(`${am}/api/transactions/explain`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({signature:r,tz:s})});if(!i.ok){n({ok:!1,error:`API ${i.status}`});return}const o=await i.json(),a=U9(o),c=i.headers.get("x-payment-response");if(c){const u=om(c);console.log("[vizor] Payment:",u)}n({ok:!0,text:a})}catch(r){n({ok:!1,error:r?.message||String(r)})}})(),!0):e?.type==="EXPLAIN_ACCOUNT"?((async()=>{try{const r=String(e.address||""),s=String(e.tz||Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC");if(!r){n({ok:!1,error:"Missing address"});return}const i=await um(`${am}/api/wallets/insights`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({address:r,tz:s})});if(!i.ok){n({ok:!1,error:`API ${i.status}`});return}const o=await i.json(),a=i.headers.get("x-payment-response");if(a){const c=om(a);console.log("[vizor] Payment:",c)}n({ok:!0,data:o})}catch(r){n({ok:!1,error:r?.message||String(r)})}})(),!0):!1);export{ee as B,Di as H,x8 as a,Tn as b,vc as c,LA as d,Gr as e,$n as f,fd as g,No as i,Sc as l,Mt as s};
