var Yo=Object.defineProperty;var Xo=(n,t,e)=>t in n?Yo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var te=(n,t,e)=>Xo(n,typeof t!="symbol"?t+"":t,e);function nn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gi(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var Tn={},br={},Ki;function Jo(){if(Ki)return br;Ki=1,br.byteLength=u,br.toByteArray=_,br.fromByteArray=k;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function a(x){var M=x.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=x.indexOf("=");I===-1&&(I=M);var L=I===M?0:4-I%4;return[I,L]}function u(x){var M=a(x),I=M[0],L=M[1];return(I+L)*3/4-L}function p(x,M,I){return(M+I)*3/4-I}function _(x){var M,I=a(x),L=I[0],P=I[1],G=new e(p(x,L,P)),q=0,X=P>0?L-4:L,Y;for(Y=0;Y<X;Y+=4)M=t[x.charCodeAt(Y)]<<18|t[x.charCodeAt(Y+1)]<<12|t[x.charCodeAt(Y+2)]<<6|t[x.charCodeAt(Y+3)],G[q++]=M>>16&255,G[q++]=M>>8&255,G[q++]=M&255;return P===2&&(M=t[x.charCodeAt(Y)]<<2|t[x.charCodeAt(Y+1)]>>4,G[q++]=M&255),P===1&&(M=t[x.charCodeAt(Y)]<<10|t[x.charCodeAt(Y+1)]<<4|t[x.charCodeAt(Y+2)]>>2,G[q++]=M>>8&255,G[q++]=M&255),G}function R(x){return n[x>>18&63]+n[x>>12&63]+n[x>>6&63]+n[x&63]}function O(x,M,I){for(var L,P=[],G=M;G<I;G+=3)L=(x[G]<<16&16711680)+(x[G+1]<<8&65280)+(x[G+2]&255),P.push(R(L));return P.join("")}function k(x){for(var M,I=x.length,L=I%3,P=[],G=16383,q=0,X=I-L;q<X;q+=G)P.push(O(x,q,q+G>X?X:q+G));return L===1?(M=x[I-1],P.push(n[M>>2]+n[M<<4&63]+"==")):L===2&&(M=(x[I-2]<<8)+x[I-1],P.push(n[M>>10]+n[M>>4&63]+n[M<<2&63]+"=")),P.join("")}return br}var Tr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Hi;function Qo(){return Hi||(Hi=1,Tr.read=function(n,t,e,r,s){var i,a,u=s*8-r-1,p=(1<<u)-1,_=p>>1,R=-7,O=e?s-1:0,k=e?-1:1,x=n[t+O];for(O+=k,i=x&(1<<-R)-1,x>>=-R,R+=u;R>0;i=i*256+n[t+O],O+=k,R-=8);for(a=i&(1<<-R)-1,i>>=-R,R+=r;R>0;a=a*256+n[t+O],O+=k,R-=8);if(i===0)i=1-_;else{if(i===p)return a?NaN:(x?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-_}return(x?-1:1)*a*Math.pow(2,i-r)},Tr.write=function(n,t,e,r,s,i){var a,u,p,_=i*8-s-1,R=(1<<_)-1,O=R>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:i-1,M=r?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=R):(a=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-a))<1&&(a--,p*=2),a+O>=1?t+=k/p:t+=k*Math.pow(2,1-O),t*p>=2&&(a++,p/=2),a+O>=R?(u=0,a=R):a+O>=1?(u=(t*p-1)*Math.pow(2,s),a=a+O):(u=t*Math.pow(2,O-1)*Math.pow(2,s),a=0));s>=8;n[e+x]=u&255,x+=M,u/=256,s-=8);for(a=a<<s|u,_+=s;_>0;n[e+x]=a&255,x+=M,a/=256,_-=8);n[e+x-M]|=I*128}),Tr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Vi;function mi(){return Vi||(Vi=1,(function(n){const t=Jo(),e=Qo(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=G,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const y=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(y,l),y.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function a(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const l=new Uint8Array(y);return Object.setPrototypeOf(l,u.prototype),l}function u(y,l,d){if(typeof y=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(y)}return p(y,l,d)}u.poolSize=8192;function p(y,l,d){if(typeof y=="string")return k(y,l);if(ArrayBuffer.isView(y))return M(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(me(y,ArrayBuffer)||y&&me(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(y,SharedArrayBuffer)||y&&me(y.buffer,SharedArrayBuffer)))return I(y,l,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=y.valueOf&&y.valueOf();if(v!=null&&v!==y)return u.from(v,l,d);const F=L(y);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return u.from(y[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}u.from=function(y,l,d){return p(y,l,d)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function _(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function R(y,l,d){return _(y),y<=0?a(y):l!==void 0?typeof d=="string"?a(y).fill(l,d):a(y).fill(l):a(y)}u.alloc=function(y,l,d){return R(y,l,d)};function O(y){return _(y),a(y<0?0:P(y)|0)}u.allocUnsafe=function(y){return O(y)},u.allocUnsafeSlow=function(y){return O(y)};function k(y,l){if((typeof l!="string"||l==="")&&(l="utf8"),!u.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const d=q(y,l)|0;let v=a(d);const F=v.write(y,l);return F!==d&&(v=v.slice(0,F)),v}function x(y){const l=y.length<0?0:P(y.length)|0,d=a(l);for(let v=0;v<l;v+=1)d[v]=y[v]&255;return d}function M(y){if(me(y,Uint8Array)){const l=new Uint8Array(y);return I(l.buffer,l.byteOffset,l.byteLength)}return x(y)}function I(y,l,d){if(l<0||y.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');let v;return l===void 0&&d===void 0?v=new Uint8Array(y):d===void 0?v=new Uint8Array(y,l):v=new Uint8Array(y,l,d),Object.setPrototypeOf(v,u.prototype),v}function L(y){if(u.isBuffer(y)){const l=P(y.length)|0,d=a(l);return d.length===0||y.copy(d,0,0,l),d}if(y.length!==void 0)return typeof y.length!="number"||Rt(y.length)?a(0):x(y);if(y.type==="Buffer"&&Array.isArray(y.data))return x(y.data)}function P(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function G(y){return+y!=y&&(y=0),u.alloc(+y)}u.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==u.prototype},u.compare=function(l,d){if(me(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),me(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(l)||!u.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===d)return 0;let v=l.length,F=d.length;for(let z=0,j=Math.min(v,F);z<j;++z)if(l[z]!==d[z]){v=l[z],F=d[z];break}return v<F?-1:F<v?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,d){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);let v;if(d===void 0)for(d=0,v=0;v<l.length;++v)d+=l[v].length;const F=u.allocUnsafe(d);let z=0;for(v=0;v<l.length;++v){let j=l[v];if(me(j,Uint8Array))z+j.length>F.length?(u.isBuffer(j)||(j=u.from(j)),j.copy(F,z)):Uint8Array.prototype.set.call(F,j,z);else if(u.isBuffer(j))j.copy(F,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=j.length}return F};function q(y,l){if(u.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||me(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const d=y.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&d===0)return 0;let F=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return At(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Bt(y).length;default:if(F)return v?-1:At(y).length;l=(""+l).toLowerCase(),F=!0}}u.byteLength=q;function X(y,l,d){let v=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(y||(y="utf8");;)switch(y){case"hex":return B(this,l,d);case"utf8":case"utf-8":return o(this,l,d);case"ascii":return E(this,l,d);case"latin1":case"binary":return S(this,l,d);case"base64":return m(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,l,d);default:if(v)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),v=!0}}u.prototype._isBuffer=!0;function Y(y,l,d){const v=y[l];y[l]=y[d],y[d]=v}u.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<l;d+=2)Y(this,d,d+1);return this},u.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<l;d+=4)Y(this,d,d+3),Y(this,d+1,d+2);return this},u.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<l;d+=8)Y(this,d,d+7),Y(this,d+1,d+6),Y(this,d+2,d+5),Y(this,d+3,d+4);return this},u.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?o(this,0,l):X.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:u.compare(this,l)===0},u.prototype.inspect=function(){let l="";const d=n.INSPECT_MAX_BYTES;return l=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(l+=" ... "),"<Buffer "+l+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(l,d,v,F,z){if(me(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),!u.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(d===void 0&&(d=0),v===void 0&&(v=l?l.length:0),F===void 0&&(F=0),z===void 0&&(z=this.length),d<0||v>l.length||F<0||z>this.length)throw new RangeError("out of range index");if(F>=z&&d>=v)return 0;if(F>=z)return-1;if(d>=v)return 1;if(d>>>=0,v>>>=0,F>>>=0,z>>>=0,this===l)return 0;let j=z-F,dt=v-d;const ht=Math.min(j,dt),lt=this.slice(F,z),xt=l.slice(d,v);for(let ft=0;ft<ht;++ft)if(lt[ft]!==xt[ft]){j=lt[ft],dt=xt[ft];break}return j<dt?-1:dt<j?1:0};function Q(y,l,d,v,F){if(y.length===0)return-1;if(typeof d=="string"?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Rt(d)&&(d=F?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(F)return-1;d=y.length-1}else if(d<0)if(F)d=0;else return-1;if(typeof l=="string"&&(l=u.from(l,v)),u.isBuffer(l))return l.length===0?-1:at(y,l,d,v,F);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(y,l,d):Uint8Array.prototype.lastIndexOf.call(y,l,d):at(y,[l],d,v,F);throw new TypeError("val must be string, number or Buffer")}function at(y,l,d,v,F){let z=1,j=y.length,dt=l.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(y.length<2||l.length<2)return-1;z=2,j/=2,dt/=2,d/=2}function ht(xt,ft){return z===1?xt[ft]:xt.readUInt16BE(ft*z)}let lt;if(F){let xt=-1;for(lt=d;lt<j;lt++)if(ht(y,lt)===ht(l,xt===-1?0:lt-xt)){if(xt===-1&&(xt=lt),lt-xt+1===dt)return xt*z}else xt!==-1&&(lt-=lt-xt),xt=-1}else for(d+dt>j&&(d=j-dt),lt=d;lt>=0;lt--){let xt=!0;for(let ft=0;ft<dt;ft++)if(ht(y,lt+ft)!==ht(l,ft)){xt=!1;break}if(xt)return lt}return-1}u.prototype.includes=function(l,d,v){return this.indexOf(l,d,v)!==-1},u.prototype.indexOf=function(l,d,v){return Q(this,l,d,v,!0)},u.prototype.lastIndexOf=function(l,d,v){return Q(this,l,d,v,!1)};function st(y,l,d,v){d=Number(d)||0;const F=y.length-d;v?(v=Number(v),v>F&&(v=F)):v=F;const z=l.length;v>z/2&&(v=z/2);let j;for(j=0;j<v;++j){const dt=parseInt(l.substr(j*2,2),16);if(Rt(dt))return j;y[d+j]=dt}return j}function C(y,l,d,v){return St(At(l,y.length-d),y,d,v)}function U(y,l,d,v){return St(Ot(l),y,d,v)}function H(y,l,d,v){return St(Bt(l),y,d,v)}function $(y,l,d,v){return St(Or(l,y.length-d),y,d,v)}u.prototype.write=function(l,d,v,F){if(d===void 0)F="utf8",v=this.length,d=0;else if(v===void 0&&typeof d=="string")F=d,v=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(v)?(v=v>>>0,F===void 0&&(F="utf8")):(F=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-d;if((v===void 0||v>z)&&(v=z),l.length>0&&(v<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let j=!1;for(;;)switch(F){case"hex":return st(this,l,d,v);case"utf8":case"utf-8":return C(this,l,d,v);case"ascii":case"latin1":case"binary":return U(this,l,d,v);case"base64":return H(this,l,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,l,d,v);default:if(j)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),j=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(y,l,d){return l===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(l,d))}function o(y,l,d){d=Math.min(y.length,d);const v=[];let F=l;for(;F<d;){const z=y[F];let j=null,dt=z>239?4:z>223?3:z>191?2:1;if(F+dt<=d){let ht,lt,xt,ft;switch(dt){case 1:z<128&&(j=z);break;case 2:ht=y[F+1],(ht&192)===128&&(ft=(z&31)<<6|ht&63,ft>127&&(j=ft));break;case 3:ht=y[F+1],lt=y[F+2],(ht&192)===128&&(lt&192)===128&&(ft=(z&15)<<12|(ht&63)<<6|lt&63,ft>2047&&(ft<55296||ft>57343)&&(j=ft));break;case 4:ht=y[F+1],lt=y[F+2],xt=y[F+3],(ht&192)===128&&(lt&192)===128&&(xt&192)===128&&(ft=(z&15)<<18|(ht&63)<<12|(lt&63)<<6|xt&63,ft>65535&&ft<1114112&&(j=ft))}}j===null?(j=65533,dt=1):j>65535&&(j-=65536,v.push(j>>>10&1023|55296),j=56320|j&1023),v.push(j),F+=dt}return g(v)}const h=4096;function g(y){const l=y.length;if(l<=h)return String.fromCharCode.apply(String,y);let d="",v=0;for(;v<l;)d+=String.fromCharCode.apply(String,y.slice(v,v+=h));return d}function E(y,l,d){let v="";d=Math.min(y.length,d);for(let F=l;F<d;++F)v+=String.fromCharCode(y[F]&127);return v}function S(y,l,d){let v="";d=Math.min(y.length,d);for(let F=l;F<d;++F)v+=String.fromCharCode(y[F]);return v}function B(y,l,d){const v=y.length;(!l||l<0)&&(l=0),(!d||d<0||d>v)&&(d=v);let F="";for(let z=l;z<d;++z)F+=Tt[y[z]];return F}function N(y,l,d){const v=y.slice(l,d);let F="";for(let z=0;z<v.length-1;z+=2)F+=String.fromCharCode(v[z]+v[z+1]*256);return F}u.prototype.slice=function(l,d){const v=this.length;l=~~l,d=d===void 0?v:~~d,l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),d<l&&(d=l);const F=this.subarray(l,d);return Object.setPrototypeOf(F,u.prototype),F};function b(y,l,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+l>d)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(l,d,v){l=l>>>0,d=d>>>0,v||b(l,d,this.length);let F=this[l],z=1,j=0;for(;++j<d&&(z*=256);)F+=this[l+j]*z;return F},u.prototype.readUintBE=u.prototype.readUIntBE=function(l,d,v){l=l>>>0,d=d>>>0,v||b(l,d,this.length);let F=this[l+--d],z=1;for(;d>0&&(z*=256);)F+=this[l+--d]*z;return F},u.prototype.readUint8=u.prototype.readUInt8=function(l,d){return l=l>>>0,d||b(l,1,this.length),this[l]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(l,d){return l=l>>>0,d||b(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(l,d){return l=l>>>0,d||b(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(l,d){return l=l>>>0,d||b(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(l,d){return l=l>>>0,d||b(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readBigUInt64LE=Ee(function(l){l=l>>>0,ye(l,"offset");const d=this[l],v=this[l+7];(d===void 0||v===void 0)&&Et(l,this.length-8);const F=d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,z=this[++l]+this[++l]*2**8+this[++l]*2**16+v*2**24;return BigInt(F)+(BigInt(z)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ee(function(l){l=l>>>0,ye(l,"offset");const d=this[l],v=this[l+7];(d===void 0||v===void 0)&&Et(l,this.length-8);const F=d*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],z=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+v;return(BigInt(F)<<BigInt(32))+BigInt(z)}),u.prototype.readIntLE=function(l,d,v){l=l>>>0,d=d>>>0,v||b(l,d,this.length);let F=this[l],z=1,j=0;for(;++j<d&&(z*=256);)F+=this[l+j]*z;return z*=128,F>=z&&(F-=Math.pow(2,8*d)),F},u.prototype.readIntBE=function(l,d,v){l=l>>>0,d=d>>>0,v||b(l,d,this.length);let F=d,z=1,j=this[l+--F];for(;F>0&&(z*=256);)j+=this[l+--F]*z;return z*=128,j>=z&&(j-=Math.pow(2,8*d)),j},u.prototype.readInt8=function(l,d){return l=l>>>0,d||b(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},u.prototype.readInt16LE=function(l,d){l=l>>>0,d||b(l,2,this.length);const v=this[l]|this[l+1]<<8;return v&32768?v|4294901760:v},u.prototype.readInt16BE=function(l,d){l=l>>>0,d||b(l,2,this.length);const v=this[l+1]|this[l]<<8;return v&32768?v|4294901760:v},u.prototype.readInt32LE=function(l,d){return l=l>>>0,d||b(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,d){return l=l>>>0,d||b(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readBigInt64LE=Ee(function(l){l=l>>>0,ye(l,"offset");const d=this[l],v=this[l+7];(d===void 0||v===void 0)&&Et(l,this.length-8);const F=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(v<<24);return(BigInt(F)<<BigInt(32))+BigInt(d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),u.prototype.readBigInt64BE=Ee(function(l){l=l>>>0,ye(l,"offset");const d=this[l],v=this[l+7];(d===void 0||v===void 0)&&Et(l,this.length-8);const F=(d<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(F)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+v)}),u.prototype.readFloatLE=function(l,d){return l=l>>>0,d||b(l,4,this.length),e.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,d){return l=l>>>0,d||b(l,4,this.length),e.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,d){return l=l>>>0,d||b(l,8,this.length),e.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,d){return l=l>>>0,d||b(l,8,this.length),e.read(this,l,!1,52,8)};function c(y,l,d,v,F,z){if(!u.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>F||l<z)throw new RangeError('"value" argument is out of bounds');if(d+v>y.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(l,d,v,F){if(l=+l,d=d>>>0,v=v>>>0,!F){const dt=Math.pow(2,8*v)-1;c(this,l,d,v,dt,0)}let z=1,j=0;for(this[d]=l&255;++j<v&&(z*=256);)this[d+j]=l/z&255;return d+v},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(l,d,v,F){if(l=+l,d=d>>>0,v=v>>>0,!F){const dt=Math.pow(2,8*v)-1;c(this,l,d,v,dt,0)}let z=v-1,j=1;for(this[d+z]=l&255;--z>=0&&(j*=256);)this[d+z]=l/j&255;return d+v},u.prototype.writeUint8=u.prototype.writeUInt8=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,1,255,0),this[d]=l&255,d+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,2,65535,0),this[d]=l&255,this[d+1]=l>>>8,d+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,2,65535,0),this[d]=l>>>8,this[d+1]=l&255,d+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,4,4294967295,0),this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255,d+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,4,4294967295,0),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4};function f(y,l,d,v,F){_t(l,v,F,y,d,7);let z=Number(l&BigInt(4294967295));y[d++]=z,z=z>>8,y[d++]=z,z=z>>8,y[d++]=z,z=z>>8,y[d++]=z;let j=Number(l>>BigInt(32)&BigInt(4294967295));return y[d++]=j,j=j>>8,y[d++]=j,j=j>>8,y[d++]=j,j=j>>8,y[d++]=j,d}function w(y,l,d,v,F){_t(l,v,F,y,d,7);let z=Number(l&BigInt(4294967295));y[d+7]=z,z=z>>8,y[d+6]=z,z=z>>8,y[d+5]=z,z=z>>8,y[d+4]=z;let j=Number(l>>BigInt(32)&BigInt(4294967295));return y[d+3]=j,j=j>>8,y[d+2]=j,j=j>>8,y[d+1]=j,j=j>>8,y[d]=j,d+8}u.prototype.writeBigUInt64LE=Ee(function(l,d=0){return f(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ee(function(l,d=0){return w(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(l,d,v,F){if(l=+l,d=d>>>0,!F){const ht=Math.pow(2,8*v-1);c(this,l,d,v,ht-1,-ht)}let z=0,j=1,dt=0;for(this[d]=l&255;++z<v&&(j*=256);)l<0&&dt===0&&this[d+z-1]!==0&&(dt=1),this[d+z]=(l/j>>0)-dt&255;return d+v},u.prototype.writeIntBE=function(l,d,v,F){if(l=+l,d=d>>>0,!F){const ht=Math.pow(2,8*v-1);c(this,l,d,v,ht-1,-ht)}let z=v-1,j=1,dt=0;for(this[d+z]=l&255;--z>=0&&(j*=256);)l<0&&dt===0&&this[d+z+1]!==0&&(dt=1),this[d+z]=(l/j>>0)-dt&255;return d+v},u.prototype.writeInt8=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,1,127,-128),l<0&&(l=255+l+1),this[d]=l&255,d+1},u.prototype.writeInt16LE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,2,32767,-32768),this[d]=l&255,this[d+1]=l>>>8,d+2},u.prototype.writeInt16BE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,2,32767,-32768),this[d]=l>>>8,this[d+1]=l&255,d+2},u.prototype.writeInt32LE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,4,2147483647,-2147483648),this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24,d+4},u.prototype.writeInt32BE=function(l,d,v){return l=+l,d=d>>>0,v||c(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4},u.prototype.writeBigInt64LE=Ee(function(l,d=0){return f(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ee(function(l,d=0){return w(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function A(y,l,d,v,F,z){if(d+v>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function D(y,l,d,v,F){return l=+l,d=d>>>0,F||A(y,l,d,4),e.write(y,l,d,v,23,4),d+4}u.prototype.writeFloatLE=function(l,d,v){return D(this,l,d,!0,v)},u.prototype.writeFloatBE=function(l,d,v){return D(this,l,d,!1,v)};function W(y,l,d,v,F){return l=+l,d=d>>>0,F||A(y,l,d,8),e.write(y,l,d,v,52,8),d+8}u.prototype.writeDoubleLE=function(l,d,v){return W(this,l,d,!0,v)},u.prototype.writeDoubleBE=function(l,d,v){return W(this,l,d,!1,v)},u.prototype.copy=function(l,d,v,F){if(!u.isBuffer(l))throw new TypeError("argument should be a Buffer");if(v||(v=0),!F&&F!==0&&(F=this.length),d>=l.length&&(d=l.length),d||(d=0),F>0&&F<v&&(F=v),F===v||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),l.length-d<F-v&&(F=l.length-d+v);const z=F-v;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,v,F):Uint8Array.prototype.set.call(l,this.subarray(v,F),d),z},u.prototype.fill=function(l,d,v,F){if(typeof l=="string"){if(typeof d=="string"?(F=d,d=0,v=this.length):typeof v=="string"&&(F=v,v=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!u.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(l.length===1){const j=l.charCodeAt(0);(F==="utf8"&&j<128||F==="latin1")&&(l=j)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(d<0||this.length<d||this.length<v)throw new RangeError("Out of range index");if(v<=d)return this;d=d>>>0,v=v===void 0?this.length:v>>>0,l||(l=0);let z;if(typeof l=="number")for(z=d;z<v;++z)this[z]=l;else{const j=u.isBuffer(l)?l:u.from(l,F),dt=j.length;if(dt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(z=0;z<v-d;++z)this[z+d]=j[z%dt]}return this};const et={};function it(y,l,d){et[y]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}it("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),it("ERR_INVALID_ARG_TYPE",function(y,l){return`The "${y}" argument must be of type number. Received type ${typeof l}`},TypeError),it("ERR_OUT_OF_RANGE",function(y,l,d){let v=`The value of "${y}" is out of range.`,F=d;return Number.isInteger(d)&&Math.abs(d)>2**32?F=yt(String(d)):typeof d=="bigint"&&(F=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(F=yt(F)),F+="n"),v+=` It must be ${l}. Received ${F}`,v},RangeError);function yt(y){let l="",d=y.length;const v=y[0]==="-"?1:0;for(;d>=v+4;d-=3)l=`_${y.slice(d-3,d)}${l}`;return`${y.slice(0,d)}${l}`}function wt(y,l,d){ye(l,"offset"),(y[l]===void 0||y[l+d]===void 0)&&Et(l,y.length-(d+1))}function _t(y,l,d,v,F,z){if(y>d||y<l){const j=typeof l=="bigint"?"n":"";let dt;throw l===0||l===BigInt(0)?dt=`>= 0${j} and < 2${j} ** ${(z+1)*8}${j}`:dt=`>= -(2${j} ** ${(z+1)*8-1}${j}) and < 2 ** ${(z+1)*8-1}${j}`,new et.ERR_OUT_OF_RANGE("value",dt,y)}wt(v,F,z)}function ye(y,l){if(typeof y!="number")throw new et.ERR_INVALID_ARG_TYPE(l,"number",y)}function Et(y,l,d){throw Math.floor(y)!==y?(ye(y,d),new et.ERR_OUT_OF_RANGE("offset","an integer",y)):l<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,y)}const Mt=/[^+/0-9A-Za-z-_]/g;function Mr(y){if(y=y.split("=")[0],y=y.trim().replace(Mt,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function At(y,l){l=l||1/0;let d;const v=y.length;let F=null;const z=[];for(let j=0;j<v;++j){if(d=y.charCodeAt(j),d>55295&&d<57344){if(!F){if(d>56319){(l-=3)>-1&&z.push(239,191,189);continue}else if(j+1===v){(l-=3)>-1&&z.push(239,191,189);continue}F=d;continue}if(d<56320){(l-=3)>-1&&z.push(239,191,189),F=d;continue}d=(F-55296<<10|d-56320)+65536}else F&&(l-=3)>-1&&z.push(239,191,189);if(F=null,d<128){if((l-=1)<0)break;z.push(d)}else if(d<2048){if((l-=2)<0)break;z.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;z.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;z.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return z}function Ot(y){const l=[];for(let d=0;d<y.length;++d)l.push(y.charCodeAt(d)&255);return l}function Or(y,l){let d,v,F;const z=[];for(let j=0;j<y.length&&!((l-=2)<0);++j)d=y.charCodeAt(j),v=d>>8,F=d%256,z.push(F),z.push(v);return z}function Bt(y){return t.toByteArray(Mr(y))}function St(y,l,d,v){let F;for(F=0;F<v&&!(F+d>=l.length||F>=y.length);++F)l[F+d]=y[F];return F}function me(y,l){return y instanceof l||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===l.name}function Rt(y){return y!==y}const Tt=(function(){const y="0123456789abcdef",l=new Array(256);for(let d=0;d<16;++d){const v=d*16;for(let F=0;F<16;++F)l[v+F]=y[d]+y[F]}return l})();function Ee(y){return typeof BigInt>"u"?Nt:y}function Nt(){throw new Error("BigInt not supported")}})(Tn)),Tn}var gt=mi();const rr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function ii(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Xe(n,...t){if(!xr(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Ls(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ii(n.outputLen),ii(n.blockLen)}function Vr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ta(n,t){Xe(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function rh(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function fr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Nn(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function xe(n,t){return n<<32-t|n>>>t}const ea=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ra(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function na(n){for(let t=0;t<n.length;t++)n[t]=ra(n[t]);return n}const nh=ea?n=>n:na,Cs=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ia=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Ze(n){if(Xe(n),Cs)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=ia[n[e]];return t}const Ie={_0:48,_9:57,A:65,F:70,a:97,f:102};function $i(n){if(n>=Ie._0&&n<=Ie._9)return n-Ie._0;if(n>=Ie.A&&n<=Ie.F)return n-(Ie.A-10);if(n>=Ie.a&&n<=Ie.f)return n-(Ie.a-10)}function $r(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Cs)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const a=$i(n.charCodeAt(i)),u=$i(n.charCodeAt(i+1));if(a===void 0||u===void 0){const p=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}r[s]=a*16+u}return r}function sa(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function yi(n){return typeof n=="string"&&(n=sa(n)),Xe(n),n}function Ae(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];Xe(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Us{}function Fs(n){const t=r=>n().update(yi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function wi(n=32){if(rr&&typeof rr.getRandomValues=="function")return rr.getRandomValues(new Uint8Array(n));if(rr&&typeof rr.randomBytes=="function")return Uint8Array.from(rr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function oa(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),u=Number(e&i),p=r?4:0,_=r?0:4;n.setUint32(t+p,a,r),n.setUint32(t+_,u,r)}function aa(n,t,e){return n&t^~n&e}function ca(n,t,e){return n&t^n&e^t&e}class Ds extends Us{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Nn(this.buffer)}update(t){Vr(this),t=yi(t),Xe(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let a=0;a<i;){const u=Math.min(s-this.pos,i-a);if(u===s){const p=Nn(t);for(;s<=i-a;a+=s)this.process(p,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vr(this),ta(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,fr(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let O=a;O<s;O++)e[O]=0;oa(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Nn(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=p/4,R=this.get();if(_>R.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<_;O++)u.setUint32(4*O,R[O],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:a,pos:u}=this;return t.destroyed=a,t.finished=i,t.length=s,t.pos=u,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ce=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ce=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Nr=BigInt(2**32-1),Gi=BigInt(32);function ua(n,t=!1){return t?{h:Number(n&Nr),l:Number(n>>Gi&Nr)}:{h:Number(n>>Gi&Nr)|0,l:Number(n&Nr)|0}}function fa(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:a,l:u}=ua(n[i],t);[r[i],s[i]]=[a,u]}return[r,s]}const ji=(n,t,e)=>n>>>e,Wi=(n,t,e)=>n<<32-e|t>>>e,nr=(n,t,e)=>n>>>e|t<<32-e,ir=(n,t,e)=>n<<32-e|t>>>e,Lr=(n,t,e)=>n<<64-e|t>>>e-32,Cr=(n,t,e)=>n>>>e-32|t<<64-e,ih=(n,t,e)=>n<<e|t>>>32-e,sh=(n,t,e)=>t<<e|n>>>32-e,oh=(n,t,e)=>t<<e-32|n>>>64-e,ah=(n,t,e)=>n<<e-32|t>>>64-e;function ke(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const la=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),ha=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,da=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),pa=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,ga=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),ma=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,ya=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ue=new Uint32Array(64);class wa extends Ds{constructor(t=32){super(64,t,8,!1),this.A=Ce[0]|0,this.B=Ce[1]|0,this.C=Ce[2]|0,this.D=Ce[3]|0,this.E=Ce[4]|0,this.F=Ce[5]|0,this.G=Ce[6]|0,this.H=Ce[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:a,G:u,H:p}=this;return[t,e,r,s,i,a,u,p]}set(t,e,r,s,i,a,u,p){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=p|0}process(t,e){for(let O=0;O<16;O++,e+=4)Ue[O]=t.getUint32(e,!1);for(let O=16;O<64;O++){const k=Ue[O-15],x=Ue[O-2],M=xe(k,7)^xe(k,18)^k>>>3,I=xe(x,17)^xe(x,19)^x>>>10;Ue[O]=I+Ue[O-7]+M+Ue[O-16]|0}let{A:r,B:s,C:i,D:a,E:u,F:p,G:_,H:R}=this;for(let O=0;O<64;O++){const k=xe(u,6)^xe(u,11)^xe(u,25),x=R+k+aa(u,p,_)+ya[O]+Ue[O]|0,I=(xe(r,2)^xe(r,13)^xe(r,22))+ca(r,s,i)|0;R=_,_=p,p=u,u=a+x|0,a=i,i=s,s=r,r=x+I|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,p=p+this.F|0,_=_+this.G|0,R=R+this.H|0,this.set(r,s,i,a,u,p,_,R)}roundClean(){fr(Ue)}destroy(){this.set(0,0,0,0,0,0,0,0),fr(this.buffer)}}const Ps=fa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),ba=Ps[0],_a=Ps[1],Fe=new Uint32Array(80),De=new Uint32Array(80);class Ea extends Ds{constructor(t=64){super(128,t,16,!1),this.Ah=ce[0]|0,this.Al=ce[1]|0,this.Bh=ce[2]|0,this.Bl=ce[3]|0,this.Ch=ce[4]|0,this.Cl=ce[5]|0,this.Dh=ce[6]|0,this.Dl=ce[7]|0,this.Eh=ce[8]|0,this.El=ce[9]|0,this.Fh=ce[10]|0,this.Fl=ce[11]|0,this.Gh=ce[12]|0,this.Gl=ce[13]|0,this.Hh=ce[14]|0,this.Hl=ce[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:a,Dh:u,Dl:p,Eh:_,El:R,Fh:O,Fl:k,Gh:x,Gl:M,Hh:I,Hl:L}=this;return[t,e,r,s,i,a,u,p,_,R,O,k,x,M,I,L]}set(t,e,r,s,i,a,u,p,_,R,O,k,x,M,I,L){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=u|0,this.Dl=p|0,this.Eh=_|0,this.El=R|0,this.Fh=O|0,this.Fl=k|0,this.Gh=x|0,this.Gl=M|0,this.Hh=I|0,this.Hl=L|0}process(t,e){for(let q=0;q<16;q++,e+=4)Fe[q]=t.getUint32(e),De[q]=t.getUint32(e+=4);for(let q=16;q<80;q++){const X=Fe[q-15]|0,Y=De[q-15]|0,Q=nr(X,Y,1)^nr(X,Y,8)^ji(X,Y,7),at=ir(X,Y,1)^ir(X,Y,8)^Wi(X,Y,7),st=Fe[q-2]|0,C=De[q-2]|0,U=nr(st,C,19)^Lr(st,C,61)^ji(st,C,6),H=ir(st,C,19)^Cr(st,C,61)^Wi(st,C,6),$=da(at,H,De[q-7],De[q-16]),m=pa($,Q,U,Fe[q-7],Fe[q-16]);Fe[q]=m|0,De[q]=$|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:u,Cl:p,Dh:_,Dl:R,Eh:O,El:k,Fh:x,Fl:M,Gh:I,Gl:L,Hh:P,Hl:G}=this;for(let q=0;q<80;q++){const X=nr(O,k,14)^nr(O,k,18)^Lr(O,k,41),Y=ir(O,k,14)^ir(O,k,18)^Cr(O,k,41),Q=O&x^~O&I,at=k&M^~k&L,st=ga(G,Y,at,_a[q],De[q]),C=ma(st,P,X,Q,ba[q],Fe[q]),U=st|0,H=nr(r,s,28)^Lr(r,s,34)^Lr(r,s,39),$=ir(r,s,28)^Cr(r,s,34)^Cr(r,s,39),m=r&i^r&u^i&u,o=s&a^s&p^a&p;P=I|0,G=L|0,I=x|0,L=M|0,x=O|0,M=k|0,{h:O,l:k}=ke(_|0,R|0,C|0,U|0),_=u|0,R=p|0,u=i|0,p=a|0,i=r|0,a=s|0;const h=la(U,$,o);r=ha(h,C,H,m),s=h|0}({h:r,l:s}=ke(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=ke(this.Bh|0,this.Bl|0,i|0,a|0),{h:u,l:p}=ke(this.Ch|0,this.Cl|0,u|0,p|0),{h:_,l:R}=ke(this.Dh|0,this.Dl|0,_|0,R|0),{h:O,l:k}=ke(this.Eh|0,this.El|0,O|0,k|0),{h:x,l:M}=ke(this.Fh|0,this.Fl|0,x|0,M|0),{h:I,l:L}=ke(this.Gh|0,this.Gl|0,I|0,L|0),{h:P,l:G}=ke(this.Hh|0,this.Hl|0,P|0,G|0),this.set(r,s,i,a,u,p,_,R,O,k,x,M,I,L,P,G)}roundClean(){fr(Fe,De)}destroy(){fr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const qs=Fs(()=>new wa),va=Fs(()=>new Ea);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bi=BigInt(0),si=BigInt(1);function Ye(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function ve(n,t,e=""){const r=xr(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const a=e&&`"${e}" `,u=i?` of length ${t}`:"",p=r?`length=${s}`:`type=${typeof n}`;throw new Error(a+"expected Uint8Array"+u+", got "+p)}return n}function Ur(n){const t=n.toString(16);return t.length&1?"0"+t:t}function zs(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?bi:BigInt("0x"+n)}function sn(n){return zs(Ze(n))}function vr(n){return Xe(n),zs(Ze(Uint8Array.from(n).reverse()))}function _i(n,t){return $r(n.toString(16).padStart(t*2,"0"))}function Ks(n,t){return _i(n,t).reverse()}function Ct(n,t,e){let r;if(typeof t=="string")try{r=$r(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(xr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Zi(n){return Uint8Array.from(n)}const Ln=n=>typeof n=="bigint"&&bi<=n;function Sa(n,t,e){return Ln(n)&&Ln(t)&&Ln(e)&&t<=n&&n<e}function oi(n,t,e,r){if(!Sa(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Hs(n){let t;for(t=0;n>bi;n>>=si,t+=1);return t}const Ar=n=>(si<<BigInt(n))-si;function xa(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=x=>new Uint8Array(x),s=x=>Uint8Array.of(x);let i=r(n),a=r(n),u=0;const p=()=>{i.fill(1),a.fill(0),u=0},_=(...x)=>e(a,i,...x),R=(x=r(0))=>{a=_(s(0),x),i=_(),x.length!==0&&(a=_(s(1),x),i=_())},O=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const M=[];for(;x<t;){i=_();const I=i.slice();M.push(I),x+=i.length}return Ae(...M)};return(x,M)=>{p(),R(x);let I;for(;!(I=M(O()));)R();return p(),I}}function Rr(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,a){const u=n[s];if(a&&u===void 0)return;const p=typeof u;if(p!==i||u===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${p}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function Gr(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ge=BigInt(0),ae=BigInt(1),Ge=BigInt(2),Vs=BigInt(3),$s=BigInt(4),Gs=BigInt(5),Aa=BigInt(7),js=BigInt(8),Ra=BigInt(9),Ws=BigInt(16);function re(n,t){const e=n%t;return e>=ge?e:t+e}function Lt(n,t,e){let r=n;for(;t-- >ge;)r*=r,r%=e;return r}function Yi(n,t){if(n===ge)throw new Error("invert: expected non-zero number");if(t<=ge)throw new Error("invert: expected positive modulus, got "+t);let e=re(n,t),r=t,s=ge,i=ae;for(;e!==ge;){const u=r/e,p=r%e,_=s-i*u;r=e,e=p,s=i,i=_}if(r!==ae)throw new Error("invert: does not exist");return re(s,t)}function Ei(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Zs(n,t){const e=(n.ORDER+ae)/$s,r=n.pow(t,e);return Ei(n,r,t),r}function Ba(n,t){const e=(n.ORDER-Gs)/js,r=n.mul(t,Ge),s=n.pow(r,e),i=n.mul(t,s),a=n.mul(n.mul(i,Ge),s),u=n.mul(i,n.sub(a,n.ONE));return Ei(n,u,t),u}function Ia(n){const t=Je(n),e=Ys(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),a=(n+Aa)/Ws;return(u,p)=>{let _=u.pow(p,a),R=u.mul(_,r);const O=u.mul(_,s),k=u.mul(_,i),x=u.eql(u.sqr(R),p),M=u.eql(u.sqr(O),p);_=u.cmov(_,R,x),R=u.cmov(k,O,M);const I=u.eql(u.sqr(R),p),L=u.cmov(_,R,I);return Ei(u,L,p),L}}function Ys(n){if(n<Vs)throw new Error("sqrt is not defined for small field");let t=n-ae,e=0;for(;t%Ge===ge;)t/=Ge,e++;let r=Ge;const s=Je(n);for(;Xi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Zs;let i=s.pow(r,t);const a=(t+ae)/Ge;return function(p,_){if(p.is0(_))return _;if(Xi(p,_)!==1)throw new Error("Cannot find square root");let R=e,O=p.mul(p.ONE,i),k=p.pow(_,t),x=p.pow(_,a);for(;!p.eql(k,p.ONE);){if(p.is0(k))return p.ZERO;let M=1,I=p.sqr(k);for(;!p.eql(I,p.ONE);)if(M++,I=p.sqr(I),M===R)throw new Error("Cannot find square root");const L=ae<<BigInt(R-M-1),P=p.pow(O,L);R=M,O=p.sqr(P),k=p.mul(k,O),x=p.mul(x,P)}return x}}function ka(n){return n%$s===Vs?Zs:n%js===Gs?Ba:n%Ws===Ra?Ia(n):Ys(n)}const Ma=(n,t)=>(re(n,t)&ae)===ae,Oa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ta(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Oa.reduce((r,s)=>(r[s]="function",r),t);return Rr(n,e),n}function Na(n,t,e){if(e<ge)throw new Error("invalid exponent, negatives unsupported");if(e===ge)return n.ONE;if(e===ae)return t;let r=n.ONE,s=t;for(;e>ge;)e&ae&&(r=n.mul(r,s)),s=n.sqr(s),e>>=ae;return r}function Xs(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((a,u,p)=>n.is0(u)?a:(r[p]=a,n.mul(a,u)),n.ONE),i=n.inv(s);return t.reduceRight((a,u,p)=>n.is0(u)?a:(r[p]=n.mul(a,r[p]),n.mul(a,u)),i),r}function Xi(n,t){const e=(n.ORDER-ae)/Ge,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Js(n,t){t!==void 0&&ii(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Je(n,t,e=!1,r={}){if(n<=ge)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,a=!1,u;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const k=t;k.BITS&&(s=k.BITS),k.sqrt&&(i=k.sqrt),typeof k.isLE=="boolean"&&(e=k.isLE),typeof k.modFromBytes=="boolean"&&(a=k.modFromBytes),u=k.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:p,nByteLength:_}=Js(n,s);if(_>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let R;const O=Object.freeze({ORDER:n,isLE:e,BITS:p,BYTES:_,MASK:Ar(p),ZERO:ge,ONE:ae,allowedLengths:u,create:k=>re(k,n),isValid:k=>{if(typeof k!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof k);return ge<=k&&k<n},is0:k=>k===ge,isValidNot0:k=>!O.is0(k)&&O.isValid(k),isOdd:k=>(k&ae)===ae,neg:k=>re(-k,n),eql:(k,x)=>k===x,sqr:k=>re(k*k,n),add:(k,x)=>re(k+x,n),sub:(k,x)=>re(k-x,n),mul:(k,x)=>re(k*x,n),pow:(k,x)=>Na(O,k,x),div:(k,x)=>re(k*Yi(x,n),n),sqrN:k=>k*k,addN:(k,x)=>k+x,subN:(k,x)=>k-x,mulN:(k,x)=>k*x,inv:k=>Yi(k,n),sqrt:i||(k=>(R||(R=ka(n)),R(O,k))),toBytes:k=>e?Ks(k,_):_i(k,_),fromBytes:(k,x=!0)=>{if(u){if(!u.includes(k.length)||k.length>_)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+k.length);const I=new Uint8Array(_);I.set(k,e?0:I.length-k.length),k=I}if(k.length!==_)throw new Error("Field.fromBytes: expected "+_+" bytes, got "+k.length);let M=e?vr(k):sn(k);if(a&&(M=re(M,n)),!x&&!O.isValid(M))throw new Error("invalid field element: outside of range 0..ORDER");return M},invertBatch:k=>Xs(O,k),cmov:(k,x,M)=>M?x:k});return Object.freeze(O)}function Qs(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function to(n){const t=Qs(n);return t+Math.ceil(t/2)}function La(n,t,e=!1){const r=n.length,s=Qs(t),i=to(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=e?vr(n):sn(n),u=re(a,t-ae)+ae;return e?Ks(u,s):_i(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lr=BigInt(0),je=BigInt(1);function jr(n,t){const e=t.negate();return n?e:t}function We(n,t){const e=Xs(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function eo(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Cn(n,t){eo(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Ar(n),a=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function Ji(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=e;let u=Number(n&s),p=n>>a;u>r&&(u-=i,p+=je);const _=t*r,R=_+Math.abs(u)-1,O=u===0,k=u<0,x=t%2!==0;return{nextN:p,offset:R,isZero:O,isNeg:k,isNegF:x,offsetF:_}}function Ca(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Ua(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Un=new WeakMap,ro=new WeakMap;function Fn(n){return ro.get(n)||1}function Qi(n){if(n!==lr)throw new Error("invalid wNAF")}class no{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>lr;)e&je&&(r=r.add(s)),s=s.double(),e>>=je;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=Cn(e,this.bits),i=[];let a=t,u=a;for(let p=0;p<r;p++){u=a,i.push(u);for(let _=1;_<s;_++)u=u.add(a),i.push(u);a=u.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=Cn(t,this.bits);for(let u=0;u<a.windows;u++){const{nextN:p,offset:_,isZero:R,isNeg:O,isNegF:k,offsetF:x}=Ji(r,u,a);r=p,R?i=i.add(jr(k,e[x])):s=s.add(jr(O,e[_]))}return Qi(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=Cn(t,this.bits);for(let a=0;a<i.windows&&r!==lr;a++){const{nextN:u,offset:p,isZero:_,isNeg:R}=Ji(r,a,i);if(r=u,!_){const O=e[p];s=s.add(R?O.negate():O)}}return Qi(r),s}getPrecomputes(t,e,r){let s=Un.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),Un.set(e,s))),s}cached(t,e,r){const s=Fn(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=Fn(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){eo(e,this.bits),ro.set(t,e),Un.delete(t)}hasCache(t){return Fn(t)!==1}}function Fa(n,t,e,r){let s=t,i=n.ZERO,a=n.ZERO;for(;e>lr||r>lr;)e&je&&(i=i.add(s)),r&je&&(a=a.add(s)),s=s.double(),e>>=je,r>>=je;return{p1:i,p2:a}}function io(n,t,e,r){Ca(e,n),Ua(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=n.ZERO,u=Hs(BigInt(s));let p=1;u>12?p=u-3:u>4?p=u-2:u>0&&(p=2);const _=Ar(p),R=new Array(Number(_)+1).fill(a),O=Math.floor((t.BITS-1)/p)*p;let k=a;for(let x=O;x>=0;x-=p){R.fill(a);for(let I=0;I<i;I++){const L=r[I],P=Number(L>>BigInt(x)&_);R[P]=R[P].add(e[I])}let M=a;for(let I=R.length-1,L=a;I>0;I--)L=L.add(R[I]),M=M.add(L);if(k=k.add(M),x!==0)for(let I=0;I<p;I++)k=k.double()}return k}function ts(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ta(t),t}else return Je(n,{isLE:e})}function so(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const p of["p","n","h"]){const _=t[p];if(!(typeof _=="bigint"&&_>lr))throw new Error(`CURVE.${p} must be positive bigint`)}const s=ts(t.p,e.Fp,r),i=ts(t.n,e.Fn,r),u=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const p of u)if(!s.isValid(t[p]))throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pe=BigInt(0),ie=BigInt(1),Dn=BigInt(2),Da=BigInt(8);function Pa(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),a=n.add(n.mul(t.a,s),i),u=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(a,u)}function qa(n,t={}){const e=so("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:a}=i;Rr(t,{},{uvRatio:"function"});const u=Dn<<BigInt(s.BYTES*8)-ie,p=L=>r.create(L),_=t.uvRatio||((L,P)=>{try{return{isValid:!0,value:r.sqrt(r.div(L,P))}}catch{return{isValid:!1,value:Pe}}});if(!Pa(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function R(L,P,G=!1){const q=G?ie:Pe;return oi("coordinate "+L,P,q,u),P}function O(L){if(!(L instanceof M))throw new Error("ExtendedPoint expected")}const k=Gr((L,P)=>{const{X:G,Y:q,Z:X}=L,Y=L.is0();P==null&&(P=Y?Da:r.inv(X));const Q=p(G*P),at=p(q*P),st=r.mul(X,P);if(Y)return{x:Pe,y:ie};if(st!==ie)throw new Error("invZ was invalid");return{x:Q,y:at}}),x=Gr(L=>{const{a:P,d:G}=i;if(L.is0())throw new Error("bad point: ZERO");const{X:q,Y:X,Z:Y,T:Q}=L,at=p(q*q),st=p(X*X),C=p(Y*Y),U=p(C*C),H=p(at*P),$=p(C*p(H+st)),m=p(U+p(G*p(at*st)));if($!==m)throw new Error("bad point: equation left != right (1)");const o=p(q*X),h=p(Y*Q);if(o!==h)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(P,G,q,X){this.X=R("x",P),this.Y=R("y",G),this.Z=R("z",q,!0),this.T=R("t",X),Object.freeze(this)}static CURVE(){return i}static fromAffine(P){if(P instanceof M)throw new Error("extended point not allowed");const{x:G,y:q}=P||{};return R("x",G),R("y",q),new M(G,q,ie,p(G*q))}static fromBytes(P,G=!1){const q=r.BYTES,{a:X,d:Y}=i;P=Zi(ve(P,q,"point")),Ye(G,"zip215");const Q=Zi(P),at=P[q-1];Q[q-1]=at&-129;const st=vr(Q),C=G?u:r.ORDER;oi("point.y",st,Pe,C);const U=p(st*st),H=p(U-ie),$=p(Y*U-X);let{isValid:m,value:o}=_(H,$);if(!m)throw new Error("bad point: invalid y coordinate");const h=(o&ie)===ie,g=(at&128)!==0;if(!G&&o===Pe&&g)throw new Error("bad point: x=0 and x_0=1");return g!==h&&(o=p(-o)),M.fromAffine({x:o,y:st})}static fromHex(P,G=!1){return M.fromBytes(Ct("point",P),G)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,G=!0){return I.createCache(this,P),G||this.multiply(Dn),this}assertValidity(){x(this)}equals(P){O(P);const{X:G,Y:q,Z:X}=this,{X:Y,Y:Q,Z:at}=P,st=p(G*at),C=p(Y*X),U=p(q*at),H=p(Q*X);return st===C&&U===H}is0(){return this.equals(M.ZERO)}negate(){return new M(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:P}=i,{X:G,Y:q,Z:X}=this,Y=p(G*G),Q=p(q*q),at=p(Dn*p(X*X)),st=p(P*Y),C=G+q,U=p(p(C*C)-Y-Q),H=st+Q,$=H-at,m=st-Q,o=p(U*$),h=p(H*m),g=p(U*m),E=p($*H);return new M(o,h,E,g)}add(P){O(P);const{a:G,d:q}=i,{X,Y,Z:Q,T:at}=this,{X:st,Y:C,Z:U,T:H}=P,$=p(X*st),m=p(Y*C),o=p(at*q*H),h=p(Q*U),g=p((X+Y)*(st+C)-$-m),E=h-o,S=h+o,B=p(m-G*$),N=p(g*E),b=p(S*B),c=p(g*B),f=p(E*S);return new M(N,b,f,c)}subtract(P){return this.add(P.negate())}multiply(P){if(!s.isValidNot0(P))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:G,f:q}=I.cached(this,P,X=>We(M,X));return We(M,[G,q])[0]}multiplyUnsafe(P,G=M.ZERO){if(!s.isValid(P))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return P===Pe?M.ZERO:this.is0()||P===ie?this:I.unsafe(this,P,q=>We(M,q),G)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return I.unsafe(this,i.n).is0()}toAffine(P){return k(this,P)}clearCofactor(){return a===ie?this:this.multiplyUnsafe(a)}toBytes(){const{x:P,y:G}=this.toAffine(),q=r.toBytes(G);return q[q.length-1]|=P&ie?128:0,q}toHex(){return Ze(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(P){return We(M,P)}static msm(P,G){return io(M,s,P,G)}_setWindowSize(P){this.precompute(P)}toRawBytes(){return this.toBytes()}}M.BASE=new M(i.Gx,i.Gy,ie,p(i.Gx*i.Gy)),M.ZERO=new M(Pe,ie,ie,Pe),M.Fp=r,M.Fn=s;const I=new no(M,s.BITS);return M.BASE.precompute(8),M}function za(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Rr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:a}=n,u=e.randomBytes||wi,p=e.adjustScalarBytes||(C=>C),_=e.domain||((C,U,H)=>{if(Ye(H,"phflag"),U.length||H)throw new Error("Contexts/pre-hash are not supported");return C});function R(C){return a.create(vr(C))}function O(C){const U=q.secretKey;C=Ct("private key",C,U);const H=Ct("hashed private key",t(C),2*U),$=p(H.slice(0,U)),m=H.slice(U,2*U),o=R($);return{head:$,prefix:m,scalar:o}}function k(C){const{head:U,prefix:H,scalar:$}=O(C),m=s.multiply($),o=m.toBytes();return{head:U,prefix:H,scalar:$,point:m,pointBytes:o}}function x(C){return k(C).pointBytes}function M(C=Uint8Array.of(),...U){const H=Ae(...U);return R(t(_(H,Ct("context",C),!!r)))}function I(C,U,H={}){C=Ct("message",C),r&&(C=r(C));const{prefix:$,scalar:m,pointBytes:o}=k(U),h=M(H.context,$,C),g=s.multiply(h).toBytes(),E=M(H.context,g,o,C),S=a.create(h+E*m);if(!a.isValid(S))throw new Error("sign failed: invalid s");const B=Ae(g,a.toBytes(S));return ve(B,q.signature,"result")}const L={zip215:!0};function P(C,U,H,$=L){const{context:m,zip215:o}=$,h=q.signature;C=Ct("signature",C,h),U=Ct("message",U),H=Ct("publicKey",H,q.publicKey),o!==void 0&&Ye(o,"zip215"),r&&(U=r(U));const g=h/2,E=C.subarray(0,g),S=vr(C.subarray(g,h));let B,N,b;try{B=n.fromBytes(H,o),N=n.fromBytes(E,o),b=s.multiplyUnsafe(S)}catch{return!1}if(!o&&B.isSmallOrder())return!1;const c=M(m,N.toBytes(),B.toBytes(),U);return N.add(B.multiplyUnsafe(c)).subtract(b).clearCofactor().is0()}const G=i.BYTES,q={secretKey:G,publicKey:G,signature:2*G,seed:G};function X(C=u(q.seed)){return ve(C,q.seed,"seed")}function Y(C){const U=st.randomSecretKey(C);return{secretKey:U,publicKey:x(U)}}function Q(C){return xr(C)&&C.length===a.BYTES}function at(C,U){try{return!!n.fromBytes(C,U)}catch{return!1}}const st={getExtendedPublicKey:k,randomSecretKey:X,isValidSecretKey:Q,isValidPublicKey:at,toMontgomery(C){const{y:U}=n.fromBytes(C),H=q.publicKey,$=H===32;if(!$&&H!==57)throw new Error("only defined for 25519 and 448");const m=$?i.div(ie+U,ie-U):i.div(U-ie,U+ie);return i.toBytes(m)},toMontgomerySecret(C){const U=q.secretKey;ve(C,U);const H=t(C.subarray(0,U));return p(H).subarray(0,U)},randomPrivateKey:X,precompute(C=8,U=n.BASE){return U.precompute(C,!1)}};return Object.freeze({keygen:Y,getPublicKey:x,sign:I,verify:P,utils:st,Point:n,lengths:q})}function Ka(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Je(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Ha(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Va(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=Ka(n),i=qa(t,e),a=za(i,r,s);return Ha(n,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $a=BigInt(1),es=BigInt(2);BigInt(3);const Ga=BigInt(5),ja=BigInt(8),vi=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),oo={p:vi,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ja,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Wa(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=vi,u=n*n%i*n%i,p=Lt(u,es,i)*u%i,_=Lt(p,$a,i)*n%i,R=Lt(_,Ga,i)*_%i,O=Lt(R,t,i)*R%i,k=Lt(O,e,i)*O%i,x=Lt(k,r,i)*k%i,M=Lt(x,s,i)*x%i,I=Lt(M,s,i)*x%i,L=Lt(I,t,i)*R%i;return{pow_p_5_8:Lt(L,es,i)*n%i,b2:u}}function Za(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const rs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ya(n,t){const e=vi,r=re(t*t*t,e),s=re(r*r*t,e),i=Wa(n*s).pow_p_5_8;let a=re(n*r*i,e);const u=re(t*a*a,e),p=a,_=re(a*rs,e),R=u===n,O=u===re(-n,e),k=u===re(-n*rs,e);return R&&(a=p),(O||k)&&(a=_),Ma(a,e)&&(a=re(-a,e)),{isValid:R||O,value:a}}const Xa=Je(oo.p,{isLE:!0}),Ja={...oo,Fp:Xa,hash:va,adjustScalarBytes:Za,uvRatio:Ya},gr=Va(Ja);var zr={exports:{}};const Qa={},tc=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"})),ec=gi(tc);var rc=zr.exports,ns;function ao(){return ns||(ns=1,(function(n){(function(t,e){function r(m,o){if(!m)throw new Error(o||"Assertion failed")}function s(m,o){m.super_=o;var h=function(){};h.prototype=o.prototype,m.prototype=new h,m.prototype.constructor=m}function i(m,o,h){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((o==="le"||o==="be")&&(h=o,o=10),this._init(m||0,o||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=ec.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,h){return o.cmp(h)>0?o:h},i.min=function(o,h){return o.cmp(h)<0?o:h},i.prototype._init=function(o,h,g){if(typeof o=="number")return this._initNumber(o,h,g);if(typeof o=="object")return this._initArray(o,h,g);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),o=o.toString().replace(/\s+/g,"");var E=0;o[0]==="-"&&(E++,this.negative=1),E<o.length&&(h===16?this._parseHex(o,E,g):(this._parseBase(o,h,E),g==="le"&&this._initArray(this.toArray(),h,g)))},i.prototype._initNumber=function(o,h,g){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),h,g)},i.prototype._initArray=function(o,h,g){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var S,B,N=0;if(g==="be")for(E=o.length-1,S=0;E>=0;E-=3)B=o[E]|o[E-1]<<8|o[E-2]<<16,this.words[S]|=B<<N&67108863,this.words[S+1]=B>>>26-N&67108863,N+=24,N>=26&&(N-=26,S++);else if(g==="le")for(E=0,S=0;E<o.length;E+=3)B=o[E]|o[E+1]<<8|o[E+2]<<16,this.words[S]|=B<<N&67108863,this.words[S+1]=B>>>26-N&67108863,N+=24,N>=26&&(N-=26,S++);return this._strip()};function u(m,o){var h=m.charCodeAt(o);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+m)}function p(m,o,h){var g=u(m,h);return h-1>=o&&(g|=u(m,h-1)<<4),g}i.prototype._parseHex=function(o,h,g){this.length=Math.ceil((o.length-h)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var S=0,B=0,N;if(g==="be")for(E=o.length-1;E>=h;E-=2)N=p(o,h,E)<<S,this.words[B]|=N&67108863,S>=18?(S-=18,B+=1,this.words[B]|=N>>>26):S+=8;else{var b=o.length-h;for(E=b%2===0?h+1:h;E<o.length;E+=2)N=p(o,h,E)<<S,this.words[B]|=N&67108863,S>=18?(S-=18,B+=1,this.words[B]|=N>>>26):S+=8}this._strip()};function _(m,o,h,g){for(var E=0,S=0,B=Math.min(m.length,h),N=o;N<B;N++){var b=m.charCodeAt(N)-48;E*=g,b>=49?S=b-49+10:b>=17?S=b-17+10:S=b,r(b>=0&&S<g,"Invalid character"),E+=S}return E}i.prototype._parseBase=function(o,h,g){this.words=[0],this.length=1;for(var E=0,S=1;S<=67108863;S*=h)E++;E--,S=S/h|0;for(var B=o.length-g,N=B%E,b=Math.min(B,B-N)+g,c=0,f=g;f<b;f+=E)c=_(o,f,f+E,h),this.imuln(S),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(N!==0){var w=1;for(c=_(o,f,o.length,h),f=0;f<N;f++)w*=h;this.imuln(w),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var h=0;h<this.length;h++)o.words[h]=this.words[h];o.length=this.length,o.negative=this.negative,o.red=this.red};function R(m,o){m.words=o.words,m.length=o.length,m.negative=o.negative,m.red=o.red}if(i.prototype._move=function(o){R(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{i.prototype.inspect=O}else i.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,h){o=o||10,h=h|0||1;var g;if(o===16||o==="hex"){g="";for(var E=0,S=0,B=0;B<this.length;B++){var N=this.words[B],b=((N<<E|S)&16777215).toString(16);S=N>>>24-E&16777215,E+=2,E>=26&&(E-=26,B--),S!==0||B!==this.length-1?g=k[6-b.length]+b+g:g=b+g}for(S!==0&&(g=S.toString(16)+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(o===(o|0)&&o>=2&&o<=36){var c=x[o],f=M[o];g="";var w=this.clone();for(w.negative=0;!w.isZero();){var A=w.modrn(f).toString(o);w=w.idivn(f),w.isZero()?g=A+g:g=k[c-A.length]+A+g}for(this.isZero()&&(g="0"+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,h){return this.toArrayLike(a,o,h)}),i.prototype.toArray=function(o,h){return this.toArrayLike(Array,o,h)};var I=function(o,h){return o.allocUnsafe?o.allocUnsafe(h):new o(h)};i.prototype.toArrayLike=function(o,h,g){this._strip();var E=this.byteLength(),S=g||Math.max(1,E);r(E<=S,"byte array longer than desired length"),r(S>0,"Requested array length <= 0");var B=I(o,S),N=h==="le"?"LE":"BE";return this["_toArrayLike"+N](B,E),B},i.prototype._toArrayLikeLE=function(o,h){for(var g=0,E=0,S=0,B=0;S<this.length;S++){var N=this.words[S]<<B|E;o[g++]=N&255,g<o.length&&(o[g++]=N>>8&255),g<o.length&&(o[g++]=N>>16&255),B===6?(g<o.length&&(o[g++]=N>>24&255),E=0,B=0):(E=N>>>24,B+=2)}if(g<o.length)for(o[g++]=E;g<o.length;)o[g++]=0},i.prototype._toArrayLikeBE=function(o,h){for(var g=o.length-1,E=0,S=0,B=0;S<this.length;S++){var N=this.words[S]<<B|E;o[g--]=N&255,g>=0&&(o[g--]=N>>8&255),g>=0&&(o[g--]=N>>16&255),B===6?(g>=0&&(o[g--]=N>>24&255),E=0,B=0):(E=N>>>24,B+=2)}if(g>=0)for(o[g--]=E;g>=0;)o[g--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var h=o,g=0;return h>=4096&&(g+=13,h>>>=13),h>=64&&(g+=7,h>>>=7),h>=8&&(g+=4,h>>>=4),h>=2&&(g+=2,h>>>=2),g+h},i.prototype._zeroBits=function(o){if(o===0)return 26;var h=o,g=0;return(h&8191)===0&&(g+=13,h>>>=13),(h&127)===0&&(g+=7,h>>>=7),(h&15)===0&&(g+=4,h>>>=4),(h&3)===0&&(g+=2,h>>>=2),(h&1)===0&&g++,g},i.prototype.bitLength=function(){var o=this.words[this.length-1],h=this._countBits(o);return(this.length-1)*26+h};function L(m){for(var o=new Array(m.bitLength()),h=0;h<o.length;h++){var g=h/26|0,E=h%26;o[h]=m.words[g]>>>E&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,h=0;h<this.length;h++){var g=this._zeroBits(this.words[h]);if(o+=g,g!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var h=0;h<o.length;h++)this.words[h]=this.words[h]|o.words[h];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var h;this.length>o.length?h=o:h=this;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]&o.words[g];return this.length=h.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var h,g;this.length>o.length?(h=this,g=o):(h=o,g=this);for(var E=0;E<g.length;E++)this.words[E]=h.words[E]^g.words[E];if(this!==h)for(;E<h.length;E++)this.words[E]=h.words[E];return this.length=h.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var h=Math.ceil(o/26)|0,g=o%26;this._expand(h),g>0&&h--;for(var E=0;E<h;E++)this.words[E]=~this.words[E]&67108863;return g>0&&(this.words[E]=~this.words[E]&67108863>>26-g),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,h){r(typeof o=="number"&&o>=0);var g=o/26|0,E=o%26;return this._expand(g+1),h?this.words[g]=this.words[g]|1<<E:this.words[g]=this.words[g]&~(1<<E),this._strip()},i.prototype.iadd=function(o){var h;if(this.negative!==0&&o.negative===0)return this.negative=0,h=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,h=this.isub(o),o.negative=1,h._normSign();var g,E;this.length>o.length?(g=this,E=o):(g=o,E=this);for(var S=0,B=0;B<E.length;B++)h=(g.words[B]|0)+(E.words[B]|0)+S,this.words[B]=h&67108863,S=h>>>26;for(;S!==0&&B<g.length;B++)h=(g.words[B]|0)+S,this.words[B]=h&67108863,S=h>>>26;if(this.length=g.length,S!==0)this.words[this.length]=S,this.length++;else if(g!==this)for(;B<g.length;B++)this.words[B]=g.words[B];return this},i.prototype.add=function(o){var h;return o.negative!==0&&this.negative===0?(o.negative=0,h=this.sub(o),o.negative^=1,h):o.negative===0&&this.negative!==0?(this.negative=0,h=o.sub(this),this.negative=1,h):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var h=this.iadd(o);return o.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var g=this.cmp(o);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,S;g>0?(E=this,S=o):(E=o,S=this);for(var B=0,N=0;N<S.length;N++)h=(E.words[N]|0)-(S.words[N]|0)+B,B=h>>26,this.words[N]=h&67108863;for(;B!==0&&N<E.length;N++)h=(E.words[N]|0)+B,B=h>>26,this.words[N]=h&67108863;if(B===0&&N<E.length&&E!==this)for(;N<E.length;N++)this.words[N]=E.words[N];return this.length=Math.max(this.length,N),E!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function P(m,o,h){h.negative=o.negative^m.negative;var g=m.length+o.length|0;h.length=g,g=g-1|0;var E=m.words[0]|0,S=o.words[0]|0,B=E*S,N=B&67108863,b=B/67108864|0;h.words[0]=N;for(var c=1;c<g;c++){for(var f=b>>>26,w=b&67108863,A=Math.min(c,o.length-1),D=Math.max(0,c-m.length+1);D<=A;D++){var W=c-D|0;E=m.words[W]|0,S=o.words[D]|0,B=E*S+w,f+=B/67108864|0,w=B&67108863}h.words[c]=w|0,b=f|0}return b!==0?h.words[c]=b|0:h.length--,h._strip()}var G=function(o,h,g){var E=o.words,S=h.words,B=g.words,N=0,b,c,f,w=E[0]|0,A=w&8191,D=w>>>13,W=E[1]|0,et=W&8191,it=W>>>13,yt=E[2]|0,wt=yt&8191,_t=yt>>>13,ye=E[3]|0,Et=ye&8191,Mt=ye>>>13,Mr=E[4]|0,At=Mr&8191,Ot=Mr>>>13,Or=E[5]|0,Bt=Or&8191,St=Or>>>13,me=E[6]|0,Rt=me&8191,Tt=me>>>13,Ee=E[7]|0,Nt=Ee&8191,y=Ee>>>13,l=E[8]|0,d=l&8191,v=l>>>13,F=E[9]|0,z=F&8191,j=F>>>13,dt=S[0]|0,ht=dt&8191,lt=dt>>>13,xt=S[1]|0,ft=xt&8191,Ft=xt>>>13,Li=S[2]|0,Dt=Li&8191,Pt=Li>>>13,Ci=S[3]|0,qt=Ci&8191,zt=Ci>>>13,Ui=S[4]|0,Kt=Ui&8191,Ht=Ui>>>13,Fi=S[5]|0,Vt=Fi&8191,$t=Fi>>>13,Di=S[6]|0,Gt=Di&8191,jt=Di>>>13,Pi=S[7]|0,Wt=Pi&8191,Zt=Pi>>>13,qi=S[8]|0,Yt=qi&8191,Xt=qi>>>13,zi=S[9]|0,Jt=zi&8191,Qt=zi>>>13;g.negative=o.negative^h.negative,g.length=19,b=Math.imul(A,ht),c=Math.imul(A,lt),c=c+Math.imul(D,ht)|0,f=Math.imul(D,lt);var dn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(dn>>>26)|0,dn&=67108863,b=Math.imul(et,ht),c=Math.imul(et,lt),c=c+Math.imul(it,ht)|0,f=Math.imul(it,lt),b=b+Math.imul(A,ft)|0,c=c+Math.imul(A,Ft)|0,c=c+Math.imul(D,ft)|0,f=f+Math.imul(D,Ft)|0;var pn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(pn>>>26)|0,pn&=67108863,b=Math.imul(wt,ht),c=Math.imul(wt,lt),c=c+Math.imul(_t,ht)|0,f=Math.imul(_t,lt),b=b+Math.imul(et,ft)|0,c=c+Math.imul(et,Ft)|0,c=c+Math.imul(it,ft)|0,f=f+Math.imul(it,Ft)|0,b=b+Math.imul(A,Dt)|0,c=c+Math.imul(A,Pt)|0,c=c+Math.imul(D,Dt)|0,f=f+Math.imul(D,Pt)|0;var gn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(gn>>>26)|0,gn&=67108863,b=Math.imul(Et,ht),c=Math.imul(Et,lt),c=c+Math.imul(Mt,ht)|0,f=Math.imul(Mt,lt),b=b+Math.imul(wt,ft)|0,c=c+Math.imul(wt,Ft)|0,c=c+Math.imul(_t,ft)|0,f=f+Math.imul(_t,Ft)|0,b=b+Math.imul(et,Dt)|0,c=c+Math.imul(et,Pt)|0,c=c+Math.imul(it,Dt)|0,f=f+Math.imul(it,Pt)|0,b=b+Math.imul(A,qt)|0,c=c+Math.imul(A,zt)|0,c=c+Math.imul(D,qt)|0,f=f+Math.imul(D,zt)|0;var mn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(mn>>>26)|0,mn&=67108863,b=Math.imul(At,ht),c=Math.imul(At,lt),c=c+Math.imul(Ot,ht)|0,f=Math.imul(Ot,lt),b=b+Math.imul(Et,ft)|0,c=c+Math.imul(Et,Ft)|0,c=c+Math.imul(Mt,ft)|0,f=f+Math.imul(Mt,Ft)|0,b=b+Math.imul(wt,Dt)|0,c=c+Math.imul(wt,Pt)|0,c=c+Math.imul(_t,Dt)|0,f=f+Math.imul(_t,Pt)|0,b=b+Math.imul(et,qt)|0,c=c+Math.imul(et,zt)|0,c=c+Math.imul(it,qt)|0,f=f+Math.imul(it,zt)|0,b=b+Math.imul(A,Kt)|0,c=c+Math.imul(A,Ht)|0,c=c+Math.imul(D,Kt)|0,f=f+Math.imul(D,Ht)|0;var yn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(yn>>>26)|0,yn&=67108863,b=Math.imul(Bt,ht),c=Math.imul(Bt,lt),c=c+Math.imul(St,ht)|0,f=Math.imul(St,lt),b=b+Math.imul(At,ft)|0,c=c+Math.imul(At,Ft)|0,c=c+Math.imul(Ot,ft)|0,f=f+Math.imul(Ot,Ft)|0,b=b+Math.imul(Et,Dt)|0,c=c+Math.imul(Et,Pt)|0,c=c+Math.imul(Mt,Dt)|0,f=f+Math.imul(Mt,Pt)|0,b=b+Math.imul(wt,qt)|0,c=c+Math.imul(wt,zt)|0,c=c+Math.imul(_t,qt)|0,f=f+Math.imul(_t,zt)|0,b=b+Math.imul(et,Kt)|0,c=c+Math.imul(et,Ht)|0,c=c+Math.imul(it,Kt)|0,f=f+Math.imul(it,Ht)|0,b=b+Math.imul(A,Vt)|0,c=c+Math.imul(A,$t)|0,c=c+Math.imul(D,Vt)|0,f=f+Math.imul(D,$t)|0;var wn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(wn>>>26)|0,wn&=67108863,b=Math.imul(Rt,ht),c=Math.imul(Rt,lt),c=c+Math.imul(Tt,ht)|0,f=Math.imul(Tt,lt),b=b+Math.imul(Bt,ft)|0,c=c+Math.imul(Bt,Ft)|0,c=c+Math.imul(St,ft)|0,f=f+Math.imul(St,Ft)|0,b=b+Math.imul(At,Dt)|0,c=c+Math.imul(At,Pt)|0,c=c+Math.imul(Ot,Dt)|0,f=f+Math.imul(Ot,Pt)|0,b=b+Math.imul(Et,qt)|0,c=c+Math.imul(Et,zt)|0,c=c+Math.imul(Mt,qt)|0,f=f+Math.imul(Mt,zt)|0,b=b+Math.imul(wt,Kt)|0,c=c+Math.imul(wt,Ht)|0,c=c+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,Ht)|0,b=b+Math.imul(et,Vt)|0,c=c+Math.imul(et,$t)|0,c=c+Math.imul(it,Vt)|0,f=f+Math.imul(it,$t)|0,b=b+Math.imul(A,Gt)|0,c=c+Math.imul(A,jt)|0,c=c+Math.imul(D,Gt)|0,f=f+Math.imul(D,jt)|0;var bn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(bn>>>26)|0,bn&=67108863,b=Math.imul(Nt,ht),c=Math.imul(Nt,lt),c=c+Math.imul(y,ht)|0,f=Math.imul(y,lt),b=b+Math.imul(Rt,ft)|0,c=c+Math.imul(Rt,Ft)|0,c=c+Math.imul(Tt,ft)|0,f=f+Math.imul(Tt,Ft)|0,b=b+Math.imul(Bt,Dt)|0,c=c+Math.imul(Bt,Pt)|0,c=c+Math.imul(St,Dt)|0,f=f+Math.imul(St,Pt)|0,b=b+Math.imul(At,qt)|0,c=c+Math.imul(At,zt)|0,c=c+Math.imul(Ot,qt)|0,f=f+Math.imul(Ot,zt)|0,b=b+Math.imul(Et,Kt)|0,c=c+Math.imul(Et,Ht)|0,c=c+Math.imul(Mt,Kt)|0,f=f+Math.imul(Mt,Ht)|0,b=b+Math.imul(wt,Vt)|0,c=c+Math.imul(wt,$t)|0,c=c+Math.imul(_t,Vt)|0,f=f+Math.imul(_t,$t)|0,b=b+Math.imul(et,Gt)|0,c=c+Math.imul(et,jt)|0,c=c+Math.imul(it,Gt)|0,f=f+Math.imul(it,jt)|0,b=b+Math.imul(A,Wt)|0,c=c+Math.imul(A,Zt)|0,c=c+Math.imul(D,Wt)|0,f=f+Math.imul(D,Zt)|0;var _n=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(_n>>>26)|0,_n&=67108863,b=Math.imul(d,ht),c=Math.imul(d,lt),c=c+Math.imul(v,ht)|0,f=Math.imul(v,lt),b=b+Math.imul(Nt,ft)|0,c=c+Math.imul(Nt,Ft)|0,c=c+Math.imul(y,ft)|0,f=f+Math.imul(y,Ft)|0,b=b+Math.imul(Rt,Dt)|0,c=c+Math.imul(Rt,Pt)|0,c=c+Math.imul(Tt,Dt)|0,f=f+Math.imul(Tt,Pt)|0,b=b+Math.imul(Bt,qt)|0,c=c+Math.imul(Bt,zt)|0,c=c+Math.imul(St,qt)|0,f=f+Math.imul(St,zt)|0,b=b+Math.imul(At,Kt)|0,c=c+Math.imul(At,Ht)|0,c=c+Math.imul(Ot,Kt)|0,f=f+Math.imul(Ot,Ht)|0,b=b+Math.imul(Et,Vt)|0,c=c+Math.imul(Et,$t)|0,c=c+Math.imul(Mt,Vt)|0,f=f+Math.imul(Mt,$t)|0,b=b+Math.imul(wt,Gt)|0,c=c+Math.imul(wt,jt)|0,c=c+Math.imul(_t,Gt)|0,f=f+Math.imul(_t,jt)|0,b=b+Math.imul(et,Wt)|0,c=c+Math.imul(et,Zt)|0,c=c+Math.imul(it,Wt)|0,f=f+Math.imul(it,Zt)|0,b=b+Math.imul(A,Yt)|0,c=c+Math.imul(A,Xt)|0,c=c+Math.imul(D,Yt)|0,f=f+Math.imul(D,Xt)|0;var En=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(En>>>26)|0,En&=67108863,b=Math.imul(z,ht),c=Math.imul(z,lt),c=c+Math.imul(j,ht)|0,f=Math.imul(j,lt),b=b+Math.imul(d,ft)|0,c=c+Math.imul(d,Ft)|0,c=c+Math.imul(v,ft)|0,f=f+Math.imul(v,Ft)|0,b=b+Math.imul(Nt,Dt)|0,c=c+Math.imul(Nt,Pt)|0,c=c+Math.imul(y,Dt)|0,f=f+Math.imul(y,Pt)|0,b=b+Math.imul(Rt,qt)|0,c=c+Math.imul(Rt,zt)|0,c=c+Math.imul(Tt,qt)|0,f=f+Math.imul(Tt,zt)|0,b=b+Math.imul(Bt,Kt)|0,c=c+Math.imul(Bt,Ht)|0,c=c+Math.imul(St,Kt)|0,f=f+Math.imul(St,Ht)|0,b=b+Math.imul(At,Vt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Ot,Vt)|0,f=f+Math.imul(Ot,$t)|0,b=b+Math.imul(Et,Gt)|0,c=c+Math.imul(Et,jt)|0,c=c+Math.imul(Mt,Gt)|0,f=f+Math.imul(Mt,jt)|0,b=b+Math.imul(wt,Wt)|0,c=c+Math.imul(wt,Zt)|0,c=c+Math.imul(_t,Wt)|0,f=f+Math.imul(_t,Zt)|0,b=b+Math.imul(et,Yt)|0,c=c+Math.imul(et,Xt)|0,c=c+Math.imul(it,Yt)|0,f=f+Math.imul(it,Xt)|0,b=b+Math.imul(A,Jt)|0,c=c+Math.imul(A,Qt)|0,c=c+Math.imul(D,Jt)|0,f=f+Math.imul(D,Qt)|0;var vn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(vn>>>26)|0,vn&=67108863,b=Math.imul(z,ft),c=Math.imul(z,Ft),c=c+Math.imul(j,ft)|0,f=Math.imul(j,Ft),b=b+Math.imul(d,Dt)|0,c=c+Math.imul(d,Pt)|0,c=c+Math.imul(v,Dt)|0,f=f+Math.imul(v,Pt)|0,b=b+Math.imul(Nt,qt)|0,c=c+Math.imul(Nt,zt)|0,c=c+Math.imul(y,qt)|0,f=f+Math.imul(y,zt)|0,b=b+Math.imul(Rt,Kt)|0,c=c+Math.imul(Rt,Ht)|0,c=c+Math.imul(Tt,Kt)|0,f=f+Math.imul(Tt,Ht)|0,b=b+Math.imul(Bt,Vt)|0,c=c+Math.imul(Bt,$t)|0,c=c+Math.imul(St,Vt)|0,f=f+Math.imul(St,$t)|0,b=b+Math.imul(At,Gt)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(Ot,Gt)|0,f=f+Math.imul(Ot,jt)|0,b=b+Math.imul(Et,Wt)|0,c=c+Math.imul(Et,Zt)|0,c=c+Math.imul(Mt,Wt)|0,f=f+Math.imul(Mt,Zt)|0,b=b+Math.imul(wt,Yt)|0,c=c+Math.imul(wt,Xt)|0,c=c+Math.imul(_t,Yt)|0,f=f+Math.imul(_t,Xt)|0,b=b+Math.imul(et,Jt)|0,c=c+Math.imul(et,Qt)|0,c=c+Math.imul(it,Jt)|0,f=f+Math.imul(it,Qt)|0;var Sn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,b=Math.imul(z,Dt),c=Math.imul(z,Pt),c=c+Math.imul(j,Dt)|0,f=Math.imul(j,Pt),b=b+Math.imul(d,qt)|0,c=c+Math.imul(d,zt)|0,c=c+Math.imul(v,qt)|0,f=f+Math.imul(v,zt)|0,b=b+Math.imul(Nt,Kt)|0,c=c+Math.imul(Nt,Ht)|0,c=c+Math.imul(y,Kt)|0,f=f+Math.imul(y,Ht)|0,b=b+Math.imul(Rt,Vt)|0,c=c+Math.imul(Rt,$t)|0,c=c+Math.imul(Tt,Vt)|0,f=f+Math.imul(Tt,$t)|0,b=b+Math.imul(Bt,Gt)|0,c=c+Math.imul(Bt,jt)|0,c=c+Math.imul(St,Gt)|0,f=f+Math.imul(St,jt)|0,b=b+Math.imul(At,Wt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(Ot,Wt)|0,f=f+Math.imul(Ot,Zt)|0,b=b+Math.imul(Et,Yt)|0,c=c+Math.imul(Et,Xt)|0,c=c+Math.imul(Mt,Yt)|0,f=f+Math.imul(Mt,Xt)|0,b=b+Math.imul(wt,Jt)|0,c=c+Math.imul(wt,Qt)|0,c=c+Math.imul(_t,Jt)|0,f=f+Math.imul(_t,Qt)|0;var xn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(xn>>>26)|0,xn&=67108863,b=Math.imul(z,qt),c=Math.imul(z,zt),c=c+Math.imul(j,qt)|0,f=Math.imul(j,zt),b=b+Math.imul(d,Kt)|0,c=c+Math.imul(d,Ht)|0,c=c+Math.imul(v,Kt)|0,f=f+Math.imul(v,Ht)|0,b=b+Math.imul(Nt,Vt)|0,c=c+Math.imul(Nt,$t)|0,c=c+Math.imul(y,Vt)|0,f=f+Math.imul(y,$t)|0,b=b+Math.imul(Rt,Gt)|0,c=c+Math.imul(Rt,jt)|0,c=c+Math.imul(Tt,Gt)|0,f=f+Math.imul(Tt,jt)|0,b=b+Math.imul(Bt,Wt)|0,c=c+Math.imul(Bt,Zt)|0,c=c+Math.imul(St,Wt)|0,f=f+Math.imul(St,Zt)|0,b=b+Math.imul(At,Yt)|0,c=c+Math.imul(At,Xt)|0,c=c+Math.imul(Ot,Yt)|0,f=f+Math.imul(Ot,Xt)|0,b=b+Math.imul(Et,Jt)|0,c=c+Math.imul(Et,Qt)|0,c=c+Math.imul(Mt,Jt)|0,f=f+Math.imul(Mt,Qt)|0;var An=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(An>>>26)|0,An&=67108863,b=Math.imul(z,Kt),c=Math.imul(z,Ht),c=c+Math.imul(j,Kt)|0,f=Math.imul(j,Ht),b=b+Math.imul(d,Vt)|0,c=c+Math.imul(d,$t)|0,c=c+Math.imul(v,Vt)|0,f=f+Math.imul(v,$t)|0,b=b+Math.imul(Nt,Gt)|0,c=c+Math.imul(Nt,jt)|0,c=c+Math.imul(y,Gt)|0,f=f+Math.imul(y,jt)|0,b=b+Math.imul(Rt,Wt)|0,c=c+Math.imul(Rt,Zt)|0,c=c+Math.imul(Tt,Wt)|0,f=f+Math.imul(Tt,Zt)|0,b=b+Math.imul(Bt,Yt)|0,c=c+Math.imul(Bt,Xt)|0,c=c+Math.imul(St,Yt)|0,f=f+Math.imul(St,Xt)|0,b=b+Math.imul(At,Jt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Ot,Jt)|0,f=f+Math.imul(Ot,Qt)|0;var Rn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,b=Math.imul(z,Vt),c=Math.imul(z,$t),c=c+Math.imul(j,Vt)|0,f=Math.imul(j,$t),b=b+Math.imul(d,Gt)|0,c=c+Math.imul(d,jt)|0,c=c+Math.imul(v,Gt)|0,f=f+Math.imul(v,jt)|0,b=b+Math.imul(Nt,Wt)|0,c=c+Math.imul(Nt,Zt)|0,c=c+Math.imul(y,Wt)|0,f=f+Math.imul(y,Zt)|0,b=b+Math.imul(Rt,Yt)|0,c=c+Math.imul(Rt,Xt)|0,c=c+Math.imul(Tt,Yt)|0,f=f+Math.imul(Tt,Xt)|0,b=b+Math.imul(Bt,Jt)|0,c=c+Math.imul(Bt,Qt)|0,c=c+Math.imul(St,Jt)|0,f=f+Math.imul(St,Qt)|0;var Bn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,b=Math.imul(z,Gt),c=Math.imul(z,jt),c=c+Math.imul(j,Gt)|0,f=Math.imul(j,jt),b=b+Math.imul(d,Wt)|0,c=c+Math.imul(d,Zt)|0,c=c+Math.imul(v,Wt)|0,f=f+Math.imul(v,Zt)|0,b=b+Math.imul(Nt,Yt)|0,c=c+Math.imul(Nt,Xt)|0,c=c+Math.imul(y,Yt)|0,f=f+Math.imul(y,Xt)|0,b=b+Math.imul(Rt,Jt)|0,c=c+Math.imul(Rt,Qt)|0,c=c+Math.imul(Tt,Jt)|0,f=f+Math.imul(Tt,Qt)|0;var In=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(In>>>26)|0,In&=67108863,b=Math.imul(z,Wt),c=Math.imul(z,Zt),c=c+Math.imul(j,Wt)|0,f=Math.imul(j,Zt),b=b+Math.imul(d,Yt)|0,c=c+Math.imul(d,Xt)|0,c=c+Math.imul(v,Yt)|0,f=f+Math.imul(v,Xt)|0,b=b+Math.imul(Nt,Jt)|0,c=c+Math.imul(Nt,Qt)|0,c=c+Math.imul(y,Jt)|0,f=f+Math.imul(y,Qt)|0;var kn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,b=Math.imul(z,Yt),c=Math.imul(z,Xt),c=c+Math.imul(j,Yt)|0,f=Math.imul(j,Xt),b=b+Math.imul(d,Jt)|0,c=c+Math.imul(d,Qt)|0,c=c+Math.imul(v,Jt)|0,f=f+Math.imul(v,Qt)|0;var Mn=(N+b|0)+((c&8191)<<13)|0;N=(f+(c>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,b=Math.imul(z,Jt),c=Math.imul(z,Qt),c=c+Math.imul(j,Jt)|0,f=Math.imul(j,Qt);var On=(N+b|0)+((c&8191)<<13)|0;return N=(f+(c>>>13)|0)+(On>>>26)|0,On&=67108863,B[0]=dn,B[1]=pn,B[2]=gn,B[3]=mn,B[4]=yn,B[5]=wn,B[6]=bn,B[7]=_n,B[8]=En,B[9]=vn,B[10]=Sn,B[11]=xn,B[12]=An,B[13]=Rn,B[14]=Bn,B[15]=In,B[16]=kn,B[17]=Mn,B[18]=On,N!==0&&(B[19]=N,g.length++),g};Math.imul||(G=P);function q(m,o,h){h.negative=o.negative^m.negative,h.length=m.length+o.length;for(var g=0,E=0,S=0;S<h.length-1;S++){var B=E;E=0;for(var N=g&67108863,b=Math.min(S,o.length-1),c=Math.max(0,S-m.length+1);c<=b;c++){var f=S-c,w=m.words[f]|0,A=o.words[c]|0,D=w*A,W=D&67108863;B=B+(D/67108864|0)|0,W=W+N|0,N=W&67108863,B=B+(W>>>26)|0,E+=B>>>26,B&=67108863}h.words[S]=N,g=B,B=E}return g!==0?h.words[S]=g:h.length--,h._strip()}function X(m,o,h){return q(m,o,h)}i.prototype.mulTo=function(o,h){var g,E=this.length+o.length;return this.length===10&&o.length===10?g=G(this,o,h):E<63?g=P(this,o,h):E<1024?g=q(this,o,h):g=X(this,o,h),g},i.prototype.mul=function(o){var h=new i(null);return h.words=new Array(this.length+o.length),this.mulTo(o,h)},i.prototype.mulf=function(o){var h=new i(null);return h.words=new Array(this.length+o.length),X(this,o,h)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var h=o<0;h&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var g=0,E=0;E<this.length;E++){var S=(this.words[E]|0)*o,B=(S&67108863)+(g&67108863);g>>=26,g+=S/67108864|0,g+=B>>>26,this.words[E]=B&67108863}return g!==0&&(this.words[E]=g,this.length++),this.length=o===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var h=L(o);if(h.length===0)return new i(1);for(var g=this,E=0;E<h.length&&h[E]===0;E++,g=g.sqr());if(++E<h.length)for(var S=g.sqr();E<h.length;E++,S=S.sqr())h[E]!==0&&(g=g.mul(S));return g},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var h=o%26,g=(o-h)/26,E=67108863>>>26-h<<26-h,S;if(h!==0){var B=0;for(S=0;S<this.length;S++){var N=this.words[S]&E,b=(this.words[S]|0)-N<<h;this.words[S]=b|B,B=N>>>26-h}B&&(this.words[S]=B,this.length++)}if(g!==0){for(S=this.length-1;S>=0;S--)this.words[S+g]=this.words[S];for(S=0;S<g;S++)this.words[S]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,h,g){r(typeof o=="number"&&o>=0);var E;h?E=(h-h%26)/26:E=0;var S=o%26,B=Math.min((o-S)/26,this.length),N=67108863^67108863>>>S<<S,b=g;if(E-=B,E=Math.max(0,E),b){for(var c=0;c<B;c++)b.words[c]=this.words[c];b.length=B}if(B!==0)if(this.length>B)for(this.length-=B,c=0;c<this.length;c++)this.words[c]=this.words[c+B];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(f!==0||c>=E);c--){var w=this.words[c]|0;this.words[c]=f<<26-S|w>>>S,f=w&N}return b&&f!==0&&(b.words[b.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,h,g){return r(this.negative===0),this.iushrn(o,h,g)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var h=o%26,g=(o-h)/26,E=1<<h;if(this.length<=g)return!1;var S=this.words[g];return!!(S&E)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var h=o%26,g=(o-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(h!==0&&g++,this.length=Math.min(g,this.length),h!==0){var E=67108863^67108863>>>h<<h;this.words[this.length-1]&=E}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,h,g){var E=o.length+g,S;this._expand(E);var B,N=0;for(S=0;S<o.length;S++){B=(this.words[S+g]|0)+N;var b=(o.words[S]|0)*h;B-=b&67108863,N=(B>>26)-(b/67108864|0),this.words[S+g]=B&67108863}for(;S<this.length-g;S++)B=(this.words[S+g]|0)+N,N=B>>26,this.words[S+g]=B&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,S=0;S<this.length;S++)B=-(this.words[S]|0)+N,N=B>>26,this.words[S]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,h){var g=this.length-o.length,E=this.clone(),S=o,B=S.words[S.length-1]|0,N=this._countBits(B);g=26-N,g!==0&&(S=S.ushln(g),E.iushln(g),B=S.words[S.length-1]|0);var b=E.length-S.length,c;if(h!=="mod"){c=new i(null),c.length=b+1,c.words=new Array(c.length);for(var f=0;f<c.length;f++)c.words[f]=0}var w=E.clone()._ishlnsubmul(S,1,b);w.negative===0&&(E=w,c&&(c.words[b]=1));for(var A=b-1;A>=0;A--){var D=(E.words[S.length+A]|0)*67108864+(E.words[S.length+A-1]|0);for(D=Math.min(D/B|0,67108863),E._ishlnsubmul(S,D,A);E.negative!==0;)D--,E.negative=0,E._ishlnsubmul(S,1,A),E.isZero()||(E.negative^=1);c&&(c.words[A]=D)}return c&&c._strip(),E._strip(),h!=="div"&&g!==0&&E.iushrn(g),{div:c||null,mod:E}},i.prototype.divmod=function(o,h,g){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var E,S,B;return this.negative!==0&&o.negative===0?(B=this.neg().divmod(o,h),h!=="mod"&&(E=B.div.neg()),h!=="div"&&(S=B.mod.neg(),g&&S.negative!==0&&S.iadd(o)),{div:E,mod:S}):this.negative===0&&o.negative!==0?(B=this.divmod(o.neg(),h),h!=="mod"&&(E=B.div.neg()),{div:E,mod:B.mod}):(this.negative&o.negative)!==0?(B=this.neg().divmod(o.neg(),h),h!=="div"&&(S=B.mod.neg(),g&&S.negative!==0&&S.isub(o)),{div:B.div,mod:S}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?h==="div"?{div:this.divn(o.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,h)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var h=this.divmod(o);if(h.mod.isZero())return h.div;var g=h.div.negative!==0?h.mod.isub(o):h.mod,E=o.ushrn(1),S=o.andln(1),B=g.cmp(E);return B<0||S===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(o){var h=o<0;h&&(o=-o),r(o<=67108863);for(var g=(1<<26)%o,E=0,S=this.length-1;S>=0;S--)E=(g*E+(this.words[S]|0))%o;return h?-E:E},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var h=o<0;h&&(o=-o),r(o<=67108863);for(var g=0,E=this.length-1;E>=0;E--){var S=(this.words[E]|0)+g*67108864;this.words[E]=S/o|0,g=S%o}return this._strip(),h?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var h=this,g=o.clone();h.negative!==0?h=h.umod(o):h=h.clone();for(var E=new i(1),S=new i(0),B=new i(0),N=new i(1),b=0;h.isEven()&&g.isEven();)h.iushrn(1),g.iushrn(1),++b;for(var c=g.clone(),f=h.clone();!h.isZero();){for(var w=0,A=1;(h.words[0]&A)===0&&w<26;++w,A<<=1);if(w>0)for(h.iushrn(w);w-- >0;)(E.isOdd()||S.isOdd())&&(E.iadd(c),S.isub(f)),E.iushrn(1),S.iushrn(1);for(var D=0,W=1;(g.words[0]&W)===0&&D<26;++D,W<<=1);if(D>0)for(g.iushrn(D);D-- >0;)(B.isOdd()||N.isOdd())&&(B.iadd(c),N.isub(f)),B.iushrn(1),N.iushrn(1);h.cmp(g)>=0?(h.isub(g),E.isub(B),S.isub(N)):(g.isub(h),B.isub(E),N.isub(S))}return{a:B,b:N,gcd:g.iushln(b)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var h=this,g=o.clone();h.negative!==0?h=h.umod(o):h=h.clone();for(var E=new i(1),S=new i(0),B=g.clone();h.cmpn(1)>0&&g.cmpn(1)>0;){for(var N=0,b=1;(h.words[0]&b)===0&&N<26;++N,b<<=1);if(N>0)for(h.iushrn(N);N-- >0;)E.isOdd()&&E.iadd(B),E.iushrn(1);for(var c=0,f=1;(g.words[0]&f)===0&&c<26;++c,f<<=1);if(c>0)for(g.iushrn(c);c-- >0;)S.isOdd()&&S.iadd(B),S.iushrn(1);h.cmp(g)>=0?(h.isub(g),E.isub(S)):(g.isub(h),S.isub(E))}var w;return h.cmpn(1)===0?w=E:w=S,w.cmpn(0)<0&&w.iadd(o),w},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var h=this.clone(),g=o.clone();h.negative=0,g.negative=0;for(var E=0;h.isEven()&&g.isEven();E++)h.iushrn(1),g.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;g.isEven();)g.iushrn(1);var S=h.cmp(g);if(S<0){var B=h;h=g,g=B}else if(S===0||g.cmpn(1)===0)break;h.isub(g)}while(!0);return g.iushln(E)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var h=o%26,g=(o-h)/26,E=1<<h;if(this.length<=g)return this._expand(g+1),this.words[g]|=E,this;for(var S=E,B=g;S!==0&&B<this.length;B++){var N=this.words[B]|0;N+=S,S=N>>>26,N&=67108863,this.words[B]=N}return S!==0&&(this.words[B]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var h=o<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var g;if(this.length>1)g=1;else{h&&(o=-o),r(o<=67108863,"Number is too big");var E=this.words[0]|0;g=E===o?0:E<o?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var h=this.ucmp(o);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var h=0,g=this.length-1;g>=0;g--){var E=this.words[g]|0,S=o.words[g]|0;if(E!==S){E<S?h=-1:E>S&&(h=1);break}}return h},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Y={k256:null,p224:null,p192:null,p25519:null};function Q(m,o){this.name=m,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},Q.prototype.ireduce=function(o){var h=o,g;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),g=h.bitLength();while(g>this.n);var E=g<this.n?-1:h.ucmp(this.p);return E===0?(h.words[0]=0,h.length=1):E>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},Q.prototype.split=function(o,h){o.iushrn(this.n,0,h)},Q.prototype.imulK=function(o){return o.imul(this.k)};function at(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(at,Q),at.prototype.split=function(o,h){for(var g=4194303,E=Math.min(o.length,9),S=0;S<E;S++)h.words[S]=o.words[S];if(h.length=E,o.length<=9){o.words[0]=0,o.length=1;return}var B=o.words[9];for(h.words[h.length++]=B&g,S=10;S<o.length;S++){var N=o.words[S]|0;o.words[S-10]=(N&g)<<4|B>>>22,B=N}B>>>=22,o.words[S-10]=B,B===0&&o.length>10?o.length-=10:o.length-=9},at.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var h=0,g=0;g<o.length;g++){var E=o.words[g]|0;h+=E*977,o.words[g]=h&67108863,h=E*64+(h/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function st(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(st,Q);function C(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(C,Q);function U(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(U,Q),U.prototype.imulK=function(o){for(var h=0,g=0;g<o.length;g++){var E=(o.words[g]|0)*19+h,S=E&67108863;E>>>=26,o.words[g]=S,h=E}return h!==0&&(o.words[o.length++]=h),o},i._prime=function(o){if(Y[o])return Y[o];var h;if(o==="k256")h=new at;else if(o==="p224")h=new st;else if(o==="p192")h=new C;else if(o==="p25519")h=new U;else throw new Error("Unknown prime "+o);return Y[o]=h,h};function H(m){if(typeof m=="string"){var o=i._prime(m);this.m=o.p,this.prime=o}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}H.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,h){r((o.negative|h.negative)===0,"red works only with positives"),r(o.red&&o.red===h.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(R(o,o.umod(this.m)._forceRed(this)),o)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,h){this._verify2(o,h);var g=o.add(h);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},H.prototype.iadd=function(o,h){this._verify2(o,h);var g=o.iadd(h);return g.cmp(this.m)>=0&&g.isub(this.m),g},H.prototype.sub=function(o,h){this._verify2(o,h);var g=o.sub(h);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},H.prototype.isub=function(o,h){this._verify2(o,h);var g=o.isub(h);return g.cmpn(0)<0&&g.iadd(this.m),g},H.prototype.shl=function(o,h){return this._verify1(o),this.imod(o.ushln(h))},H.prototype.imul=function(o,h){return this._verify2(o,h),this.imod(o.imul(h))},H.prototype.mul=function(o,h){return this._verify2(o,h),this.imod(o.mul(h))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(o,g)}for(var E=this.m.subn(1),S=0;!E.isZero()&&E.andln(1)===0;)S++,E.iushrn(1);r(!E.isZero());var B=new i(1).toRed(this),N=B.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,b).cmp(N)!==0;)c.redIAdd(N);for(var f=this.pow(c,E),w=this.pow(o,E.addn(1).iushrn(1)),A=this.pow(o,E),D=S;A.cmp(B)!==0;){for(var W=A,et=0;W.cmp(B)!==0;et++)W=W.redSqr();r(et<D);var it=this.pow(f,new i(1).iushln(D-et-1));w=w.redMul(it),f=it.redSqr(),A=A.redMul(f),D=et}return w},H.prototype.invm=function(o){var h=o._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},H.prototype.pow=function(o,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return o.clone();var g=4,E=new Array(1<<g);E[0]=new i(1).toRed(this),E[1]=o;for(var S=2;S<E.length;S++)E[S]=this.mul(E[S-1],o);var B=E[0],N=0,b=0,c=h.bitLength()%26;for(c===0&&(c=26),S=h.length-1;S>=0;S--){for(var f=h.words[S],w=c-1;w>=0;w--){var A=f>>w&1;if(B!==E[0]&&(B=this.sqr(B)),A===0&&N===0){b=0;continue}N<<=1,N|=A,b++,!(b!==g&&(S!==0||w!==0))&&(B=this.mul(B,E[N]),b=0,N=0)}c=26}return B},H.prototype.convertTo=function(o){var h=o.umod(this.m);return h===o?h.clone():h},H.prototype.convertFrom=function(o){var h=o.clone();return h.red=null,h},i.mont=function(o){return new $(o)};function $(m){H.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s($,H),$.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},$.prototype.convertFrom=function(o){var h=this.imod(o.mul(this.rinv));return h.red=null,h},$.prototype.imul=function(o,h){if(o.isZero()||h.isZero())return o.words[0]=0,o.length=1,o;var g=o.imul(h),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=g.isub(E).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},$.prototype.mul=function(o,h){if(o.isZero()||h.isZero())return new i(0)._forceRed(this);var g=o.mul(h),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=g.isub(E).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},$.prototype.invm=function(o){var h=this.imod(o._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,rc)})(zr)),zr.exports}var nc=ao();const is=nn(nc);var Fr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ss;function co(){return ss||(ss=1,(function(n,t){var e=mi(),r=e.Buffer;function s(a,u){for(var p in a)u[p]=a[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(a,u,p){return r(a,u,p)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(a,u,p){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,u,p)},i.alloc=function(a,u,p){if(typeof a!="number")throw new TypeError("Argument must be a number");var _=r(a);return u!==void 0?typeof p=="string"?_.fill(u,p):_.fill(u):_.fill(0),_},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}})(Fr,Fr.exports)),Fr.exports}var Pn,os;function ic(){if(os)return Pn;os=1;var n=co().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),u=a.charCodeAt(0);if(r[u]!==255)throw new TypeError(a+" is ambiguous");r[u]=i}var p=e.length,_=e.charAt(0),R=Math.log(p)/Math.log(256),O=Math.log(256)/Math.log(p);function k(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=n.from(I)),!n.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var L=0,P=0,G=0,q=I.length;G!==q&&I[G]===0;)G++,L++;for(var X=(q-G)*O+1>>>0,Y=new Uint8Array(X);G!==q;){for(var Q=I[G],at=0,st=X-1;(Q!==0||at<P)&&st!==-1;st--,at++)Q+=256*Y[st]>>>0,Y[st]=Q%p>>>0,Q=Q/p>>>0;if(Q!==0)throw new Error("Non-zero carry");P=at,G++}for(var C=X-P;C!==X&&Y[C]===0;)C++;for(var U=_.repeat(L);C<X;++C)U+=e.charAt(Y[C]);return U}function x(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return n.alloc(0);for(var L=0,P=0,G=0;I[L]===_;)P++,L++;for(var q=(I.length-L)*R+1>>>0,X=new Uint8Array(q);L<I.length;){var Y=I.charCodeAt(L);if(Y>255)return;var Q=r[Y];if(Q===255)return;for(var at=0,st=q-1;(Q!==0||at<G)&&st!==-1;st--,at++)Q+=p*X[st]>>>0,X[st]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");G=at,L++}for(var C=q-G;C!==q&&X[C]===0;)C++;var U=n.allocUnsafe(P+(q-C));U.fill(0,0,P);for(var H=P;C!==q;)U[H++]=X[C++];return U}function M(I){var L=x(I);if(L)return L;throw new Error("Non-base"+p+" character")}return{encode:k,decodeUnsafe:x,decode:M}}return Pn=t,Pn}var qn,as;function sc(){if(as)return qn;as=1;var n=ic(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return qn=n(t),qn}var oc=sc();const oe=nn(oc),cs=qs;var bt={},zn,us;function ac(){if(us)return zn;us=1;var n=co().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),u=a.charCodeAt(0);if(r[u]!==255)throw new TypeError(a+" is ambiguous");r[u]=i}var p=e.length,_=e.charAt(0),R=Math.log(p)/Math.log(256),O=Math.log(256)/Math.log(p);function k(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=n.from(I)),!n.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var L=0,P=0,G=0,q=I.length;G!==q&&I[G]===0;)G++,L++;for(var X=(q-G)*O+1>>>0,Y=new Uint8Array(X);G!==q;){for(var Q=I[G],at=0,st=X-1;(Q!==0||at<P)&&st!==-1;st--,at++)Q+=256*Y[st]>>>0,Y[st]=Q%p>>>0,Q=Q/p>>>0;if(Q!==0)throw new Error("Non-zero carry");P=at,G++}for(var C=X-P;C!==X&&Y[C]===0;)C++;for(var U=_.repeat(L);C<X;++C)U+=e.charAt(Y[C]);return U}function x(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return n.alloc(0);for(var L=0,P=0,G=0;I[L]===_;)P++,L++;for(var q=(I.length-L)*R+1>>>0,X=new Uint8Array(q);L<I.length;){var Y=I.charCodeAt(L);if(Y>255)return;var Q=r[Y];if(Q===255)return;for(var at=0,st=q-1;(Q!==0||at<G)&&st!==-1;st--,at++)Q+=p*X[st]>>>0,X[st]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");G=at,L++}for(var C=q-G;C!==q&&X[C]===0;)C++;var U=n.allocUnsafe(P+(q-C));U.fill(0,0,P);for(var H=P;C!==q;)U[H++]=X[C++];return U}function M(I){var L=x(I);if(L)return L;throw new Error("Non-base"+p+" character")}return{encode:k,decodeUnsafe:x,decode:M}}return zn=t,zn}var Kn,fs;function cc(){if(fs)return Kn;fs=1;var n=ac(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Kn=n(t),Kn}function Oe(n,t,e){return t<=n&&n<=e}function on(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function uc(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var u=i&1023,p=a&1023;s.push(65536+(u<<10)+p),r+=1}else s.push(65533)}r+=1}return s}function fc(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Wr=-1;function Si(n){this.tokens=[].slice.call(n)}Si.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Wr},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var hr=-1;function Hn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Zr="utf-8";function Yr(n,t){if(!(this instanceof Yr))return new Yr(n,t);if(n=n!==void 0?String(n).toLowerCase():Zr,n!==Zr)throw new Error("Encoding not supported. Only utf-8 is supported");t=on(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Yr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=on(e),this._streaming||(this._decoder=new lc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Si(r),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==hr);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===hr)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),fc(i)}};function Xr(n,t){if(!(this instanceof Xr))return new Xr(n,t);if(n=n!==void 0?String(n).toLowerCase():Zr,n!==Zr)throw new Error("Encoding not supported. Only utf-8 is supported");t=on(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Xr.prototype={encode:function(t,e){t=t?String(t):"",e=on(e),this._streaming||(this._encoder=new hc(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Si(uc(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==hr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==hr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function lc(n){var t=n.fatal,e=0,r=0,s=0,i=128,a=191;this.handler=function(u,p){if(p===Wr&&s!==0)return s=0,Hn(t);if(p===Wr)return hr;if(s===0){if(Oe(p,0,127))return p;if(Oe(p,194,223))s=1,e=p-192;else if(Oe(p,224,239))p===224&&(i=160),p===237&&(a=159),s=2,e=p-224;else if(Oe(p,240,244))p===240&&(i=144),p===244&&(a=143),s=3,e=p-240;else return Hn(t);return e=e<<6*s,null}if(!Oe(p,i,a))return e=s=r=0,i=128,a=191,u.prepend(p),Hn(t);if(i=128,a=191,r+=1,e+=p-128<<6*(s-r),r!==s)return null;var _=e;return e=s=r=0,_}}function hc(n){n.fatal,this.handler=function(t,e){if(e===Wr)return hr;if(Oe(e,0,127))return e;var r,s;Oe(e,128,2047)?(r=1,s=192):Oe(e,2048,65535)?(r=2,s=224):Oe(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}const dc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Yr,TextEncoder:Xr},Symbol.toStringTag,{value:"Module"})),pc=gi(dc);var ls;function gc(){if(ls)return bt;ls=1;var n=bt&&bt.__createBinding||(Object.create?(function(C,U,H,$){$===void 0&&($=H),Object.defineProperty(C,$,{enumerable:!0,get:function(){return U[H]}})}):(function(C,U,H,$){$===void 0&&($=H),C[$]=U[H]})),t=bt&&bt.__setModuleDefault||(Object.create?(function(C,U){Object.defineProperty(C,"default",{enumerable:!0,value:U})}):function(C,U){C.default=U}),e=bt&&bt.__decorate||function(C,U,H,$){var m=arguments.length,o=m<3?U:$===null?$=Object.getOwnPropertyDescriptor(U,H):$,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,U,H,$);else for(var g=C.length-1;g>=0;g--)(h=C[g])&&(o=(m<3?h(o):m>3?h(U,H,o):h(U,H))||o);return m>3&&o&&Object.defineProperty(U,H,o),o},r=bt&&bt.__importStar||function(C){if(C&&C.__esModule)return C;var U={};if(C!=null)for(var H in C)H!=="default"&&Object.hasOwnProperty.call(C,H)&&n(U,C,H);return t(U,C),U},s=bt&&bt.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(bt,"__esModule",{value:!0}),bt.deserializeUnchecked=bt.deserialize=bt.serialize=bt.BinaryReader=bt.BinaryWriter=bt.BorshError=bt.baseDecode=bt.baseEncode=void 0;const i=s(ao()),a=s(cc()),u=r(pc),p=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,_=new p("utf-8",{fatal:!0});function R(C){return typeof C=="string"&&(C=Buffer.from(C,"utf8")),a.default.encode(Buffer.from(C))}bt.baseEncode=R;function O(C){return Buffer.from(a.default.decode(C))}bt.baseDecode=O;const k=1024;class x extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}bt.BorshError=x;class M{constructor(){this.buf=Buffer.alloc(k),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(k)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(U).toArray("le",64)))}writeBuffer(U){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),U,Buffer.alloc(k)]),this.length+=U.length}writeString(U){this.maybeResize();const H=Buffer.from(U,"utf8");this.writeU32(H.length),this.writeBuffer(H)}writeFixedArray(U){this.writeBuffer(Buffer.from(U))}writeArray(U,H){this.maybeResize(),this.writeU32(U.length);for(const $ of U)this.maybeResize(),H($)}toArray(){return this.buf.subarray(0,this.length)}}bt.BinaryWriter=M;function I(C,U,H){const $=H.value;H.value=function(...m){try{return $.apply(this,m)}catch(o){if(o instanceof RangeError){const h=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(h)>=0)throw new x("Reached the end of buffer when deserializing")}throw o}}}class L{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new i.default(U,"le")}readU128(){const U=this.readBuffer(16);return new i.default(U,"le")}readU256(){const U=this.readBuffer(32);return new i.default(U,"le")}readU512(){const U=this.readBuffer(64);return new i.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new x(`Expected buffer length ${U} isn't within bounds`);const H=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,H}readString(){const U=this.readU32(),H=this.readBuffer(U);try{return _.decode(H)}catch($){throw new x(`Error decoding UTF-8 string: ${$}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const H=this.readU32(),$=Array();for(let m=0;m<H;++m)$.push(U());return $}}e([I],L.prototype,"readU8",null),e([I],L.prototype,"readU16",null),e([I],L.prototype,"readU32",null),e([I],L.prototype,"readU64",null),e([I],L.prototype,"readU128",null),e([I],L.prototype,"readU256",null),e([I],L.prototype,"readU512",null),e([I],L.prototype,"readString",null),e([I],L.prototype,"readFixedArray",null),e([I],L.prototype,"readArray",null),bt.BinaryReader=L;function P(C){return C.charAt(0).toUpperCase()+C.slice(1)}function G(C,U,H,$,m){try{if(typeof $=="string")m[`write${P($)}`](H);else if($ instanceof Array)if(typeof $[0]=="number"){if(H.length!==$[0])throw new x(`Expecting byte array of length ${$[0]}, but got ${H.length} bytes`);m.writeFixedArray(H)}else if($.length===2&&typeof $[1]=="number"){if(H.length!==$[1])throw new x(`Expecting byte array of length ${$[1]}, but got ${H.length} bytes`);for(let o=0;o<$[1];o++)G(C,null,H[o],$[0],m)}else m.writeArray(H,o=>{G(C,U,o,$[0],m)});else if($.kind!==void 0)switch($.kind){case"option":{H==null?m.writeU8(0):(m.writeU8(1),G(C,U,H,$.type,m));break}case"map":{m.writeU32(H.size),H.forEach((o,h)=>{G(C,U,h,$.key,m),G(C,U,o,$.value,m)});break}default:throw new x(`FieldType ${$} unrecognized`)}else q(C,H,m)}catch(o){throw o instanceof x&&o.addToFieldPath(U),o}}function q(C,U,H){if(typeof U.borshSerialize=="function"){U.borshSerialize(H);return}const $=C.get(U.constructor);if(!$)throw new x(`Class ${U.constructor.name} is missing in schema`);if($.kind==="struct")$.fields.map(([m,o])=>{G(C,m,U[m],o,H)});else if($.kind==="enum"){const m=U[$.field];for(let o=0;o<$.values.length;++o){const[h,g]=$.values[o];if(h===m){H.writeU8(o),G(C,h,U[h],g,H);break}}}else throw new x(`Unexpected schema kind: ${$.kind} for ${U.constructor.name}`)}function X(C,U,H=M){const $=new H;return q(C,U,$),$.toArray()}bt.serialize=X;function Y(C,U,H,$){try{if(typeof H=="string")return $[`read${P(H)}`]();if(H instanceof Array){if(typeof H[0]=="number")return $.readFixedArray(H[0]);if(typeof H[1]=="number"){const m=[];for(let o=0;o<H[1];o++)m.push(Y(C,null,H[0],$));return m}else return $.readArray(()=>Y(C,U,H[0],$))}if(H.kind==="option")return $.readU8()?Y(C,U,H.type,$):void 0;if(H.kind==="map"){let m=new Map;const o=$.readU32();for(let h=0;h<o;h++){const g=Y(C,U,H.key,$),E=Y(C,U,H.value,$);m.set(g,E)}return m}return Q(C,H,$)}catch(m){throw m instanceof x&&m.addToFieldPath(U),m}}function Q(C,U,H){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(H);const $=C.get(U);if(!$)throw new x(`Class ${U.name} is missing in schema`);if($.kind==="struct"){const m={};for(const[o,h]of C.get(U).fields)m[o]=Y(C,o,h,H);return new U(m)}if($.kind==="enum"){const m=H.readU8();if(m>=$.values.length)throw new x(`Enum index: ${m} is out of range`);const[o,h]=$.values[m],g=Y(C,o,h,H);return new U({[o]:g})}throw new x(`Unexpected schema kind: ${$.kind} for ${U.constructor.name}`)}function at(C,U,H,$=L){const m=new $(H),o=Q(C,U,m);if(m.offset<H.length)throw new x(`Unexpected ${H.length-m.offset} bytes after deserialized data`);return o}bt.deserialize=at;function st(C,U,H,$=L){const m=new $(H);return Q(C,U,m)}return bt.deserializeUnchecked=st,bt}var Vn=gc(),V={},hs;function mc(){if(hs)return V;hs=1,Object.defineProperty(V,"__esModule",{value:!0}),V.s16=V.s8=V.nu64be=V.u48be=V.u40be=V.u32be=V.u24be=V.u16be=V.nu64=V.u48=V.u40=V.u32=V.u24=V.u16=V.u8=V.offset=V.greedy=V.Constant=V.UTF8=V.CString=V.Blob=V.Boolean=V.BitField=V.BitStructure=V.VariantLayout=V.Union=V.UnionLayoutDiscriminator=V.UnionDiscriminator=V.Structure=V.Sequence=V.DoubleBE=V.Double=V.FloatBE=V.Float=V.NearInt64BE=V.NearInt64=V.NearUInt64BE=V.NearUInt64=V.IntBE=V.Int=V.UIntBE=V.UInt=V.OffsetLayout=V.GreedyCount=V.ExternalLayout=V.bindConstructorLayout=V.nameWithProperty=V.Layout=V.uint8ArrayToBuffer=V.checkUint8Array=void 0,V.constant=V.utf8=V.cstr=V.blob=V.unionLayoutDiscriminator=V.union=V.seq=V.bits=V.struct=V.f64be=V.f64=V.f32be=V.f32=V.ns64be=V.s48be=V.s40be=V.s32be=V.s24be=V.s16be=V.ns64=V.s48=V.s40=V.s32=V.s24=void 0;const n=mi();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}V.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}V.uint8ArrayToBuffer=e;let r=class{constructor(f,w){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=w}makeDestinationObject(){return{}}getSpan(f,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=f,w}fromArray(f){}};V.Layout=r;function s(c,f){return f.property?c+"["+f.property+"]":c}V.nameWithProperty=s;function i(c,f){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=f,f.boundConstructor_=c,f.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(w,A){return f.encode(this,w,A)},writable:!0}),Object.defineProperty(c,"decode",{value(w,A){return f.decode(w,A)},writable:!0})}V.bindConstructorLayout=i;class a extends r{isCount(){throw new Error("ExternalLayout is abstract")}}V.ExternalLayout=a;class u extends a{constructor(f=1,w){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=f}isCount(){return!0}decode(f,w=0){t(f);const A=f.length-w;return Math.floor(A/this.elementSpan)}encode(f,w,A){return 0}}V.GreedyCount=u;class p extends a{constructor(f,w=0,A){if(!(f instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(f.span,A||f.property),this.layout=f,this.offset=w}isCount(){return this.layout instanceof _||this.layout instanceof R}decode(f,w=0){return this.layout.decode(f,w+this.offset)}encode(f,w,A=0){return this.layout.encode(f,w,A+this.offset)}}V.OffsetLayout=p;class _ extends r{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readUIntLE(w,this.span)}encode(f,w,A=0){return e(w).writeUIntLE(f,A,this.span),this.span}}V.UInt=_;class R extends r{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readUIntBE(w,this.span)}encode(f,w,A=0){return e(w).writeUIntBE(f,A,this.span),this.span}}V.UIntBE=R;class O extends r{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readIntLE(w,this.span)}encode(f,w,A=0){return e(w).writeIntLE(f,A,this.span),this.span}}V.Int=O;class k extends r{constructor(f,w){if(super(f,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,w=0){return e(f).readIntBE(w,this.span)}encode(f,w,A=0){return e(w).writeIntBE(f,A,this.span),this.span}}V.IntBE=k;const x=Math.pow(2,32);function M(c){const f=Math.floor(c/x),w=c-f*x;return{hi32:f,lo32:w}}function I(c,f){return c*x+f}class L extends r{constructor(f){super(8,f)}decode(f,w=0){const A=e(f),D=A.readUInt32LE(w),W=A.readUInt32LE(w+4);return I(W,D)}encode(f,w,A=0){const D=M(f),W=e(w);return W.writeUInt32LE(D.lo32,A),W.writeUInt32LE(D.hi32,A+4),8}}V.NearUInt64=L;class P extends r{constructor(f){super(8,f)}decode(f,w=0){const A=e(f),D=A.readUInt32BE(w),W=A.readUInt32BE(w+4);return I(D,W)}encode(f,w,A=0){const D=M(f),W=e(w);return W.writeUInt32BE(D.hi32,A),W.writeUInt32BE(D.lo32,A+4),8}}V.NearUInt64BE=P;class G extends r{constructor(f){super(8,f)}decode(f,w=0){const A=e(f),D=A.readUInt32LE(w),W=A.readInt32LE(w+4);return I(W,D)}encode(f,w,A=0){const D=M(f),W=e(w);return W.writeUInt32LE(D.lo32,A),W.writeInt32LE(D.hi32,A+4),8}}V.NearInt64=G;class q extends r{constructor(f){super(8,f)}decode(f,w=0){const A=e(f),D=A.readInt32BE(w),W=A.readUInt32BE(w+4);return I(D,W)}encode(f,w,A=0){const D=M(f),W=e(w);return W.writeInt32BE(D.hi32,A),W.writeUInt32BE(D.lo32,A+4),8}}V.NearInt64BE=q;class X extends r{constructor(f){super(4,f)}decode(f,w=0){return e(f).readFloatLE(w)}encode(f,w,A=0){return e(w).writeFloatLE(f,A),4}}V.Float=X;class Y extends r{constructor(f){super(4,f)}decode(f,w=0){return e(f).readFloatBE(w)}encode(f,w,A=0){return e(w).writeFloatBE(f,A),4}}V.FloatBE=Y;class Q extends r{constructor(f){super(8,f)}decode(f,w=0){return e(f).readDoubleLE(w)}encode(f,w,A=0){return e(w).writeDoubleLE(f,A),8}}V.Double=Q;class at extends r{constructor(f){super(8,f)}decode(f,w=0){return e(f).readDoubleBE(w)}encode(f,w,A=0){return e(w).writeDoubleBE(f,A),8}}V.DoubleBE=at;class st extends r{constructor(f,w,A){if(!(f instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof a&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let D=-1;!(w instanceof a)&&0<f.span&&(D=w*f.span),super(D,A),this.elementLayout=f,this.count=w}getSpan(f,w=0){if(0<=this.span)return this.span;let A=0,D=this.count;if(D instanceof a&&(D=D.decode(f,w)),0<this.elementLayout.span)A=D*this.elementLayout.span;else{let W=0;for(;W<D;)A+=this.elementLayout.getSpan(f,w+A),++W}return A}decode(f,w=0){const A=[];let D=0,W=this.count;for(W instanceof a&&(W=W.decode(f,w));D<W;)A.push(this.elementLayout.decode(f,w)),w+=this.elementLayout.getSpan(f,w),D+=1;return A}encode(f,w,A=0){const D=this.elementLayout,W=f.reduce((et,it)=>et+D.encode(it,w,A+et),0);return this.count instanceof a&&this.count.encode(f.length,w,A),W}}V.Sequence=st;class C extends r{constructor(f,w,A){if(!(Array.isArray(f)&&f.reduce((W,et)=>W&&et instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&A===void 0&&(A=w,w=void 0);for(const W of f)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let D=-1;try{D=f.reduce((W,et)=>W+et.getSpan(),0)}catch{}super(D,w),this.fields=f,this.decodePrefixes=!!A}getSpan(f,w=0){if(0<=this.span)return this.span;let A=0;try{A=this.fields.reduce((D,W)=>{const et=W.getSpan(f,w);return w+=et,D+et},0)}catch{throw new RangeError("indeterminate span")}return A}decode(f,w=0){t(f);const A=this.makeDestinationObject();for(const D of this.fields)if(D.property!==void 0&&(A[D.property]=D.decode(f,w)),w+=D.getSpan(f,w),this.decodePrefixes&&f.length===w)break;return A}encode(f,w,A=0){const D=A;let W=0,et=0;for(const it of this.fields){let yt=it.span;if(et=0<yt?yt:0,it.property!==void 0){const wt=f[it.property];wt!==void 0&&(et=it.encode(wt,w,A),0>yt&&(yt=it.getSpan(w,A)))}W=A,A+=yt}return W+et-D}fromArray(f){const w=this.makeDestinationObject();for(const A of this.fields)A.property!==void 0&&0<f.length&&(w[A.property]=f.shift());return w}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===f)return w}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let w=0;for(const A of this.fields){if(A.property===f)return w;0>A.span?w=-1:0<=w&&(w+=A.span)}}}V.Structure=C;class U{constructor(f){this.property=f}decode(f,w){throw new Error("UnionDiscriminator is abstract")}encode(f,w,A){throw new Error("UnionDiscriminator is abstract")}}V.UnionDiscriminator=U;class H extends U{constructor(f,w){if(!(f instanceof a&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||f.property||"variant"),this.layout=f}decode(f,w){return this.layout.decode(f,w)}encode(f,w,A){return this.layout.encode(f,w,A)}}V.UnionLayoutDiscriminator=H;class $ extends r{constructor(f,w,A){let D;if(f instanceof _||f instanceof R)D=new H(new p(f));else if(f instanceof a&&f.isCount())D=new H(f);else if(f instanceof U)D=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let W=-1;w&&(W=w.span,0<=W&&(f instanceof _||f instanceof R)&&(W+=D.layout.span)),super(W,A),this.discriminator=D,this.usesPrefixDiscriminator=f instanceof _||f instanceof R,this.defaultLayout=w,this.registry={};let et=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(it){return et(it)},this.configGetSourceVariant=function(it){et=it.bind(this)}}getSpan(f,w=0){if(0<=this.span)return this.span;const A=this.getVariant(f,w);if(!A)throw new Error("unable to determine span for unrecognized variant");return A.getSpan(f,w)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const w=this.registry[f[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(f,w.property)))return w}else for(const w in this.registry){const A=this.registry[w];if(A.property&&Object.prototype.hasOwnProperty.call(f,A.property))return A}throw new Error("unable to infer src variant")}decode(f,w=0){let A;const D=this.discriminator,W=D.decode(f,w),et=this.registry[W];if(et===void 0){const it=this.defaultLayout;let yt=0;this.usesPrefixDiscriminator&&(yt=D.layout.span),A=this.makeDestinationObject(),A[D.property]=W,A[it.property]=it.decode(f,w+yt)}else A=et.decode(f,w);return A}encode(f,w,A=0){const D=this.getSourceVariant(f);if(D===void 0){const W=this.discriminator,et=this.defaultLayout;let it=0;return this.usesPrefixDiscriminator&&(it=W.layout.span),W.encode(f[W.property],w,A),it+et.encode(f[et.property],w,A+it)}return D.encode(f,w,A)}addVariant(f,w,A){const D=new m(this,f,w,A);return this.registry[f]=D,D}getVariant(f,w=0){let A;return f instanceof Uint8Array?A=this.discriminator.decode(f,w):A=f,this.registry[A]}}V.Union=$;class m extends r{constructor(f,w,A,D){if(!(f instanceof $))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof A=="string"&&D===void 0&&(D=A,A=null),A){if(!(A instanceof r))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=A.span&&A.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof D!="string")throw new TypeError("variant must have a String property")}let W=f.span;0>f.span&&(W=A?A.span:0,0<=W&&f.usesPrefixDiscriminator&&(W+=f.discriminator.layout.span)),super(W,D),this.union=f,this.variant=w,this.layout=A||null}getSpan(f,w=0){if(0<=this.span)return this.span;let A=0;this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span);let D=0;return this.layout&&(D=this.layout.getSpan(f,w+A)),A+D}decode(f,w=0){const A=this.makeDestinationObject();if(this!==this.union.getVariant(f,w))throw new Error("variant mismatch");let D=0;return this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout?A[this.property]=this.layout.decode(f,w+D):this.property?A[this.property]=!0:this.union.usesPrefixDiscriminator&&(A[this.union.discriminator.property]=this.variant),A}encode(f,w,A=0){let D=0;if(this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,A);let W=D;if(this.layout&&(this.layout.encode(f[this.property],w,A+D),W+=this.layout.getSpan(w,A+D),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}V.VariantLayout=m;function o(c){return 0>c&&(c+=4294967296),c}class h extends r{constructor(f,w,A){if(!(f instanceof _||f instanceof R))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&A===void 0&&(A=w,w=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,A),this.word=f,this.msb=!!w,this.fields=[];let D=0;this._packedSetValue=function(W){return D=o(W),this},this._packedGetValue=function(){return D}}decode(f,w=0){const A=this.makeDestinationObject(),D=this.word.decode(f,w);this._packedSetValue(D);for(const W of this.fields)W.property!==void 0&&(A[W.property]=W.decode(f));return A}encode(f,w,A=0){const D=this.word.decode(w,A);this._packedSetValue(D);for(const W of this.fields)if(W.property!==void 0){const et=f[W.property];et!==void 0&&W.encode(et)}return this.word.encode(this._packedGetValue(),w,A)}addField(f,w){const A=new g(this,f,w);return this.fields.push(A),A}addBoolean(f){const w=new E(this,f);return this.fields.push(w),w}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===f)return w}}V.BitStructure=h;class g{constructor(f,w,A){if(!(f instanceof h))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const D=8*f.span,W=f.fields.reduce((et,it)=>et+it.bits,0);if(w+W>D)throw new Error("bits too long for span remainder ("+(D-W)+" of "+D+" remain)");this.container=f,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=D-W-w),this.wordMask=o(this.valueMask<<this.start),this.property=A}decode(f,w){const A=this.container._packedGetValue();return o(A&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==o(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),A=o(f<<this.start);this.container._packedSetValue(o(w&~this.wordMask)|A)}}V.BitField=g;class E extends g{constructor(f,w){super(f,1,w)}decode(f,w){return!!super.decode(f,w)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}V.Boolean=E;class S extends r{constructor(f,w){if(!(f instanceof a&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let A=-1;f instanceof a||(A=f),super(A,w),this.length=f}getSpan(f,w){let A=this.span;return 0>A&&(A=this.length.decode(f,w)),A}decode(f,w=0){let A=this.span;return 0>A&&(A=this.length.decode(f,w)),e(f).slice(w,w+A)}encode(f,w,A){let D=this.length;if(this.length instanceof a&&(D=f.length),!(f instanceof Uint8Array&&D===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+D+") Uint8Array as src");if(A+D>w.length)throw new RangeError("encoding overruns Uint8Array");const W=e(f);return e(w).write(W.toString("hex"),A,D,"hex"),this.length instanceof a&&this.length.encode(D,w,A),D}}V.Blob=S;class B extends r{constructor(f){super(-1,f)}getSpan(f,w=0){t(f);let A=w;for(;A<f.length&&f[A]!==0;)A+=1;return 1+A-w}decode(f,w=0){const A=this.getSpan(f,w);return e(f).slice(w,w+A-1).toString("utf-8")}encode(f,w,A=0){typeof f!="string"&&(f=String(f));const D=n.Buffer.from(f,"utf8"),W=D.length;if(A+W>w.length)throw new RangeError("encoding overruns Buffer");const et=e(w);return D.copy(et,A),et[A+W]=0,W+1}}V.CString=B;class N extends r{constructor(f,w){if(typeof f=="string"&&w===void 0&&(w=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=f}getSpan(f,w=0){return t(f),f.length-w}decode(f,w=0){const A=this.getSpan(f,w);if(0<=this.maxSpan&&this.maxSpan<A)throw new RangeError("text length exceeds maxSpan");return e(f).slice(w,w+A).toString("utf-8")}encode(f,w,A=0){typeof f!="string"&&(f=String(f));const D=n.Buffer.from(f,"utf8"),W=D.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(A+W>w.length)throw new RangeError("encoding overruns Buffer");return D.copy(e(w),A),W}}V.UTF8=N;class b extends r{constructor(f,w){super(0,w),this.value=f}decode(f,w){return this.value}encode(f,w,A){return 0}}return V.Constant=b,V.greedy=((c,f)=>new u(c,f)),V.offset=((c,f,w)=>new p(c,f,w)),V.u8=(c=>new _(1,c)),V.u16=(c=>new _(2,c)),V.u24=(c=>new _(3,c)),V.u32=(c=>new _(4,c)),V.u40=(c=>new _(5,c)),V.u48=(c=>new _(6,c)),V.nu64=(c=>new L(c)),V.u16be=(c=>new R(2,c)),V.u24be=(c=>new R(3,c)),V.u32be=(c=>new R(4,c)),V.u40be=(c=>new R(5,c)),V.u48be=(c=>new R(6,c)),V.nu64be=(c=>new P(c)),V.s8=(c=>new O(1,c)),V.s16=(c=>new O(2,c)),V.s24=(c=>new O(3,c)),V.s32=(c=>new O(4,c)),V.s40=(c=>new O(5,c)),V.s48=(c=>new O(6,c)),V.ns64=(c=>new G(c)),V.s16be=(c=>new k(2,c)),V.s24be=(c=>new k(3,c)),V.s32be=(c=>new k(4,c)),V.s40be=(c=>new k(5,c)),V.s48be=(c=>new k(6,c)),V.ns64be=(c=>new q(c)),V.f32=(c=>new X(c)),V.f32be=(c=>new Y(c)),V.f64=(c=>new Q(c)),V.f64be=(c=>new at(c)),V.struct=((c,f,w)=>new C(c,f,w)),V.bits=((c,f,w)=>new h(c,f,w)),V.seq=((c,f,w)=>new st(c,f,w)),V.union=((c,f,w)=>new $(c,f,w)),V.unionLayoutDiscriminator=((c,f)=>new H(c,f)),V.blob=((c,f)=>new S(c,f)),V.cstr=(c=>new B(c)),V.utf8=((c,f)=>new N(c,f)),V.constant=((c,f)=>new b(c,f)),V}var T=mc(),yc=10,wc=-32700,bc=-32603,_c=-32602,Ec=-32601,vc=-32600,Sc=-32015,xc=-32014,Ac=-32012,Rc=-32010,Bc=-32009,Ic=-32007,kc=-32006,Mc=-32004,ds=-32002,Oc=-32001,uh=28e5,fh=2800001,lh=2800003,hh=2800006,dh=2800007,ph=2800008,gh=2800009,mh=323e4,yh=3230002,wh=361e4,bh=3610001,_h=3610003,Eh=3610005,vh=3610006,Sh=3610007,xh=3611e3,Ah=3704e3,Rh=3704001,Bh=3704004,Tc=4615e3,Nc=4615026,Lc=4615045,Ih=5508e3,kh=5663e3,Mh=5663001,Oh=5663004,Th=5663015,Nh=5663016,Lh=5663017,Ch=5663018,Uh=5663019,Cc=705e4,Uc=7050030,Fc=7050031,Dc=7050035,Pc=8078e3,qc=8078001,zc=8078002,Kc=8078004,Hc=8078005,Vc=8078006,Fh=8078007,Dh=8078008,$c=8078011,Ph=8078012,ai=8078013,Gc=8078014,qh=8078017,zh=8078018,Kh=8078022,Hh=81e5,Vh=8100002,$h=8100003,Gh=819e4,jh=8190001,Wh=8190002,Zh=8190003,Yh=8190004,Xh=99e5,Jh=9900001,Qh=9900004;function uo(n){return Array.isArray(n)?"%5B"+n.map(uo).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function jc([n,t]){return`${n}=${uo(t)}`}function Wc(n){const t=Object.entries(n).map(jc).join("&");return btoa(t)}function Zc(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Wc(t)}'`),`${e}\``}}function td(n,t){return n instanceof Error&&n.name==="SolanaError"?t!==void 0?n.context.__code===t:!0:!1}var de=class extends Error{constructor(...[t,e]){let r,s;if(e){const{cause:a,...u}=e;a&&(s={cause:a}),Object.keys(u).length>0&&(r=u)}const i=Zc(t,r);super(i,s);te(this,"cause",this.cause);te(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function fo(...n){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...n)}function lo({errorCodeBaseOffset:n,getErrorContext:t,orderedErrorNames:e,rpcEnumError:r},s){let i,a;typeof r=="string"?i=r:(i=Object.keys(r)[0],a=r[i]);const u=e.indexOf(i),p=n+u,_=t(p,i,a),R=new de(p,_);return fo(R,s),R}var Yc=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"];function ho(n,t){const e=Number(n);return lo({errorCodeBaseOffset:4615001,getErrorContext(r,s,i){return r===Tc?{errorName:s,index:e,...i!==void 0?{instructionErrorContext:i}:null}:r===Nc?{code:Number(i),index:e}:r===Lc?{encodedData:i,index:e}:{index:e}},orderedErrorNames:Yc,rpcEnumError:t},ho)}var Xc=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function po(n){return typeof n=="object"&&"InstructionError"in n?ho(...n.InstructionError):lo({errorCodeBaseOffset:7050001,getErrorContext(t,e,r){if(t===Cc)return{errorName:e,...r!==void 0?{transactionErrorContext:r}:null};if(t===Uc)return{index:Number(r)};if(t===Fc||t===Dc)return{accountIndex:Number(r.account_index)}},orderedErrorNames:Xc,rpcEnumError:n},po)}function Jc(n){let t;if(Qc(n)){const{code:e,data:r,message:s}=n,i=Number(e);if(i===ds){const{err:a,...u}=r,p=a?{cause:po(a)}:null;t=new de(ds,{...u,...p})}else{let a;switch(i){case bc:case _c:case vc:case Ec:case wc:case Ac:case Oc:case Mc:case xc:case Rc:case Bc:case Ic:case kc:case Sc:a={__serverMessage:s};break;default:typeof r=="object"&&!Array.isArray(r)&&(a=r)}t=new de(i,a)}}else{const e=typeof n=="object"&&n!==null&&"message"in n&&typeof n.message=="string"?n.message:"Malformed JSON-RPC error with no message attribute";t=new de(yc,{error:n,message:e})}return fo(t,Jc),t}function Qc(n){return typeof n=="object"&&n!==null&&"code"in n&&"message"in n&&(typeof n.code=="number"||typeof n.code=="bigint")&&typeof n.message=="string"}var tu=(n,t)=>{if(n.length>=t)return n;const e=new Uint8Array(t).fill(0);return e.set(n),e},eu=(n,t)=>tu(n.length<=t?n:n.slice(0,t),t);function ed(n,t,e){const r=e===0&&n.length===t.length?n:n.slice(e,e+t.length);return r.length!==t.length?!1:t.every((s,i)=>s===r[i])}function ci(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Le(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(ci(t,n));return n.write(t,e,0),e}})}function Ve(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function ne(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function rd(n){if(!ne(n))throw new de(zc)}function ru(n){return!ne(n)}function nu(n,t){if(ne(n)!==ne(t))throw new de(Kc);if(ne(n)&&ne(t)&&n.fixedSize!==t.fixedSize)throw new de(Hc,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!ne(n)&&!ne(t)&&n.maxSize!==t.maxSize)throw new de(Vc,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function iu(n,t,e=0){if(t.length-e<=0)throw new de(Pc,{codecDescription:n})}function xi(n,t,e,r=0){const s=e.length-r;if(s<t)throw new de(qc,{bytesLength:s,codecDescription:n,expected:t})}function Jr(n,t,e){if(t<0||t>e)throw new de(Gc,{bytesLength:e,codecDescription:n,offset:t})}function nd(n,t){const e=(a,u,p)=>{const _=n.encode(a);return p=t.write(_.length,u,p),u.set(_,p),p+_.length};if(ne(t)&&ne(n))return Le({...n,fixedSize:t.fixedSize+n.fixedSize,write:e});const r=ne(t)?t.fixedSize:t.maxSize??null,s=ne(n)?n.fixedSize:n.maxSize??null,i=r!==null&&s!==null?r+s:null;return Le({...n,...i!==null?{maxSize:i}:{},getSizeFromValue:a=>{const u=ci(a,n);return ci(u,t)+u},write:e})}function id(n,t){const e=(a,u)=>{const[p,_]=t.read(a,u),R=Number(p);return u=_,(u>0||a.length>R)&&(a=a.slice(u,u+R)),xi("addDecoderSizePrefix",R,a),[n.decode(a),u+R]};if(ne(t)&&ne(n))return Ve({...n,fixedSize:t.fixedSize+n.fixedSize,read:e});const r=ne(t)?t.fixedSize:t.maxSize??null,s=ne(n)?n.fixedSize:n.maxSize??null,i=r!==null&&s!==null?r+s:null;return Ve({...n,...i!==null?{maxSize:i}:{},read:e})}function sd(n,t){return Le({fixedSize:t,write:(e,r,s)=>{const i=n.encode(e),a=i.length>t?i.slice(0,t):i;return r.set(a,s),s+t}})}function od(n,t){return Ve({fixedSize:t,read:(e,r)=>{xi("fixCodecSize",t,e,r),(r>0||e.length>t)&&(e=e.slice(r,r+t)),ne(n)&&(e=eu(e,n.fixedSize));const[s]=n.read(e,0);return[s,r+t]}})}function su(n,t){return Le({...n,write:(e,r,s)=>{const i=_=>go(_,r.length),a=t.preOffset?t.preOffset({bytes:r,preOffset:s,wrapBytes:i}):s;Jr("offsetEncoder",a,r.length);const u=n.write(e,r,a),p=t.postOffset?t.postOffset({bytes:r,newPreOffset:a,postOffset:u,preOffset:s,wrapBytes:i}):u;return Jr("offsetEncoder",p,r.length),p}})}function ou(n,t){return Ve({...n,read:(e,r)=>{const s=_=>go(_,e.length),i=t.preOffset?t.preOffset({bytes:e,preOffset:r,wrapBytes:s}):r;Jr("offsetDecoder",i,e.length);const[a,u]=n.read(e,i),p=t.postOffset?t.postOffset({bytes:e,newPreOffset:i,postOffset:u,preOffset:r,wrapBytes:s}):u;return Jr("offsetDecoder",p,e.length),[a,p]}})}function go(n,t){return t===0?0:(n%t+t)%t}function au(n,t){if(ne(n)){const e=t(n.fixedSize);if(e<0)throw new de(ai,{bytesLength:e,codecDescription:"resizeEncoder"});return Le({...n,fixedSize:e})}return Le({...n,getSizeFromValue:e=>{const r=t(n.getSizeFromValue(e));if(r<0)throw new de(ai,{bytesLength:r,codecDescription:"resizeEncoder"});return r}})}function cu(n,t){if(ne(n)){const e=t(n.fixedSize);if(e<0)throw new de(ai,{bytesLength:e,codecDescription:"resizeDecoder"});return Ve({...n,fixedSize:e})}return n}function ad(n,t){return su(au(n,e=>e+t),{preOffset:({preOffset:e})=>e+t})}function cd(n,t){return ou(cu(n,e=>e+t),{postOffset:({postOffset:e})=>e+t})}function ud(n,t){return Le({...ru(n)?{...n,getSizeFromValue:e=>n.getSizeFromValue(t(e))}:n,write:(e,r,s)=>n.write(t(e),r,s)})}function fd(n,t){return Ve({...n,read:(e,r)=>{const[s,i]=n.read(e,r);return[t(s,e,r),i]}})}function mo(n,t,e,r){if(r<t||r>e)throw new de($c,{codecDescription:n,max:e,min:t,value:r})}function yo(n){return n?.endian!==1}function Ai(n){return Le({fixedSize:n.size,write(t,e,r){n.range&&mo(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,yo(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function mr(n){return Ve({fixedSize:n.size,read(t,e=0){iu(n.name,t,e),xi(n.name,n.size,t,e);const r=new DataView(uu(t,e,n.size));return[n.get(r,yo(n.config)),e+n.size]}})}function uu(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var ld=(n={})=>mr({config:n,get:(t,e)=>t.getFloat64(0,e),name:"f64",size:8}),hd=(n={})=>mr({config:n,get:(t,e)=>t.getInt16(0,e),name:"i16",size:2}),dd=()=>Le({getSizeFromValue:n=>n<=127?1:n<=16383?2:3,maxSize:3,write:(n,t,e)=>{mo("shortU16",0,65535,n);const r=[0];for(let s=0;;s+=1){const i=Number(n)>>s*7;if(i===0)break;const a=127&i;r[s]=a,s>0&&(r[s-1]|=128)}return t.set(r,e),e+r.length}}),pd=()=>Ve({maxSize:3,read:(n,t)=>{let e=0,r=0;for(;++r;){const s=r-1,i=n[t+s],a=127&i;if(e|=a<<s*7,(i&128)===0)break}return[e,t+r]}}),gd=(n={})=>mr({config:n,get:(t,e)=>t.getUint16(0,e),name:"u16",size:2}),md=(n={})=>Ai({config:n,name:"u32",range:[0,+"0xffffffff"],set:(t,e,r)=>t.setUint32(0,Number(e),r),size:4}),yd=(n={})=>mr({config:n,get:(t,e)=>t.getUint32(0,e),name:"u32",size:4}),fu=(n={})=>Ai({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),lu=(n={})=>mr({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),hu=(n={})=>nu(fu(n),lu(n)),wd=()=>Ai({name:"u8",range:[0,+"0xff"],set:(n,t)=>n.setUint8(0,Number(t)),size:1}),bd=()=>mr({get:n=>n.getUint8(0),name:"u8",size:1});class du extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...a}=t,{path:u}=t,p=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function pu(n){return Br(n)&&typeof n[Symbol.iterator]=="function"}function Br(n){return typeof n=="object"&&n!=null}function Qr(n){return Br(n)&&!Array.isArray(n)}function Se(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function gu(n){const{done:t,value:e}=n.next();return t?void 0:e}function mu(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:a}=e,{refinement:u,message:p=`Expected a value of type \`${a}\`${u?` with refinement \`${u}\``:""}, but received: \`${Se(r)}\``}=n;return{value:r,type:a,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:p}}function*ps(n,t,e,r){pu(n)||(n=[n]);for(const s of n){const i=mu(s,t,e,r);i&&(yield i)}}function*Ri(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:a=!1}=e,u={path:r,branch:s,mask:a};i&&(n=t.coercer(n,u));let p="valid";for(const _ of t.validator(n,u))_.explanation=e.message,p="not_valid",yield[_,void 0];for(let[_,R,O]of t.entries(n,u)){const k=Ri(R,O,{path:_===void 0?r:[...r,_],branch:_===void 0?s:[...s,R],coerce:i,mask:a,message:e.message});for(const x of k)x[0]?(p=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):i&&(R=x[1],_===void 0?n=R:n instanceof Map?n.set(_,R):n instanceof Set?n.add(R):Br(n)&&(R!==void 0||_ in n)&&(n[_]=R))}if(p!=="not_valid")for(const _ of t.refiner(n,u))_.explanation=e.message,p="not_refined",yield[_,void 0];p==="valid"&&(yield[void 0,n])}let Be=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:a=p=>p,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=a,s?this.validator=(p,_)=>{const R=s(p,_);return ps(R,_,this,p)}:this.validator=()=>[],i?this.refiner=(p,_)=>{const R=i(p,_);return ps(R,_,this,p)}:this.refiner=()=>[]}assert(t,e){return yu(t,this,e)}create(t,e){return tt(t,this,e)}is(t){return wo(t,this)}mask(t,e){return wu(t,this,e)}validate(t,e={}){return Ir(t,this,e)}};function yu(n,t,e){const r=Ir(n,t,{message:e});if(r[0])throw r[0]}function tt(n,t,e){const r=Ir(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function wu(n,t,e){const r=Ir(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function wo(n,t){return!Ir(n,t)[0]}function Ir(n,t,e={}){const r=Ri(n,t,e),s=gu(r);return s[0]?[new du(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function Qe(n,t){return new Be({type:n,schema:null,validator:t})}function bu(){return Qe("any",()=>!0)}function rt(n){return new Be({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Se(t)}`}})}function Re(){return Qe("boolean",n=>typeof n=="boolean")}function Bi(n){return Qe("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Se(t)}`)}function It(n){const t=Se(n),e=typeof n;return new Be({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Se(r)}`}})}function _u(){return Qe("never",()=>!1)}function nt(n){return new Be({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function K(){return Qe("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Se(n)}`)}function ct(n){return new Be({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function bo(n,t){return new Be({type:"record",schema:null,*entries(e){if(Br(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Qr(e)||`Expected an object, but received: ${Se(e)}`},coercer(e){return Qr(e)?{...e}:e}})}function J(){return Qe("string",n=>typeof n=="string"||`Expected a string, but received: ${Se(n)}`)}function Ii(n){const t=_u();return new Be({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Se(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(n){const t=Object.keys(n);return new Be({type:"type",schema:n,*entries(e){if(Br(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Qr(e)||`Expected an object, but received: ${Se(e)}`},coercer(e){return Qr(e)?{...e}:e}})}function pe(n){const t=n.map(e=>e.type).join(" | ");return new Be({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,a]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return a}return e},validator(e,r){const s=[];for(const i of n){const[...a]=Ri(e,i,r),[u]=a;if(u[0])for(const[p]of a)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Se(e)}`,...s]}})}function yr(){return Qe("unknown",()=>!0)}function kr(n,t,e){return new Be({...n,coercer:(r,s)=>wo(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Dr,Eu=new Uint8Array(16);function _o(){if(!Dr&&(Dr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Dr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dr(Eu)}const vu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function an(n){return typeof n=="string"&&vu.test(n)}var se=[];for(var $n=0;$n<256;++$n)se.push(($n+256).toString(16).substr(1));function cn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(se[n[t+0]]+se[n[t+1]]+se[n[t+2]]+se[n[t+3]]+"-"+se[n[t+4]]+se[n[t+5]]+"-"+se[n[t+6]]+se[n[t+7]]+"-"+se[n[t+8]]+se[n[t+9]]+"-"+se[n[t+10]]+se[n[t+11]]+se[n[t+12]]+se[n[t+13]]+se[n[t+14]]+se[n[t+15]]).toLowerCase();if(!an(e))throw TypeError("Stringified UUID is invalid");return e}var gs,Gn,jn=0,Wn=0;function Su(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||gs,a=n.clockseq!==void 0?n.clockseq:Gn;if(i==null||a==null){var u=n.random||(n.rng||_o)();i==null&&(i=gs=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=Gn=(u[6]<<8|u[7])&16383)}var p=n.msecs!==void 0?n.msecs:Date.now(),_=n.nsecs!==void 0?n.nsecs:Wn+1,R=p-jn+(_-Wn)/1e4;if(R<0&&n.clockseq===void 0&&(a=a+1&16383),(R<0||p>jn)&&n.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");jn=p,Wn=_,Gn=a,p+=122192928e5;var O=((p&268435455)*1e4+_)%4294967296;s[r++]=O>>>24&255,s[r++]=O>>>16&255,s[r++]=O>>>8&255,s[r++]=O&255;var k=p/4294967296*1e4&268435455;s[r++]=k>>>8&255,s[r++]=k&255,s[r++]=k>>>24&15|16,s[r++]=k>>>16&255,s[r++]=a>>>8|128,s[r++]=a&255;for(var x=0;x<6;++x)s[r+x]=i[x];return t||cn(s)}function Eo(n){if(!an(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function xu(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Au="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ru="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function vo(n,t,e){function r(s,i,a,u){if(typeof s=="string"&&(s=xu(s)),typeof i=="string"&&(i=Eo(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,a){u=u||0;for(var _=0;_<16;++_)a[u+_]=p[_];return a}return cn(p)}try{r.name=n}catch{}return r.DNS=Au,r.URL=Ru,r}function Bu(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Iu(ku(Mu(n),n.length*8))}function Iu(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function So(n){return(n+64>>>9<<4)+14+1}function ku(n,t){n[t>>5]|=128<<t%32,n[So(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,a=0;a<n.length;a+=16){var u=e,p=r,_=s,R=i;e=ue(e,r,s,i,n[a],7,-680876936),i=ue(i,e,r,s,n[a+1],12,-389564586),s=ue(s,i,e,r,n[a+2],17,606105819),r=ue(r,s,i,e,n[a+3],22,-1044525330),e=ue(e,r,s,i,n[a+4],7,-176418897),i=ue(i,e,r,s,n[a+5],12,1200080426),s=ue(s,i,e,r,n[a+6],17,-1473231341),r=ue(r,s,i,e,n[a+7],22,-45705983),e=ue(e,r,s,i,n[a+8],7,1770035416),i=ue(i,e,r,s,n[a+9],12,-1958414417),s=ue(s,i,e,r,n[a+10],17,-42063),r=ue(r,s,i,e,n[a+11],22,-1990404162),e=ue(e,r,s,i,n[a+12],7,1804603682),i=ue(i,e,r,s,n[a+13],12,-40341101),s=ue(s,i,e,r,n[a+14],17,-1502002290),r=ue(r,s,i,e,n[a+15],22,1236535329),e=fe(e,r,s,i,n[a+1],5,-165796510),i=fe(i,e,r,s,n[a+6],9,-1069501632),s=fe(s,i,e,r,n[a+11],14,643717713),r=fe(r,s,i,e,n[a],20,-373897302),e=fe(e,r,s,i,n[a+5],5,-701558691),i=fe(i,e,r,s,n[a+10],9,38016083),s=fe(s,i,e,r,n[a+15],14,-660478335),r=fe(r,s,i,e,n[a+4],20,-405537848),e=fe(e,r,s,i,n[a+9],5,568446438),i=fe(i,e,r,s,n[a+14],9,-1019803690),s=fe(s,i,e,r,n[a+3],14,-187363961),r=fe(r,s,i,e,n[a+8],20,1163531501),e=fe(e,r,s,i,n[a+13],5,-1444681467),i=fe(i,e,r,s,n[a+2],9,-51403784),s=fe(s,i,e,r,n[a+7],14,1735328473),r=fe(r,s,i,e,n[a+12],20,-1926607734),e=le(e,r,s,i,n[a+5],4,-378558),i=le(i,e,r,s,n[a+8],11,-2022574463),s=le(s,i,e,r,n[a+11],16,1839030562),r=le(r,s,i,e,n[a+14],23,-35309556),e=le(e,r,s,i,n[a+1],4,-1530992060),i=le(i,e,r,s,n[a+4],11,1272893353),s=le(s,i,e,r,n[a+7],16,-155497632),r=le(r,s,i,e,n[a+10],23,-1094730640),e=le(e,r,s,i,n[a+13],4,681279174),i=le(i,e,r,s,n[a],11,-358537222),s=le(s,i,e,r,n[a+3],16,-722521979),r=le(r,s,i,e,n[a+6],23,76029189),e=le(e,r,s,i,n[a+9],4,-640364487),i=le(i,e,r,s,n[a+12],11,-421815835),s=le(s,i,e,r,n[a+15],16,530742520),r=le(r,s,i,e,n[a+2],23,-995338651),e=he(e,r,s,i,n[a],6,-198630844),i=he(i,e,r,s,n[a+7],10,1126891415),s=he(s,i,e,r,n[a+14],15,-1416354905),r=he(r,s,i,e,n[a+5],21,-57434055),e=he(e,r,s,i,n[a+12],6,1700485571),i=he(i,e,r,s,n[a+3],10,-1894986606),s=he(s,i,e,r,n[a+10],15,-1051523),r=he(r,s,i,e,n[a+1],21,-2054922799),e=he(e,r,s,i,n[a+8],6,1873313359),i=he(i,e,r,s,n[a+15],10,-30611744),s=he(s,i,e,r,n[a+6],15,-1560198380),r=he(r,s,i,e,n[a+13],21,1309151649),e=he(e,r,s,i,n[a+4],6,-145523070),i=he(i,e,r,s,n[a+11],10,-1120210379),s=he(s,i,e,r,n[a+2],15,718787259),r=he(r,s,i,e,n[a+9],21,-343485551),e=Ke(e,u),r=Ke(r,p),s=Ke(s,_),i=Ke(i,R)}return[e,r,s,i]}function Mu(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(So(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Ke(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Ou(n,t){return n<<t|n>>>32-t}function un(n,t,e,r,s,i){return Ke(Ou(Ke(Ke(t,n),Ke(r,i)),s),e)}function ue(n,t,e,r,s,i,a){return un(t&e|~t&r,n,t,s,i,a)}function fe(n,t,e,r,s,i,a){return un(t&r|e&~r,n,t,s,i,a)}function le(n,t,e,r,s,i,a){return un(t^e^r,n,t,s,i,a)}function he(n,t,e,r,s,i,a){return un(e^(t|~r),n,t,s,i,a)}var Tu=vo("v3",48,Bu);function Nu(n,t,e){n=n||{};var r=n.random||(n.rng||_o)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return cn(r)}function Lu(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Zn(n,t){return n<<t|n>>>32-t}function Cu(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),u=new Array(a),p=0;p<a;++p){for(var _=new Uint32Array(16),R=0;R<16;++R)_[R]=n[p*64+R*4]<<24|n[p*64+R*4+1]<<16|n[p*64+R*4+2]<<8|n[p*64+R*4+3];u[p]=_}u[a-1][14]=(n.length-1)*8/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=(n.length-1)*8&4294967295;for(var O=0;O<a;++O){for(var k=new Uint32Array(80),x=0;x<16;++x)k[x]=u[O][x];for(var M=16;M<80;++M)k[M]=Zn(k[M-3]^k[M-8]^k[M-14]^k[M-16],1);for(var I=e[0],L=e[1],P=e[2],G=e[3],q=e[4],X=0;X<80;++X){var Y=Math.floor(X/20),Q=Zn(I,5)+Lu(Y,L,P,G)+q+t[Y]+k[X]>>>0;q=G,G=P,P=Zn(L,30)>>>0,L=I,I=Q}e[0]=e[0]+I>>>0,e[1]=e[1]+L>>>0,e[2]=e[2]+P>>>0,e[3]=e[3]+G>>>0,e[4]=e[4]+q>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Uu=vo("v5",80,Cu);const Fu="00000000-0000-0000-0000-000000000000";function Du(n){if(!an(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Pu=Object.freeze(Object.defineProperty({__proto__:null,NIL:Fu,parse:Eo,stringify:cn,v1:Su,v3:Tu,v4:Nu,v5:Uu,validate:an,version:Du},Symbol.toStringTag,{value:"Module"})),xo=gi(Pu);var Yn,ms;function qu(){if(ms)return Yn;ms=1;const n=xo.v4;return Yn=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const u={method:e};if(a===2&&(u.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");u.params=r}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return n()};u.id=p(u,i)}else a===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},Yn}var Xn,ys;function zu(){if(ys)return Xn;ys=1;const n=xo.v4,t=qu(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Xn=e,e.prototype.request=function(r,s,i,a){const u=this;let p=null;const _=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&_)throw new TypeError("JSON-RPC 1.0 does not support batching");if(_||!_&&r&&typeof r=="object"&&typeof s=="function")a=s,p=r;else{typeof i=="function"&&(a=i,i=void 0);const k=typeof a=="function";try{p=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(k)return a(x);throw x}if(!k)return p}let O;try{O=JSON.stringify(p,this.options.replacer)}catch(k){return a(k)}return this.callServer(O,function(k,x){u._parseResponse(k,x,a)}),p},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let a;try{a=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(a)){const u=function(_){return typeof _.error<"u"},p=function(_){return!u(_)};return i(null,a.filter(u),a.filter(p))}else return i(null,a.error,a.result);i(null,a)},Xn}var Ku=zu();const Hu=nn(Ku);var Jn={exports:{}},ws;function Vu(){return ws||(ws=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(p,_,R){this.fn=p,this.context=_,this.once=R||!1}function i(p,_,R,O,k){if(typeof R!="function")throw new TypeError("The listener must be a function");var x=new s(R,O||p,k),M=e?e+_:_;return p._events[M]?p._events[M].fn?p._events[M]=[p._events[M],x]:p._events[M].push(x):(p._events[M]=x,p._eventsCount++),p}function a(p,_){--p._eventsCount===0?p._events=new r:delete p._events[_]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var _=[],R,O;if(this._eventsCount===0)return _;for(O in R=this._events)t.call(R,O)&&_.push(e?O.slice(1):O);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(R)):_},u.prototype.listeners=function(_){var R=e?e+_:_,O=this._events[R];if(!O)return[];if(O.fn)return[O.fn];for(var k=0,x=O.length,M=new Array(x);k<x;k++)M[k]=O[k].fn;return M},u.prototype.listenerCount=function(_){var R=e?e+_:_,O=this._events[R];return O?O.fn?1:O.length:0},u.prototype.emit=function(_,R,O,k,x,M){var I=e?e+_:_;if(!this._events[I])return!1;var L=this._events[I],P=arguments.length,G,q;if(L.fn){switch(L.once&&this.removeListener(_,L.fn,void 0,!0),P){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,R),!0;case 3:return L.fn.call(L.context,R,O),!0;case 4:return L.fn.call(L.context,R,O,k),!0;case 5:return L.fn.call(L.context,R,O,k,x),!0;case 6:return L.fn.call(L.context,R,O,k,x,M),!0}for(q=1,G=new Array(P-1);q<P;q++)G[q-1]=arguments[q];L.fn.apply(L.context,G)}else{var X=L.length,Y;for(q=0;q<X;q++)switch(L[q].once&&this.removeListener(_,L[q].fn,void 0,!0),P){case 1:L[q].fn.call(L[q].context);break;case 2:L[q].fn.call(L[q].context,R);break;case 3:L[q].fn.call(L[q].context,R,O);break;case 4:L[q].fn.call(L[q].context,R,O,k);break;default:if(!G)for(Y=1,G=new Array(P-1);Y<P;Y++)G[Y-1]=arguments[Y];L[q].fn.apply(L[q].context,G)}}return!0},u.prototype.on=function(_,R,O){return i(this,_,R,O,!1)},u.prototype.once=function(_,R,O){return i(this,_,R,O,!0)},u.prototype.removeListener=function(_,R,O,k){var x=e?e+_:_;if(!this._events[x])return this;if(!R)return a(this,x),this;var M=this._events[x];if(M.fn)M.fn===R&&(!k||M.once)&&(!O||M.context===O)&&a(this,x);else{for(var I=0,L=[],P=M.length;I<P;I++)(M[I].fn!==R||k&&!M[I].once||O&&M[I].context!==O)&&L.push(M[I]);L.length?this._events[x]=L.length===1?L[0]:L:a(this,x)}return this},u.prototype.removeAllListeners=function(_){var R;return _?(R=e?e+_:_,this._events[R]&&a(this,R)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u})(Jn)),Jn.exports}var $u=Vu();const Ao=nn($u);var Gu=class extends Ao{constructor(t,e){super();te(this,"socket");this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function ju(n,t){return new Gu(n,t)}var Wu=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Zu=class extends Ao{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:a=5,...u}={},p,_){super();te(this,"address");te(this,"rpc_id");te(this,"queue");te(this,"options");te(this,"autoconnect");te(this,"ready");te(this,"reconnect");te(this,"reconnect_timer_id");te(this,"reconnect_interval");te(this,"max_reconnects");te(this,"rest_options");te(this,"current_reconnects");te(this,"generate_request_id");te(this,"socket");te(this,"webSocketFactory");te(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=a,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=p||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),_?this.dataPack=_:this.dataPack=new Wu,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,a)=>{if(!this.ready)return a(new Error("socket not ready"));const u=this.generate_request_id(t,e),p={jsonrpc:"2.0",method:t,params:e||void 0,id:u};this.socket.send(this.dataPack.encode(p),s,_=>{if(_)return a(_);this.queue[u]={promise:[i,a]},r&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],a(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),a=>{if(a)return s(a);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=gt.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,s),1))})}};class Ro extends Us{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ls(t);const r=yi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),fr(i)}update(t){return Vr(this),this.iHash.update(t),this}digestInto(t){Vr(this),Xe(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bo=(n,t,e)=>new Ro(n,t).update(e).digest();Bo.create=(n,t)=>new Ro(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bs=(n,t)=>(n+(n>=0?t:-t)/Io)/t;function Yu(n,t,e){const[[r,s],[i,a]]=t,u=bs(a*n,e),p=bs(-s*n,e);let _=n-u*r-p*i,R=-u*s-p*a;const O=_<Ne,k=R<Ne;O&&(_=-_),k&&(R=-R);const x=Ar(Math.ceil(Hs(e)/2))+cr;if(_<Ne||_>=x||R<Ne||R>=x)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:O,k1:_,k2neg:k,k2:R}}function ui(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Qn(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Ye(e.lowS,"lowS"),Ye(e.prehash,"prehash"),e.format!==void 0&&ui(e.format),e}class Xu extends Error{constructor(t=""){super(t)}}const Me={Err:Xu,_tlv:{encode:(n,t)=>{const{Err:e}=Me;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=Ur(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Ur(s.length/2|128):"";return Ur(n)+i+s+t},decode(n,t){const{Err:e}=Me;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const p=s&127;if(!p)throw new e("tlv.decode(long): indefinite length not supported");if(p>4)throw new e("tlv.decode(long): byte length is too big");const _=t.subarray(r,r+p);if(_.length!==p)throw new e("tlv.decode: length bytes not complete");if(_[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const R of _)a=a<<8|R;if(r+=p,a<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+a);if(u.length!==a)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+a)}}},_int:{encode(n){const{Err:t}=Me;if(n<Ne)throw new t("integer: negative integers are not allowed");let e=Ur(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Me;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return sn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Me,s=Ct("signature",n),{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:p}=r.decode(2,i),{v:_,l:R}=r.decode(2,p);if(R.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(_)}},hexFromSig(n){const{_tlv:t,_int:e}=Me,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Ne=BigInt(0),cr=BigInt(1),Io=BigInt(2),Pr=BigInt(3),Ju=BigInt(4);function or(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=Ct("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Qu(n,t={}){const e=so("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:a,n:u}=i;Rr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:p}=t;if(p&&(!r.is0(i.a)||typeof p.beta!="bigint"||!Array.isArray(p.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const _=Mo(r,s);function R(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function O($,m,o){const{x:h,y:g}=m.toAffine(),E=r.toBytes(h);if(Ye(o,"isCompressed"),o){R();const S=!r.isOdd(g);return Ae(ko(S),E)}else return Ae(Uint8Array.of(4),E,r.toBytes(g))}function k($){ve($,void 0,"Point");const{publicKey:m,publicKeyUncompressed:o}=_,h=$.length,g=$[0],E=$.subarray(1);if(h===m&&(g===2||g===3)){const S=r.fromBytes(E);if(!r.isValid(S))throw new Error("bad point: is not on curve, wrong x");const B=I(S);let N;try{N=r.sqrt(B)}catch(f){const w=f instanceof Error?": "+f.message:"";throw new Error("bad point: is not on curve, sqrt error"+w)}R();const b=r.isOdd(N);return(g&1)===1!==b&&(N=r.neg(N)),{x:S,y:N}}else if(h===o&&g===4){const S=r.BYTES,B=r.fromBytes(E.subarray(0,S)),N=r.fromBytes(E.subarray(S,S*2));if(!L(B,N))throw new Error("bad point: is not on curve");return{x:B,y:N}}else throw new Error(`bad point: got length ${h}, expected compressed=${m} or uncompressed=${o}`)}const x=t.toBytes||O,M=t.fromBytes||k;function I($){const m=r.sqr($),o=r.mul(m,$);return r.add(r.add(o,r.mul($,i.a)),i.b)}function L($,m){const o=r.sqr(m),h=I($);return r.eql(o,h)}if(!L(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const P=r.mul(r.pow(i.a,Pr),Ju),G=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(P,G)))throw new Error("bad curve params: a or b");function q($,m,o=!1){if(!r.isValid(m)||o&&r.is0(m))throw new Error(`bad point coordinate ${$}`);return m}function X($){if(!($ instanceof C))throw new Error("ProjectivePoint expected")}function Y($){if(!p||!p.basises)throw new Error("no endo");return Yu($,p.basises,s.ORDER)}const Q=Gr(($,m)=>{const{X:o,Y:h,Z:g}=$;if(r.eql(g,r.ONE))return{x:o,y:h};const E=$.is0();m==null&&(m=E?r.ONE:r.inv(g));const S=r.mul(o,m),B=r.mul(h,m),N=r.mul(g,m);if(E)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:S,y:B}}),at=Gr($=>{if($.is0()){if(t.allowInfinityPoint&&!r.is0($.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:o}=$.toAffine();if(!r.isValid(m)||!r.isValid(o))throw new Error("bad point: x or y not field elements");if(!L(m,o))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function st($,m,o,h,g){return o=new C(r.mul(o.X,$),o.Y,o.Z),m=jr(h,m),o=jr(g,o),m.add(o)}class C{constructor(m,o,h){this.X=q("x",m),this.Y=q("y",o,!0),this.Z=q("z",h),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:o,y:h}=m||{};if(!m||!r.isValid(o)||!r.isValid(h))throw new Error("invalid affine point");if(m instanceof C)throw new Error("projective point not allowed");return r.is0(o)&&r.is0(h)?C.ZERO:new C(o,h,r.ONE)}static fromBytes(m){const o=C.fromAffine(M(ve(m,void 0,"point")));return o.assertValidity(),o}static fromHex(m){return C.fromBytes(Ct("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,o=!0){return H.createCache(this,m),o||this.multiply(Pr),this}assertValidity(){at(this)}hasEvenY(){const{y:m}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(m)}equals(m){X(m);const{X:o,Y:h,Z:g}=this,{X:E,Y:S,Z:B}=m,N=r.eql(r.mul(o,B),r.mul(E,g)),b=r.eql(r.mul(h,B),r.mul(S,g));return N&&b}negate(){return new C(this.X,r.neg(this.Y),this.Z)}double(){const{a:m,b:o}=i,h=r.mul(o,Pr),{X:g,Y:E,Z:S}=this;let B=r.ZERO,N=r.ZERO,b=r.ZERO,c=r.mul(g,g),f=r.mul(E,E),w=r.mul(S,S),A=r.mul(g,E);return A=r.add(A,A),b=r.mul(g,S),b=r.add(b,b),B=r.mul(m,b),N=r.mul(h,w),N=r.add(B,N),B=r.sub(f,N),N=r.add(f,N),N=r.mul(B,N),B=r.mul(A,B),b=r.mul(h,b),w=r.mul(m,w),A=r.sub(c,w),A=r.mul(m,A),A=r.add(A,b),b=r.add(c,c),c=r.add(b,c),c=r.add(c,w),c=r.mul(c,A),N=r.add(N,c),w=r.mul(E,S),w=r.add(w,w),c=r.mul(w,A),B=r.sub(B,c),b=r.mul(w,f),b=r.add(b,b),b=r.add(b,b),new C(B,N,b)}add(m){X(m);const{X:o,Y:h,Z:g}=this,{X:E,Y:S,Z:B}=m;let N=r.ZERO,b=r.ZERO,c=r.ZERO;const f=i.a,w=r.mul(i.b,Pr);let A=r.mul(o,E),D=r.mul(h,S),W=r.mul(g,B),et=r.add(o,h),it=r.add(E,S);et=r.mul(et,it),it=r.add(A,D),et=r.sub(et,it),it=r.add(o,g);let yt=r.add(E,B);return it=r.mul(it,yt),yt=r.add(A,W),it=r.sub(it,yt),yt=r.add(h,g),N=r.add(S,B),yt=r.mul(yt,N),N=r.add(D,W),yt=r.sub(yt,N),c=r.mul(f,it),N=r.mul(w,W),c=r.add(N,c),N=r.sub(D,c),c=r.add(D,c),b=r.mul(N,c),D=r.add(A,A),D=r.add(D,A),W=r.mul(f,W),it=r.mul(w,it),D=r.add(D,W),W=r.sub(A,W),W=r.mul(f,W),it=r.add(it,W),A=r.mul(D,it),b=r.add(b,A),A=r.mul(yt,it),N=r.mul(et,N),N=r.sub(N,A),A=r.mul(et,D),c=r.mul(yt,c),c=r.add(c,A),new C(N,b,c)}subtract(m){return this.add(m.negate())}is0(){return this.equals(C.ZERO)}multiply(m){const{endo:o}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let h,g;const E=S=>H.cached(this,S,B=>We(C,B));if(o){const{k1neg:S,k1:B,k2neg:N,k2:b}=Y(m),{p:c,f}=E(B),{p:w,f:A}=E(b);g=f.add(A),h=st(o.beta,c,w,S,N)}else{const{p:S,f:B}=E(m);h=S,g=B}return We(C,[h,g])[0]}multiplyUnsafe(m){const{endo:o}=t,h=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===Ne||h.is0())return C.ZERO;if(m===cr)return h;if(H.hasCache(this))return this.multiply(m);if(o){const{k1neg:g,k1:E,k2neg:S,k2:B}=Y(m),{p1:N,p2:b}=Fa(C,h,E,B);return st(o.beta,N,b,g,S)}else return H.unsafe(h,m)}multiplyAndAddUnsafe(m,o,h){const g=this.multiplyUnsafe(o).add(m.multiplyUnsafe(h));return g.is0()?void 0:g}toAffine(m){return Q(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return a===cr?!0:m?m(C,this):H.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:m}=t;return a===cr?this:m?m(C,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(m=!0){return Ye(m,"isCompressed"),this.assertValidity(),x(C,this,m)}toHex(m=!0){return Ze(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return We(C,m)}static msm(m,o){return io(C,s,m,o)}static fromPrivateKey(m){return C.BASE.multiply(or(s,m))}}C.BASE=new C(i.Gx,i.Gy,r.ONE),C.ZERO=new C(r.ZERO,r.ONE,r.ZERO),C.Fp=r,C.Fn=s;const U=s.BITS,H=new no(C,t.endo?Math.ceil(U/2):U);return C.BASE.precompute(8),C}function ko(n){return Uint8Array.of(n?2:3)}function Mo(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function tf(n,t={}){const{Fn:e}=n,r=t.randomBytes||wi,s=Object.assign(Mo(n.Fp,e),{seed:to(e.ORDER)});function i(x){try{return!!or(e,x)}catch{return!1}}function a(x,M){const{publicKey:I,publicKeyUncompressed:L}=s;try{const P=x.length;return M===!0&&P!==I||M===!1&&P!==L?!1:!!n.fromBytes(x)}catch{return!1}}function u(x=r(s.seed)){return La(ve(x,s.seed,"seed"),e.ORDER)}function p(x,M=!0){return n.BASE.multiply(or(e,x)).toBytes(M)}function _(x){const M=u(x);return{secretKey:M,publicKey:p(M)}}function R(x){if(typeof x=="bigint")return!1;if(x instanceof n)return!0;const{secretKey:M,publicKey:I,publicKeyUncompressed:L}=s;if(e.allowedLengths||M===I)return;const P=Ct("key",x).length;return P===I||P===L}function O(x,M,I=!0){if(R(x)===!0)throw new Error("first arg must be private key");if(R(M)===!1)throw new Error("second arg must be public key");const L=or(e,x);return n.fromHex(M).multiply(L).toBytes(I)}return Object.freeze({getPublicKey:p,getSharedSecret:O,keygen:_,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:u,isValidPrivateKey:i,randomPrivateKey:u,normPrivateKeyToScalar:x=>or(e,x),precompute(x=8,M=n.BASE){return M.precompute(x,!1)}},lengths:s})}function ef(n,t,e={}){Ls(t),Rr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||wi,s=e.hmac||((o,...h)=>Bo(t,o,Ae(...h))),{Fp:i,Fn:a}=n,{ORDER:u,BITS:p}=a,{keygen:_,getPublicKey:R,getSharedSecret:O,utils:k,lengths:x}=tf(n,e),M={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},I="compact";function L(o){const h=u>>cr;return o>h}function P(o,h){if(!a.isValidNot0(h))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return h}function G(o,h){ui(h);const g=x.signature,E=h==="compact"?g:h==="recovered"?g+1:void 0;return ve(o,E,`${h} signature`)}class q{constructor(h,g,E){this.r=P("r",h),this.s=P("s",g),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(h,g=I){G(h,g);let E;if(g==="der"){const{r:b,s:c}=Me.toSig(ve(h));return new q(b,c)}g==="recovered"&&(E=h[0],g="compact",h=h.subarray(1));const S=a.BYTES,B=h.subarray(0,S),N=h.subarray(S,S*2);return new q(a.fromBytes(B),a.fromBytes(N),E)}static fromHex(h,g){return this.fromBytes($r(h),g)}addRecoveryBit(h){return new q(this.r,this.s,h)}recoverPublicKey(h){const g=i.ORDER,{r:E,s:S,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(u*Io<g&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const b=B===2||B===3?E+u:E;if(!i.isValid(b))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(b),f=n.fromBytes(Ae(ko((B&1)===0),c)),w=a.inv(b),A=Y(Ct("msgHash",h)),D=a.create(-A*w),W=a.create(S*w),et=n.BASE.multiplyUnsafe(D).add(f.multiplyUnsafe(W));if(et.is0())throw new Error("point at infinify");return et.assertValidity(),et}hasHighS(){return L(this.s)}toBytes(h=I){if(ui(h),h==="der")return $r(Me.hexFromSig(this));const g=a.toBytes(this.r),E=a.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ae(Uint8Array.of(this.recovery),g,E)}return Ae(g,E)}toHex(h){return Ze(this.toBytes(h))}assertValidity(){}static fromCompact(h){return q.fromBytes(Ct("sig",h),"compact")}static fromDER(h){return q.fromBytes(Ct("sig",h),"der")}normalizeS(){return this.hasHighS()?new q(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ze(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ze(this.toBytes("compact"))}}const X=e.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const g=sn(h),E=h.length*8-p;return E>0?g>>BigInt(E):g},Y=e.bits2int_modN||function(h){return a.create(X(h))},Q=Ar(p);function at(o){return oi("num < 2^"+p,o,Ne,Q),a.toBytes(o)}function st(o,h){return ve(o,void 0,"message"),h?ve(t(o),void 0,"prehashed message"):o}function C(o,h,g){if(["recovered","canonical"].some(D=>D in g))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:S,extraEntropy:B}=Qn(g,M);o=st(o,S);const N=Y(o),b=or(a,h),c=[at(b),at(N)];if(B!=null&&B!==!1){const D=B===!0?r(x.secretKey):B;c.push(Ct("extraEntropy",D))}const f=Ae(...c),w=N;function A(D){const W=X(D);if(!a.isValidNot0(W))return;const et=a.inv(W),it=n.BASE.multiply(W).toAffine(),yt=a.create(it.x);if(yt===Ne)return;const wt=a.create(et*a.create(w+yt*b));if(wt===Ne)return;let _t=(it.x===yt?0:2)|Number(it.y&cr),ye=wt;return E&&L(wt)&&(ye=a.neg(wt),_t^=1),new q(yt,ye,_t)}return{seed:f,k2sig:A}}function U(o,h,g={}){o=Ct("message",o);const{seed:E,k2sig:S}=C(o,h,g);return xa(t.outputLen,a.BYTES,s)(E,S)}function H(o){let h;const g=typeof o=="string"||xr(o),E=!g&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!g&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)h=new q(o.r,o.s);else if(g){try{h=q.fromBytes(Ct("sig",o),"der")}catch(S){if(!(S instanceof Me.Err))throw S}if(!h)try{h=q.fromBytes(Ct("sig",o),"compact")}catch{return!1}}return h||!1}function $(o,h,g,E={}){const{lowS:S,prehash:B,format:N}=Qn(E,M);if(g=Ct("publicKey",g),h=st(Ct("message",h),B),"strict"in E)throw new Error("options.strict was renamed to lowS");const b=N===void 0?H(o):q.fromBytes(Ct("sig",o),N);if(b===!1)return!1;try{const c=n.fromBytes(g);if(S&&b.hasHighS())return!1;const{r:f,s:w}=b,A=Y(h),D=a.inv(w),W=a.create(A*D),et=a.create(f*D),it=n.BASE.multiplyUnsafe(W).add(c.multiplyUnsafe(et));return it.is0()?!1:a.create(it.x)===f}catch{return!1}}function m(o,h,g={}){const{prehash:E}=Qn(g,M);return h=st(h,E),q.fromBytes(o,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:_,getPublicKey:R,getSharedSecret:O,utils:k,lengths:x,Point:n,sign:U,verify:$,recoverPublicKey:m,Signature:q,hash:t})}function rf(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Je(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function nf(n){const{CURVE:t,curveOpts:e}=rf(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function sf(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,Js(e.Fn.ORDER,e.Fn.BITS))})}function of(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=nf(n),i=Qu(t,e),a=ef(i,r,s);return sf(n,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function af(n,t){const e=r=>of({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ki={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},cf={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_s=BigInt(2);function uf(n){const t=ki.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),p=BigInt(88),_=n*n*n%t,R=_*_*n%t,O=Lt(R,e,t)*R%t,k=Lt(O,e,t)*R%t,x=Lt(k,_s,t)*_%t,M=Lt(x,s,t)*x%t,I=Lt(M,i,t)*M%t,L=Lt(I,u,t)*I%t,P=Lt(L,p,t)*L%t,G=Lt(P,u,t)*I%t,q=Lt(G,e,t)*R%t,X=Lt(q,a,t)*M%t,Y=Lt(X,r,t)*_%t,Q=Lt(Y,_s,t);if(!fi.eql(fi.sqr(Q),n))throw new Error("Cannot find square root");return Q}const fi=Je(ki.p,{sqrt:uf}),ff=af({...ki,Fp:fi,lowS:!0,endo:cf},qs);gr.utils.randomPrivateKey;const Es=()=>{const n=gr.utils.randomPrivateKey(),t=li(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},li=gr.getPublicKey;function vs(n){try{return gr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const lf=(n,t)=>gr.sign(n,t.slice(0,32)),hf=gr.verify,dr=n=>gt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?gt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):gt.Buffer.from(n);class df{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(Vn.serialize(Kr,this))}static decode(t){return Vn.deserialize(Kr,this,t)}static decodeUnchecked(t){return Vn.deserializeUnchecked(Kr,this,t)}}const Kr=new Map;var Oo;const pf=32,He=32;function gf(n){return n._bn!==void 0}let Ss=1;class ut extends df{constructor(t){if(super({}),this._bn=void 0,gf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=oe.decode(t);if(e.length!=He)throw new Error("Invalid public key input");this._bn=new is(e)}else this._bn=new is(t);if(this._bn.byteLength()>He)throw new Error("Invalid public key input")}}static unique(){const t=new ut(Ss);return Ss+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return oe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===He)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),r.toBuffer()]),i=cs(s);return new ut(i)}static createProgramAddressSync(t,e){let r=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>pf)throw new TypeError("Max seed length exceeded");r=gt.Buffer.concat([r,dr(i)])}),r=gt.Buffer.concat([r,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=cs(r);if(vs(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(gt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return vs(e.toBytes())}}Oo=ut;ut.default=new Oo("11111111111111111111111111111111");Kr.set(ut,{kind:"struct",fields:[["_bn","u256"]]});new ut("BPFLoader1111111111111111111111111111111111");const ur=1232,To=127,No=64;class Lo extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Lo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Co extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Co.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Er extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Er.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class tn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const s=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const mt=(n="publicKey")=>T.blob(32,n),ar=(n="string")=>{const t=T.struct([T.u32("length"),T.u32("lengthPadding"),T.blob(T.offset(T.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,a)=>e(i,a).chars.toString(),s.encode=(i,a,u)=>{const p={chars:gt.Buffer.from(i,"utf8")};return r(p,a,u)},s.alloc=i=>T.u32().span+T.u32().span+gt.Buffer.from(i,"utf8").length,s},mf=(n="authorized")=>T.struct([mt("staker"),mt("withdrawer")],n),yf=(n="lockup")=>T.struct([T.ns64("unixTimestamp"),T.ns64("epoch"),mt("custodian")],n),wf=(n="voteInit")=>T.struct([mt("nodePubkey"),mt("authorizedVoter"),mt("authorizedWithdrawer"),T.u8("commission")],n),bf=(n="voteAuthorizeWithSeedArgs")=>T.struct([T.u32("voteAuthorizationType"),mt("currentAuthorityDerivedKeyOwnerPubkey"),ar("currentAuthorityDerivedKeySeed"),mt("newAuthorized")],n);function we(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function be(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ee(n,t){if(!n)throw new Error(t||"Assertion failed")}class fn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=a=>{const u=a.toBase58();let p=r.get(u);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,p)),p},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){s(a.programId).isInvoked=!0;for(const u of a.keys){const p=s(u.pubkey);p.isSigner||(p.isSigner=u.isSigner),p.isWritable||(p.isWritable=u.isWritable)}}return new fn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ee(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,p])=>p.isSigner&&p.isWritable),r=t.filter(([,p])=>p.isSigner&&!p.isWritable),s=t.filter(([,p])=>!p.isSigner&&p.isWritable),i=t.filter(([,p])=>!p.isSigner&&!p.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ee(e.length>0,"Expected at least one writable signer key");const[p]=e[0];ee(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([p])=>new ut(p)),...r.map(([p])=>new ut(p)),...s.map(([p])=>new ut(p)),...i.map(([p])=>new ut(p))];return[a,u]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const u=new ut(i),p=t.findIndex(_=>_.equals(u));p>=0&&(ee(p<256,"Max lookup table index exceeded"),r.push(p),s.push(u),this.keyMetaMap.delete(i))}return[r,s]}}const Uo="Reached end of buffer unexpectedly";function Te(n){if(n.length===0)throw new Error(Uo);return n.shift()}function _e(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Uo);return n.splice(...t)}class $e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:oe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new tn(this.staticAccountKeys)}static compile(t){const e=fn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),a=new tn(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:oe.encode(u.data)}));return new $e({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];be(e,t);const r=this.instructions.map(O=>{const{accounts:k,programIdIndex:x}=O,M=Array.from(oe.decode(O.data));let I=[];be(I,k.length);let L=[];return be(L,M.length),{programIdIndex:x,keyIndicesCount:gt.Buffer.from(I),keyIndices:k,dataLength:gt.Buffer.from(L),data:M}});let s=[];be(s,r.length);let i=gt.Buffer.alloc(ur);gt.Buffer.from(s).copy(i);let a=s.length;r.forEach(O=>{const x=T.struct([T.u8("programIdIndex"),T.blob(O.keyIndicesCount.length,"keyIndicesCount"),T.seq(T.u8("keyIndex"),O.keyIndices.length,"keyIndices"),T.blob(O.dataLength.length,"dataLength"),T.seq(T.u8("userdatum"),O.data.length,"data")]).encode(O,i,a);a+=x}),i=i.slice(0,a);const u=T.struct([T.blob(1,"numRequiredSignatures"),T.blob(1,"numReadonlySignedAccounts"),T.blob(1,"numReadonlyUnsignedAccounts"),T.blob(e.length,"keyCount"),T.seq(mt("key"),t,"keys"),mt("recentBlockhash")]),p={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(O=>dr(O.toBytes())),recentBlockhash:oe.decode(this.recentBlockhash)};let _=gt.Buffer.alloc(2048);const R=u.encode(p,_);return i.copy(_,R),_.slice(0,R+i.length)}static from(t){let e=[...t];const r=Te(e);if(r!==(r&To))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Te(e),i=Te(e),a=we(e);let u=[];for(let k=0;k<a;k++){const x=_e(e,0,He);u.push(new ut(gt.Buffer.from(x)))}const p=_e(e,0,He),_=we(e);let R=[];for(let k=0;k<_;k++){const x=Te(e),M=we(e),I=_e(e,0,M),L=we(e),P=_e(e,0,L),G=oe.encode(gt.Buffer.from(P));R.push({programIdIndex:x,accounts:I,data:G})}const O={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:oe.encode(gt.Buffer.from(p)),accountKeys:u,instructions:R};return new $e(O)}}class en{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new tn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=fn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const R of i){const O=e.extractTableLookup(R);if(O!==void 0){const[k,{writable:x,readonly:M}]=O;r.push(k),s.writable.push(...x),s.readonly.push(...M)}}const[a,u]=e.getMessageComponents(),_=new tn(u,s).compileInstructions(t.instructions);return new en({header:a,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:_,addressTableLookups:r})}serialize(){const t=Array();be(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();be(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();be(i,this.addressTableLookups.length);const a=T.struct([T.u8("prefix"),T.struct([T.u8("numRequiredSignatures"),T.u8("numReadonlySignedAccounts"),T.u8("numReadonlyUnsignedAccounts")],"header"),T.blob(t.length,"staticAccountKeysLength"),T.seq(mt(),this.staticAccountKeys.length,"staticAccountKeys"),mt("recentBlockhash"),T.blob(r.length,"instructionsLength"),T.blob(e.length,"serializedInstructions"),T.blob(i.length,"addressTableLookupsLength"),T.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(ur),_=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(R=>R.toBytes()),recentBlockhash:oe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,_)}serializeInstructions(){let t=0;const e=new Uint8Array(ur);for(const r of this.compiledInstructions){const s=Array();be(s,r.accountKeyIndexes.length);const i=Array();be(i,r.data.length);const a=T.struct([T.u8("programIdIndex"),T.blob(s.length,"encodedAccountKeyIndexesLength"),T.seq(T.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),T.blob(i.length,"encodedDataLength"),T.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ur);for(const r of this.addressTableLookups){const s=Array();be(s,r.writableIndexes.length);const i=Array();be(i,r.readonlyIndexes.length);const a=T.struct([mt("accountKey"),T.blob(s.length,"encodedWritableIndexesLength"),T.seq(T.u8(),r.writableIndexes.length,"writableIndexes"),T.blob(i.length,"encodedReadonlyIndexesLength"),T.seq(T.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Te(e),s=r&To;ee(r!==s,"Expected versioned message but received legacy message");const i=s;ee(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Te(e),numReadonlySignedAccounts:Te(e),numReadonlyUnsignedAccounts:Te(e)},u=[],p=we(e);for(let M=0;M<p;M++)u.push(new ut(_e(e,0,He)));const _=oe.encode(_e(e,0,He)),R=we(e),O=[];for(let M=0;M<R;M++){const I=Te(e),L=we(e),P=_e(e,0,L),G=we(e),q=new Uint8Array(_e(e,0,G));O.push({programIdIndex:I,accountKeyIndexes:P,data:q})}const k=we(e),x=[];for(let M=0;M<k;M++){const I=new ut(_e(e,0,He)),L=we(e),P=_e(e,0,L),G=we(e),q=_e(e,0,G);x.push({accountKey:I,writableIndexes:P,readonlyIndexes:q})}return new en({header:a,staticAccountKeys:u,recentBlockhash:_,compiledInstructions:O,addressTableLookups:x})}}let qe=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const _f=gt.Buffer.alloc(No).fill(0);class xs{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ze{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new xs(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(P=>{i.push({...P})});const L=I.programId.toString();s.includes(L)||s.push(L)}),s.forEach(I=>{i.push({pubkey:new ut(I),isSigner:!1,isWritable:!1})});const a=[];i.forEach(I=>{const L=I.pubkey.toString(),P=a.findIndex(G=>G.pubkey.toString()===L);P>-1?(a[P].isWritable=a[P].isWritable||I.isWritable,a[P].isSigner=a[P].isSigner||I.isSigner):a.push(I)}),a.sort(function(I,L){if(I.isSigner!==L.isSigner)return I.isSigner?-1:1;if(I.isWritable!==L.isWritable)return I.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",P)});const u=a.findIndex(I=>I.pubkey.equals(r));if(u>-1){const[I]=a.splice(u,1);I.isSigner=!0,I.isWritable=!0,a.unshift(I)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const I of this.signatures){const L=a.findIndex(P=>P.pubkey.equals(I.publicKey));if(L>-1)a[L].isSigner||(a[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let p=0,_=0,R=0;const O=[],k=[];a.forEach(({pubkey:I,isSigner:L,isWritable:P})=>{L?(O.push(I.toString()),p+=1,P||(_+=1)):(k.push(I.toString()),P||(R+=1))});const x=O.concat(k),M=e.map(I=>{const{data:L,programId:P}=I;return{programIdIndex:x.indexOf(P.toString()),accounts:I.keys.map(G=>x.indexOf(G.pubkey.toString())),data:oe.encode(L)}});return M.forEach(I=>{ee(I.programIdIndex>=0),I.accounts.forEach(L=>ee(L>=0))}),new $e({header:{numRequiredSignatures:p,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:R},accountKeys:x,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=lf(r,s.secretKey);this._addSignature(s.publicKey,dr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ee(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):hf(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];be(r,e.length);const s=r.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return ee(e.length<256),gt.Buffer.from(r).copy(i,0),e.forEach(({signature:a},u)=>{a!==null&&(ee(a.length===64,"signature has invalid length"),gt.Buffer.from(a).copy(i,r.length+u*64))}),t.copy(i,r.length+e.length*64),ee(i.length<=ur,`Transaction too large: ${i.length} > ${ur}`),i}get keys(){return ee(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ee(this.instructions.length===1),this.instructions[0].programId}get data(){return ee(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=we(e);let s=[];for(let i=0;i<r;i++){const a=_e(e,0,No);s.push(oe.encode(gt.Buffer.from(a)))}return ze.populate($e.from(e),s)}static populate(t,e=[]){const r=new ze;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const a={signature:s==oe.encode(_f)?null:oe.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(s=>{const i=s.accounts.map(a=>{const u=t.accountKeys[a];return{pubkey:u,isSigner:r.signatures.some(p=>p.publicKey.toString()===u.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new xs({keys:i,programId:t.accountKeys[s.programIdIndex],data:oe.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Ef=160,vf=64,Sf=Ef/vf,xf=1e3/Sf;new ut("SysvarC1ock11111111111111111111111111111111");new ut("SysvarEpochSchedu1e111111111111111111111111");new ut("Sysvar1nstructions1111111111111111111111111");new ut("SysvarRecentB1ockHashes11111111111111111111");new ut("SysvarRent111111111111111111111111111111111");new ut("SysvarRewards111111111111111111111111111111");new ut("SysvarS1otHashes111111111111111111111111111");new ut("SysvarS1otHistory11111111111111111111111111");new ut("SysvarStakeHistory1111111111111111111111111");class As extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${r}. `+i+a;break;case"simulate":u=`Simulation failed. 
Message: ${r}. 
`+i+a;break;default:u=`Unknown action '${(p=>p)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ot extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function sr(n){return new Promise(t=>setTimeout(t,n))}const Af=T.nu64("lamportsPerSignature"),Fo=T.struct([T.u32("version"),T.u32("state"),mt("authorizedPubkey"),mt("nonce"),T.struct([Af],"feeCalculator")]);Fo.span;class Mi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Fo.decode(dr(t),0);return new Mi({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function pr(n){const t=T.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=hu();return s.decode=(a,u)=>{const p=e(a,u);return i.decode(p)},s.encode=(a,u,p)=>{const _=i.encode(a);return r(_,u,p)},s}Object.freeze({Create:{index:0,layout:T.struct([T.u32("instruction"),T.ns64("lamports"),T.ns64("space"),mt("programId")])},Assign:{index:1,layout:T.struct([T.u32("instruction"),mt("programId")])},Transfer:{index:2,layout:T.struct([T.u32("instruction"),pr("lamports")])},CreateWithSeed:{index:3,layout:T.struct([T.u32("instruction"),mt("base"),ar("seed"),T.ns64("lamports"),T.ns64("space"),mt("programId")])},AdvanceNonceAccount:{index:4,layout:T.struct([T.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:T.struct([T.u32("instruction"),mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:T.struct([T.u32("instruction"),mt("authorized")])},Allocate:{index:8,layout:T.struct([T.u32("instruction"),T.ns64("space")])},AllocateWithSeed:{index:9,layout:T.struct([T.u32("instruction"),mt("base"),ar("seed"),T.ns64("space"),mt("programId")])},AssignWithSeed:{index:10,layout:T.struct([T.u32("instruction"),mt("base"),ar("seed"),mt("programId")])},TransferWithSeed:{index:11,layout:T.struct([T.u32("instruction"),pr("lamports"),ar("seed"),mt("programId")])},UpgradeNonceAccount:{index:12,layout:T.struct([T.u32("instruction")])}});new ut("11111111111111111111111111111111");new ut("BPFLoader2111111111111111111111111111111111");function Rf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ti,Rs;function Bf(){if(Rs)return ti;Rs=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,a,u,p,_,R,O;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(O=n.call(r),O==="[object Array]"){for(u="[",a=r.length-1,i=0;i<a;i++)u+=e(r[i],!0)+",";return a>-1&&(u+=e(r[i],!0)),u+"]"}else if(O==="[object Object]"){for(p=t(r).sort(),a=p.length,u="",i=0;i<a;)_=p[i],R=e(r[_],!1),R!==void 0&&(u&&(u+=","),u+=JSON.stringify(_)+":"+R),i++;return"{"+u+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return ti=function(r){var s=e(r,!1);if(s!==void 0)return""+s},ti}var If=Bf(),Bs=Rf(If);const _r=32;function ei(n){let t=0;for(;n>1;)n/=2,t++;return t}function kf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Mf{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ei(kf(t+_r+1))-ei(_r)-1,r=this.getSlotsInEpoch(e),s=t-(r-_r);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*_r:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ei(_r)):this.slotsPerEpoch}}var Of=globalThis.fetch;class Tf extends Zu{constructor(t,e,r){const s=i=>{const a=ju(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Nf(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Is=56;class ks{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Nf(Lf,t),r=t.length-Is;ee(r>=0,"lookup table is invalid"),ee(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=T.struct([T.seq(mt(),s,"addresses")]).decode(t.slice(Is));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(a=>new ut(a))}}}const Lf={index:1,layout:T.struct([T.u32("typeIndex"),pr("deactivationSlot"),T.nu64("lastExtendedSlot"),T.u8("lastExtendedStartIndex"),T.u8(),T.seq(mt(),T.offset(T.u8(),-1),"authority")])},Cf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Uf(n){const t=n.match(Cf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,a=n.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),p=u==null?"":`:${u+1}`;return`${a}//${r}${p}${i}`}const kt=kr(Bi(ut),J(),n=>new ut(n)),Do=Ii([J(),It("base64")]),Oi=kr(Bi(gt.Buffer),Do,n=>gt.Buffer.from(n[0],"base64")),Ff=30*1e3;function Df(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function vt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Ms(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Po(n){return pe([Z({jsonrpc:It("2.0"),id:J(),result:n}),Z({jsonrpc:It("2.0"),id:J(),error:Z({code:yr(),message:J(),data:ct(bu())})})])}const Pf=Po(yr());function pt(n){return kr(Po(n),Pf,t=>"error"in t?t:{...t,result:tt(t.result,n)})}function Ut(n){return pt(Z({context:Z({slot:K()}),value:n}))}function ln(n){return Z({context:Z({slot:K()}),value:n})}function ri(n,t){return n===0?new en({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:oe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new $e(t)}const qf=Z({foundation:K(),foundationTerm:K(),initial:K(),taper:K(),terminal:K()}),zf=pt(rt(nt(Z({epoch:K(),effectiveSlot:K(),amount:K(),postBalance:K(),commission:ct(nt(K()))})))),Kf=rt(Z({slot:K(),prioritizationFee:K()})),Hf=Z({total:K(),validator:K(),foundation:K(),epoch:K()}),Vf=Z({epoch:K(),slotIndex:K(),slotsInEpoch:K(),absoluteSlot:K(),blockHeight:ct(K()),transactionCount:ct(K())}),$f=Z({slotsPerEpoch:K(),leaderScheduleSlotOffset:K(),warmup:Re(),firstNormalEpoch:K(),firstNormalSlot:K()}),Gf=bo(J(),rt(K())),tr=nt(pe([Z({}),J()])),jf=Z({err:tr}),Wf=It("receivedSignature"),Zf=Z({"solana-core":J(),"feature-set":ct(K())}),Yf=Z({program:J(),programId:kt,parsed:yr()}),Xf=Z({programId:kt,accounts:rt(kt),data:J()}),Os=Ut(Z({err:nt(pe([Z({}),J()])),logs:nt(rt(J())),accounts:ct(nt(rt(nt(Z({executable:Re(),owner:J(),lamports:K(),data:rt(J()),rentEpoch:ct(K())}))))),unitsConsumed:ct(K()),returnData:ct(nt(Z({programId:J(),data:Ii([J(),It("base64")])}))),innerInstructions:ct(nt(rt(Z({index:K(),instructions:rt(pe([Yf,Xf]))}))))})),Jf=Ut(Z({byIdentity:bo(J(),rt(K())),range:Z({firstSlot:K(),lastSlot:K()})}));function Qf(n,t,e,r,s,i){const a=e||Of;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let p;return r&&(p=async(R,O)=>{const k=await new Promise((x,M)=>{try{r(R,O,(I,L)=>x([I,L]))}catch(I){M(I)}});return await a(...k)}),new Hu(async(R,O)=>{const k={method:"POST",body:R,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},Ql)};try{let x=5,M,I=500;for(;p?M=await p(n,k):M=await a(n,k),!(M.status!==429||s===!0||(x-=1,x===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${I}ms delay...`),await sr(I),I*=2;const L=await M.text();M.ok?O(null,L):O(new Error(`${M.status} ${M.statusText}: ${L}`))}catch(x){x instanceof Error&&O(x)}},{})}function tl(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,a)=>{if(i){s(i);return}r(a)})})}function el(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,a)=>{if(i){r(i);return}e(a)})})}const rl=pt(qf),nl=pt(Hf),il=pt(Kf),sl=pt(Vf),ol=pt($f),al=pt(Gf),cl=pt(K()),ul=Ut(Z({total:K(),circulating:K(),nonCirculating:K(),nonCirculatingAccounts:rt(kt)})),hi=Z({amount:J(),uiAmount:nt(K()),decimals:K(),uiAmountString:ct(J())}),fl=Ut(rt(Z({address:kt,amount:J(),uiAmount:nt(K()),decimals:K(),uiAmountString:ct(J())}))),ll=Ut(rt(Z({pubkey:kt,account:Z({executable:Re(),owner:kt,lamports:K(),data:Oi,rentEpoch:K()})}))),di=Z({program:J(),parsed:yr(),space:K()}),hl=Ut(rt(Z({pubkey:kt,account:Z({executable:Re(),owner:kt,lamports:K(),data:di,rentEpoch:K()})}))),dl=Ut(rt(Z({lamports:K(),address:kt}))),Sr=Z({executable:Re(),owner:kt,lamports:K(),data:Oi,rentEpoch:K()}),pl=Z({pubkey:kt,account:Sr}),gl=kr(pe([Bi(gt.Buffer),di]),pe([Do,di]),n=>Array.isArray(n)?tt(n,Oi):n),pi=Z({executable:Re(),owner:kt,lamports:K(),data:gl,rentEpoch:K()}),ml=Z({pubkey:kt,account:pi}),yl=Z({state:pe([It("active"),It("inactive"),It("activating"),It("deactivating")]),active:K(),inactive:K()}),wl=pt(rt(Z({signature:J(),slot:K(),err:tr,memo:nt(J()),blockTime:ct(nt(K()))}))),bl=pt(rt(Z({signature:J(),slot:K(),err:tr,memo:nt(J()),blockTime:ct(nt(K()))}))),_l=Z({subscription:K(),result:ln(Sr)}),El=Z({pubkey:kt,account:Sr}),vl=Z({subscription:K(),result:ln(El)}),Sl=Z({parent:K(),slot:K(),root:K()}),xl=Z({subscription:K(),result:Sl}),Al=pe([Z({type:pe([It("firstShredReceived"),It("completed"),It("optimisticConfirmation"),It("root")]),slot:K(),timestamp:K()}),Z({type:It("createdBank"),parent:K(),slot:K(),timestamp:K()}),Z({type:It("frozen"),slot:K(),timestamp:K(),stats:Z({numTransactionEntries:K(),numSuccessfulTransactions:K(),numFailedTransactions:K(),maxTransactionsPerEntry:K()})}),Z({type:It("dead"),slot:K(),timestamp:K(),err:J()})]),Rl=Z({subscription:K(),result:Al}),Bl=Z({subscription:K(),result:ln(pe([jf,Wf]))}),Il=Z({subscription:K(),result:K()}),kl=Z({pubkey:J(),gossip:nt(J()),tpu:nt(J()),rpc:nt(J()),version:nt(J())}),Ts=Z({votePubkey:J(),nodePubkey:J(),activatedStake:K(),epochVoteAccount:Re(),epochCredits:rt(Ii([K(),K(),K()])),commission:K(),lastVote:K(),rootSlot:nt(K())}),Ml=pt(Z({current:rt(Ts),delinquent:rt(Ts)})),Ol=pe([It("processed"),It("confirmed"),It("finalized")]),Tl=Z({slot:K(),confirmations:nt(K()),err:tr,confirmationStatus:ct(Ol)}),Nl=Ut(rt(nt(Tl))),Ll=pt(K()),qo=Z({accountKey:kt,writableIndexes:rt(K()),readonlyIndexes:rt(K())}),Ti=Z({signatures:rt(J()),message:Z({accountKeys:rt(J()),header:Z({numRequiredSignatures:K(),numReadonlySignedAccounts:K(),numReadonlyUnsignedAccounts:K()}),instructions:rt(Z({accounts:rt(K()),data:J(),programIdIndex:K()})),recentBlockhash:J(),addressTableLookups:ct(rt(qo))})}),zo=Z({pubkey:kt,signer:Re(),writable:Re(),source:ct(pe([It("transaction"),It("lookupTable")]))}),Ko=Z({accountKeys:rt(zo),signatures:rt(J())}),Ho=Z({parsed:yr(),program:J(),programId:kt}),Vo=Z({accounts:rt(kt),data:J(),programId:kt}),Cl=pe([Vo,Ho]),Ul=pe([Z({parsed:yr(),program:J(),programId:J()}),Z({accounts:rt(J()),data:J(),programId:J()})]),$o=kr(Cl,Ul,n=>"accounts"in n?tt(n,Vo):tt(n,Ho)),Go=Z({signatures:rt(J()),message:Z({accountKeys:rt(zo),instructions:rt($o),recentBlockhash:J(),addressTableLookups:ct(nt(rt(qo)))})}),rn=Z({accountIndex:K(),mint:J(),owner:ct(J()),programId:ct(J()),uiTokenAmount:hi}),jo=Z({writable:rt(kt),readonly:rt(kt)}),hn=Z({err:tr,fee:K(),innerInstructions:ct(nt(rt(Z({index:K(),instructions:rt(Z({accounts:rt(K()),data:J(),programIdIndex:K()}))})))),preBalances:rt(K()),postBalances:rt(K()),logMessages:ct(nt(rt(J()))),preTokenBalances:ct(nt(rt(rn))),postTokenBalances:ct(nt(rt(rn))),loadedAddresses:ct(jo),computeUnitsConsumed:ct(K()),costUnits:ct(K())}),Ni=Z({err:tr,fee:K(),innerInstructions:ct(nt(rt(Z({index:K(),instructions:rt($o)})))),preBalances:rt(K()),postBalances:rt(K()),logMessages:ct(nt(rt(J()))),preTokenBalances:ct(nt(rt(rn))),postTokenBalances:ct(nt(rt(rn))),loadedAddresses:ct(jo),computeUnitsConsumed:ct(K()),costUnits:ct(K())}),wr=pe([It(0),It("legacy")]),er=Z({pubkey:J(),lamports:K(),postBalance:nt(K()),rewardType:nt(J()),commission:ct(nt(K()))}),Fl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:rt(Z({transaction:Ti,meta:nt(hn),version:ct(wr)})),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),Dl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),Pl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:rt(Z({transaction:Ko,meta:nt(hn),version:ct(wr)})),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),ql=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:rt(Z({transaction:Go,meta:nt(Ni),version:ct(wr)})),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),zl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:rt(Z({transaction:Ko,meta:nt(Ni),version:ct(wr)})),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),Kl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),rewards:ct(rt(er)),blockTime:nt(K()),blockHeight:nt(K())}))),Hl=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),transactions:rt(Z({transaction:Ti,meta:nt(hn)})),rewards:ct(rt(er)),blockTime:nt(K())}))),Ns=pt(nt(Z({blockhash:J(),previousBlockhash:J(),parentSlot:K(),signatures:rt(J()),blockTime:nt(K())}))),ni=pt(nt(Z({slot:K(),meta:nt(hn),blockTime:ct(nt(K())),transaction:Ti,version:ct(wr)}))),qr=pt(nt(Z({slot:K(),transaction:Go,meta:nt(Ni),blockTime:ct(nt(K())),version:ct(wr)}))),Vl=Ut(Z({blockhash:J(),lastValidBlockHeight:K()})),$l=Ut(Re()),Gl=Z({slot:K(),numTransactions:K(),numSlots:K(),samplePeriodSecs:K()}),jl=pt(rt(Gl)),Wl=Ut(nt(Z({feeCalculator:Z({lamportsPerSignature:K()})}))),Zl=pt(J()),Yl=pt(J()),Xl=Z({err:tr,logs:rt(J()),signature:J()}),Jl=Z({result:ln(Xl),subscription:K()}),Ql={"solana-client":"js/1.0.0-maintenance"};class Ed{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const _={};return async R=>{const{commitment:O,config:k}=vt(R),x=this._buildArgs([],O,void 0,k),M=Bs(x);return _[M]=_[M]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",x),L=tt(I,pt(K()));if("error"in L)throw new ot(L.error,"failed to get block height information");return L.result}finally{delete _[M]}})(),await _[M]}})();let r,s,i,a,u,p;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,u=e.disableRetryOnRateLimit,p=e.httpAgent),this._rpcEndpoint=Df(t),this._rpcWsEndpoint=r||Uf(t),this._rpcClient=Qf(t,s,i,a,u,p),this._rpcRequest=tl(this._rpcClient),this._rpcBatchRequest=el(this._rpcClient),this._rpcWebSocket=new Tf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",i),u=tt(a,Ut(K()));if("error"in u)throw new ot(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=tt(e,pt(nt(K())));if("error"in r)throw new ot(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=tt(t,pt(K()));if("error"in e)throw new ot(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=tt(t,cl);if("error"in e)throw new ot(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=tt(r,ul);if("error"in s)throw new ot(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=tt(s,Ut(hi));if("error"in i)throw new ot(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=tt(s,Ut(hi));if("error"in i)throw new ot(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=vt(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const u=this._buildArgs(a,s,"base64",i),p=await this._rpcRequest("getTokenAccountsByOwner",u),_=tt(p,ll);if("error"in _)throw new ot(_.error,`failed to get token accounts owned by account ${t.toBase58()}`);return _.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),u=tt(a,hl);if("error"in u)throw new ot(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=tt(s,dl);if("error"in i)throw new ot(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=tt(s,fl);if("error"in i)throw new ot(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",i),u=tt(a,Ut(nt(Sr)));if("error"in u)throw new ot(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",i),u=tt(a,Ut(nt(pi)));if("error"in u)throw new ot(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=vt(e),i=t.map(_=>_.toBase58()),a=this._buildArgs([i],r,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",a),p=tt(u,Ut(rt(nt(pi))));if("error"in p)throw new ot(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=vt(e),i=t.map(_=>_.toBase58()),a=this._buildArgs([i],r,"base64",s),u=await this._rpcRequest("getMultipleAccounts",a),p=tt(u,Ut(rt(nt(Sr))));if("error"in p)throw new ot(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=vt(e),a=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),u=await this._rpcRequest("getStakeActivation",a),p=tt(u,pt(yl));if("error"in p)throw new ot(p.error,`failed to get Stake Activation ${t.toBase58()}`);return p.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=vt(e),{encoding:i,...a}=s||{},u=this._buildArgs([t.toBase58()],r,i||"base64",{...a,...a.filters?{filters:Ms(a.filters)}:null}),p=await this._rpcRequest("getProgramAccounts",u),_=rt(pl),R=a.withContext===!0?tt(p,Ut(_)):tt(p,pt(_));if("error"in R)throw new ot(R.error,`failed to get accounts owned by program ${t.toBase58()}`);return R.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",i),u=tt(a,pt(rt(ml)));if("error"in u)throw new ot(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=oe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ee(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const a=new Promise((p,_)=>{try{r=this.onSignature(e,(O,k)=>{r=void 0;const x={context:k,value:O};p({__type:qe.PROCESSED,response:x})},t);const R=new Promise(O=>{r==null?O():s=this._onSubscriptionStateChange(r,k=>{k==="subscribed"&&O()})});(async()=>{if(await R,i)return;const O=await this.getSignatureStatus(e);if(i||O==null)return;const{context:k,value:x}=O;if(x!=null)if(x?.err)_(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,p({__type:qe.PROCESSED,response:{context:k,value:x}})}})()}catch(R){_(R)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const a=new Promise(O=>{const k=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await k();if(!i){for(;x<=r;)if(await sr(1e3),i||(x=await k(),i))return;O({__type:qe.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),_=this.getCancellationPromise(e);let R;try{const O=await Promise.race([_,p,a]);if(O.__type===qe.PROCESSED)R=O.response;else throw new Lo(s)}finally{i=!0,u()}return R}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:a}}){let u=!1;const p=new Promise(x=>{let M=i,I=null;const L=async()=>{try{const{context:P,value:G}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return I=P.slot,G?.nonce}catch{return M}};(async()=>{if(M=await L(),!u)for(;;){if(i!==M){x({__type:qe.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await sr(2e3),u||(M=await L(),u))return}})()}),{abortConfirmation:_,confirmationPromise:R}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),O=this.getCancellationPromise(e);let k;try{const x=await Promise.race([O,R,p]);if(x.__type===qe.PROCESSED)k=x.response;else{let M;for(;;){const I=await this.getSignatureStatus(a);if(I==null)break;if(I.context.slot<(x.slotInWhichNonceDidAdvance??r)){await sr(400);continue}M=I;break}if(M?.value){const I=t||"finalized",{confirmationStatus:L}=M.value;switch(I){case"processed":case"recent":if(L!=="processed"&&L!=="confirmed"&&L!=="finalized")throw new Er(a);break;case"confirmed":case"single":case"singleGossip":if(L!=="confirmed"&&L!=="finalized")throw new Er(a);break;case"finalized":case"max":case"root":if(L!=="finalized")throw new Er(a);break;default:}k={context:M.context,value:{err:M.value.err}}}else throw new Er(a)}}finally{u=!0,_()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(p=>{let _=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{_=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>p({__type:qe.TIMED_OUT,timeoutMs:_}),_)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const p=await Promise.race([a,s]);if(p.__type===qe.PROCESSED)u=p.response;else throw new Co(e,p.timeoutMs/1e3)}finally{clearTimeout(r),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=tt(t,pt(rt(kl)));if("error"in e)throw new ot(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=tt(r,Ml);if("error"in s)throw new ot(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),a=tt(i,pt(K()));if("error"in a)throw new ot(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),a=tt(i,pt(J()));if("error"in a)throw new ot(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=tt(s,pt(rt(kt)));if("error"in i)throw new ot(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);ee(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=tt(s,Nl);if("error"in i)throw new ot(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),a=tt(i,pt(K()));if("error"in a)throw new ot(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=tt(r,rl);if("error"in s)throw new ot(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=vt(r),a=this._buildArgs([t.map(_=>_.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),u=await this._rpcRequest("getInflationReward",a),p=tt(u,zf);if("error"in p)throw new ot(p.error,"failed to get inflation reward");return p.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=tt(t,nl);if("error"in e)throw new ot(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),a=tt(i,sl);if("error"in a)throw new ot(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=tt(t,ol);if("error"in e)throw new ot(e.error,"failed to get epoch schedule");const r=e.result;return new Mf(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=tt(t,al);if("error"in e)throw new ot(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=tt(s,Ll);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=tt(e,jl);if("error"in r)throw new ot(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=tt(s,Wl);if("error"in i)throw new ot(i.error,"failed to get fee calculator");const{context:a,value:u}=i.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const r=dr(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),a=tt(i,Ut(nt(K())));if("error"in a)throw new ot(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(a=>a.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=tt(s,il);if("error"in i)throw new ot(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),a=tt(i,Vl);if("error"in a)throw new ot(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgs([t],r,void 0,s),a=await this._rpcRequest("isBlockhashValid",i),u=tt(a,$l);if("error"in u)throw new ot(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=tt(t,pt(Zf));if("error"in e)throw new ot(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=tt(t,pt(J()));if("error"in e)throw new ot(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=tt(a,Pl);if("error"in u)throw u.error;return u.result}case"none":{const u=tt(a,Dl);if("error"in u)throw u.error;return u.result}default:{const u=tt(a,Fl);if("error"in u)throw u.error;const{result:p}=u;return p?{...p,transactions:p.transactions.map(({transaction:_,meta:R,version:O})=>({meta:R,transaction:{..._,message:ri(O,_.message)},version:O}))}:null}}}catch(u){throw new ot(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const u=tt(a,zl);if("error"in u)throw u.error;return u.result}case"none":{const u=tt(a,Kl);if("error"in u)throw u.error;return u.result}default:{const u=tt(a,ql);if("error"in u)throw u.error;return u.result}}}catch(u){throw new ot(u,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:u,...p}=t;r=u,e=p}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),a=tt(i,Jf);if("error"in a)throw new ot(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getTransaction",i),u=tt(a,ni);if("error"in u)throw new ot(u.error,"failed to get transaction");const p=u.result;return p&&{...p,transaction:{...p.transaction,message:ri(p.version,p.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=vt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",i),u=tt(a,qr);if("error"in u)throw new ot(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=vt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(p=>{const _=tt(p,qr);if("error"in _)throw new ot(_.error,"failed to get transactions");return _.result})}async getTransactions(t,e){const{commitment:r,config:s}=vt(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(p=>{const _=tt(p,ni);if("error"in _)throw new ot(_.error,"failed to get transactions");const R=_.result;return R&&{...R,transaction:{...R.transaction,message:ri(R.version,R.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=tt(s,Hl);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const u={...a,transactions:a.transactions.map(({transaction:p,meta:_})=>{const R=new $e(p.message);return{meta:_,transaction:{...p,message:R}}})};return{...u,transactions:u.transactions.map(({transaction:p,meta:_})=>({meta:_,transaction:ze.populate(p.message,p.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),a=tt(i,pt(rt(K())));if("error"in a)throw new ot(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,Ns);if("error"in i)throw new ot(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,Ns);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=tt(s,ni);if("error"in i)throw new ot(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const u=new $e(a.transaction.message),p=a.transaction.signatures;return{...a,transaction:ze.populate(u,p)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=tt(s,qr);if("error"in i)throw new ot(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const u=tt(a,qr);if("error"in u)throw new ot(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const p=await this.getConfirmedBlockSignatures(e,"finalized");p.signatures.length>0&&(s.until=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{const p=await this.getConfirmedBlockSignatures(r);p.signatures.length>0&&(s.before=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(p=>p.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=tt(i,wl);if("error"in a)throw new ot(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),a=tt(i,bl);if("error"in a)throw new ot(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new ks({key:t,state:ks.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Mi.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=tt(r,Zl);if("error"in s)throw new ot(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await sr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ff;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await sr(xf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=vt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),a=tt(i,Ut(K()));if("error"in a)throw new ot(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const I=t.serialize(),L=gt.Buffer.from(I).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const P=e||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(P.innerInstructions=e.innerInstructions);const G=[L,P],q=await this._rpcRequest("simulateTransaction",G),X=tt(q,Os);if("error"in X)throw new Error("failed to simulate transaction: "+X.error.message);return X.result}let s;if(t instanceof ze){let M=t;s=new ze,s.feePayer=M.feePayer,s.instructions=t.instructions,s.nonceInfo=M.nonceInfo,s.signatures=M.signatures}else s=ze.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let M=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(M);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const L=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(L)&&!this._blockhashInfo.transactionSignatures.includes(L)){this._blockhashInfo.simulatedSignatures.push(L);break}else M=!0}}const a=s._compile(),u=a.serialize(),_=s._serialize(u).toString("base64"),R={encoding:"base64",commitment:this.commitment};if(r){const M=(Array.isArray(r)?r:a.nonProgramIds()).map(I=>I.toBase58());R.accounts={encoding:"base64",addresses:M}}i&&(R.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(R.innerInstructions=e.innerInstructions);const O=[_,R],k=await this._rpcRequest("simulateTransaction",O),x=tt(k,Os);if("error"in x){let M;if("data"in x.error&&(M=x.error.data.logs,M&&Array.isArray(M))){const I=`
    `,L=I+M.join(I);console.error(x.error.message,L)}throw new As({action:"simulate",signature:"",transactionMessage:x.error.message,logs:M})}return x.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const p=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(p))a=!0;else{this._blockhashInfo.transactionSignatures.push(p);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=dr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const a=[t,r],u=await this._rpcRequest("sendTransaction",a),p=tt(u,Yl);if("error"in p){let _;throw"data"in p.error&&(_=p.error.data.logs),new As({action:s?"send":"simulate",signature:"",transactionMessage:p.error.message,logs:_})}return p.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(a,i);this._setSubscription(r,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:u}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=tt(t,_l);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=Bs([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[s];ee(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=vt(r),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=tt(t,vl);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:a}=vt(r),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(s?{filters:Ms(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=tt(t,Jl);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=tt(t,xl);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=tt(t,Rl);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let a={};r&&(a.encoding=r),i&&(a.commitment=i),s&&(a=Object.assign(a,s)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=tt(t,Bl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){e(a.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(p,_)=>{e(p,_);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=tt(t,Il);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Hr{constructor(t){this._keypair=void 0,this._keypair=t??Es()}static generate(){return new Hr(Es())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=li(s);for(let a=0;a<32;a++)if(r[a]!==i[a])throw new Error("provided secretKey is invalid")}return new Hr({publicKey:r,secretKey:t})}static fromSeed(t){const e=li(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Hr({publicKey:e,secretKey:r})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:T.struct([T.u32("instruction"),pr("recentSlot"),T.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:T.struct([T.u32("instruction")])},ExtendLookupTable:{index:2,layout:T.struct([T.u32("instruction"),pr(),T.seq(mt(),T.offset(T.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:T.struct([T.u32("instruction")])},CloseLookupTable:{index:4,layout:T.struct([T.u32("instruction")])}});new ut("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:T.struct([T.u8("instruction"),T.u32("units"),T.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:T.struct([T.u8("instruction"),T.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:T.struct([T.u8("instruction"),T.u32("units")])},SetComputeUnitPrice:{index:3,layout:T.struct([T.u8("instruction"),pr("microLamports")])}});new ut("ComputeBudget111111111111111111111111111111");T.struct([T.u8("numSignatures"),T.u8("padding"),T.u16("signatureOffset"),T.u16("signatureInstructionIndex"),T.u16("publicKeyOffset"),T.u16("publicKeyInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u16("messageInstructionIndex")]);new ut("Ed25519SigVerify111111111111111111111111111");ff.utils.isValidPrivateKey;T.struct([T.u8("numSignatures"),T.u16("signatureOffset"),T.u8("signatureInstructionIndex"),T.u16("ethAddressOffset"),T.u8("ethAddressInstructionIndex"),T.u16("messageDataOffset"),T.u16("messageDataSize"),T.u8("messageInstructionIndex"),T.blob(20,"ethAddress"),T.blob(64,"signature"),T.u8("recoveryId")]);new ut("KeccakSecp256k11111111111111111111111111111");var Wo;new ut("StakeConfig11111111111111111111111111111111");class Zo{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Wo=Zo;Zo.default=new Wo(0,0,ut.default);Object.freeze({Initialize:{index:0,layout:T.struct([T.u32("instruction"),mf(),yf()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),mt("newAuthorized"),T.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:T.struct([T.u32("instruction")])},Split:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Withdraw:{index:4,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},Deactivate:{index:5,layout:T.struct([T.u32("instruction")])},Merge:{index:7,layout:T.struct([T.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:T.struct([T.u32("instruction"),mt("newAuthorized"),T.u32("stakeAuthorizationType"),ar("authoritySeed"),mt("authorityOwner")])}});new ut("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:T.struct([T.u32("instruction"),wf()])},Authorize:{index:1,layout:T.struct([T.u32("instruction"),mt("newAuthorized"),T.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:T.struct([T.u32("instruction"),T.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:T.struct([T.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:T.struct([T.u32("instruction"),bf()])}});new ut("Vote111111111111111111111111111111111111111");new ut("Va1idator1nfo111111111111111111111111111111");Z({name:J(),website:ct(J()),details:ct(J()),iconUrl:ct(J()),keybaseUsername:ct(J())});new ut("Vote111111111111111111111111111111111111111");T.struct([mt("nodePubkey"),mt("authorizedWithdrawer"),T.u8("commission"),T.nu64(),T.seq(T.struct([T.nu64("slot"),T.u32("confirmationCount")]),T.offset(T.u32(),-8),"votes"),T.u8("rootSlotValid"),T.nu64("rootSlot"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),mt("authorizedVoter")]),T.offset(T.u32(),-8),"authorizedVoters"),T.struct([T.seq(T.struct([mt("authorizedPubkey"),T.nu64("epochOfLastAuthorizedSwitch"),T.nu64("targetEpoch")]),32,"buf"),T.nu64("idx"),T.u8("isEmpty")],"priorVoters"),T.nu64(),T.seq(T.struct([T.nu64("epoch"),T.nu64("credits"),T.nu64("prevCredits")]),T.offset(T.u32(),-8),"epochCredits"),T.struct([T.nu64("slot"),T.nu64("timestamp")],"lastTimestamp")]);export{Kh as $,xh as A,_h as B,Eh as C,vh as D,td as E,gh as F,ud as G,Us as H,sd as I,hh as J,dh as K,ph as L,od as M,nu as N,fh as O,uh as P,lh as Q,ci as R,de as S,ne as T,md as U,Fh as V,fd as W,bd as X,ed as Y,zh as Z,yd as _,ii as a,Dh as a0,qh as a1,rd as a2,Ah as a3,Bh as a4,Rh as a5,Sh as a6,$h as a7,Jc as a8,Vh as a9,gd as aA,hd as aB,ld as aC,Ch as aD,Uh as aE,Hr as aF,Ed as aG,ut as aH,Hh as aa,fo as ab,Xh as ac,Jh as ad,Gh as ae,jh as af,Qh as ag,Zh as ah,Yh as ai,Wh as aj,dd as ak,Oh as al,wd as am,nd as an,Mh as ao,kh as ap,pd as aq,id as ar,Nh as as,cd as at,Lh as au,Th as av,Ih as aw,fu as ax,lu as ay,ad as az,Vr as b,Fs as c,Xe as d,ta as e,fr as f,sh as g,oh as h,ah as i,fa as j,cs as k,wi as l,Bo as m,Ae as n,qs as o,Ve as p,Le as q,ih as r,nh as s,yi as t,rh as u,Ph as v,mh as w,yh as x,bh as y,wh as z};
